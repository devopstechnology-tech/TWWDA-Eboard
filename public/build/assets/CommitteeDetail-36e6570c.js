var dt=Object.defineProperty;var r=(R,f)=>dt(R,"name",{value:f,configurable:!0});import{d as ge,i as ke,j as qe,r as b,C as Z,P as $e,H as Xe,V as Ae,b as Je,u as a,o as t,c as o,e,F as z,R as Q,g as B,t as c,h as m,T as A,Y as rt,Z as ct,f as E,l as xe,w as De,W as Be,X as He,_ as Ee,U as N,$ as et,a0 as ut,k as tt,a1 as Ne,a2 as mt}from"./main-9b499219.js";import{d as _t}from"./useCommitteeRequest-f6f4ffc4.js";import{d as pt,e as ht,g as vt,f as Ye,h as je,j as bt,k as ft,m as Me,n as gt,o as yt,p as xt,q as $t,t as wt,v as We,F as Ze,w as kt,x as Ct,l as Mt}from"./Breadcrumb-74d93201.js";import{u as Ue,c as _e,a as _,d as st,b as Re,f as Ie,e as Se}from"./useUnexpectedErrorHandler-f37df04f.js";import{w as St,x as Pt,y as Tt,z as qt,A as Dt,v as Pe,e as Ft,f as It,F as Oe,g as At,B as Et,C as Ut,D as Rt,E as Lt,G as Vt,H as Ke,m as jt}from"./FormDynamicInput-4c66f355.js";import{F as Te}from"./FormInput-360d6aac.js";import{F as Ot}from"./FormUpload-c235b23e.js";import{u as we}from"./useQuery-7facd994.js";import{_ as Fe}from"./FormDateTimeInput.vue_vue_type_style_index_0_lang-fbef2fd1.js";import{F as ze}from"./FormQuillEditor-fc7ac95e.js";import{F as Bt}from"./FormRadioInput-98e80d8a.js";import{u as Ht}from"./useStaffRequest-4eed05d9.js";import{f as Nt,g as Kt,h as zt}from"./usePollRequest-adad518d.js";import{f as Gt,g as Qt,h as Yt}from"./useTaskRequest-a11374e2.js";import"./index-df77389a.js";import"./folder_routes-6d34764d.js";import"./useQueryClient-0be5c548.js";import"./staff_routes-8adeed43.js";const X=r(R=>(Be("data-v-01681b8d"),R=R(),He(),R),"_withScopeId$3"),Wt={key:0},Zt={class:"card"},Xt={class:"card-header p-3"},Jt={class:"row"},es={class:"col-12"},ts={class:"row"},ss={class:"col-lg-9 col-md-8 col-12 mt-2"},os={"aria-label":"Breadcrumbs",class:"text-sm overflow-hidden"},as={class:"breadcrumb mb-0 bg-warning"},ns=["onClick"],ls={class:"col-lg-3 col-md-4 col-12"},is={class:"row"},ds={class:"col-md-6 col-12 mt-2"},rs={class:"dropdown"},cs={class:"nav-link dropdown-toggle btn btn-secondary btn-block",href:"#",id:"navbarDropdown",type:"button",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},us=X(()=>e("span",{class:"text-warning mr-1"},"sort by:",-1)),ms={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},_s=["onClick"],ps={class:"col-md-6 col-12 mt-2"},hs={key:0,class:"dropdown"},vs={key:0,class:"nav-link dropdown-toggle btn btn-primary btn-block",href:"#",id:"navbarDropdown",type:"button",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},bs=X(()=>e("i",{class:"fas fa-plus mr-2"},null,-1)),fs={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},gs=X(()=>e("i",{class:"fas fa-plus"},null,-1)),ys=X(()=>e("i",{class:"fas fa-file-upload"},null,-1)),xs={key:0,class:"col-12 mt-3"},$s={class:"input-group input-group-lg"},ws=X(()=>e("div",{class:"input-group-append"},[e("button",{type:"submit",class:"btn btn-lg btn-default"},[e("i",{class:"fa fa-search"})])],-1)),ks={class:"card-body py-0 px-4 min-h-[300px] relative -top-px z-10"},Cs={class:"table-responsive"},Ms={class:"table mb-0"},Ss={class:"w-28"},Ps={key:0},Ts=["onClick"],qs=["src"],Ds={key:1},Fs=["src"],Is={key:0},As={class:"font-weight-bold text-primary text-truncate"},Es={class:"text-sm font-weight-bold text-primary"},Us=X(()=>e("span",{class:"text-black"},"Folders",-1)),Rs={class:"text-sm font-weight-bold text-primary"},Ls=X(()=>e("span",{class:"text-black"},"Files",-1)),Vs={key:1},js={key:0},Os={class:"font-weight-bold text-primary text-truncate"},Bs={class:"text-sm font-weight-bold text-primary"},Hs={class:"text-black"},Ns={class:"w-28"},Ks={key:0},zs={class:"text-xs text-primary text-truncate"},Gs={key:1},Qs={key:0},Ys={class:"text-xs text-primary text-truncate"},Ws={class:"w-20 text-center"},Zs={class:"flex justify-end space-x-2"},Xs={key:0},Js=["onClick"],eo=X(()=>e("i",{class:"far fa-edit"},null,-1)),to=[eo],so={key:1},oo=["onClick"],ao=X(()=>e("i",{class:"far fa-edit"},null,-1)),no=[ao],lo=X(()=>e("i",{class:"far fa-eye"},null,-1)),io={class:"flex justify-center col-md-6"},ro={method:"dialog",class:"modal-box rounded-xl"},co={class:"font-bold text-lg justify-center flex"},uo=X(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),mo={class:"w-full mt-6 p-2"},_o={class:"font-thin text-sm flex flex-col items-center gap-6"},po={class:"row"},ho={key:0,class:"row mt-2 ml-2"},vo={key:0,class:"row mt-2 ml-2"},bo={class:"col-md-6"},fo=["src"],go={class:"col-md-6"},yo=X(()=>e("strong",null,"File Name:",-1)),xo={class:"text-bold text-primary"},$o=X(()=>e("strong",null,"File Size:",-1)),wo={class:"text-bold text-primary"},ko=X(()=>e("strong",null,"Type:",-1)),Co={class:"text-bold text-primary"},Mo=X(()=>e("strong",null,"Last Modified: ",-1)),So={class:"text-bold text-primary"},Po={type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},To={key:1},qo=X(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),Do=[qo],Fo=ge({__name:"Documents",setup(R){const f=ke(),U=Ue(),k=qe(),q=b("create"),h=b("folder"),L=b("name-asc"),C=b(""),F=b([]),S=k.params.committeeId,$=b([{id:"1",name:"Folders"}]),V=b(null),ae=b(!1),H=b(null),v=b(null),P=[{id:"name-asc",name:"Name (A-Z)"},{id:"name-desc",name:"Name (Z-A)"},{id:"date-newest",name:"Newest to oldest"},{id:"date-oldest",name:"Oldest to newest"}];function de(n){L.value=n}r(de,"applySort");const ee=Z(()=>{const n=P.find(l=>l.id===L.value);return n?n.name:"Unknown"});function re(n){console.log("folder",n),$.value.push({id:n.id,name:n.name})}r(re,"addToNavigationPath");function he(n){const l=$.value.slice(0,n+1);if(l.length!==$.value.length){$.value=l;const d=D($.value.at(-1).id,ue.value);F.value=d?d.children||[]:[]}}r(he,"navigateTo");function D(n,l){if(!Array.isArray(l))return null;for(const d of l){if(d.id===n)return d;if(d.children&&Array.isArray(d.children)){const s=D(n,d.children);if(s)return s}}return null}r(D,"findFolderById");function ce(n){$.value.at(-1).id!==n.id&&(re(n),console.log("folder",n.children),F.value=n.children||[])}r(ce,"openFolder");function x(n){let l=0,d=0;return n.children&&n.children.length>0&&n.children.forEach(s=>{s.type==="folder"?l++:s.type==="file"&&d++}),{folderCount:l,fileCount:d}}r(x,"countChildrenTypes");const W=r(()=>we({queryKey:["getCommitteeFoldersKey",S],queryFn:async()=>(await Dt(S,{paginate:"false"})).data}),"getCommitteeFolders"),{isLoading:ve,data:ue,refetch:te}=W();$e(async()=>{await te()}),Xe(ue,n=>{var l;if(n&&n.length>0)if($.value.length===1&&(n[0],$.value[0].id="1",$.value[0].name="Documents"),$.value.length===1)F.value=n;else{const d=D((l=$.value.at(-1))==null?void 0:l.id,n);F.value=d?d.children||[]:[]}},{immediate:!0});const pe=Z(()=>C.value?se.value.filter(n=>n.name.toLowerCase().includes(C.value.toLowerCase())):se.value),se=Z(()=>{const n=$.value.length>1?F.value:ue.value;return Array.isArray(n)?[...n].sort((l,d)=>{switch(L.value){case"name-asc":return l.name.localeCompare(d.name);case"name-desc":return d.name.localeCompare(l.name);case"date-newest":return new Date(d.created_at).getTime()-new Date(l.created_at).getTime();case"date-oldest":return new Date(l.created_at).getTime()-new Date(d.created_at).getTime();default:return 0}}):[]}),be=_e({name:_().required(),meeting_id:_().required(),committee_id:_().required(),folder_id:_().nullable(),parent_id:_(),type:_().oneOf(["folder","file"]).required(),fileupload:st().nullable()}),{handleSubmit:ne,setErrors:me,setFieldValue:p,values:j}=Re({validationSchema:be,initialValues:{name:"",meeting_id:S,committee_id:S,folder_id:null,parent_id:"",type:"",fileupload:null}}),w=r(n=>{var s;const l=n.target;if(!((s=l.files)!=null&&s.length))return;const d=l.files[0];p("name",d.name),p("type","file")},"updateName"),O=r(n=>{var d;M(),q.value="create",h.value=n,ae.value=!0,(d=v.value)==null||d.showModal(),p("type",n);const l=$.value.at(-1);p("parent_id",l.id),console.log("parent",l)},"openCreateFolderModal"),le=ne(async(n,{resetForm:l})=>{var d;try{if(q.value==="create")if(h.value==="folder"){const s={children:[],created_at:null,icon:null,id:null,meeting_id:n.meeting_id,committee_id:n.committee_id,folder_id:null,name:n.name,parent_id:n.parent_id.toString(),type:n.type,fileupload:null,media:[]};await St(s,S)}else{const s={children:[],created_at:null,icon:null,id:null,meeting_id:n.meeting_id,committee_id:n.committee_id,folder_id:null,name:n.name,parent_id:n.parent_id.toString(),type:n.type,fileupload:n.fileupload,media:[]};await Pt(s,S)}else if(h.value==="folder"){const s={children:[],created_at:null,folder_id:null,icon:null,id:null,meeting_id:n.meeting_id,committee_id:n.committee_id,name:n.name,parent_id:n.parent_id.toString(),type:n.type,fileupload:null,media:[]},T=H.value?H.value.toString():null;s.folder_id=T,await Tt(s,S,s.folder_id)}else{const s={children:[],created_at:null,folder_id:null,icon:null,id:null,meeting_id:n.meeting_id,committee_id:n.committee_id,name:n.name,parent_id:n.parent_id.toString(),type:n.type,fileupload:n.fileupload,media:[]},T=H.value?H.value.toString():null;s.folder_id=T,await qt(s,S,s.folder_id)}await te(),M(),(d=v.value)==null||d.close()}catch(s){s instanceof Ae?me(s.messages):U(s)}}),u=r((n,l)=>{var d;M(),V.value=n,H.value=n.id.toString(),q.value="edit",h.value=l,ae.value=!0,p("name",n.name),p("folder_id",n.id),p("type",l),l==="file"&&(p("fileupload",n.name),yt(n.media[0])),p("parent_id",n.id),console.log("folder.media",n.name),(d=v.value)==null||d.showModal()},"openEditFolderModal"),M=r(()=>{p("name",""),p("folder_id",null),p("fileupload",""),p("parent_id",""),p("type",""),h.value="folder",q.value="create",ae.value=!1,V.value=null,H.value=null,pt()},"resetFolder");return(n,l)=>{const d=Je("router-link");return a(f).hasPermission(["view folders"])?(t(),o("div",Wt,[e("div",Zt,[e("div",Xt,[e("div",Jt,[e("div",es,[e("div",ts,[e("div",ss,[e("nav",os,[e("ol",as,[(t(!0),o(z,null,Q($.value,(s,T)=>(t(),o("li",{key:s.id,class:"breadcrumb-item"},[e("a",{href:"#",class:"text-gray-800 font-medium",onClick:A(g=>he(T),["prevent"])},c(s.name),9,ns)]))),128))])])]),e("div",ls,[e("div",is,[e("div",ds,[e("div",rs,[e("button",cs,[us,B(c(ee.value),1)]),e("div",ms,[(t(),o(z,null,Q(P,s=>e("a",{key:s.id,href:"#",class:"dropdown-item",onClick:A(T=>de(s.id),["prevent"])},c(s.name),9,_s)),64))])])]),e("div",ps,[$.value.length>1?(t(),o("div",hs,[a(f).hasPermission(["create folders","upload documents","create dropzone"])?(t(),o("button",vs,[bs,B(" New ")])):m("",!0),e("div",fs,[a(f).hasPermission(["create folders","create dropzone"])?(t(),o("a",{key:0,href:"#",onClick:l[0]||(l[0]=A(s=>O("folder"),["prevent"])),class:"dropdown-item"},[gs,B(" New folder ")])):m("",!0),a(f).hasPermission(["upload documents"])?(t(),o("a",{key:1,href:"#",onClick:l[1]||(l[1]=A(s=>O("file"),["prevent"])),class:"dropdown-item"},[ys,B(" Upload a file ")])):m("",!0)])])):m("",!0)])])])])]),a(f).hasPermission(["search documents"])?(t(),o("div",xs,[e("div",$s,[rt(e("input",{type:"search",class:"form-control form-control-lg",placeholder:"Type your keywords here","onUpdate:modelValue":l[2]||(l[2]=s=>C.value=s)},null,512),[[ct,C.value]]),ws])])):m("",!0)])]),e("div",ks,[e("div",Cs,[e("table",Ms,[e("tbody",null,[(t(!0),o(z,null,Q(pe.value,s=>{var T,g,J,K;return t(),o("tr",{key:s.id,class:"group bg-white hover:bg-gray-100 cursor-pointer"},[e("td",Ss,[s.type==="folder"?(t(),o("div",Ps,[e("div",{onClick:A(oe=>ce(s),["prevent"])},[e("img",{src:a(ht)(s.icon),class:"img-fluid",alt:"Folder Icon"},null,8,qs)],8,Ts)])):(t(),o("div",Ds,[a(f).hasPermission(["view documents"])?(t(),xe(d,{key:0,to:{name:"CommitteeMediaDetails",params:{committeeId:a(S),folderId:s.id,mediaId:(T=s==null?void 0:s.media[0])==null?void 0:T.uuid}},class:"d-block text-success hover:text-green-700 transition ease-in-out"},{default:De(()=>{var oe;return[e("img",{src:a(vt)((oe=s==null?void 0:s.media[0])==null?void 0:oe.mime_type),class:"img-fluid",alt:"File Icon"},null,8,Fs)]}),_:2},1032,["to"])):m("",!0)]))]),e("td",null,[s.type==="folder"?(t(),o("div",Is,[e("p",As,c(s.name),1),e("p",Es,[B(c(x(s).folderCount)+": ",1),Us]),e("p",Rs,[B(c(x(s).fileCount)+": ",1),Ls])])):(t(),o("div",Vs,[a(f).hasPermission(["view documents"])?(t(),o("div",js,[e("p",Os,c((g=s==null?void 0:s.media[0])==null?void 0:g.file_name),1),e("p",Bs,[B(" Size: "),e("span",Hs,c(a(Ye)((J=s==null?void 0:s.media[0])==null?void 0:J.size)),1)])])):m("",!0)]))]),e("td",Ns,[s.type==="folder"?(t(),o("div",Ks,[e("p",zs,c(a(je)(s.created_at,"")),1)])):(t(),o("div",Gs,[a(f).hasPermission(["view documents"])?(t(),o("div",Qs,[e("p",Ys,c(a(je)(s.created_at,"")),1)])):m("",!0)]))]),e("td",Ws,[e("div",Zs,[s.type==="folder"?(t(),o("div",Xs,[a(f).hasPermission(["edit folders"])?(t(),o("a",{key:0,href:"#",onClick:A(oe=>u(s,"folder"),["prevent"]),class:"text-warning hover:text-blue-700 transition ease-in-out"},to,8,Js)):m("",!0)])):(t(),o("div",so,[a(f).hasPermission(["edit documents"])?(t(),o("a",{key:0,href:"#",onClick:A(oe=>u(s,"file"),["prevent"]),class:"text-warning hover:text-blue-700 transition ease-in-out"},no,8,oo)):m("",!0),a(f).hasPermission(["view documents"])&&s.type==="file"?(t(),xe(d,{key:1,to:{name:"CommitteeMediaDetails",params:{committeeId:a(S),folderId:s.id,mediaId:(K=s==null?void 0:s.media[0])==null?void 0:K.uuid}},class:"text-success hover:text-green-700 transition ease-in-out"},{default:De(()=>[lo]),_:2},1032,["to"])):m("",!0)]))])])])}),128))])])])])]),e("div",io,[e("dialog",{id:"foldermodal",class:"modal",ref_key:"FolderModal",ref:v},[e("form",ro,[e("h3",co,c(q.value==="create"?h.value==="folder"?"Create Folder":"Upload File":h.value==="folder"?"Update Folder":"Update File"),1),uo,e("div",mo,[e("div",_o,[e("form",{novalidate:"",onSubmit:l[4]||(l[4]=A((...s)=>a(le)&&a(le)(...s),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",po,[E(Te,{labeled:!0,label:h.value==="folder"?"Folder name":"Upload File name",name:"name",class:"col-md-12 w-full text-sm text-white tracking-wide",placeholder:h.value==="folder"?"Folder name":"Upload File name",type:"text"},null,8,["label","placeholder"]),h.value==="file"?(t(),o("div",ho,[E(Ot,{labeled:!0,label:"Upload Cover Image for the Committee",name:"fileupload",class:"w-full text-sm text-white tracking-wide col-md-12",placeholder:"Enter Cover Image of the Committee",type:"file",accept:a(bt).join(", "),onChange:l[3]||(l[3]=s=>{a(ft)(s),w(s)})},null,8,["accept"]),a(j).fileupload?(t(),o("div",vo,[e("div",bo,[a(Me).previewUrl?(t(),o("img",{key:0,src:a(Me).previewUrl,alt:"File Preview",class:"file_attachment"},null,8,fo)):m("",!0)]),e("div",go,[e("p",null,[yo,e("span",xo,c(a(Me).name),1)]),e("p",null,[$o,e("span",wo,c(a(Ye)(a(Me).size)),1)]),e("p",null,[ko,e("span",Co,c(a(Me).type),1)]),e("p",null,[Mo,e("span",So,c(a(gt)(a(Me).lastModifiedDate)),1)])])])):m("",!0)])):m("",!0)]),e("button",Po,c(q.value==="create"?h.value==="folder"?"Create Folder":"Upload File":h.value==="folder"?"Update Folder":"Update File"),1)],32)])])])],512)])])):(t(),o("div",To,Do))}}});const Io=Ee(Fo,[["__scopeId","data-v-01681b8d"]]),Ce=r(R=>(Be("data-v-3eb4e669"),R=R(),He(),R),"_withScopeId$2"),Ao={class:"row"},Eo={class:"col-md-12"},Uo={class:"card card-widget"},Ro={class:"card-header"},Lo=Ce(()=>e("h1",{class:"h2 mb-2 lg:mb-0"},"Meetings",-1)),Vo={class:"card-tools"},jo=Ce(()=>e("i",{class:"far fa fa-plus mr-2"},null,-1)),Oo=[jo],Bo={key:0,class:"card-body"},Ho={key:0,class:"products-list product-list-in-card pl-2 pr-2"},No={class:"product-img meeting-custom-size mr-2"},Ko={key:0,class:"calendar-icon w-full flex flex-col items-center justify-center mt-1 calendaheight"},zo={class:"month customonth"},Go={class:"day font-medium customday"},Qo={class:"year font-medium customyear"},Yo=Ce(()=>e("div",null,[e("span",{class:"text-danger font-bold ml-2 mr-2"}," Upcoming ")],-1)),Wo={class:"product-info"},Zo={class:"text-primary text-bold"},Xo={key:0,class:"badge float-right bg-white"},Jo=["onClick"],ea={class:"badge float-right bg-white"},ta=Ce(()=>e("i",{class:"far fa-eye"},null,-1)),sa={class:"badge float-right bg-white"},oa=["onClick"],aa=Ce(()=>e("i",{class:"far fa-edit"},null,-1)),na=[aa],la={key:1,class:"product-description"},ia=["innerHTML"],da={key:2,class:"row border-top border-bottom border-warning d-flex justify-content-between align-items-center bg-warning"},ra={class:"text-primary bg-primary font-bold ml-2 mr-2"},ca={class:"text-primary font-bold ml-2 mr-2"},ua={key:0},ma=["onClick"],_a={key:3,class:"text-bold text-red"},pa={key:4,class:"text-bold text-red"},ha={class:"text-primary font-bold ml-2 mr-2"},va={class:"text-primary font-bold ml-2 mr-2"},ba=["onClick"],fa=Ce(()=>e("i",{class:"far fa-eye"},null,-1)),ga={key:1},ya={class:"flex justify-center col-md-6"},xa={method:"dialog",class:"modal-box rounded-xl"},$a={class:"font-bold text-lg justify-center flex"},wa=Ce(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),ka={class:"grid grid-cols-3 md:grid-cols-3 gap-2 p-2"},Ca={class:"col-span-3"},Ma={key:0,class:"flex flex-wrap -mx-2 mt-2"},Sa={class:"w-full md:w-1/2 px-1 md:px-2"},Pa={class:"w-full md:w-1/2 px-1 md:px-2"},Ta={key:1,class:"flex flex-wrap -mx-2 mt-2"},qa={class:"w-full md:w-1/2 px-1 md:px-2"},Da={key:2,class:"flex flex-wrap -mx-2 mt-2"},Fa={key:3,class:"flex flex-wrap -mx-2 mt-2"},Ia={class:"w-full md:w-1/3 px-1 md:px-2"},Aa={class:"w-full md:w-1/3 px-1 md:px-2"},Ea={class:"w-full md:w-1/3 px-1 md:px-2"},Ua=["onClick"],Ra={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},La=ge({__name:"HomeDashboard",setup(R){const f=ke(),U=b(!1),k=b("create"),q=b(null),h=b(null),L=Ue(),F=qe().params.committeeId,S=b(""),$=_e({id:_().required(),date:_().required(),start_time:_().required(),end_time:_().required(),status:_().nullable(),heldstatus:_().nullable(),meeting_id:_().nullable()}),V=_e({title:_().required(),conference:_().required(),location:_().required(),link:_().nullable(),description:_().required(),status:_().required(),committee_id:_().required(),type:_().required(),schedules:Ie().of($).required()}),{handleSubmit:ae,setErrors:H,setFieldValue:v,values:P}=Re({validationSchema:V,initialValues:{title:"",conference:"",location:"",description:"",link:null,committee_id:F,status:"unpublished",type:"single",schedules:[{id:Pe(),date:"",start_time:"",end_time:"",status:null,heldstatus:null,meeting_id:null}]}}),de=r(()=>{var u;te(),k.value="create",U.value=!0,(u=h.value)==null||u.showModal()},"openCreateMeetingModal"),ee=r(u=>{var n;te(),q.value=u,v("title",u.title),v("conference",u.conference),v("location",u.location),v("description",u.description),v("type",u.type),v("status",u.status),v("schedules",u.schedules);const M={id:u.nearestSchedule.id,date:u.nearestSchedule.date,start_time:u.nearestSchedule.start_time,end_time:u.nearestSchedule.end_time,status:u.nearestSchedule.status,heldstatus:u.nearestSchedule.heldstatus,meeting_id:u.nearestSchedule.meeting_id};v("schedules",[...P.schedules,M]),u.conference==="Custom 3rd party Links"&&(ce(u.conference),v("link",u.link)),console.log("values",P),k.value="edit",U.value=!0,(n=h.value)==null||n.showModal()},"openEditMeetingModal"),re=r((u,M)=>{var l;te(),q.value=u,v("title",u.title),v("conference",u.conference),v("location",u.location),v("description",u.description),v("type",u.type),v("status",u.status),u.conference==="Custom 3rd party Links"&&(ce(u.conference),v("link",u.link));const n={id:M.id,date:M.date,start_time:M.start_time,end_time:M.end_time,status:M.status,heldstatus:M.heldstatus,meeting_id:M.meeting_id};v("schedules",[n]),console.log("values",P),k.value="schedule",U.value=!0,(l=h.value)==null||l.showModal()},"openEditScheduleMeetingModal"),he=[{name:"In Person",value:"No Vedio (Meeting in Person)"},{name:"3rd party",value:"Custom 3rd party Links"}],D=[{name:"Single",value:"single"},{name:"Find Date",value:"manual"}],ce=r(u=>{S.value=u},"handleConferenceTypeChange");$e(async()=>{}),Z(()=>ve);const x=Z(()=>he),W=Z(()=>D),ve=r(u=>we({queryKey:["getCommitteeMeetingsKey"],queryFn:async()=>(await Et(u,{paginate:"false"})).data}),"getMeetings"),ue=ae(async u=>{var M,n,l;console.log("values",u),console.log("setErrors",H);try{k.value==="create"?await Ft(u):(M=q.value)!=null&&M.id&&await It(u,(n=q.value)==null?void 0:n.id),await me(),te(),U.value=!1,(l=h.value)==null||l.close()}catch(d){d instanceof Ae?H(d.messages):L(d)}});function te(){v("title",""),v("conference",""),v("location",""),v("description",""),v("link",null),v("type","single"),v("status","unpublished"),v("schedules",[{id:Pe(),date:"",start_time:"",end_time:"",status:null,heldstatus:null,meeting_id:null}])}r(te,"reseting");const pe=r(()=>{Array.isArray(P.schedules)||(console.error("Invalid state: values.schedules is not an array."),v("schedules",[]));const u={id:Pe(),date:"",start_time:"",end_time:"",status:null,heldstatus:null,meeting_id:null};v("schedules",[...P.schedules,u])},"addEmptySchedule"),se=r(u=>{if(P.schedules.length===1){ut({title:"Error",text:"You need at least one date to schedule.",type:"error"});return}const M=P.schedules.filter((n,l)=>l!==u);v("schedules",M)},"removeSchedule"),{isLoading:be,data:ne,refetch:me}=ve(F),p=b("published"),j=Z(()=>{if(!ne.value)return[];const u=new Date;return ne.value.filter(n=>p.value==="past"?new Date(n.created_at)<u:n.status.toLowerCase()===p.value).map(n=>{if(n.schedules&&n.schedules.length>0){const l=[...n.schedules].sort((g,J)=>{const K=new Date(g.date.split("-").reverse().join("-")),oe=new Date(J.date.split("-").reverse().join("-"));return K.getTime()-oe.getTime()});let d=l[0],s=1/0;return l.forEach(g=>{const K=new Date(g.date.split("-").reverse().join("-")).getTime()-u.getTime();Math.abs(K)<Math.abs(s)&&(s=K,d=g)}),{...n,nearestSchedule:d,schedules:l.filter(g=>g.id!==d.id)}}else return n})}),w=r(u=>{p.value=u},"filterMeetings"),O=r(u=>{switch(u){case"scheduled":return"text-primary";case"held":return"text-success";case"cancelled":return"text-danger";case"postponed":return"text-warning";default:return""}},"getHeldStatusClass"),le=r(async u=>{await At(u),await me()},"onPublish");return(u,M)=>{const n=Je("router-link");return t(),o(z,null,[e("div",Ao,[e("div",Eo,[e("div",Uo,[e("div",Ro,[Lo,e("div",Vo,[e("button",{type:"button",class:N(["btn btn-tool",{"btn-info":p.value==="published"}]),onClick:M[0]||(M[0]=l=>w("published"))}," Published ",2),e("button",{type:"button",class:N(["btn btn-tool",{"btn-info":p.value==="unpublished"}]),onClick:M[1]||(M[1]=l=>w("unpublished"))}," UnPublished ",2),e("button",{type:"button",class:N(["btn btn-tool",{"btn-info":p.value==="past"}]),onClick:M[2]||(M[2]=l=>w("past"))}," Past ",2),a(f).hasPermission(["create meeting"])?(t(),o("button",{key:0,type:"button",onClick:A(de,["prevent"]),class:"btn btn-tool"},Oo)):m("",!0)])]),a(f).hasPermission(["view meeting"])?(t(),o("div",Bo,[j.value.length>0?(t(),o("ul",Ho,[(t(!0),o(z,null,Q(j.value,l=>(t(),o("li",{class:"item",key:l.id},[e("div",No,[l!=null&&l.nearestSchedule?(t(),o("div",Ko,[e("div",zo,c(a(xt)(l.nearestSchedule.date)),1),e("div",Go,[e("span",null,c(a($t)(l.nearestSchedule.date)),1)]),e("div",Qo,[e("span",null,c(a(wt)(l.nearestSchedule.date)),1)])])):m("",!0),Yo]),e("div",Wo,[a(f).hasPermission(["view meeting"])?(t(),xe(n,{key:0,to:{name:"CommitteeMeetingDetails",params:{committeeId:a(F),meetingId:l.id,scheduleId:l.nearestSchedule.id}},class:"product-title"},{default:De(()=>[B(" Meeting: "),e("span",Zo,c(l.title),1),p.value==="unpublished"?(t(),o("span",Xo,[a(f).hasPermission(["publish meeting"])?(t(),o("a",{key:0,href:"",onClick:A(d=>le(l.id),["prevent"]),class:"text-blue-500 hover:text-blue-700 transition duration-150 ease-in-out"}," Publish ",8,Jo)):m("",!0)])):m("",!0),e("span",ea,[a(f).hasPermission(["view meeting"])?(t(),xe(n,{key:0,to:{name:"CommitteeMeetingDetails",params:{committeeId:a(F),meetingId:l.id,scheduleId:l.nearestSchedule.id}},class:"text-green-500 hover:text-green-700 transition duration-150 ease-in-out"},{default:De(()=>[ta]),_:2},1032,["to"])):m("",!0)]),e("span",sa,[a(f).hasPermission(["edit meeting"])?(t(),o("a",{key:0,href:"",onClick:A(d=>ee(l),["prevent"]),class:"text-blue-500 hover:text-blue-700 transition duration-150 ease-in-out"},na,8,oa)):m("",!0)])]),_:2},1032,["to"])):m("",!0),a(f).hasPermission(["edit meeting"])?(t(),o("span",la,[B(" Description: "),e("span",{class:"text-primary text-bold",innerHTML:l.description},null,8,ia)])):m("",!0),l!=null&&l.nearestSchedule?(t(),o("div",da,[e("div",null,[e("span",ra," Upcoming "+c(a(We)(l.nearestSchedule.date)),1),B(" || When: "),e("span",ca,c(a(Ze)(l.nearestSchedule.date)),1),B(" || Held Status: "),e("span",{class:N([O(l.nearestSchedule.heldstatus),"font-bold ml-2 mr-2"])},c(l.nearestSchedule.heldstatus),3)]),l!=null&&l.nearestSchedule?(t(),o("span",ua,[l.nearestSchedule.heldstatus==="scheduled"?(t(),o("button",{key:0,class:"btn btn-sm btn-warning font-bold ml-2 mr-2 mt-1 mb-1",onClick:A(d=>re(l,l.nearestSchedule),["prevent"])}," Postpone ",8,ma)):m("",!0)])):m("",!0)])):m("",!0),l.schedules.length?(t(),o("div",_a,"Other Schedules")):(t(),o("div",pa,"no Other Recuring Schdedules")),(t(!0),o(z,null,Q(l.schedules,d=>(t(),o("div",{class:N(["row","border-top","border-bottom","border-warning","d-flex","justify-content-between","align-items-center",a(kt)(d.date)?"bg-gray":""]),key:d.id},[e("div",null,[B(" Day: "),e("span",ha,c(a(We)(d.date)),1),B(" || When: "),e("span",va,c(a(Ze)(d.date)),1),B(" || Held Status: "),e("span",{class:N([O(d.heldstatus),"font-bold ml-2 mr-2"])},c(d.heldstatus),3)]),e("span",null,[d.heldstatus==="scheduled"&&a(f).hasPermission(["edit meeting"])?(t(),o("button",{key:0,class:"btn btn-sm btn-warning font-bold ml-2 mr-2 mt-1 mb-1",onClick:A(s=>re(l,d),["prevent"])}," Postpone ",8,ba)):m("",!0),a(f).hasPermission(["view meeting"])?(t(),xe(n,{key:1,to:{name:"CommitteeMeetingDetails",params:{committeeId:a(F),meetingId:l.id,scheduleId:d.id}},class:"mr-2 hover:text-info transition duration-150 ease-in-out"},{default:De(()=>[fa]),_:2},1032,["to"])):m("",!0)])],2))),128))])]))),128))])):(t(),o("div",ga," No meetings found for "+c(p.value),1))])):m("",!0)])])]),e("div",ya,[e("dialog",{id:"meetingmodal",class:"modal",ref_key:"MeetingModal",ref:h},[e("form",xa,[e("h3",$a,c(k.value=="create"?"Create Meeting":"Edit Meeting"),1),wa,e("div",{class:"overflow-auto p-4",style:et([{"max-height":"80vh"},k.value=="schedule"?"height:500px;":""])},[e("div",ka,[e("div",Ca,[e("form",{novalidate:"",onSubmit:M[3]||(M[3]=A((...l)=>a(ue)&&a(ue)(...l),["prevent"])),class:""},[k.value=="create"||k.value=="edit"?(t(),o("div",Ma,[e("div",Sa,[E(Te,{labeled:!0,label:"Meeting Title",name:"title",placeholder:"Enter Meeting Title",type:"text"})]),e("div",Pa,[E(Oe,{labeled:!0,name:"conference",label:"Select Meeting Type",placeholder:"Select Meeting Type",options:x.value,onSelectedItem:ce},null,8,["options"])])])):m("",!0),k.value=="create"||k.value=="edit"?(t(),o("div",Ta,[e("div",qa,[S.value==="Custom 3rd party Links"?(t(),xe(Te,{key:0,labeled:!0,label:"Meeting Link",name:"link",placeholder:"Enter Third Party Link",type:"text"})):m("",!0)]),e("div",{class:N(["w-full px-1 md:px-2",S.value==="Custom 3rd party Links"?"md:w-1/2":""])},[E(Te,{labeled:!0,label:"Meeting Location",name:"location",placeholder:"e.g 'Conference Room 6'",type:"text"})],2)])):m("",!0),k.value=="create"||k.value=="edit"?(t(),o("div",Da,[k.value=="create"||k.value=="edit"?(t(),xe(ze,{key:0,label:"Meeting Description",name:"description",theme:"snow",placeholder:"Enter Meeting Description",toolbar:"full",contentType:"html",class:"col-span-3"})):m("",!0)])):m("",!0),k.value=="create"||k.value=="edit"?(t(),o("div",Fa,[E(Bt,{name:"type",label:"Meeting Schedule Type",placeholder:"Select Meeting Schedule Type",inline:!0,options:W.value,checked:a(P).type},null,8,["options","checked"])])):m("",!0),a(P).schedules?(t(!0),o(z,{key:4},Q(a(P).schedules,(l,d)=>(t(),o("div",{class:"flex flex-wrap -mx-2 mt-2 relative",key:d},[e("div",Ia,[E(Fe,{label:"Meeting Date "+(d+1),name:"schedules["+d+"].date",mode:"date-picker",modeltype:"dd-MM-yyyy",enabletimepicker:!1,placeholder:"Meeting Date"},null,8,["label","name"])]),e("div",Aa,[E(Fe,{label:"Meeting Start Time "+(d+1),name:"schedules["+d+"].start_time",mode:"time-picker",modeltype:"h:mm bbbb",is24:!1,enabletimepicker:!0,placeholder:"Select Start Time"},null,8,["label","name"])]),e("div",Ea,[E(Fe,{label:"Meeting End Time "+(d+1),name:"schedules["+d+"].end_time",mode:"time-picker",modeltype:"h:mm bbbb",is24:!1,enabletimepicker:!0,placeholder:"Select End Time"},null,8,["label","name"])]),k.value!=="schedule"?(t(),o("button",{key:0,type:"button",class:"absolute top-0 right-0 mt-2 mr-2 text-red-600 font-bold",onClick:A(s=>se(d),["prevent"])}," ✕ ",8,Ua)):m("",!0)]))),128)):m("",!0),a(P).type==="manual"&&k.value!=="schedule"?(t(),o("button",{key:5,type:"button",class:"btn btn-primary mt-4",onClick:pe}," Add Another Data ")):m("",!0),e("button",Ra,c(k.value==="create"?"Create Meeting":"Edit Meeting"),1)],32)])])],4)])],512)])],64)}}});const Va=Ee(La,[["__scopeId","data-v-3eb4e669"]]),ja={class:"role-container w-100 d-flex justify-content-center"},Oa=["aria-expanded"],Ba={key:0,class:"dropdown-menu show justify-content","aria-labelledby":"role-status"},Ha=["onClick"],Na={key:1,class:"text-center"},Ka=ge({__name:"MemberPosition",props:{member:{},positions:{},disableRemotePosition:{}},emits:["position-updated"],setup(R,{emit:f}){const U=R,k=f,q=b(null),h=b(!1),L=r(V=>{V.stopPropagation(),h.value=!h.value},"toggleDropdown"),C=r(V=>{k("position-updated",{memberId:U.member.id,positionId:V.id}),h.value=!1},"updateRole"),F=Z(()=>{var V;return`bg-${(V=U.member)==null?void 0:V.position.name.toLowerCase()} text-white`}),S=Z(()=>{var V;return(V=U.member)==null?void 0:V.position.name}),$=Z(()=>U.positions);return(V,ae)=>{var H,v,P,de;return t(),o("div",ja,[S.value?(t(),o("div",{key:0,class:"dropdown",ref_key:"dropdownRef",ref:q},[e("button",{class:N(["btn btn-primary dropdown-toggle text-truncate w-100",F.value]),type:"button",onClick:L,"aria-haspopup":"true","aria-expanded":h.value},[e("i",{class:N(["mr-2 fa "+((H=U.member)==null?void 0:H.position.icon),"mr-2"])},null,2),B(" "+c((v=U.member)==null?void 0:v.position.name),1)],10,Oa),h.value?(t(),o("ul",Ba,[(t(!0),o(z,null,Q($.value,ee=>(t(),o("li",{key:ee.name},[e("a",{href:"#",class:"dropdown-item",onClick:A(re=>C(ee),["prevent"])},[e("i",{class:N(["mr-2 fa "+ee.icon,"mr-2"])},null,2),B(" "+c(ee.name),1)],8,Ha)]))),128))])):m("",!0)],512)):(t(),o("div",Na,[e("i",{class:N(["mr-2 fa "+((P=U.member)==null?void 0:P.position.icon),"mr-2"])},null,2),B(" "+c((de=U.member)==null?void 0:de.position.name),1)]))])}}});const za=Ee(Ka,[["__scopeId","data-v-82d07b33"]]),ye=r(R=>(Be("data-v-d7480984"),R=R(),He(),R),"_withScopeId$1"),Ga={class:"card"},Qa={class:"card-header flex items-center"},Ya=ye(()=>e("h2",{class:"card-header-title h3"},"Committee Members",-1)),Wa={class:"ml-auto flex items-center space-x-2"},Za={class:"container-fluid"},Xa={class:"row"},Ja={class:"card card-outline card-primary h-100"},en={class:"card-body box-profile"},tn={class:"text-center"},sn={class:"profile-username text-center text-primary"},on=["onClick"],an=["onClick"],nn=ye(()=>e("i",{class:"far fa-eye"},null,-1)),ln=[nn],dn={class:"text-muted text-center text-bold"},rn={key:0,class:"mt-3"},cn=ye(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Position ",-1)),un={class:"text-center"},mn={key:1,class:"mt-3"},_n=ye(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Position ",-1)),pn={class:"text-center"},hn={class:"mt-3"},vn=ye(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Last Updated ",-1)),bn={class:"text-center text-primary text-small"},fn={class:"flex justify-center col-md-6"},gn={method:"dialog",class:"modal-box rounded-xl"},yn=ye(()=>e("h3",{class:"font-bold text-lg justify-center flex"},c("Add Members"),-1)),xn=ye(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),$n={class:"w-full mt-6 p-2"},wn={class:"font-thin text-sm flex flex-col items-center gap-6"},kn={key:0,class:"message"},Cn=ye(()=>e("button",{type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},c("Add Members"),-1)),Mn=ge({__name:"Members",setup(R){const f=ke(),U=qe(),k=tt(),q=Ue(),h=b("create"),L=U.params.committeeId,C=b(!1),F=b(null),S=b([]),$=b([]),{errorMessage:V}=Se("assignees"),ae=_e({id:_().nullable(),position_id:_().nullable(),committee_id:st().required(),members:Ie().of(_()).nullable()}),{handleSubmit:H,setErrors:v,setFieldValue:P,values:de}=Re({validationSchema:ae,initialValues:{id:"",position_id:"",committee_id:L,members:[]}}),ee=r(()=>{P("members",S.value)},"selectedUsers"),re=r(()=>{P("members",S.value)},"removeselectedUsers"),he=r(p=>{var w;const j=p.members.map(O=>O.user.id.toString());S.value=j,P("members",S.value),h.value="edit",C.value=!0,(w=F.value)==null||w.showModal()},"openEditMembersModal"),D=H(async(p,{resetForm:j})=>{var w;try{P("members",S.value);const O={committee_id:p.committee_id,members:p.members};if(h.value==="create")await Ut(O,L);else if(h.value==="edit")await Rt(O,L);else if(h.value==="position"){const le={id:p.id,position_id:p.position_id};await Lt(le,L)}await pe(),ce(),(w=F.value)==null||w.close()}catch(O){O instanceof Ae?v(O.messages):q(O)}}),ce=r(()=>{h.value="create",C.value=!1,S.value=[],P("members",[]),P("position_id","")},"reset"),x=Z(()=>{var j;const p=[];return $.value&&((j=$.value)==null?void 0:j.length)>0&&$.value.reduce((w,O)=>(w.push({id:O.id,name:`${O.full_name}`}),w),p),p}),W=r(async()=>{const p=await Ht({paginate:"false"});$.value=p.data},"getUsers");$e(async()=>{window.dispatchEvent(new CustomEvent("updateTitle",{detail:"Members"})),W()});const ve=r(()=>we({queryKey:["getCommitteeMembersKey",L],queryFn:async()=>(await Ke(L,{paginate:"false"})).data}),"getCommitteeMembers"),{isLoading:ue,data:te,refetch:pe}=ve(),se=b([]),be=r(async()=>{const p=await Vt({paginate:"false"});se.value=p.data},"getPositions");$e(async()=>{await be()});const ne=r(p=>{ce(),h.value="position",P("id",p.memberId),P("position_id",p.positionId),D()},"handlePositionUpdated"),me=r(p=>{k.push({name:"ProfileDetails",params:{userId:p.id,profileId:p.profile.id}})},"openUserProfile");return(p,j)=>(t(),o(z,null,[e("div",Ga,[e("div",Qa,[Ya,e("div",Wa,[e("button",{class:"btn btn-secondary btn-sm",onClick:j[0]||(j[0]=A(w=>he({members:a(te)}),["prevent"]))}," Update Members ")])]),e("div",Za,[e("div",Xa,[(t(!0),o(z,null,Q(a(te),(w,O)=>(t(),o("div",{class:"col-lg-3 col-md-4 col-sm-6 mb-3",key:O},[e("div",Ja,[e("div",en,[e("div",tn,[e("h3",sn,[e("a",{href:"",onClick:A(le=>{var u,M;return((M=(u=a(f))==null?void 0:u.user)==null?void 0:M.id)===w.user.id?me(w.user):""},["prevent"])},c(w.user.full_name),9,on),a(f).hasPermission(["view committee member profile"])?(t(),o("button",{key:0,type:"button",onClick:A(le=>me(w.user),["prevent"]),title:"",class:"mx-2 btn btn-sm btn-primary"},ln,8,an)):m("",!0)]),e("p",dn,c(w.position.name),1)]),a(f).hasPermission(["assign committee position"])?(t(),o("div",rn,[cn,e("div",un,[E(za,{member:w,positions:se.value,disableRemotePosition:0,onPositionUpdated:ne},null,8,["member","positions"])])])):(t(),o("div",mn,[_n,e("div",pn,[e("i",{class:N(["mr-2 fa "+w.position.icon,"mr-2"])},null,2),B(" "+c(w.position.name),1)])])),e("div",hn,[vn,e("p",bn,c(a(je)(w.updated_at,null)),1)])])])]))),128))])])]),B("> "),e("div",fn,[e("dialog",{id:"membersmodal",class:"modal",ref_key:"membersmodal",ref:F},[e("form",gn,[yn,xn,e("div",$n,[e("div",wn,[e("form",{novalidate:"",onSubmit:j[4]||(j[4]=A((...w)=>a(D)&&a(D)(...w),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",{class:N(["multiselect-container",{error:!!a(V)}])},[E(a(Ne),{id:"members",modelValue:S.value,"onUpdate:modelValue":j[1]||(j[1]=w=>S.value=w),mode:"tags",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:x.value,valueProp:"id",trackBy:"id",label:"name",class:N(["multiselect-container",{error:!!a(V)}]),onSelect:j[2]||(j[2]=w=>ee()),onDeselect:j[3]||(j[3]=w=>re())},null,8,["modelValue","options","class"]),a(V)?(t(),o("div",kn,c(a(V)),1)):m("",!0)],2),Cn],32)])])])],512)])],64))}});const Sn=Ee(Mn,[["__scopeId","data-v-d7480984"]]),Pn={key:0},Tn={class:"card h-full"},qn={class:"card-header flex items-center"},Dn=e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"}," Committee Polls ")],-1),Fn={key:0,class:"flex items-center space-x-2"},In=e("i",{class:"far fa fa-plus mr-2"},null,-1),An=e("span",{class:"sr-only"},"Add poll",-1),En={class:"card-container"},Un={key:0},Rn={key:1},Ln={class:"row overflow-auto p-4",style:{"max-height":"100vh"}},Vn={class:"card card-outline card-primary h-100"},jn={class:"card-header"},On={class:"card-tools"},Bn=["onClick"],Hn=e("i",{class:"fas fa-edit"},null,-1),Nn=[Hn],Kn={class:"card-body"},zn={class:"text-primary tex-bold uppercase"},Gn=e("strong",{class:"text-primary"},"Question:",-1),Qn={class:"mt-2 text-primary text-bold"},Yn={class:""},Wn=e("strong",null,"Answer Options:",-1),Zn={class:"row"},Xn={class:"col-6"},Jn={class:"list-unstyled text-success"},el={class:"col-6"},tl={class:"list-unstyled text-success"},sl={class:"d-flex justify-content-between"},ol=e("strong",null,"Due Date:",-1),al=e("strong",null,"Status:",-1),nl=e("strong",null,"Vote:",-1),ll=["innerHTML"],il={class:""},dl=e("strong",null,"Assignees:",-1),rl={class:"row"},cl={class:"col-6"},ul={class:"list-unstyled"},ml={class:"col-6"},_l={class:"list-unstyled"},pl=e("strong",null,"Description:",-1),hl=["innerHTML"],vl={class:"flex justify-center items-center min-h-screen"},bl={method:"dialog",class:"modal-box rounded-xl relative bg-white shadow-xl"},fl={class:"font-bold text-lg text-center"},gl=e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1),yl={class:"overflow-auto p-4",style:{"max-height":"80vh"}},xl={class:"grid grid-cols-2 md:grid-cols-2 gap-4 p-2"},$l={class:"col-span-2"},wl={class:"flex flex-wrap -mx-2 mt-2"},kl={class:"w-full md:w-1/2 px-1 md:px-2"},Cl={class:"w-full md:w-1/2 px-1 md:px-2"},Ml={class:"flex flex-wrap -mx-2 mt-2"},Sl={class:"w-full md:w-1/3 px-1 md:px-2 text-center"},Pl=e("h2",{class:"font-bold text-sm text-center"},"Click to Add Options",-1),Tl=e("h4",{class:"text-info font-semibold"},"Your Options",-1),ql={key:0},Dl={key:0,class:"w-full md:w-2/3 px-1 md:px-2 flex flex-col"},Fl=["onClick"],Il={class:"flex flex-wrap -mx-2 mt-2"},Al={class:"w-full md:w-1/2 px-1 md:px-2"},El={class:"w-full md:w-1/2 px-1 md:px-2"},Ul={key:0},Rl=e("h2",{class:"font-bold text-primary text-sm text-center"}," All Members Will be assiged this Poll ",-1),Ll=[Rl],Vl={key:0,class:"form-group col-span-3"},jl=e("label",{class:"text-bold font-medium tracking-wide"}," People To Vote ",-1),Ol={key:0,class:"message"},Bl={key:1},Hl={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},Nl={key:1},Kl=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),zl=[Kl],Gl=ge({__name:"Pollp",setup(R){const f=ke(),U=qe(),k=b(!1),q=b("create"),h=U.params.committeeId,L=b(null),C=b([]),F=b(null),S=b("single"),$=b("individuals"),V=b([]),ae=b([]),H=b(""),v=Ue();Se("duedate");const{errorMessage:P}=Se("pollassignees"),de=_e({id:_().required(),title:_().required(),poll_id:_().nullable(),deleted_at:_().nullable(),created_at:_().nullable(),updated_at:_().nullable()}),ee=_e({id:_().required(),full_name:_().required()}),re=_e({id:_().required(),poll_id:_().nullable(),member_id:_().required(),user:ee}),he=_e({committee_id:_().nullable(),question:_().required(),description:_().required(),questionoptiontype:_().required(),optionstatus:_().required(),options:Ie().of(de).required(),duedate:_().required(),assigneetype:_().required(),assigneestatus:_().required(),pollassignees:Ie().of(re).nullable(),status:_().required()}),{handleSubmit:D,setErrors:ce,setFieldValue:x,values:W}=Re({validationSchema:he,initialValues:{committee_id:h,question:"",description:"",questionoptiontype:"",optionstatus:"",options:[{id:Pe(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null}],duedate:"",assigneetype:"",assigneestatus:"",pollassignees:[],status:"inactive"}});Se("options");const ve=r(()=>{var i;ne(),q.value="create",k.value=!0,(i=F.value)==null||i.showModal()},"openCreatePollModal"),ue=r(i=>{var I;ne(),L.value=i.id,x("question",i.question),x("description",i.description),x("questionoptiontype",i.questionoptiontype),x("optionstatus",i.optionstatus),x("duedate",i.duedate),x("assigneetype",i.assigneetype),x("assigneestatus",i.assigneestatus),x("status",i.status),x("options",i.options),$.value=i.assigneestatus,te(i.pollassignees),q.value="edit",k.value=!0,(I=F.value)==null||I.showModal()},"openEditPollModal");function te(i){C.value=i.map(I=>({id:I.id,full_name:I.user.full_name,poll_id:I.poll_id,member_id:I.member_id,user:I.user})),x("pollassignees",C.value)}r(te,"mappollassigneesToReactiveRef");const pe=r(()=>{x("pollassignees",C.value)},"selectedMembers"),se=r(()=>{x("pollassignees",C.value)},"removeselectedUsers"),be=D(async(i,{resetForm:I})=>{var y;try{console.log("dddd");const G={committee_id:i.committee_id,question:i.question,description:i.description,questionoptiontype:i.questionoptiontype,optionstatus:i.optionstatus,options:i.options,duedate:i.duedate,assigneetype:i.assigneetype,assigneestatus:i.assigneestatus,pollassignees:i.pollassignees,status:i.status};if(q.value==="create")await Nt(G,h);else{const Y=L.value;await Kt(G,Y)}(y=F.value)==null||y.close(),await Ge(),ne()}catch(G){G instanceof Ae?ce(G.messages):v(G)}}),ne=r(()=>{q.value="create",k.value=!1,L.value=null,S.value="single",$.value="all_members",C.value=[],x("committee_id",h),x("question",""),x("description",""),x("questionoptiontype","single"),x("optionstatus","single"),x("options",[{id:Pe(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null}]),x("duedate",""),x("assigneetype","all_members"),x("assigneestatus","all_members"),x("pollassignees",[]),x("status","inactive")},"reset"),me=r(i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),"formattedDateTime"),p=r(i=>j(i)?"bg-danger":"bg-success","dateBadgeClass"),j=r(i=>{const I=new Date,y=new Date(i);return I>y},"hasDueDatePassed"),w=r(i=>{var Qe;if(!i.votes||((Qe=i.votes)==null?void 0:Qe.length)===0)return"No votes yet";const I=i.votes.reduce((Le,Ve)=>Le+Ve.voteCount,0),y=i.totalMembers;if(I>y)return console.error("Total votes exceed total members, which is unexpected."),"Voting data error";if(I===0)return"No votes yet";const G=i==null?void 0:i.votes.reduce((Le,Ve)=>Le.voteCount>Ve.voteCount?Le:Ve),Y=y-I;return`${(G.voteCount/I*100).toFixed(1)}% voted for ${G.title}<br>${I} voted / ${Y} not yet`},"calculateVoteStats"),O=r(i=>{switch(i){case"Backlog":return"badge bg-warning";case"Pending":return"badge bg-info";case"On Progress":return"badge bg-primary";case"Completed":return"badge bg-success";default:return"badge"}},"statusClass"),le=[{name:"Single Answer",value:"single"},{name:"Multiple Answers: More than one",value:"multiple"}],u=[{name:"Individuals",value:"individuals"},{name:"Assign All Committee Members",value:"all_members"}],M=Z(()=>le),n=Z(()=>u),l=r(i=>{ae.value=[],V.value=[],s(),S.value=i,x("questionoptiontype",i),x("optionstatus",i)},"handleQuestionOptionTypeChange"),d=r(i=>{C.value=[],H.value=i,$.value=i,x("assigneetype",i),x("assigneestatus",i)},"handleAssigneeTypeChange"),s=r(()=>{Array.isArray(W.options)||(console.error("Invalid state: values.options is not an array."),x("options",[]));const i={id:Pe(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null};x("options",[...W.options,i])},"addEmptyOption");Xe(()=>W.options,i=>{});const T=r(i=>{const I=W.options.filter(y=>y.id!==i);console.log("vv",I),x("options",I)},"removeOption"),g=r(()=>we({queryKey:["getPollMembershisKey"],queryFn:async()=>(await Ke(h,{paginate:"false"})).data.map(ot())}),"getMembers"),{isLoading:J,data:K,refetch:oe}=g(),ot=r(()=>i=>({id:i.id,full_name:i.user.full_name,member_id:i.id,user:i.user}),"formatEvent"),at=Z(()=>{var i;return!K.value||((i=K.value)==null?void 0:i.length)===0?[]:K.value}),nt=r(()=>we({queryKey:["getCommitteePollsKey",h],queryFn:async()=>(await zt(h,{paginate:"false"})).data}),"getCommitteePolls"),{isLoading:lt,data:it,refetch:Ge}=nt();return $e(async()=>{oe(),Ge()}),(i,I)=>a(f).hasPermission(["view poll"])?(t(),o("div",Pn,[e("div",Tn,[e("div",qn,[Dn,a(f).hasPermission(["create poll"])?(t(),o("div",Fn,[e("button",{type:"button",onClick:A(ve,["prevent"]),class:"btn btn-tool"},[In,B(),An])])):m("",!0)]),e("div",En,[a(lt)?(t(),o("div",Un,"Loading Committee Polls...")):(t(),o("div",Rn,[e("div",Ln,[(t(!0),o(z,null,Q(a(it),(y,G)=>(t(),o("div",{class:"col-lg-12 col-md-12 col-sm-12 mb-2",key:G},[e("div",Vn,[e("div",jn,[e("div",On,[a(f).hasPermission(["edit poll"])?(t(),o("button",{key:0,class:"btn btn-tool",onClick:A(Y=>ue(y),["prevent"])},Nn,8,Bn)):m("",!0)])]),e("div",Kn,[e("div",zn,[Gn,e("p",Qn,c(y.question),1),e("div",Yn,[Wn,e("div",Zn,[e("div",Xn,[e("ul",Jn,[(t(!0),o(z,null,Q(y.options.slice(0,Math.ceil(y.options.length/2)),(Y,fe)=>(t(),o("li",{key:Y.id},c(fe+1)+". "+c(Y.title),1))),128))])]),e("div",el,[e("ul",tl,[(t(!0),o(z,null,Q(y.options.slice(Math.ceil(y.options.length/2)),(Y,fe)=>(t(),o("li",{key:Y.id},c(fe+1+Math.ceil(y.options.length/2))+". "+c(Y.title),1))),128))])])])])]),e("div",sl,[e("div",null,[ol,e("p",{class:N(p(y.duedate))},c(me(y.duedate)),3)]),e("div",null,[al,e("p",null,[e("span",{class:N(O(y.status))},c(y.status),3)])]),e("div",null,[nl,e("p",null,[e("span",{innerHTML:w(y)},null,8,ll)])])]),e("div",il,[dl,e("div",rl,[e("div",cl,[e("ul",ul,[(t(!0),o(z,null,Q(y.pollassignees.slice(0,Math.ceil(y.pollassignees.length/2)),(Y,fe)=>(t(),o("li",{key:Y.id},c(fe+1)+". "+c(Y.user.full_name),1))),128))])]),e("div",ml,[e("ul",_l,[(t(!0),o(z,null,Q(y.pollassignees.slice(Math.ceil(y.pollassignees.length/2)),(Y,fe)=>(t(),o("li",{key:Y.id},c(fe+1+Math.ceil(y.pollassignees.length/2))+". "+c(Y.user.full_name),1))),128))])])])]),e("div",null,[pl,e("p",{innerHTML:y.description,class:"mt-2"},null,8,hl)])])])]))),128))])]))])]),e("div",vl,[e("dialog",{id:"pollmodal",class:"modal w-full max-w-4xl mx-auto p-0",ref_key:"PollModal",ref:F},[e("form",bl,[e("h3",fl,c(q.value=="create"?"Create Poll":"Edit Poll"),1),gl,e("div",yl,[e("div",xl,[e("div",$l,[e("form",{novalidate:"",onSubmit:I[3]||(I[3]=A((...y)=>a(be)&&a(be)(...y),["prevent"])),class:""},[E(Te,{labeled:!0,label:"Poll Question",name:"question",placeholder:"Enter Poll Question",type:"text"}),E(ze,{label:"Poll description",name:"description",theme:"snow",placeholder:"Enter Poll Description",toolbar:"full",contentType:"html",class:"col-span-2"}),e("div",wl,[e("div",kl,[E(Oe,{labeled:!0,name:"questionoptiontype",label:"Select Allowed Answers On the Question",placeholder:"Select Allowed Answers On the Question",options:M.value,onSelectedItem:l},null,8,["options"])]),e("div",Cl,[E(Fe,{label:"Poll Due Date",name:"duedate",flow:["month"],placeholder:"Enter Poll Due Date & Time"})])]),e("div",Ml,[e("div",Sl,[e("div",null,[Pl,e("button",{onClick:A(s,["prevent"]),class:"btn btn-primary h-10 mt-2"}," Add Option ")]),Tl,a(W).options?(t(),o("ul",ql,[(t(!0),o(z,null,Q(a(W).options,(y,G)=>(t(),o("li",{class:"text-primary font-bold text-justify",key:G},c(G+1)+"."+c(y==null?void 0:y.title),1))),128))])):m("",!0)]),a(W).options?(t(),o("div",Dl,[(t(!0),o(z,null,Q(a(W).options,(y,G)=>(t(),o("div",{class:"form-group flex items-center mb-2",key:G},[E(jt,{labeled:!0,label:"Title for option "+(G+1),name:"options["+G+"].title",placeholder:"Enter title",class:"flex-grow",type:"text"},null,8,["label","name"]),e("a",{href:"#",class:"ml-2 text-red-600 font-bold mt-8",onClick:A(Y=>T(y.id),["prevent"])}," ✕ ",8,Fl)]))),128))])):m("",!0)]),e("div",Il,[e("div",Al,[E(Oe,{labeled:!0,name:"assigneetype",label:"Select Assignee Type",placeholder:"Select Assignee Type",options:n.value,onSelectedItem:d},null,8,["options"])]),e("div",El,[$.value==="all_members"?(t(),o("div",Ul,Ll)):m("",!0)])]),$.value==="individuals"?(t(),o("div",Vl,[jl,e("div",{class:N(["multiselect-container",{error:!!a(P)}])},[E(a(Ne),{id:"pollassignees",modelValue:C.value,"onUpdate:modelValue":I[0]||(I[0]=y=>C.value=y),mode:"tags",required:"",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:at.value,valueProp:"member_id",trackBy:"member_id",label:"full_name",class:N(["col-span-3",["multiselect-container",{error:!!a(P)}]]),object:!0,onSelect:I[1]||(I[1]=y=>pe()),onDeselect:I[2]||(I[2]=y=>se())},null,8,["modelValue","options","class"]),a(P)?(t(),o("div",Ol,c(a(P)),1)):m("",!0)],2)])):m("",!0),C.value&&C.value.length||$.value==="all_members"?(t(),o("div",Bl,[e("button",Hl,c(q.value=="create"?"Create Poll":"Edit Poll"),1)])):m("",!0)],32)])])])])],512)])])):(t(),o("div",Nl,zl))}});const ie=r(R=>(Be("data-v-2d8e0af4"),R=R(),He(),R),"_withScopeId"),Ql={key:0},Yl={class:"card h-full"},Wl={class:"card-header flex items-center"},Zl=ie(()=>e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"},"Meeting Tasks")],-1)),Xl={key:0,class:"flex items-center space-x-2"},Jl=ie(()=>e("i",{class:"far fa fa-plus mr-2"},null,-1)),ei=ie(()=>e("span",{class:"sr-only"},"Add task",-1)),ti={class:"card-container"},si={key:0},oi={key:1},ai={class:"row overflow-auto p-4",style:{"max-height":"100vh"}},ni={class:"card card-outline card-primary h-100"},li={class:"card-header"},ii={class:"card-tools"},di=["onClick"],ri=ie(()=>e("i",{class:"fas fa-edit"},null,-1)),ci=[ri],ui={class:"card-body"},mi={class:"text-primary text-bold uppercase"},_i={class:"d-flex justify-content-between"},pi=ie(()=>e("strong",null,"Due Date:",-1)),hi=ie(()=>e("strong",null,"Status:",-1)),vi={key:0,class:"badge bg-warning"},bi={key:1,class:"badge bg-info"},fi={key:2,class:"badge bg-primary"},gi={key:3,class:"badge bg-success"},yi={class:""},xi=ie(()=>e("strong",null,"Assignees:",-1)),$i={class:"row"},wi={class:"col-6"},ki={class:"list-unstyled"},Ci={class:"col-6"},Mi={class:"list-unstyled"},Si=ie(()=>e("strong",null,"Description:",-1)),Pi=["innerHTML"],Ti={class:"flex justify-center col-md-6"},qi={method:"dialog",class:"modal-box rounded-xl"},Di={class:"font-bold text-lg justify-center flex"},Fi=ie(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),Ii={class:"overflow-auto p-4",style:{"max-height":"80vh"}},Ai={class:"grid grid-cols-3 md:grid-cols-3 gap-2 p-2"},Ei={class:"col-span-3"},Ui={class:"flex flex-wrap -mx-2 mt-2"},Ri={class:"w-full md:w-1/2 px-1 md:px-2"},Li={class:"w-full md:w-1/2 px-1 md:px-2"},Vi={class:"flex flex-wrap -mx-2 mt-2"},ji={class:"w-full md:w-1/2 px-1 md:px-2"},Oi={class:"w-full md:w-1/2 px-1 md:px-2"},Bi={key:0},Hi=ie(()=>e("h2",{class:"font-bold text-primary text-sm text-center"},"All Members Will be assigned this Task",-1)),Ni=[Hi],Ki={key:0,class:"form-group col-span-3"},zi=ie(()=>e("label",{class:"text-bold font-medium tracking-wide"},"People to Assign",-1)),Gi={key:0,class:"message"},Qi={key:1},Yi={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},Wi={key:1},Zi=ie(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),Xi=[Zi],Ji=ge({__name:"Taskp",setup(R){const f=ke(),U=qe(),k=b(!1),q=b("create"),h=U.params.committeeId,L=b(null),C=b([]),F=b(null),S=b(null),$=b("individuals"),V=b(""),ae=Ue();Se("duedate");const{errorMessage:H}=Se("taskassignees"),v=r(s=>{const T=new Date,g=new Date(s);return T>g},"hasDueDatePassed"),P=_e({id:_().nullable(),full_name:_().nullable()}),de=_e({id:_().nullable(),task_id:_().nullable(),member_id:_().nullable(),user:P}),ee=_e({committee_id:_().nullable(),title:_().required(),duedate:_().required(),description:_().required(),status:_().required(),assigneetype:_().required(),assigneestatus:_().required(),taskassignees:Ie().of(de).nullable()}),{handleSubmit:re,setErrors:he,setFieldValue:D,values:ce}=Re({validationSchema:ee,initialValues:{committee_id:h,title:"",duedate:"",description:"",status:"pending",assigneetype:"",assigneestatus:"",taskassignees:[]}}),x=r(()=>{var s;se(),q.value="create",k.value=!0,(s=S.value)==null||s.showModal()},"openCreateTaskModal"),W=r(s=>{var T;se(),F.value=s,L.value=s.id,D("title",s.title),D("duedate",s.duedate),D("description",s.description),D("status",s.status),D("assigneetype",s.assigneetype),D("assigneestatus",s.assigneestatus),$.value=s.assigneestatus,ve(s.taskassignees),q.value="edit",k.value=!0,(T=S.value)==null||T.showModal()},"openEditTaskModal");function ve(s){C.value=s.map(T=>({id:T.id,full_name:T.user.full_name,task_id:T.task_id,member_id:T.member_id,user:T.user})),D("taskassignees",C.value)}r(ve,"maptaskassigneesToReactiveRef");const ue=r(()=>{D("taskassignees",C.value)},"selectedMembers"),te=r(()=>{D("taskassignees",C.value)},"removeselectedUsers"),pe=re(async(s,{resetForm:T})=>{var g;try{const J={committee_id:s.committee_id,title:s.title,duedate:s.duedate,description:s.description,status:s.status,assigneetype:s.assigneetype,assigneestatus:s.assigneestatus,taskassignees:s.taskassignees};if(q.value==="create")await Gt(J,h);else{const K=L.value;await Qt(J,K)}(g=S.value)==null||g.close(),await d(),se()}catch(J){J instanceof Ae?he(J.messages):ae(J)}}),se=r(()=>{q.value="create",k.value=!1,L.value=null,$.value="all_members",C.value=[],D("committee_id",h),D("title",""),D("duedate",""),D("description","description ................"),D("status","pending"),D("assigneetype","all_members"),D("assigneestatus","all_members"),D("taskassignees",[])},"reset"),be=r(s=>{C.value=[],V.value=s,$.value=s,D("assigneetype",s),D("assigneestatus",s)},"handleAssigneeTypeChange"),ne=[{name:"Individuals",value:"individuals"},{name:"Assign All Meeting Members",value:"all_members"}],me=Z(()=>ne),p=r(()=>we({queryKey:["getCommitteeMembersKey"],queryFn:async()=>(await Ke(h,{paginate:"false"})).data.map(le())}),"getMembers"),{isLoading:j,data:w,refetch:O}=p(),le=r(()=>s=>({id:s.id,full_name:s.user.full_name,member_id:s.id,user:s.user}),"formatEvent"),u=Z(()=>{var s;return!w.value||((s=w.value)==null?void 0:s.length)===0?[]:w.value}),M=r(()=>we({queryKey:["getCommitteeTasksKey",h],queryFn:async()=>(await Yt(h,{paginate:"false"})).data}),"getCommitteeTasks"),{isLoading:n,data:l,refetch:d}=M();return $e(async()=>{d(),O()}),(s,T)=>a(f).hasPermission(["view task"])?(t(),o("div",Ql,[e("div",Yl,[e("div",Wl,[Zl,a(f).hasPermission(["create task"])?(t(),o("div",Xl,[e("button",{type:"button",onClick:A(x,["prevent"]),class:"btn btn-tool"},[Jl,B(),ei])])):m("",!0)]),e("div",ti,[a(n)?(t(),o("div",si,"Loading Meeting Tasks...")):(t(),o("div",oi,[e("div",ai,[(t(!0),o(z,null,Q(a(l),(g,J)=>(t(),o("div",{class:"col-lg-12 col-md-12 col-sm-12 mb-2",key:J},[e("div",ni,[e("div",li,[e("div",ii,[a(f).hasPermission(["edit task"])?(t(),o("button",{key:0,class:"btn btn-tool",onClick:A(K=>W(g),["prevent"])},ci,8,di)):m("",!0)])]),e("div",ui,[e("div",mi,c(g.title),1),e("div",_i,[e("div",null,[pi,e("p",{class:N({"text-danger":v(g.duedate)&&g.status!=="completed","text-success":!v(g.duedate)||g.status==="completed"})},c(a(je)(g.duedate)),3)]),e("div",null,[hi,e("p",null,[g.status==="backlog"?(t(),o("span",vi,"Backlog")):g.status==="pending"?(t(),o("span",bi,"Pending")):g.status==="onprogress"?(t(),o("span",fi,"On Progress")):g.status==="completed"?(t(),o("span",gi,"Completed")):m("",!0)])])]),e("div",yi,[xi,e("div",$i,[e("div",wi,[e("ul",ki,[(t(!0),o(z,null,Q(g.taskassignees.slice(0,Math.ceil(g.taskassignees.length/2)),(K,oe)=>(t(),o("li",{key:K.id},c(oe+1)+". "+c(K.user.full_name),1))),128))])]),e("div",Ci,[e("ul",Mi,[(t(!0),o(z,null,Q(g.taskassignees.slice(Math.ceil(g.taskassignees.length/2)),(K,oe)=>(t(),o("li",{key:K.id},c(oe+1+Math.ceil(g.taskassignees.length/2))+". "+c(K.user.full_name),1))),128))])])])]),e("div",null,[Si,e("p",{innerHTML:g.description,class:"mt-2"},null,8,Pi)])])])]))),128))])]))])]),e("div",Ti,[e("dialog",{id:"taskmodal",class:"modal",ref_key:"TaskModal",ref:S},[e("form",qi,[e("h3",Di,c(q.value=="create"?"Create Meeting Task":"Edit Meeting Task"),1),Fi,e("div",Ii,[e("div",Ai,[e("div",Ei,[e("form",{novalidate:"",onSubmit:T[3]||(T[3]=A((...g)=>a(pe)&&a(pe)(...g),["prevent"])),class:""},[e("div",Ui,[e("div",Ri,[E(Te,{labeled:!0,label:"Task Title",name:"title",placeholder:"Enter Task Title",type:"text"})]),e("div",Li,[E(Fe,{label:"Task Due Date",name:"duedate",flow:["month"],placeholder:"Task Due Date"})])]),E(ze,{label:"Task Description",name:"description",theme:"snow",placeholder:"Enter Task Description",toolbar:"full",contentType:"html",class:"col-span-3"}),e("div",Vi,[e("div",ji,[E(Oe,{labeled:!0,name:"assigneetype",label:"Select Assignee Type",placeholder:"Select Assignee Type",options:me.value,onSelectedItem:be},null,8,["options"])]),e("div",Oi,[$.value==="all_members"?(t(),o("div",Bi,Ni)):m("",!0)])]),$.value==="individuals"?(t(),o("div",Ki,[zi,e("div",{class:N(["multiselect-container",{error:!!a(H)}])},[E(a(Ne),{id:"taskassignees",modelValue:C.value,"onUpdate:modelValue":T[0]||(T[0]=g=>C.value=g),mode:"tags",required:"",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:u.value,valueProp:"member_id",trackBy:"member_id",label:"full_name",class:N(["col-span-3",["multiselect-container",{error:!!a(H)}]]),object:!0,onSelect:T[1]||(T[1]=g=>ue()),onDeselect:T[2]||(T[2]=g=>te())},null,8,["modelValue","options","class"]),a(H)?(t(),o("div",Gi,c(a(H)),1)):m("",!0)],2)])):m("",!0),C.value&&C.value.length||$.value==="all_members"?(t(),o("div",Qi,[e("button",Yi,c(q.value=="create"?"Create Task":"Edit Task"),1)])):m("",!0)],32)])])])])],512)])])):(t(),o("div",Wi,Xi))}});const ed=Ee(Ji,[["__scopeId","data-v-2d8e0af4"]]),td={key:0},sd={class:"row"},od={class:"col-md-6"},ad={class:"col-md-6"},nd={key:1},ld=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),id=[ld],dd=ge({__name:"TaskPolls",setup(R){const f=ke();return(U,k)=>a(f).hasPermission(["view task","view poll"])?(t(),o("div",td,[e("div",sd,[e("div",od,[E(ed)]),e("div",ad,[E(Gl)])])])):(t(),o("div",nd,id))}});const rd={class:"col-md-12"},cd={key:0,class:"card card-widget widget-user shadow-lg"},ud=e("div",{style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.5)"}},null,-1),md=[ud],_d={class:"card-footer"},pd={class:""},hd={class:"widget-user-image",style:{left:"4%","margin-left":"-45px",position:"absolute",top:"190px"}},vd=["src"],bd={class:"ml-3 flex-1",style:{"margin-top":"-28px"}},fd=e("i",{class:"fas fa-chevron-left fa-xs"},null,-1),gd={class:"h2 mb-2 lg:mb-0",style:{"margin-left":"150px"}},yd={class:"card-outline card-outline-tabs"},xd={class:"card-header p-0 border-bottom-0"},$d={class:"nav nav-tabs",id:"custom-tabs-four-tab",role:"tablist"},wd=e("li",{class:"nav-item"},[e("a",{class:"nav-link active",id:"custom-tabs-four-home-tab","data-toggle":"pill",href:"#custom-tabs-four-home",role:"tab","aria-controls":"custom-tabs-four-home","aria-selected":"true"}," Meetings ")],-1),kd={key:0,class:"nav-item"},Cd=e("a",{class:"nav-link",id:"custom-tabs-four-documents-tab","data-toggle":"pill",href:"#custom-tabs-four-documents",role:"tab","aria-controls":"custom-tabs-four-documents","aria-selected":"false"}," Documents ",-1),Md=[Cd],Sd=e("li",{class:"nav-item"},[e("a",{class:"nav-link",id:"custom-tabs-four-discussions-tab","data-toggle":"pill",href:"#custom-tabs-four-discussions",role:"tab","aria-controls":"custom-tabs-four-discussions","aria-selected":"false"}," Discussions ")],-1),Pd=e("li",{class:"nav-item"},[e("a",{class:"nav-link",id:"custom-tabs-four-tasks-tab","data-toggle":"pill",href:"#custom-tabs-four-tasks",role:"tab","aria-controls":"custom-tabs-four-tasks","aria-selected":"false"}," Task & Polls ")],-1),Td=e("li",{class:"nav-item"},[e("a",{class:"nav-link",id:"custom-tabs-four-members-tab","data-toggle":"pill",href:"#custom-tabs-four-members",role:"tab","aria-controls":"custom-tabs-four-members","aria-selected":"false"}," Members ")],-1),qd={class:"card-body"},Dd={class:"tab-content",id:"custom-tabs-four-tabContent"},Fd={class:"tab-pane fade active show",id:"custom-tabs-four-home",role:"tabpanel","aria-labelledby":"custom-tabs-four-home-tab"},Id={class:"tab-pane fade",id:"custom-tabs-four-documents",role:"tabpanel","aria-labelledby":"custom-tabs-four-documents-tab"},Ad=e("div",{class:"tab-pane fade",id:"custom-tabs-four-discussions",role:"tabpanel","aria-labelledby":"custom-tabs-four-discussions-tab"},null,-1),Ed={class:"tab-pane fade",id:"custom-tabs-four-tasks",role:"tabpanel","aria-labelledby":"custom-tabs-four-tasks-tab"},Ud=e("div",{class:"tab-pane fade",id:"custom-tabs-four-goals",role:"tabpanel","aria-labelledby":"custom-tabs-four-goals-tab"},null,-1),Rd={class:"tab-pane fade",id:"custom-tabs-four-members",role:"tabpanel","aria-labelledby":"custom-tabs-four-members-tab"},or=ge({__name:"CommitteeDetail",setup(R){const f=ke(),U=b(),k=qe(),q=tt();function h(){q.push({name:mt})}r(h,"goBack");const L=k.params.committeeId;return $e(async()=>{try{const F=(await _t(L)).data;U.value=F,window.dispatchEvent(new CustomEvent("updateTitle",{detail:F.name}))}catch(C){console.error("Error fetching committee data:",C)}}),(C,F)=>(t(),o("div",rd,[U.value?(t(),o("div",cd,[e("div",{class:"widget-user-header text-white",style:et([{backgroundImage:`url(${a(Ct)(U.value.cover)})`,backgroundPosition:"center center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},{height:"250px",width:"100%",position:"relative"}])},md,4),e("div",_d,[e("div",pd,[e("div",hd,[e("img",{class:"img-circle elevation-2",src:a(Mt)(U.value.icon),alt:"User Avatar",style:{width:"128px",height:"128px"}},null,8,vd)]),e("div",bd,[e("a",{href:"",onClick:F[0]||(F[0]=A(S=>h(),["prevent"])),class:"mb-2 lg:mb-0 text-blue-primary",style:{"margin-left":"140px","margin-top":"-44px"}},[fd,B(" Committees ")]),e("h3",gd,c(U.value.name),1),e("div",yd,[e("div",xd,[e("ul",$d,[wd,a(f).hasPermission(["view folders"])?(t(),o("li",kd,Md)):m("",!0),Sd,Pd,Td])]),e("div",qd,[e("div",Dd,[e("div",Fd,[E(Va)]),e("div",Id,[E(Io)]),Ad,e("div",Ed,[E(dd)]),Ud,e("div",Rd,[E(Sn)])])])])])])])])):m("",!0)]))}});export{or as default};
