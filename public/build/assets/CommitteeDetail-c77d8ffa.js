var rt=Object.defineProperty;var r=(R,f)=>rt(R,"name",{value:f,configurable:!0});import{d as ye,i as Ce,j as De,r as b,C as Z,P as we,H as Je,V as Ue,b as Xe,u as a,o as t,c as o,e,F as G,T as Y,g as H,t as c,h as m,a1 as I,a2 as ct,a3 as ut,f as A,l as $e,w as Ie,$ as Be,a0 as Ne,_ as Re,R as K,a4 as et,a5 as mt,k as tt,a6 as Ke}from"./main-d97516e2.js";import{e as _t}from"./useCommitteeRequest-787b5c72.js";import{e as pt,g as ht,h as vt,j as Ye,k as je,m as bt,n as ft,o as Se,p as gt,q as yt,t as xt,v as $t,w as wt,f as We,F as Ze,x as kt,y as Ct,b as Mt}from"./Breadcrumb-62de853f.js";import{u as Ve,c as pe,a as _,d as st,b as Le,f as Ee,e as Pe}from"./useUnexpectedErrorHandler-01ee037e.js";import{q as St,r as Pt,s as Tt,t as qt,w as Dt,v as Te,F as Oe,x as Ft,y as It,z as At,A as Et,B as ze,j as Ut}from"./FormDynamicInput-2daa5165.js";import{F as qe}from"./FormInput-19d746f6.js";import{F as Rt}from"./FormUpload-a6d2fc77.js";import{u as ke}from"./useQuery-f8736dfe.js";import{b as Vt,c as Lt,d as jt,f as Ot}from"./useMeetingRequest-eac1459b.js";import{_ as Ae}from"./FormDateTimeInput.vue_vue_type_style_index_0_lang-6e3ff0f9.js";import{F as Ge}from"./FormQuillEditor-3e5c8bfd.js";import{F as Bt}from"./FormRadioInput-636b4964.js";import{u as Nt}from"./useStaffRequest-cb748c9e.js";import{g as Ht,h as Kt,i as zt}from"./usePollRequest-97611322.js";import{g as Gt,h as Qt,i as Yt}from"./useTaskRequest-3c5f3f5d.js";import"./index-a4206e89.js";import"./folder_routes-575ae698.js";import"./useQueryClient-99479e2d.js";import"./staff_routes-2c9640ed.js";const J=r(R=>(Be("data-v-01681b8d"),R=R(),Ne(),R),"_withScopeId$3"),Wt={key:0},Zt={class:"card"},Jt={class:"card-header p-3"},Xt={class:"row"},es={class:"col-12"},ts={class:"row"},ss={class:"col-lg-9 col-md-8 col-12 mt-2"},os={"aria-label":"Breadcrumbs",class:"text-sm overflow-hidden"},as={class:"breadcrumb mb-0 bg-warning"},ns=["onClick"],ls={class:"col-lg-3 col-md-4 col-12"},is={class:"row"},ds={class:"col-md-6 col-12 mt-2"},rs={class:"dropdown"},cs={class:"nav-link dropdown-toggle btn btn-secondary btn-block",href:"#",id:"navbarDropdown",type:"button",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},us=J(()=>e("span",{class:"text-warning mr-1"},"sort by:",-1)),ms={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},_s=["onClick"],ps={class:"col-md-6 col-12 mt-2"},hs={key:0,class:"dropdown"},vs={key:0,class:"nav-link dropdown-toggle btn btn-primary btn-block",href:"#",id:"navbarDropdown",type:"button",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},bs=J(()=>e("i",{class:"fas fa-plus mr-2"},null,-1)),fs={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},gs=J(()=>e("i",{class:"fas fa-plus"},null,-1)),ys=J(()=>e("i",{class:"fas fa-file-upload"},null,-1)),xs={key:0,class:"col-12 mt-3"},$s={class:"input-group input-group-lg"},ws=J(()=>e("div",{class:"input-group-append"},[e("button",{type:"submit",class:"btn btn-lg btn-default"},[e("i",{class:"fa fa-search"})])],-1)),ks={class:"card-body py-0 px-4 min-h-[300px] relative -top-px z-10"},Cs={class:"table-responsive"},Ms={class:"table mb-0"},Ss={class:"w-28"},Ps={key:0},Ts=["onClick"],qs=["src"],Ds={key:1},Fs=["src"],Is={key:0},As={class:"font-weight-bold text-primary text-truncate"},Es={class:"text-sm font-weight-bold text-primary"},Us=J(()=>e("span",{class:"text-black"},"Folders",-1)),Rs={class:"text-sm font-weight-bold text-primary"},Vs=J(()=>e("span",{class:"text-black"},"Files",-1)),Ls={key:1},js={key:0},Os={class:"font-weight-bold text-primary text-truncate"},Bs={class:"text-sm font-weight-bold text-primary"},Ns={class:"text-black"},Hs={class:"w-28"},Ks={key:0},zs={class:"text-xs text-primary text-truncate"},Gs={key:1},Qs={key:0},Ys={class:"text-xs text-primary text-truncate"},Ws={class:"w-20 text-center"},Zs={class:"flex justify-end space-x-2"},Js={key:0},Xs=["onClick"],eo=J(()=>e("i",{class:"far fa-edit"},null,-1)),to=[eo],so={key:1},oo=["onClick"],ao=J(()=>e("i",{class:"far fa-edit"},null,-1)),no=[ao],lo=J(()=>e("i",{class:"far fa-eye"},null,-1)),io={class:"flex justify-center col-md-6"},ro={method:"dialog",class:"modal-box rounded-xl"},co={class:"font-bold text-lg justify-center flex"},uo=J(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),mo={class:"w-full mt-6 p-2"},_o={class:"font-thin text-sm flex flex-col items-center gap-6"},po={class:"row"},ho={key:0,class:"row mt-2 ml-2"},vo={key:0,class:"row mt-2 ml-2"},bo={class:"col-md-6"},fo=["src"],go={class:"col-md-6"},yo=J(()=>e("strong",null,"File Name:",-1)),xo={class:"text-bold text-primary"},$o=J(()=>e("strong",null,"File Size:",-1)),wo={class:"text-bold text-primary"},ko=J(()=>e("strong",null,"Type:",-1)),Co={class:"text-bold text-primary"},Mo=J(()=>e("strong",null,"Last Modified: ",-1)),So={class:"text-bold text-primary"},Po={type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},To={key:1},qo=J(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),Do=[qo],Fo=ye({__name:"Documents",setup(R){const f=Ce(),E=Ve(),k=De(),D=b("create"),h=b("folder"),V=b("name-asc"),S=b(""),U=b([]),$=k.params.committeeId,w=b([{id:"1",name:"Folders"}]),L=b(null),ae=b(!1),B=b(null),v=b(null),P=[{id:"name-asc",name:"Name (A-Z)"},{id:"name-desc",name:"Name (Z-A)"},{id:"date-newest",name:"Newest to oldest"},{id:"date-oldest",name:"Oldest to newest"}];function de(n){V.value=n}r(de,"applySort");const ee=Z(()=>{const n=P.find(l=>l.id===V.value);return n?n.name:"Unknown"});function re(n){console.log("folder",n),w.value.push({id:n.id,name:n.name})}r(re,"addToNavigationPath");function ve(n){const l=w.value.slice(0,n+1);if(l.length!==w.value.length){w.value=l;const d=q(w.value.at(-1).id,ue.value);U.value=d?d.children||[]:[]}}r(ve,"navigateTo");function q(n,l){if(!Array.isArray(l))return null;for(const d of l){if(d.id===n)return d;if(d.children&&Array.isArray(d.children)){const s=q(n,d.children);if(s)return s}}return null}r(q,"findFolderById");function ce(n){w.value.at(-1).id!==n.id&&(re(n),console.log("folder",n.children),U.value=n.children||[])}r(ce,"openFolder");function y(n){let l=0,d=0;return n.children&&n.children.length>0&&n.children.forEach(s=>{s.type==="folder"?l++:s.type==="file"&&d++}),{folderCount:l,fileCount:d}}r(y,"countChildrenTypes");const W=r(()=>ke({queryKey:["getCommitteeFoldersKey",$],queryFn:async()=>(await Dt($,{paginate:"false"})).data}),"getCommitteeFolders"),{isLoading:be,data:ue,refetch:te}=W();we(async()=>{await te()}),Je(ue,n=>{var l;if(n&&n.length>0)if(w.value.length===1&&(n[0],w.value[0].id="1",w.value[0].name="Documents"),w.value.length===1)U.value=n;else{const d=q((l=w.value.at(-1))==null?void 0:l.id,n);U.value=d?d.children||[]:[]}},{immediate:!0});const he=Z(()=>S.value?se.value.filter(n=>n.name.toLowerCase().includes(S.value.toLowerCase())):se.value),se=Z(()=>{const n=w.value.length>1?U.value:ue.value;return Array.isArray(n)?[...n].sort((l,d)=>{switch(V.value){case"name-asc":return l.name.localeCompare(d.name);case"name-desc":return d.name.localeCompare(l.name);case"date-newest":return new Date(d.created_at).getTime()-new Date(l.created_at).getTime();case"date-oldest":return new Date(l.created_at).getTime()-new Date(d.created_at).getTime();default:return 0}}):[]}),fe=pe({name:_().required(),meeting_id:_().required(),committee_id:_().required(),folder_id:_().nullable(),parent_id:_(),type:_().oneOf(["folder","file"]).required(),fileupload:st().nullable()}),{handleSubmit:ne,setErrors:me,setFieldValue:p,values:j}=Le({validationSchema:fe,initialValues:{name:"",meeting_id:$,committee_id:$,folder_id:null,parent_id:"",type:"",fileupload:null}}),C=r(n=>{var s;const l=n.target;if(!((s=l.files)!=null&&s.length))return;const d=l.files[0];p("name",d.name),p("type","file")},"updateName"),O=r(n=>{var d;M(),D.value="create",h.value=n,ae.value=!0,(d=v.value)==null||d.showModal(),p("type",n);const l=w.value.at(-1);p("parent_id",l.id),console.log("parent",l)},"openCreateFolderModal"),le=ne(async(n,{resetForm:l})=>{var d;try{if(D.value==="create")if(h.value==="folder"){const s={children:[],created_at:null,icon:null,id:null,meeting_id:n.meeting_id,committee_id:n.committee_id,folder_id:null,name:n.name,parent_id:n.parent_id.toString(),type:n.type,fileupload:null,media:[]};await St(s,$)}else{const s={children:[],created_at:null,icon:null,id:null,meeting_id:n.meeting_id,committee_id:n.committee_id,folder_id:null,name:n.name,parent_id:n.parent_id.toString(),type:n.type,fileupload:n.fileupload,media:[]};await Pt(s,$)}else if(h.value==="folder"){const s={children:[],created_at:null,folder_id:null,icon:null,id:null,meeting_id:n.meeting_id,committee_id:n.committee_id,name:n.name,parent_id:n.parent_id.toString(),type:n.type,fileupload:null,media:[]},T=B.value?B.value.toString():null;s.folder_id=T,await Tt(s,$,s.folder_id)}else{const s={children:[],created_at:null,folder_id:null,icon:null,id:null,meeting_id:n.meeting_id,committee_id:n.committee_id,name:n.name,parent_id:n.parent_id.toString(),type:n.type,fileupload:n.fileupload,media:[]},T=B.value?B.value.toString():null;s.folder_id=T,await qt(s,$,s.folder_id)}await te(),M(),(d=v.value)==null||d.close()}catch(s){s instanceof Ue?me(s.messages):E(s)}}),u=r((n,l)=>{var d;M(),L.value=n,B.value=n.id.toString(),D.value="edit",h.value=l,ae.value=!0,p("name",n.name),p("folder_id",n.id),p("type",l),l==="file"&&(p("fileupload",n.name),yt(n.media[0])),p("parent_id",n.id),console.log("folder.media",n.name),(d=v.value)==null||d.showModal()},"openEditFolderModal"),M=r(()=>{p("name",""),p("folder_id",null),p("fileupload",""),p("parent_id",""),p("type",""),h.value="folder",D.value="create",ae.value=!1,L.value=null,B.value=null,pt()},"resetFolder");return(n,l)=>{const d=Xe("router-link");return a(f).hasPermission(["view folders"])?(t(),o("div",Wt,[e("div",Zt,[e("div",Jt,[e("div",Xt,[e("div",es,[e("div",ts,[e("div",ss,[e("nav",os,[e("ol",as,[(t(!0),o(G,null,Y(w.value,(s,T)=>(t(),o("li",{key:s.id,class:"breadcrumb-item"},[e("a",{href:"#",class:"text-gray-800 font-medium",onClick:I(g=>ve(T),["prevent"])},c(s.name),9,ns)]))),128))])])]),e("div",ls,[e("div",is,[e("div",ds,[e("div",rs,[e("button",cs,[us,H(c(ee.value),1)]),e("div",ms,[(t(),o(G,null,Y(P,s=>e("a",{key:s.id,href:"#",class:"dropdown-item",onClick:I(T=>de(s.id),["prevent"])},c(s.name),9,_s)),64))])])]),e("div",ps,[w.value.length>1?(t(),o("div",hs,[a(f).hasPermission(["create folders","upload documents","create dropzone"])?(t(),o("button",vs,[bs,H(" New ")])):m("",!0),e("div",fs,[a(f).hasPermission(["create folders","create dropzone"])?(t(),o("a",{key:0,href:"#",onClick:l[0]||(l[0]=I(s=>O("folder"),["prevent"])),class:"dropdown-item"},[gs,H(" New folder ")])):m("",!0),a(f).hasPermission(["upload documents"])?(t(),o("a",{key:1,href:"#",onClick:l[1]||(l[1]=I(s=>O("file"),["prevent"])),class:"dropdown-item"},[ys,H(" Upload a file ")])):m("",!0)])])):m("",!0)])])])])]),a(f).hasPermission(["search documents"])?(t(),o("div",xs,[e("div",$s,[ct(e("input",{type:"search",class:"form-control form-control-lg",placeholder:"Type your keywords here","onUpdate:modelValue":l[2]||(l[2]=s=>S.value=s)},null,512),[[ut,S.value]]),ws])])):m("",!0)])]),e("div",ks,[e("div",Cs,[e("table",Ms,[e("tbody",null,[(t(!0),o(G,null,Y(he.value,s=>{var T,g,X,z;return t(),o("tr",{key:s.id,class:"group bg-white hover:bg-gray-100 cursor-pointer"},[e("td",Ss,[s.type==="folder"?(t(),o("div",Ps,[e("div",{onClick:I(oe=>ce(s),["prevent"])},[e("img",{src:a(ht)(s.icon),class:"img-fluid",alt:"Folder Icon"},null,8,qs)],8,Ts)])):(t(),o("div",Ds,[a(f).hasPermission(["view documents"])?(t(),$e(d,{key:0,to:{name:"CommitteeMediaDetails",params:{committeeId:a($),folderId:s.id,mediaId:(T=s==null?void 0:s.media[0])==null?void 0:T.uuid}},class:"d-block text-success hover:text-green-700 transition ease-in-out"},{default:Ie(()=>{var oe;return[e("img",{src:a(vt)((oe=s==null?void 0:s.media[0])==null?void 0:oe.mime_type),class:"img-fluid",alt:"File Icon"},null,8,Fs)]}),_:2},1032,["to"])):m("",!0)]))]),e("td",null,[s.type==="folder"?(t(),o("div",Is,[e("p",As,c(s.name),1),e("p",Es,[H(c(y(s).folderCount)+": ",1),Us]),e("p",Rs,[H(c(y(s).fileCount)+": ",1),Vs])])):(t(),o("div",Ls,[a(f).hasPermission(["view documents"])?(t(),o("div",js,[e("p",Os,c((g=s==null?void 0:s.media[0])==null?void 0:g.file_name),1),e("p",Bs,[H(" Size: "),e("span",Ns,c(a(Ye)((X=s==null?void 0:s.media[0])==null?void 0:X.size)),1)])])):m("",!0)]))]),e("td",Hs,[s.type==="folder"?(t(),o("div",Ks,[e("p",zs,c(a(je)(s.created_at,"")),1)])):(t(),o("div",Gs,[a(f).hasPermission(["view documents"])?(t(),o("div",Qs,[e("p",Ys,c(a(je)(s.created_at,"")),1)])):m("",!0)]))]),e("td",Ws,[e("div",Zs,[s.type==="folder"?(t(),o("div",Js,[a(f).hasPermission(["edit folders"])?(t(),o("a",{key:0,href:"#",onClick:I(oe=>u(s,"folder"),["prevent"]),class:"text-warning hover:text-blue-700 transition ease-in-out"},to,8,Xs)):m("",!0)])):(t(),o("div",so,[a(f).hasPermission(["edit documents"])?(t(),o("a",{key:0,href:"#",onClick:I(oe=>u(s,"file"),["prevent"]),class:"text-warning hover:text-blue-700 transition ease-in-out"},no,8,oo)):m("",!0),a(f).hasPermission(["view documents"])&&s.type==="file"?(t(),$e(d,{key:1,to:{name:"CommitteeMediaDetails",params:{committeeId:a($),folderId:s.id,mediaId:(z=s==null?void 0:s.media[0])==null?void 0:z.uuid}},class:"text-success hover:text-green-700 transition ease-in-out"},{default:Ie(()=>[lo]),_:2},1032,["to"])):m("",!0)]))])])])}),128))])])])])]),e("div",io,[e("dialog",{id:"foldermodal",class:"modal",ref_key:"FolderModal",ref:v},[e("form",ro,[e("h3",co,c(D.value==="create"?h.value==="folder"?"Create Folder":"Upload File":h.value==="folder"?"Update Folder":"Update File"),1),uo,e("div",mo,[e("div",_o,[e("form",{novalidate:"",onSubmit:l[4]||(l[4]=I((...s)=>a(le)&&a(le)(...s),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",po,[A(qe,{labeled:!0,label:h.value==="folder"?"Folder name":"Upload File name",name:"name",class:"col-md-12 w-full text-sm text-white tracking-wide",placeholder:h.value==="folder"?"Folder name":"Upload File name",type:"text"},null,8,["label","placeholder"]),h.value==="file"?(t(),o("div",ho,[A(Rt,{labeled:!0,label:"Upload Cover Image for the Committee",name:"fileupload",class:"w-full text-sm text-white tracking-wide col-md-12",placeholder:"Enter Cover Image of the Committee",type:"file",accept:a(bt).join(", "),onChange:l[3]||(l[3]=s=>{a(ft)(s),C(s)})},null,8,["accept"]),a(j).fileupload?(t(),o("div",vo,[e("div",bo,[a(Se).previewUrl?(t(),o("img",{key:0,src:a(Se).previewUrl,alt:"File Preview",class:"file_attachment"},null,8,fo)):m("",!0)]),e("div",go,[e("p",null,[yo,e("span",xo,c(a(Se).name),1)]),e("p",null,[$o,e("span",wo,c(a(Ye)(a(Se).size)),1)]),e("p",null,[ko,e("span",Co,c(a(Se).type),1)]),e("p",null,[Mo,e("span",So,c(a(gt)(a(Se).lastModifiedDate)),1)])])])):m("",!0)])):m("",!0)]),e("button",Po,c(D.value==="create"?h.value==="folder"?"Create Folder":"Upload File":h.value==="folder"?"Update Folder":"Update File"),1)],32)])])])],512)])])):(t(),o("div",To,Do))}}});const Io=Re(Fo,[["__scopeId","data-v-01681b8d"]]),Me=r(R=>(Be("data-v-98f198d3"),R=R(),Ne(),R),"_withScopeId$2"),Ao={class:"row"},Eo={class:"col-md-12"},Uo={class:"card card-widget"},Ro={class:"card-header"},Vo=Me(()=>e("h1",{class:"h2 mb-2 lg:mb-0"},"Meetings",-1)),Lo={class:"card-tools"},jo=Me(()=>e("i",{class:"far fa fa-plus mr-2"},null,-1)),Oo=[jo],Bo={key:0,class:"card-body"},No={key:0,class:"products-list product-list-in-card pl-2 pr-2"},Ho={class:"product-img meeting-custom-size mr-2"},Ko={key:0,class:"calendar-icon w-full flex flex-col items-center justify-center mt-1 calendaheight"},zo={class:"month customonth"},Go={class:"day font-medium customday"},Qo={class:"year font-medium customyear"},Yo=Me(()=>e("div",null,[e("span",{class:"text-danger font-bold ml-2 mr-2"}," Upcoming ")],-1)),Wo={class:"product-info"},Zo={class:"text-primary text-bold"},Jo={key:0,class:"badge float-right bg-white"},Xo=["onClick"],ea={class:"badge float-right bg-white"},ta=Me(()=>e("i",{class:"far fa-eye"},null,-1)),sa={class:"badge float-right bg-white"},oa=["onClick"],aa=Me(()=>e("i",{class:"far fa-edit"},null,-1)),na=[aa],la={key:1,class:"product-description"},ia=["innerHTML"],da={key:2,class:"row border-top border-bottom border-warning d-flex justify-content-between align-items-center bg-warning"},ra={class:"text-primary bg-primary font-bold ml-2 mr-2"},ca={class:"text-primary font-bold ml-2 mr-2"},ua={key:0},ma=["onClick"],_a={key:3,class:"text-bold text-red"},pa={key:4,class:"text-bold text-red"},ha={class:"text-primary font-bold ml-2 mr-2"},va={class:"text-primary font-bold ml-2 mr-2"},ba=["onClick"],fa=Me(()=>e("i",{class:"far fa-eye"},null,-1)),ga={key:1},ya={class:"flex justify-center col-md-6"},xa={method:"dialog",class:"modal-box rounded-xl"},$a={class:"font-bold text-lg justify-center flex"},wa=Me(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),ka={class:"grid grid-cols-3 md:grid-cols-3 gap-2 p-2"},Ca={class:"col-span-3"},Ma={key:0,class:"flex flex-wrap -mx-2 mt-2"},Sa={class:"w-full md:w-1/2 px-1 md:px-2"},Pa={class:"w-full md:w-1/2 px-1 md:px-2"},Ta={key:1,class:"flex flex-wrap -mx-2 mt-2"},qa={class:"w-full md:w-1/2 px-1 md:px-2"},Da={key:2,class:"flex flex-wrap -mx-2 mt-2"},Fa={key:3,class:"flex flex-wrap -mx-2 mt-2"},Ia={class:"w-full md:w-1/3 px-1 md:px-2"},Aa={class:"w-full md:w-1/3 px-1 md:px-2"},Ea={class:"w-full md:w-1/3 px-1 md:px-2"},Ua=["onClick"],Ra={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},Va=ye({__name:"HomeDashboard",setup(R){const f=Ce(),E=b(!1),k=b("create"),D=b(null),h=b(null),V=Ve(),U=De().params.committeeId,$=b(""),w=pe({id:_().required(),date:_().required(),start_time:_().required(),end_time:_().required(),status:_().nullable(),heldstatus:_().nullable(),meeting_id:_().nullable()}),L=pe({title:_().required(),conference:_().required(),location:_().required(),link:_().nullable(),description:_().required(),status:_().required(),committee_id:_().required(),type:_().required(),schedules:Ee().of(w).required()}),{handleSubmit:ae,setErrors:B,setFieldValue:v,values:P}=Le({validationSchema:L,initialValues:{title:"",conference:"",location:"",description:"",link:null,committee_id:U,status:"unpublished",type:"single",schedules:[{id:Te(),date:"",start_time:"",end_time:"",status:null,heldstatus:null,meeting_id:null}]}}),de=r(()=>{var u;te(),k.value="create",E.value=!0,(u=h.value)==null||u.showModal()},"openCreateMeetingModal"),ee=r(u=>{var n;te(),D.value=u,v("title",u.title),v("conference",u.conference),v("location",u.location),v("description",u.description),v("type",u.type),v("status",u.status),v("schedules",u.schedules);const M={id:u.nearestSchedule.id,date:u.nearestSchedule.date,start_time:u.nearestSchedule.start_time,end_time:u.nearestSchedule.end_time,status:u.nearestSchedule.status,heldstatus:u.nearestSchedule.heldstatus,meeting_id:u.nearestSchedule.meeting_id};v("schedules",[...P.schedules,M]),u.conference==="Custom 3rd party Links"&&(ce(u.conference),v("link",u.link)),console.log("values",P),k.value="edit",E.value=!0,(n=h.value)==null||n.showModal()},"openEditMeetingModal"),re=r((u,M)=>{var l;te(),D.value=u,v("title",u.title),v("conference",u.conference),v("location",u.location),v("description",u.description),v("type",u.type),v("status",u.status),u.conference==="Custom 3rd party Links"&&(ce(u.conference),v("link",u.link));const n={id:M.id,date:M.date,start_time:M.start_time,end_time:M.end_time,status:M.status,heldstatus:M.heldstatus,meeting_id:M.meeting_id};v("schedules",[n]),console.log("values",P),k.value="edit",E.value=!0,(l=h.value)==null||l.showModal()},"openEditScheduleMeetingModal"),ve=[{name:"In Person",value:"No Vedio (Meeting in Person)"},{name:"3rd party",value:"Custom 3rd party Links"}],q=[{name:"Single",value:"single"},{name:"Find Date",value:"manual"}],ce=r(u=>{$.value=u},"handleConferenceTypeChange");we(async()=>{}),Z(()=>be);const y=Z(()=>ve),W=Z(()=>q),be=r(u=>ke({queryKey:["getCommitteeMeetingsKey"],queryFn:async()=>(await Ot(u,{paginate:"false"})).data}),"getMeetings"),ue=ae(async u=>{var M,n,l;console.log("values",u),console.log("setErrors",B);try{k.value==="create"?await Vt(u):(M=D.value)!=null&&M.id&&await Lt(u,(n=D.value)==null?void 0:n.id),await me(),te(),E.value=!1,(l=h.value)==null||l.close()}catch(d){d instanceof Ue?B(d.messages):V(d)}});function te(){v("title",""),v("conference",""),v("location",""),v("description",""),v("link",null),v("type","single"),v("status","unpublished"),v("schedules",[{id:Te(),date:"",start_time:"",end_time:"",status:null,heldstatus:null,meeting_id:null}])}r(te,"reseting");const he=r(()=>{Array.isArray(P.schedules)||(console.error("Invalid state: values.schedules is not an array."),v("schedules",[]));const u={id:Te(),date:"",start_time:"",end_time:"",status:null,heldstatus:null,meeting_id:null};v("schedules",[...P.schedules,u])},"addEmptySchedule"),se=r(u=>{if(P.schedules.length===1){mt({title:"Error",text:"You need at least one date to schedule.",type:"error"});return}const M=P.schedules.filter((n,l)=>l!==u);v("schedules",M)},"removeSchedule"),{isLoading:fe,data:ne,refetch:me}=be(U),p=b("published"),j=Z(()=>{if(!ne.value)return[];const u=new Date;return ne.value.filter(n=>p.value==="past"?new Date(n.created_at)<u:n.status.toLowerCase()===p.value).map(n=>{if(n.schedules&&n.schedules.length>0){const l=[...n.schedules].sort((g,X)=>{const z=new Date(g.date.split("-").reverse().join("-")),oe=new Date(X.date.split("-").reverse().join("-"));return z.getTime()-oe.getTime()});let d=l[0],s=1/0;return l.forEach(g=>{const z=new Date(g.date.split("-").reverse().join("-")).getTime()-u.getTime();Math.abs(z)<Math.abs(s)&&(s=z,d=g)}),{...n,nearestSchedule:d,schedules:l.filter(g=>g.id!==d.id)}}else return n})}),C=r(u=>{p.value=u},"filterMeetings"),O=r(u=>{switch(u){case"scheduled":return"text-primary";case"held":return"text-success";case"cancelled":return"text-danger";case"postponed":return"text-warning";default:return""}},"getHeldStatusClass"),le=r(async u=>{await jt(u),await me()},"onPublish");return(u,M)=>{const n=Xe("router-link");return t(),o(G,null,[e("div",Ao,[e("div",Eo,[e("div",Uo,[e("div",Ro,[Vo,e("div",Lo,[e("button",{type:"button",class:K(["btn btn-tool",{"btn-info":p.value==="published"}]),onClick:M[0]||(M[0]=l=>C("published"))}," Published ",2),e("button",{type:"button",class:K(["btn btn-tool",{"btn-info":p.value==="unpublished"}]),onClick:M[1]||(M[1]=l=>C("unpublished"))}," UnPublished ",2),e("button",{type:"button",class:K(["btn btn-tool",{"btn-info":p.value==="past"}]),onClick:M[2]||(M[2]=l=>C("past"))}," Past ",2),a(f).hasPermission(["create meeting"])?(t(),o("button",{key:0,type:"button",onClick:I(de,["prevent"]),class:"btn btn-tool"},Oo)):m("",!0)])]),a(f).hasPermission(["view meeting"])?(t(),o("div",Bo,[j.value.length>0?(t(),o("ul",No,[(t(!0),o(G,null,Y(j.value,l=>(t(),o("li",{class:"item",key:l.id},[e("div",Ho,[l!=null&&l.nearestSchedule?(t(),o("div",Ko,[e("div",zo,c(a(xt)(l.nearestSchedule.date)),1),e("div",Go,[e("span",null,c(a($t)(l.nearestSchedule.date)),1)]),e("div",Qo,[e("span",null,c(a(wt)(l.nearestSchedule.date)),1)])])):m("",!0),Yo]),e("div",Wo,[a(f).hasPermission(["view meeting"])?(t(),$e(n,{key:0,to:{name:"CommitteeMeetingDetails",params:{committeeId:a(U),meetingId:l.id,scheduleId:l.nearestSchedule.id}},class:"product-title"},{default:Ie(()=>[H(" Meeting: "),e("span",Zo,c(l.title),1),p.value==="unpublished"?(t(),o("span",Jo,[a(f).hasPermission(["publish meeting"])?(t(),o("a",{key:0,href:"",onClick:I(d=>le(l.id),["prevent"]),class:"text-blue-500 hover:text-blue-700 transition duration-150 ease-in-out"}," Publish ",8,Xo)):m("",!0)])):m("",!0),e("span",ea,[a(f).hasPermission(["view meeting"])?(t(),$e(n,{key:0,to:{name:"CommitteeMeetingDetails",params:{committeeId:a(U),meetingId:l.id,scheduleId:l.nearestSchedule.id}},class:"text-green-500 hover:text-green-700 transition duration-150 ease-in-out"},{default:Ie(()=>[ta]),_:2},1032,["to"])):m("",!0)]),e("span",sa,[a(f).hasPermission(["edit meeting"])?(t(),o("a",{key:0,href:"",onClick:I(d=>ee(l),["prevent"]),class:"text-blue-500 hover:text-blue-700 transition duration-150 ease-in-out"},na,8,oa)):m("",!0)])]),_:2},1032,["to"])):m("",!0),a(f).hasPermission(["edit meeting"])?(t(),o("span",la,[H(" Description: "),e("span",{class:"text-primary text-bold",innerHTML:l.description},null,8,ia)])):m("",!0),l!=null&&l.nearestSchedule?(t(),o("div",da,[e("div",null,[e("span",ra," Upcoming "+c(a(We)(l.nearestSchedule.date)),1),H(" || When: "),e("span",ca,c(a(Ze)(l.nearestSchedule.date)),1),H(" || Held Status: "),e("span",{class:K([O(l.nearestSchedule.heldstatus),"font-bold ml-2 mr-2"])},c(l.nearestSchedule.heldstatus),3)]),l!=null&&l.nearestSchedule?(t(),o("span",ua,[l.nearestSchedule.heldstatus==="scheduled"?(t(),o("button",{key:0,class:"btn btn-sm btn-warning font-bold ml-2 mr-2 mt-1 mb-1",onClick:I(d=>re(l,l.nearestSchedule),["prevent"])}," Postpone ",8,ma)):m("",!0)])):m("",!0)])):m("",!0),l.schedules.length?(t(),o("div",_a,"Other Schedules")):(t(),o("div",pa,"no Other Recuring Schdedules")),(t(!0),o(G,null,Y(l.schedules,d=>(t(),o("div",{class:K(["row","border-top","border-bottom","border-warning","d-flex","justify-content-between","align-items-center",a(kt)(d.date)?"bg-gray":""]),key:d.id},[e("div",null,[H(" Day: "),e("span",ha,c(a(We)(d.date)),1),H(" || When: "),e("span",va,c(a(Ze)(d.date)),1),H(" || Held Status: "),e("span",{class:K([O(d.heldstatus),"font-bold ml-2 mr-2"])},c(d.heldstatus),3)]),e("span",null,[d.heldstatus==="scheduled"&&a(f).hasPermission(["edit meeting"])?(t(),o("button",{key:0,class:"btn btn-sm btn-warning font-bold ml-2 mr-2 mt-1 mb-1",onClick:I(s=>re(l,d),["prevent"])}," Postpone ",8,ba)):m("",!0),a(f).hasPermission(["view meeting"])?(t(),$e(n,{key:1,to:{name:"CommitteeMeetingDetails",params:{committeeId:a(U),meetingId:l.id,scheduleId:d.id}},class:"mr-2 hover:text-info transition duration-150 ease-in-out"},{default:Ie(()=>[fa]),_:2},1032,["to"])):m("",!0)])],2))),128))])]))),128))])):(t(),o("div",ga," No meetings found for "+c(p.value),1))])):m("",!0)])])]),e("div",ya,[e("dialog",{id:"meetingmodal",class:"modal",ref_key:"MeetingModal",ref:h},[e("form",xa,[e("h3",$a,c(k.value=="create"?"Create Meeting":"Edit Meeting"),1),wa,e("div",{class:"overflow-auto p-4",style:et([{"max-height":"80vh"},k.value=="schedule"?"height:500px;":""])},[e("div",ka,[e("div",Ca,[e("form",{novalidate:"",onSubmit:M[3]||(M[3]=I((...l)=>a(ue)&&a(ue)(...l),["prevent"])),class:""},[k.value=="create"||k.value=="edit"?(t(),o("div",Ma,[e("div",Sa,[A(qe,{labeled:!0,label:"Meeting Title",name:"title",placeholder:"Enter Meeting Title",type:"text"})]),e("div",Pa,[A(Oe,{labeled:!0,name:"conference",label:"Select Meeting Type",placeholder:"Select Meeting Type",options:y.value,onSelectedItem:ce},null,8,["options"])])])):m("",!0),k.value=="create"||k.value=="edit"?(t(),o("div",Ta,[e("div",qa,[$.value==="Custom 3rd party Links"?(t(),$e(qe,{key:0,labeled:!0,label:"Meeting Link",name:"link",placeholder:"Enter Third Party Link",type:"text"})):m("",!0)]),e("div",{class:K(["w-full px-1 md:px-2",$.value==="Custom 3rd party Links"?"md:w-1/2":""])},[A(qe,{labeled:!0,label:"Meeting Location",name:"location",placeholder:"e.g 'Conference Room 6'",type:"text"})],2)])):m("",!0),k.value=="create"||k.value=="edit"?(t(),o("div",Da,[k.value=="create"||k.value=="edit"?(t(),$e(Ge,{key:0,label:"Meeting Description",name:"description",theme:"snow",placeholder:"Enter Meeting Description",toolbar:"full",contentType:"html",class:"col-span-3"})):m("",!0)])):m("",!0),k.value=="create"||k.value=="edit"?(t(),o("div",Fa,[A(Bt,{name:"type",label:"Meeting Schedule Type",placeholder:"Select Meeting Schedule Type",inline:!0,options:W.value,checked:a(P).type},null,8,["options","checked"])])):m("",!0),a(P).schedules?(t(!0),o(G,{key:4},Y(a(P).schedules,(l,d)=>(t(),o("div",{class:"flex flex-wrap -mx-2 mt-2 relative",key:d},[e("div",Ia,[A(Ae,{label:"Meeting Date "+(d+1),name:"schedules["+d+"].date",mode:"date-picker",modeltype:"dd-MM-yyyy",enabletimepicker:!1,placeholder:"Meeting Date"},null,8,["label","name"])]),e("div",Aa,[A(Ae,{label:"Meeting Start Time "+(d+1),name:"schedules["+d+"].start_time",mode:"time-picker",modeltype:"h:mm bbbb",is24:!1,enabletimepicker:!0,placeholder:"Select Start Time"},null,8,["label","name"])]),e("div",Ea,[A(Ae,{label:"Meeting End Time "+(d+1),name:"schedules["+d+"].end_time",mode:"time-picker",modeltype:"h:mm bbbb",is24:!1,enabletimepicker:!0,placeholder:"Select End Time"},null,8,["label","name"])]),k.value!=="schedule"?(t(),o("button",{key:0,type:"button",class:"absolute top-0 right-0 mt-2 mr-2 text-red-600 font-bold",onClick:I(s=>se(d),["prevent"])}," ✕ ",8,Ua)):m("",!0)]))),128)):m("",!0),a(P).type==="manual"&&k.value!=="schedule"?(t(),o("button",{key:5,type:"button",class:"btn btn-primary mt-4",onClick:he}," Add Another Data ")):m("",!0),e("button",Ra,c(k.value==="create"?"Create Meeting":"Edit Meeting"),1)],32)])])],4)])],512)])],64)}}});const La=Re(Va,[["__scopeId","data-v-98f198d3"]]),ja={class:"role-container w-100 d-flex justify-content-center"},Oa=["aria-expanded"],Ba={key:0,class:"dropdown-menu show justify-content","aria-labelledby":"role-status"},Na=["onClick"],Ha={key:1,class:"text-center"},Ka=ye({__name:"MemberPosition",props:{member:{},positions:{},disableRemotePosition:{}},emits:["position-updated"],setup(R,{emit:f}){const E=R,k=f,D=b(null),h=b(!1),V=r(L=>{L.stopPropagation(),h.value=!h.value},"toggleDropdown"),S=r(L=>{k("position-updated",{memberId:E.member.id,positionId:L.id}),h.value=!1},"updateRole"),U=Z(()=>{var L;return`bg-${(L=E.member)==null?void 0:L.position.name.toLowerCase()} text-white`}),$=Z(()=>{var L;return(L=E.member)==null?void 0:L.position.name}),w=Z(()=>E.positions);return(L,ae)=>{var B,v,P,de;return t(),o("div",ja,[$.value?(t(),o("div",{key:0,class:"dropdown",ref_key:"dropdownRef",ref:D},[e("button",{class:K(["btn btn-primary dropdown-toggle text-truncate w-100",U.value]),type:"button",onClick:V,"aria-haspopup":"true","aria-expanded":h.value},[e("i",{class:K(["mr-2 fa "+((B=E.member)==null?void 0:B.position.icon),"mr-2"])},null,2),H(" "+c((v=E.member)==null?void 0:v.position.name),1)],10,Oa),h.value?(t(),o("ul",Ba,[(t(!0),o(G,null,Y(w.value,ee=>(t(),o("li",{key:ee.name},[e("a",{href:"#",class:"dropdown-item",onClick:I(re=>S(ee),["prevent"])},[e("i",{class:K(["mr-2 fa "+ee.icon,"mr-2"])},null,2),H(" "+c(ee.name),1)],8,Na)]))),128))])):m("",!0)],512)):(t(),o("div",Ha,[e("i",{class:K(["mr-2 fa "+((P=E.member)==null?void 0:P.position.icon),"mr-2"])},null,2),H(" "+c((de=E.member)==null?void 0:de.position.name),1)]))])}}});const za=Re(Ka,[["__scopeId","data-v-82d07b33"]]),xe=r(R=>(Be("data-v-a23218df"),R=R(),Ne(),R),"_withScopeId$1"),Ga={class:"card"},Qa={class:"card-header flex items-center"},Ya=xe(()=>e("h2",{class:"card-header-title h3"},"Committee Members",-1)),Wa={class:"ml-auto flex items-center space-x-2"},Za={class:"container-fluid"},Ja={class:"row"},Xa={class:"card card-outline card-primary h-100"},en={class:"card-body box-profile"},tn={class:"text-center"},sn={class:"profile-username text-center text-primary"},on=["onClick"],an=["onClick"],nn=xe(()=>e("i",{class:"far fa-eye"},null,-1)),ln=[nn],dn={class:"text-muted text-center text-bold"},rn={key:0,class:"mt-3"},cn=xe(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Position ",-1)),un={class:"text-center"},mn={key:1,class:"mt-3"},_n=xe(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Position ",-1)),pn={class:"text-center"},hn={class:"mt-3"},vn=xe(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Last Updated ",-1)),bn={class:"text-center text-primary text-small"},fn={class:"flex justify-center col-md-6"},gn={method:"dialog",class:"modal-box rounded-xl"},yn=xe(()=>e("h3",{class:"font-bold text-lg justify-center flex"},c("Add Members"),-1)),xn=xe(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),$n={class:"w-full mt-6 p-2"},wn={class:"font-thin text-sm flex flex-col items-center gap-6"},kn={key:0,class:"message"},Cn=xe(()=>e("button",{type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},c("Add Members"),-1)),Mn=ye({__name:"Members",setup(R){const f=Ce(),E=De(),k=tt(),D=Ve(),h=b("create"),V=E.params.committeeId,S=b(!1),U=b(null),$=b([]),w=b([]),{errorMessage:L}=Pe("assignees"),ae=pe({id:_().nullable(),position_id:_().nullable(),committee_id:st().required(),members:Ee().of(_()).nullable()}),{handleSubmit:B,setErrors:v,setFieldValue:P,values:de}=Le({validationSchema:ae,initialValues:{id:"",position_id:"",committee_id:V,members:[]}}),ee=r(()=>{P("members",$.value)},"selectedUsers"),re=r(()=>{P("members",$.value)},"removeselectedUsers"),ve=r(p=>{var C;const j=p.members.map(O=>O.user.id.toString());$.value=j,P("members",$.value),h.value="edit",S.value=!0,(C=U.value)==null||C.showModal()},"openEditMembersModal"),q=B(async(p,{resetForm:j})=>{var C;try{P("members",$.value);const O={committee_id:p.committee_id,members:p.members};if(h.value==="create")await Ft(O,V);else if(h.value==="edit")await It(O,V);else if(h.value==="position"){const le={id:p.id,position_id:p.position_id};await At(le,V)}await he(),ce(),(C=U.value)==null||C.close()}catch(O){O instanceof Ue?v(O.messages):D(O)}}),ce=r(()=>{h.value="create",S.value=!1,$.value=[],P("members",[]),P("position_id","")},"reset"),y=Z(()=>{var j;const p=[];return w.value&&((j=w.value)==null?void 0:j.length)>0&&w.value.reduce((C,O)=>(C.push({id:O.id,name:`${O.full_name}`}),C),p),p}),W=r(async()=>{const p=await Nt({paginate:"false"});w.value=p.data},"getUsers");we(async()=>{window.dispatchEvent(new CustomEvent("updateTitle",{detail:"Members"})),W()});const be=r(()=>ke({queryKey:["getCommitteeMembersKey",V],queryFn:async()=>(await ze(V,{paginate:"false"})).data}),"getCommitteeMembers"),{isLoading:ue,data:te,refetch:he}=be(),se=b([]),fe=r(async()=>{const p=await Et({paginate:"false"});se.value=p.data},"getPositions");we(async()=>{await fe()});const ne=r(p=>{ce(),h.value="position",P("id",p.memberId),P("position_id",p.positionId),q()},"handlePositionUpdated"),me=r(p=>{k.push({name:"ProfileDetails",params:{userId:p.id,profileId:p.profile.id}})},"openUserProfile");return(p,j)=>(t(),o(G,null,[e("div",Ga,[e("div",Qa,[Ya,e("div",Wa,[e("button",{class:"btn btn-secondary btn-sm",onClick:j[0]||(j[0]=I(C=>ve({members:a(te)}),["prevent"]))}," Update Members ")])]),e("div",Za,[e("div",Ja,[(t(!0),o(G,null,Y(a(te),(C,O)=>(t(),o("div",{class:"col-lg-3 col-md-4 col-sm-6 mb-3",key:O},[e("div",Xa,[e("div",en,[e("div",tn,[e("h3",sn,[e("a",{href:"",onClick:I(le=>{var u,M;return((M=(u=a(f))==null?void 0:u.user)==null?void 0:M.id)===C.user.id?me(C.user):""},["prevent"])},c(C.user.full_name),9,on),a(f).hasPermission(["view committee member profile"])?(t(),o("button",{key:0,type:"button",onClick:I(le=>me(C.user),["prevent"]),title:"",class:"mx-2 btn btn-sm btn-primary"},ln,8,an)):m("",!0)]),e("p",dn,c(C.position.name),1)]),a(f).hasPermission(["assign committee position"])?(t(),o("div",rn,[cn,e("div",un,[A(za,{member:C,positions:se.value,disableRemotePosition:0,onPositionUpdated:ne},null,8,["member","positions"])])])):(t(),o("div",mn,[_n,e("div",pn,[e("i",{class:K(["mr-2 fa "+C.position.icon,"mr-2"])},null,2),H(" "+c(C.position.name),1)])])),e("div",hn,[vn,e("p",bn,c(a(je)(C.updated_at,null)),1)])])])]))),128))])])]),e("div",fn,[e("dialog",{id:"membersmodal",class:"modal",ref_key:"membersmodal",ref:U},[e("form",gn,[yn,xn,e("div",$n,[e("div",wn,[e("form",{novalidate:"",onSubmit:j[4]||(j[4]=I((...C)=>a(q)&&a(q)(...C),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",{class:K(["multiselect-container",{error:!!a(L)}])},[A(a(Ke),{id:"members",modelValue:$.value,"onUpdate:modelValue":j[1]||(j[1]=C=>$.value=C),mode:"tags",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:y.value,valueProp:"id",trackBy:"id",label:"name",class:K(["multiselect-container",{error:!!a(L)}]),onSelect:j[2]||(j[2]=C=>ee()),onDeselect:j[3]||(j[3]=C=>re())},null,8,["modelValue","options","class"]),a(L)?(t(),o("div",kn,c(a(L)),1)):m("",!0)],2),Cn],32)])])])],512)])],64))}});const Sn=Re(Mn,[["__scopeId","data-v-a23218df"]]),Pn={key:0},Tn={class:"card h-full"},qn={class:"card-header flex items-center"},Dn=e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"}," Committee Polls ")],-1),Fn={key:0,class:"flex items-center space-x-2"},In=e("i",{class:"far fa fa-plus mr-2"},null,-1),An=e("span",{class:"sr-only"},"Add poll",-1),En={class:"card-container"},Un={key:0},Rn={key:1},Vn={class:"row overflow-auto p-4",style:{"max-height":"100vh"}},Ln={class:"card card-outline card-primary h-100"},jn={class:"card-header"},On={class:"card-tools"},Bn=["onClick"],Nn=e("i",{class:"fas fa-edit"},null,-1),Hn=[Nn],Kn={class:"card-body"},zn={class:"text-primary tex-bold uppercase"},Gn=e("strong",{class:"text-primary"},"Question:",-1),Qn={class:"mt-2 text-primary text-bold"},Yn={class:""},Wn=e("strong",null,"Answer Options:",-1),Zn={class:"row"},Jn={class:"col-6"},Xn={class:"list-unstyled text-success"},el={class:"col-6"},tl={class:"list-unstyled text-success"},sl={class:"d-flex justify-content-between"},ol=e("strong",null,"Due Date:",-1),al=e("strong",null,"Status:",-1),nl=e("strong",null,"Vote:",-1),ll=["innerHTML"],il={class:""},dl=e("strong",null,"Assignees:",-1),rl={class:"row"},cl={class:"col-6"},ul={class:"list-unstyled"},ml={class:"col-6"},_l={class:"list-unstyled"},pl=e("strong",null,"Description:",-1),hl=["innerHTML"],vl={class:"flex justify-center items-center min-h-screen"},bl={method:"dialog",class:"modal-box rounded-xl relative bg-white shadow-xl"},fl={class:"font-bold text-lg text-center"},gl=e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1),yl={class:"overflow-auto p-4",style:{"max-height":"80vh"}},xl={class:"grid grid-cols-2 md:grid-cols-2 gap-4 p-2"},$l={class:"col-span-2"},wl={class:"flex flex-wrap -mx-2 mt-2"},kl={class:"w-full md:w-1/2 px-1 md:px-2"},Cl={class:"w-full md:w-1/2 px-1 md:px-2"},Ml={class:"flex flex-wrap -mx-2 mt-2"},Sl={class:"w-full md:w-1/3 px-1 md:px-2 text-center"},Pl=e("h2",{class:"font-bold text-sm text-center"},"Click to Add Options",-1),Tl=e("h4",{class:"text-info font-semibold"},"Your Options",-1),ql={key:0},Dl={key:0,class:"w-full md:w-2/3 px-1 md:px-2 flex flex-col"},Fl=["onClick"],Il={class:"flex flex-wrap -mx-2 mt-2"},Al={class:"w-full md:w-1/2 px-1 md:px-2"},El={class:"w-full md:w-1/2 px-1 md:px-2"},Ul={key:0},Rl=e("h2",{class:"font-bold text-primary text-sm text-center"}," All Members Will be assiged this Poll ",-1),Vl=[Rl],Ll={key:0,class:"form-group col-span-3"},jl=e("label",{class:"text-bold font-medium tracking-wide"}," People To Vote ",-1),Ol={key:0,class:"message"},Bl={key:1},Nl={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},Hl={key:1},Kl=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),zl=[Kl],Gl=ye({__name:"Pollp",setup(R){const f=Ce(),E=De(),k=b(!1),D=b("create"),h=E.params.committeeId,V=b(null),S=b([]),U=b(null),$=b("single"),w=b("individuals"),L=b([]),ae=b([]),B=b(""),v=Ve();Pe("duedate");const{errorMessage:P}=Pe("pollassignees"),de=pe({id:_().required(),title:_().required(),poll_id:_().nullable(),deleted_at:_().nullable(),created_at:_().nullable(),updated_at:_().nullable()}),ee=pe({id:_().required(),full_name:_().required()}),re=pe({id:_().required(),poll_id:_().nullable(),member_id:_().required(),user:ee}),ve=pe({committee_id:_().nullable(),question:_().required(),description:_().required(),questionoptiontype:_().required(),optionstatus:_().required(),options:Ee().of(de).required(),duedate:_().required(),assigneetype:_().required(),assigneestatus:_().required(),pollassignees:Ee().of(re).nullable(),status:_().required()}),{handleSubmit:q,setErrors:ce,setFieldValue:y,values:W}=Le({validationSchema:ve,initialValues:{committee_id:h,question:"",description:"",questionoptiontype:"",optionstatus:"",options:[{id:Te(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null}],duedate:"",assigneetype:"",assigneestatus:"",pollassignees:[],status:"inactive"}});Pe("options");const be=r(()=>{var i;ne(),D.value="create",k.value=!0,(i=U.value)==null||i.showModal()},"openCreatePollModal"),ue=r(i=>{var F;ne(),V.value=i.id,y("question",i.question),y("description",i.description),y("questionoptiontype",i.questionoptiontype),y("optionstatus",i.optionstatus),y("duedate",i.duedate),y("assigneetype",i.assigneetype),y("assigneestatus",i.assigneestatus),y("status",i.status),y("options",i.options),w.value=i.assigneestatus,te(i.pollassignees),D.value="edit",k.value=!0,(F=U.value)==null||F.showModal()},"openEditPollModal");function te(i){S.value=i.map(F=>({id:F.id,full_name:F.user.full_name,poll_id:F.poll_id,member_id:F.member_id,user:F.user})),y("pollassignees",S.value)}r(te,"mappollassigneesToReactiveRef");const he=r(()=>{y("pollassignees",S.value)},"selectedMembers"),se=r(()=>{y("pollassignees",S.value)},"removeselectedUsers"),fe=q(async(i,{resetForm:F})=>{var x;try{console.log("dddd");const N={committee_id:i.committee_id,question:i.question,description:i.description,questionoptiontype:i.questionoptiontype,optionstatus:i.optionstatus,options:i.options,duedate:i.duedate,assigneetype:i.assigneetype,assigneestatus:i.assigneestatus,pollassignees:i.pollassignees,status:i.status};if(D.value==="create")await Ht(N,h);else{const Q=V.value;await Kt(N,Q)}(x=U.value)==null||x.close(),await Qe(),ne()}catch(N){N instanceof Ue?ce(N.messages):v(N)}}),ne=r(()=>{D.value="create",k.value=!1,V.value=null,$.value="single",w.value="all_members",S.value=[],y("committee_id",h),y("question",""),y("description",""),y("questionoptiontype","single"),y("optionstatus","single"),y("options",[{id:Te(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null}]),y("duedate",""),y("assigneetype","all_members"),y("assigneestatus","all_members"),y("pollassignees",[]),y("status","inactive")},"reset"),me=r(i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),"formattedDateTime"),p=r(i=>j(i)?"bg-danger":"bg-success","dateBadgeClass"),j=r(i=>{const F=new Date,x=new Date(i);return F>x},"hasDueDatePassed"),C=r(i=>{if(!i.votes||i.votes.length===0)return"No votes yet";const F=i.votes.length,x=i.pollassignees.length;if(F>x)return console.error("Total votes exceed total members, which is unexpected."),"Voting data error";const N=i.votes.reduce((_e,Fe)=>{const He=JSON.parse(Fe.option_id).id;return _e[He]=(_e[He]||0)+1,_e},{}),Q=Object.keys(N).reduce((_e,Fe)=>N[_e]>N[Fe]?_e:Fe);if(!i.options.find(_e=>_e.id===Q))return console.error("Most voted option not found in poll options."),"Voting data error";const dt=x-F;return(N[Q]/F*100).toFixed(1),`${i.options.map(_e=>`${((N[_e.id]||0)/F*100).toFixed(1)}% voted for ${_e.title}`).join("<br>")}<br>Total votes: ${F} / ${dt} not yet`},"calculateVoteStats"),O=r(i=>{switch(i){case"Backlog":return"badge bg-warning";case"Pending":return"badge bg-info";case"On Progress":return"badge bg-primary";case"Completed":return"badge bg-success";default:return"badge"}},"statusClass"),le=[{name:"Single Answer",value:"single"},{name:"Multiple Answers: More than one",value:"multiple"}],u=[{name:"Individuals",value:"individuals"},{name:"Assign All Committee Members",value:"all_members"}],M=Z(()=>le),n=Z(()=>u),l=r(i=>{ae.value=[],L.value=[],s(),$.value=i,y("questionoptiontype",i),y("optionstatus",i)},"handleQuestionOptionTypeChange"),d=r(i=>{S.value=[],B.value=i,w.value=i,y("assigneetype",i),y("assigneestatus",i),y("pollassignees",[])},"handleAssigneeTypeChange"),s=r(()=>{Array.isArray(W.options)||(console.error("Invalid state: values.options is not an array."),y("options",[]));const i={id:Te(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null};y("options",[...W.options,i])},"addEmptyOption");Je(()=>W.options,i=>{});const T=r(i=>{const F=W.options.filter(x=>x.id!==i);console.log("vv",F),y("options",F)},"removeOption"),g=r(()=>ke({queryKey:["getPollMembershisKey"],queryFn:async()=>(await ze(h,{paginate:"false"})).data.map(ot())}),"getMembers"),{isLoading:X,data:z,refetch:oe}=g(),ot=r(()=>i=>({id:i.id,full_name:i.user.full_name,member_id:i.id,user:i.user}),"formatEvent"),at=Z(()=>{var i;return!z.value||((i=z.value)==null?void 0:i.length)===0?[]:z.value}),nt=r(()=>ke({queryKey:["getCommitteePollsKey",h],queryFn:async()=>(await zt(h,{paginate:"false"})).data}),"getCommitteePolls"),{isLoading:lt,data:it,refetch:Qe}=nt();return we(async()=>{oe(),Qe()}),(i,F)=>a(f).hasPermission(["view poll"])?(t(),o("div",Pn,[e("div",Tn,[e("div",qn,[Dn,a(f).hasPermission(["create poll"])?(t(),o("div",Fn,[e("button",{type:"button",onClick:I(be,["prevent"]),class:"btn btn-tool"},[In,H(),An])])):m("",!0)]),e("div",En,[a(lt)?(t(),o("div",Un,"Loading Committee Polls...")):(t(),o("div",Rn,[e("div",Vn,[(t(!0),o(G,null,Y(a(it),(x,N)=>(t(),o("div",{class:"col-lg-12 col-md-12 col-sm-12 mb-2",key:N},[e("div",Ln,[e("div",jn,[e("div",On,[a(f).hasPermission(["edit poll"])?(t(),o("button",{key:0,class:"btn btn-tool",onClick:I(Q=>ue(x),["prevent"])},Hn,8,Bn)):m("",!0)])]),e("div",Kn,[e("div",zn,[Gn,e("p",Qn,c(x.question),1),e("div",Yn,[Wn,e("div",Zn,[e("div",Jn,[e("ul",Xn,[(t(!0),o(G,null,Y(x.options.slice(0,Math.ceil(x.options.length/2)),(Q,ge)=>(t(),o("li",{key:Q.id},c(ge+1)+". "+c(Q.title),1))),128))])]),e("div",el,[e("ul",tl,[(t(!0),o(G,null,Y(x.options.slice(Math.ceil(x.options.length/2)),(Q,ge)=>(t(),o("li",{key:Q.id},c(ge+1+Math.ceil(x.options.length/2))+". "+c(Q.title),1))),128))])])])])]),e("div",sl,[e("div",null,[ol,e("p",{class:K(p(x.duedate))},c(me(x.duedate)),3)]),e("div",null,[al,e("p",null,[e("span",{class:K(O(x.status))},c(x.status),3)])]),e("div",null,[nl,e("p",null,[e("span",{innerHTML:C(x)},null,8,ll)])])]),e("div",il,[dl,e("div",rl,[e("div",cl,[e("ul",ul,[(t(!0),o(G,null,Y(x.pollassignees.slice(0,Math.ceil(x.pollassignees.length/2)),(Q,ge)=>(t(),o("li",{key:Q.id},c(ge+1)+". "+c(Q.user.full_name),1))),128))])]),e("div",ml,[e("ul",_l,[(t(!0),o(G,null,Y(x.pollassignees.slice(Math.ceil(x.pollassignees.length/2)),(Q,ge)=>(t(),o("li",{key:Q.id},c(ge+1+Math.ceil(x.pollassignees.length/2))+". "+c(Q.user.full_name),1))),128))])])])]),e("div",null,[pl,e("p",{innerHTML:x.description,class:"mt-2"},null,8,hl)])])])]))),128))])]))])]),e("div",vl,[e("dialog",{id:"pollmodal",class:"modal w-full max-w-4xl mx-auto p-0",ref_key:"PollModal",ref:U},[e("form",bl,[e("h3",fl,c(D.value=="create"?"Create Poll":"Edit Poll"),1),gl,e("div",yl,[e("div",xl,[e("div",$l,[e("form",{novalidate:"",onSubmit:F[3]||(F[3]=I((...x)=>a(fe)&&a(fe)(...x),["prevent"])),class:""},[A(qe,{labeled:!0,label:"Poll Question",name:"question",placeholder:"Enter Poll Question",type:"text"}),A(Ge,{label:"Poll description",name:"description",theme:"snow",placeholder:"Enter Poll Description",toolbar:"full",contentType:"html",class:"col-span-2"}),e("div",wl,[e("div",kl,[A(Oe,{labeled:!0,name:"questionoptiontype",label:"Select Allowed Answers On the Question",placeholder:"Select Allowed Answers On the Question",options:M.value,onSelectedItem:l},null,8,["options"])]),e("div",Cl,[A(Ae,{label:"Poll Due Date",name:"duedate",flow:["month"],placeholder:"Enter Poll Due Date & Time"})])]),e("div",Ml,[e("div",Sl,[e("div",null,[Pl,e("button",{onClick:I(s,["prevent"]),class:"btn btn-primary h-10 mt-2"}," Add Option ")]),Tl,a(W).options?(t(),o("ul",ql,[(t(!0),o(G,null,Y(a(W).options,(x,N)=>(t(),o("li",{class:"text-primary font-bold text-justify",key:N},c(N+1)+"."+c(x==null?void 0:x.title),1))),128))])):m("",!0)]),a(W).options?(t(),o("div",Dl,[(t(!0),o(G,null,Y(a(W).options,(x,N)=>(t(),o("div",{class:"form-group flex items-center mb-2",key:N},[A(Ut,{labeled:!0,label:"Title for option "+(N+1),name:"options["+N+"].title",placeholder:"Enter title",class:"flex-grow",type:"text"},null,8,["label","name"]),e("a",{href:"#",class:"ml-2 text-red-600 font-bold mt-8",onClick:I(Q=>T(x.id),["prevent"])}," ✕ ",8,Fl)]))),128))])):m("",!0)]),e("div",Il,[e("div",Al,[A(Oe,{labeled:!0,name:"assigneetype",label:"Select Assignee Type",placeholder:"Select Assignee Type",options:n.value,onSelectedItem:d},null,8,["options"])]),e("div",El,[w.value==="all_members"?(t(),o("div",Ul,Vl)):m("",!0)])]),w.value==="individuals"?(t(),o("div",Ll,[jl,e("div",{class:K(["multiselect-container",{error:!!a(P)}])},[A(a(Ke),{id:"pollassignees",modelValue:S.value,"onUpdate:modelValue":F[0]||(F[0]=x=>S.value=x),mode:"tags",required:"",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:at.value,valueProp:"member_id",trackBy:"member_id",label:"full_name",class:K(["col-span-3",["multiselect-container",{error:!!a(P)}]]),object:!0,onSelect:F[1]||(F[1]=x=>he()),onDeselect:F[2]||(F[2]=x=>se())},null,8,["modelValue","options","class"]),a(P)?(t(),o("div",Ol,c(a(P)),1)):m("",!0)],2)])):m("",!0),S.value&&S.value.length||w.value==="all_members"?(t(),o("div",Bl,[e("button",Nl,c(D.value=="create"?"Create Poll":"Edit Poll"),1)])):m("",!0)],32)])])])])],512)])])):(t(),o("div",Hl,zl))}});const ie=r(R=>(Be("data-v-e4768323"),R=R(),Ne(),R),"_withScopeId"),Ql={key:0},Yl={class:"card h-full"},Wl={class:"card-header flex items-center"},Zl=ie(()=>e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"},"Committee Tasks")],-1)),Jl={key:0,class:"flex items-center space-x-2"},Xl=ie(()=>e("i",{class:"far fa fa-plus mr-2"},null,-1)),ei=ie(()=>e("span",{class:"sr-only"},"Add task",-1)),ti={class:"card-container"},si={key:0},oi={key:1},ai={class:"row overflow-auto p-4",style:{"max-height":"100vh"}},ni={class:"card card-outline card-primary h-100"},li={class:"card-header"},ii={class:"card-tools"},di=["onClick"],ri=ie(()=>e("i",{class:"fas fa-edit"},null,-1)),ci=[ri],ui={class:"card-body"},mi={class:"text-primary text-bold uppercase"},_i={class:"d-flex justify-content-between"},pi=ie(()=>e("strong",null,"Due Date:",-1)),hi=ie(()=>e("strong",null,"Status:",-1)),vi={key:0,class:"badge bg-warning"},bi={key:1,class:"badge bg-info"},fi={key:2,class:"badge bg-primary"},gi={key:3,class:"badge bg-success"},yi={class:""},xi=ie(()=>e("strong",null,"Assignees:",-1)),$i={class:"row"},wi={class:"col-6"},ki={class:"list-unstyled"},Ci={class:"col-6"},Mi={class:"list-unstyled"},Si=ie(()=>e("strong",null,"Description:",-1)),Pi=["innerHTML"],Ti={class:"flex justify-center col-md-6"},qi={method:"dialog",class:"modal-box rounded-xl"},Di={class:"font-bold text-lg justify-center flex"},Fi=ie(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),Ii={class:"overflow-auto p-4",style:{"max-height":"80vh"}},Ai={class:"grid grid-cols-3 md:grid-cols-3 gap-2 p-2"},Ei={class:"col-span-3"},Ui={class:"flex flex-wrap -mx-2 mt-2"},Ri={class:"w-full md:w-1/2 px-1 md:px-2"},Vi={class:"w-full md:w-1/2 px-1 md:px-2"},Li={class:"flex flex-wrap -mx-2 mt-2"},ji={class:"w-full md:w-1/2 px-1 md:px-2"},Oi={class:"w-full md:w-1/2 px-1 md:px-2"},Bi={key:0},Ni=ie(()=>e("h2",{class:"font-bold text-primary text-sm text-center"},"All Members Will be assigned this Task",-1)),Hi=[Ni],Ki={key:0,class:"form-group col-span-3"},zi=ie(()=>e("label",{class:"text-bold font-medium tracking-wide"},"People to Assign",-1)),Gi={key:0,class:"message"},Qi={key:1},Yi={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},Wi={key:1},Zi=ie(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),Ji=[Zi],Xi=ye({__name:"Taskp",setup(R){const f=Ce(),E=De(),k=b(!1),D=b("create"),h=E.params.committeeId,V=b(null),S=b([]),U=b(null),$=b(null),w=b("individuals"),L=b(""),ae=Ve();Pe("duedate");const{errorMessage:B}=Pe("taskassignees"),v=r(s=>{const T=new Date,g=new Date(s);return T>g},"hasDueDatePassed"),P=pe({id:_().nullable(),full_name:_().nullable()}),de=pe({id:_().nullable(),task_id:_().nullable(),member_id:_().nullable(),user:P}),ee=pe({committee_id:_().nullable(),title:_().required(),duedate:_().required(),description:_().required(),status:_().required(),assigneetype:_().required(),assigneestatus:_().required(),taskassignees:Ee().of(de).nullable()}),{handleSubmit:re,setErrors:ve,setFieldValue:q,values:ce}=Le({validationSchema:ee,initialValues:{committee_id:h,title:"",duedate:"",description:"",status:"pending",assigneetype:"",assigneestatus:"",taskassignees:[]}}),y=r(()=>{var s;se(),D.value="create",k.value=!0,(s=$.value)==null||s.showModal()},"openCreateTaskModal"),W=r(s=>{var T;se(),U.value=s,V.value=s.id,q("title",s.title),q("duedate",s.duedate),q("description",s.description),q("status",s.status),q("assigneetype",s.assigneetype),q("assigneestatus",s.assigneestatus),w.value=s.assigneestatus,be(s.taskassignees),D.value="edit",k.value=!0,(T=$.value)==null||T.showModal()},"openEditTaskModal");function be(s){S.value=s.map(T=>({id:T.id,full_name:T.user.full_name,task_id:T.task_id,member_id:T.member_id,user:T.user})),q("taskassignees",S.value)}r(be,"maptaskassigneesToReactiveRef");const ue=r(()=>{q("taskassignees",S.value)},"selectedMembers"),te=r(()=>{q("taskassignees",S.value)},"removeselectedUsers"),he=re(async(s,{resetForm:T})=>{var g;try{const X={committee_id:s.committee_id,title:s.title,duedate:s.duedate,description:s.description,status:s.status,assigneetype:s.assigneetype,assigneestatus:s.assigneestatus,taskassignees:s.taskassignees};if(D.value==="create")await Gt(X,h);else{const z=V.value;await Qt(X,z)}(g=$.value)==null||g.close(),await d(),se()}catch(X){X instanceof Ue?ve(X.messages):ae(X)}}),se=r(()=>{D.value="create",k.value=!1,V.value=null,w.value="all_members",S.value=[],q("committee_id",h),q("title",""),q("duedate",""),q("description","description ................"),q("status","pending"),q("assigneetype","all_members"),q("assigneestatus","all_members"),q("taskassignees",[])},"reset"),fe=r(s=>{S.value=[],L.value=s,w.value=s,q("assigneetype",s),q("assigneestatus",s),q("taskassignees",[])},"handleAssigneeTypeChange"),ne=[{name:"Individuals",value:"individuals"},{name:"Assign All Committee Members",value:"all_members"}],me=Z(()=>ne),p=r(()=>ke({queryKey:["getCommitteeMembersKey"],queryFn:async()=>(await ze(h,{paginate:"false"})).data.map(le())}),"getMembers"),{isLoading:j,data:C,refetch:O}=p(),le=r(()=>s=>({id:s.id,full_name:s.user.full_name,member_id:s.id,user:s.user}),"formatEvent"),u=Z(()=>{var s;return!C.value||((s=C.value)==null?void 0:s.length)===0?[]:C.value}),M=r(()=>ke({queryKey:["getCommitteeTasksKey",h],queryFn:async()=>(await Yt(h,{paginate:"false"})).data}),"getCommitteeTasks"),{isLoading:n,data:l,refetch:d}=M();return we(async()=>{d(),O()}),(s,T)=>a(f).hasPermission(["view task"])?(t(),o("div",Ql,[e("div",Yl,[e("div",Wl,[Zl,a(f).hasPermission(["create task"])?(t(),o("div",Jl,[e("button",{type:"button",onClick:I(y,["prevent"]),class:"btn btn-tool"},[Xl,H(),ei])])):m("",!0)]),e("div",ti,[a(n)?(t(),o("div",si,"Loading Committee Tasks...")):(t(),o("div",oi,[e("div",ai,[(t(!0),o(G,null,Y(a(l),(g,X)=>(t(),o("div",{class:"col-lg-12 col-md-12 col-sm-12 mb-2",key:X},[e("div",ni,[e("div",li,[e("div",ii,[a(f).hasPermission(["edit task"])?(t(),o("button",{key:0,class:"btn btn-tool",onClick:I(z=>W(g),["prevent"])},ci,8,di)):m("",!0)])]),e("div",ui,[e("div",mi,c(g.title),1),e("div",_i,[e("div",null,[pi,e("p",{class:K({"text-danger":v(g.duedate)&&g.status!=="completed","text-success":!v(g.duedate)||g.status==="completed"})},c(a(je)(g.duedate)),3)]),e("div",null,[hi,e("p",null,[g.status==="backlog"?(t(),o("span",vi,"Backlog")):g.status==="pending"?(t(),o("span",bi,"Pending")):g.status==="onprogress"?(t(),o("span",fi,"On Progress")):g.status==="completed"?(t(),o("span",gi,"Completed")):m("",!0)])])]),e("div",yi,[xi,e("div",$i,[e("div",wi,[e("ul",ki,[(t(!0),o(G,null,Y(g.taskassignees.slice(0,Math.ceil(g.taskassignees.length/2)),(z,oe)=>(t(),o("li",{key:z.id},c(oe+1)+". "+c(z.user.full_name),1))),128))])]),e("div",Ci,[e("ul",Mi,[(t(!0),o(G,null,Y(g.taskassignees.slice(Math.ceil(g.taskassignees.length/2)),(z,oe)=>(t(),o("li",{key:z.id},c(oe+1+Math.ceil(g.taskassignees.length/2))+". "+c(z.user.full_name),1))),128))])])])]),e("div",null,[Si,e("p",{innerHTML:g.description,class:"mt-2"},null,8,Pi)])])])]))),128))])]))])]),e("div",Ti,[e("dialog",{id:"taskmodal",class:"modal",ref_key:"TaskModal",ref:$},[e("form",qi,[e("h3",Di,c(D.value=="create"?"Create Committee Task":"Edit Committee Task"),1),Fi,e("div",Ii,[e("div",Ai,[e("div",Ei,[e("form",{novalidate:"",onSubmit:T[3]||(T[3]=I((...g)=>a(he)&&a(he)(...g),["prevent"])),class:""},[e("div",Ui,[e("div",Ri,[A(qe,{labeled:!0,label:"Task Title",name:"title",placeholder:"Enter Task Title",type:"text"})]),e("div",Vi,[A(Ae,{label:"Task Due Date",name:"duedate",flow:["month"],placeholder:"Task Due Date"})])]),A(Ge,{label:"Task Description",name:"description",theme:"snow",placeholder:"Enter Task Description",toolbar:"full",contentType:"html",class:"col-span-3"}),e("div",Li,[e("div",ji,[A(Oe,{labeled:!0,name:"assigneetype",label:"Select Assignee Type",placeholder:"Select Assignee Type",options:me.value,onSelectedItem:fe},null,8,["options"])]),e("div",Oi,[w.value==="all_members"?(t(),o("div",Bi,Hi)):m("",!0)])]),w.value==="individuals"?(t(),o("div",Ki,[zi,e("div",{class:K(["multiselect-container",{error:!!a(B)}])},[A(a(Ke),{id:"taskassignees",modelValue:S.value,"onUpdate:modelValue":T[0]||(T[0]=g=>S.value=g),mode:"tags",required:"",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:u.value,valueProp:"member_id",trackBy:"member_id",label:"full_name",class:K(["col-span-3",["multiselect-container",{error:!!a(B)}]]),object:!0,onSelect:T[1]||(T[1]=g=>ue()),onDeselect:T[2]||(T[2]=g=>te())},null,8,["modelValue","options","class"]),a(B)?(t(),o("div",Gi,c(a(B)),1)):m("",!0)],2)])):m("",!0),S.value&&S.value.length||w.value==="all_members"?(t(),o("div",Qi,[e("button",Yi,c(D.value=="create"?"Create Task":"Edit Task"),1)])):m("",!0)],32)])])])])],512)])])):(t(),o("div",Wi,Ji))}});const ed=Re(Xi,[["__scopeId","data-v-e4768323"]]),td={key:0},sd={class:"row"},od={class:"col-md-6"},ad={class:"col-md-6"},nd={key:1},ld=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),id=[ld],dd=ye({__name:"TaskPolls",setup(R){const f=Ce();return(E,k)=>a(f).hasPermission(["view task","view poll"])?(t(),o("div",td,[e("div",sd,[e("div",od,[A(ed)]),e("div",ad,[A(Gl)])])])):(t(),o("div",nd,id))}});const rd={class:"col-md-12"},cd={key:0,class:"card card-widget widget-user shadow-lg"},ud=e("div",{style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.5)"}},null,-1),md=[ud],_d={class:"card-footer"},pd={class:""},hd={class:"widget-user-image",style:{left:"4%","margin-left":"-45px",position:"absolute",top:"190px"}},vd=["src"],bd={class:"ml-3 flex-1",style:{"margin-top":"-28px"}},fd=e("i",{class:"fas fa-chevron-left fa-xs"},null,-1),gd={class:"h2 mb-2 lg:mb-0",style:{"margin-left":"150px"}},yd={class:"card-outline card-outline-tabs"},xd={class:"card-header p-0 border-bottom-0"},$d={class:"nav nav-tabs",id:"custom-tabs-four-tab",role:"tablist"},wd=e("li",{class:"nav-item"},[e("a",{class:"nav-link active",id:"custom-tabs-four-home-tab","data-toggle":"pill",href:"#custom-tabs-four-home",role:"tab","aria-controls":"custom-tabs-four-home","aria-selected":"true"}," Meetings ")],-1),kd={key:0,class:"nav-item"},Cd=e("a",{class:"nav-link",id:"custom-tabs-four-documents-tab","data-toggle":"pill",href:"#custom-tabs-four-documents",role:"tab","aria-controls":"custom-tabs-four-documents","aria-selected":"false"}," Documents ",-1),Md=[Cd],Sd=e("li",{class:"nav-item"},[e("a",{class:"nav-link",id:"custom-tabs-four-discussions-tab","data-toggle":"pill",href:"#custom-tabs-four-discussions",role:"tab","aria-controls":"custom-tabs-four-discussions","aria-selected":"false"}," Discussions ")],-1),Pd=e("li",{class:"nav-item"},[e("a",{class:"nav-link",id:"custom-tabs-four-tasks-tab","data-toggle":"pill",href:"#custom-tabs-four-tasks",role:"tab","aria-controls":"custom-tabs-four-tasks","aria-selected":"false"}," Task & Polls ")],-1),Td=e("li",{class:"nav-item"},[e("a",{class:"nav-link",id:"custom-tabs-four-members-tab","data-toggle":"pill",href:"#custom-tabs-four-members",role:"tab","aria-controls":"custom-tabs-four-members","aria-selected":"false"}," Members ")],-1),qd={class:"card-body"},Dd={class:"tab-content",id:"custom-tabs-four-tabContent"},Fd={class:"tab-pane fade active show",id:"custom-tabs-four-home",role:"tabpanel","aria-labelledby":"custom-tabs-four-home-tab"},Id={class:"tab-pane fade",id:"custom-tabs-four-documents",role:"tabpanel","aria-labelledby":"custom-tabs-four-documents-tab"},Ad=e("div",{class:"tab-pane fade",id:"custom-tabs-four-discussions",role:"tabpanel","aria-labelledby":"custom-tabs-four-discussions-tab"},null,-1),Ed={class:"tab-pane fade",id:"custom-tabs-four-tasks",role:"tabpanel","aria-labelledby":"custom-tabs-four-tasks-tab"},Ud=e("div",{class:"tab-pane fade",id:"custom-tabs-four-goals",role:"tabpanel","aria-labelledby":"custom-tabs-four-goals-tab"},null,-1),Rd={class:"tab-pane fade",id:"custom-tabs-four-members",role:"tabpanel","aria-labelledby":"custom-tabs-four-members-tab"},nr=ye({__name:"CommitteeDetail",setup(R){const f=Ce(),E=b(),k=De(),D=tt(),h=k.params.boardId;function V(){D.push({name:"BoardDetails",params:{boardId:h}})}r(V,"goBack");const S=k.params.committeeId;return we(async()=>{try{const $=(await _t(S)).data;E.value=$,window.dispatchEvent(new CustomEvent("updateTitle",{detail:$.name}))}catch(U){console.error("Error fetching committee data:",U)}}),(U,$)=>(t(),o("div",rd,[E.value?(t(),o("div",cd,[e("div",{class:"widget-user-header text-white",style:et([{backgroundImage:`url(${a(Ct)(E.value.cover)})`,backgroundPosition:"center center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},{height:"250px",width:"100%",position:"relative"}])},md,4),e("div",_d,[e("div",pd,[e("div",hd,[e("img",{class:"img-circle elevation-2",src:a(Mt)(E.value.icon),alt:"User Avatar",style:{width:"128px",height:"128px"}},null,8,vd)]),e("div",bd,[e("a",{href:"",onClick:$[0]||($[0]=I(w=>V(),["prevent"])),class:"mb-2 lg:mb-0 text-blue-primary",style:{"margin-left":"140px","margin-top":"-44px"}},[fd,H(" Committees ")]),e("h3",gd,c(E.value.name),1),e("div",yd,[e("div",xd,[e("ul",$d,[wd,a(f).hasPermission(["view folders"])?(t(),o("li",kd,Md)):m("",!0),Sd,Pd,Td])]),e("div",qd,[e("div",Dd,[e("div",Fd,[A(La)]),e("div",Id,[A(Io)]),Ad,e("div",Ed,[A(dd)]),Ud,e("div",Rd,[A(Sn)])])])])])])])])):m("",!0)]))}});export{nr as default};
