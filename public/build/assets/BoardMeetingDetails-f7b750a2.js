var Mt=Object.defineProperty;var d=(R,$)=>Mt(R,"name",{value:$,configurable:!0});import{d as $e,i as xe,r as m,j as Ae,V as Pe,C as ie,P as Me,o as t,c as s,e,a1 as F,h as v,u as a,F as z,T as W,g as H,t as i,f as se,R as ce,a6 as nt,a5 as Ct,$ as Ne,a0 as He,_ as Le,k as Ze,n as St,H as rt,a9 as At,b as ct,a2 as It,a3 as Tt,l as We,w as ze,a7 as qt,a8 as Pt}from"./main-d97516e2.js";import{u as Fe,e as Be,c as ye,d as Je,a as h,g as bt,f as Ge,b as De}from"./useUnexpectedErrorHandler-01ee037e.js";import{u as ot,a as gt,b as ft,c as yt,d as Ft,e as Dt,f as Et,g as Rt,h as Ut,i as Lt,j as Vt,k as jt}from"./useConflictRequest-f5101978.js";import{e as xt}from"./useMeetingRequest-eac1459b.js";import{z as et,A as tt,p as $t,B as Ot,f as ut,C as pt,D as lt,l as Bt,e as wt,g as Nt,h as Ht,j as ht,k as st,m as Kt,n as Yt,o as Ye,q as zt,t as Gt,v as Qt,w as Wt}from"./Breadcrumb-62de853f.js";import{u as Jt,a as Zt,b as Xt,c as es,d as ts,e as ss,f as as,g as ns,h as kt,i as os,j as is,k as ls,l as ds,m as rs,n as cs}from"./useMinuteRequest-40fb106c.js";import{F as qe}from"./FormInput-19d746f6.js";import{F as _t}from"./FormQuillEditor-3e5c8bfd.js";import{F as at,k as us,l as _s,m as ms,n as ps,o as hs,h as vs,p as bs,v as dt,j as gs}from"./FormDynamicInput-2daa5165.js";import{u as Ce}from"./useQuery-f8736dfe.js";import{_ as mt}from"./FormDateTimeInput.vue_vue_type_style_index_0_lang-6e3ff0f9.js";import{F as vt}from"./FormTextBox-a4c4e2ba.js";import{F as fs}from"./FormUpload-a6d2fc77.js";import{d as ys,e as xs,f as $s}from"./usePollRequest-97611322.js";import{d as ws,e as ks,f as Ms}from"./useTaskRequest-3c5f3f5d.js";import"./index-a4206e89.js";import"./attendance_routes-7f73de2b.js";import"./folder_routes-575ae698.js";import"./useQueryClient-99479e2d.js";const he=d(R=>(Ne("data-v-c4b842a5"),R=R(),He(),R),"_withScopeId$6"),Cs={key:0,class:"card-header flex items-center"},Ss=he(()=>e("div",{class:"flex items-center flex-1 w-full"},null,-1)),As={class:"flex items-center space-x-2"},Is=he(()=>e("span",{class:"text-danger"},"Reset Agenda Start Choice",-1)),Ts=[Is],qs={key:1,class:"flex gap-5"},Ps={class:"flex-1"},Fs={class:"card card-outline card-danger",style:{"min-height":"384px"}},Ds={class:"card-body"},Es={class:"flex w-full"},Rs={class:"flex-1"},Us=he(()=>e("div",{class:"relative h-8"},[e("div",{class:"absolute border -right-16 text-[10px] bottom-2 rounded text-center px-2 py-0.5 text-gray-700 z-10 border-gray-200 bg-gray-200"},[e("div",{class:"absolute left-0 right-0 text-green text-xxs bold -top-2.5"}," Start ")])],-1)),Ls={"data-list_format":"num_la_lr",class:"agenda-list mb-0 border-l border-blue"},Vs={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},js=he(()=>e("div",{class:"absolute border -right-16 top-4 text-[10px] rounded text-center py-0.5 text-gray-700 z-10 border-gray-200 bg-gray-200 px-2"},null,-1)),Os=["onClick"],Bs={class:"font-medium flex-1"},Ns=["innerHTML"],Hs={class:"flex items-center gap-2 mt-1 h-6"},Ks={class:"text-xs text-gray-600"},Ys={key:0,class:"list-none assignees-list"},zs={key:1,class:"flex gap-2 items-start"},Gs={class:"font-medium flex-1"},Qs=["innerHTML"],Ws={class:"flex items-center gap-2 mt-1 h-6"},Js={class:"text-xs text-gray-600"},Zs={key:0,class:"list-none assignees-list"},Xs={class:"ml-4 mt-2"},ea={class:"flex gap-x-2"},ta=he(()=>e("button",{type:"submit",class:"btn btn-primary h-10"}," Save ",-1)),sa=["onClick"],aa={class:"min-h-6 border-l border-blue"},na={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},oa=he(()=>e("div",{class:"absolute border -right-16 top-4 text-[10px] rounded text-center py-0.5 text-gray-700 z-10 border-gray-200 bg-white px-1"}," 10:30pm ",-1)),ia=["onClick"],la={class:"font-medium flex-1"},da=["innerHTML"],ra={class:"flex items-center gap-2 mt-1 h-6"},ca={class:"text-xs text-gray-600"},ua={key:0,class:"list-none assignees-list"},_a={key:1,class:"flex gap-2 items-start"},ma={class:"font-medium flex-1"},pa=["innerHTML"],ha={class:"flex items-center gap-2 mt-1 h-6"},va={class:"text-xs text-gray-600"},ba={key:0,class:"list-none assignees-list"},ga={class:"mt-4"},fa={key:0,class:"mt-4"},ya={class:"flex gap-x-2"},xa=he(()=>e("button",{type:"submit",class:"btn btn-primary h-10"}," Save ",-1)),$a={class:"relative h-8"},wa={class:"absolute border -right-16 text-[10px] bottom-2 rounded text-center px-2 py-0.5 text-gray-700 z-10 border-gray-200 bg-gray-200"},ka=he(()=>e("div",{class:"absolute left-0 right-0 text-green text-xxs bold -top-2.5"}," END ",-1)),Ma=he(()=>e("div",null,[e("div",{class:"w-16 flex h-full justify-center py-4"},[e("div",{class:"bg-gray-200 h-full relative left-1.5",style:{width:"1px"}},"   ")])],-1)),Ca={class:"w-[350px] relative"},Sa={class:"w-[350px]"},Aa={class:"card card-outline card-danger mb-0"},Ia={class:"card-body"},Ta={class:"form-group"},qa=he(()=>e("label",{class:"text-xs uppercase font-medium text-gray-700 tracking-wide"}," People Responsible ",-1)),Pa={key:0,class:"message"},Fa={class:"flex justify-between"},Da=he(()=>e("button",{type:"submit",class:"btn btn-sm btn-primary ml-1 mr-1"}," Save ",-1)),Ea=he(()=>e("div",{class:"w-[350px] relative"},[e("div",{class:"w-[350px] card card-outline card-danger"},[e("div",{class:"bg-gray-200 rounded-lg h-96 flex items-center justify-center"},[e("div",{class:"text-center text-gray-700"},[H(" Select an agenda item to edit "),e("br",{role:"presentation","data-uw-rm-sr":""}),e("div",{class:"text-xl mt-1"},[e("svg",{class:"svg-inline--fa fa-turn-down-left","aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"turn-down-left",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":""},[e("path",{fill:"currentColor",d:"M6.5 271.6c-8.7 9.2-8.7 23.7 0 32.9l121.4 129c8.8 9.3 21 14.6 33.7 14.6c25.6 0 46.3-20.7 46.3-46.3l0-41.7 144 0c88.4 0 160-71.6 160-160l0-112c0-30.9-25.1-56-56-56l-32 0c-30.9 0-56 25.1-56 56l0 120c0 4.4-3.6 8-8 8l-152 0 0-41.7c0-25.6-20.7-46.3-46.3-46.3c-12.8 0-25 5.3-33.7 14.6L6.5 271.6zm153.5-93l0 61.5c0 13.3 10.7 24 24 24l176 0c30.9 0 56-25.1 56-56l0-120c0-4.4 3.6-8 8-8l32 0c4.4 0 8 3.6 8 8l0 112c0 61.9-50.1 112-112 112l-168 0c-13.3 0-24 10.7-24 24l0 61.5L57 288 160 178.5z"})])])])])])],-1)),Ra=[Ea],Ua={key:2,class:"card card-outline card-danger"},La=he(()=>e("div",{class:"card-header text-center justify-center bg-gradient-info"},[e("h3",{class:"text-center font-bold text-lg"}," Choose Your Starting Point ")],-1)),Va={class:"card-body"},ja={class:"flex justify-center space-x-4 py-6"},Oa=he(()=>e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-gradient-success rounded-full shadow w-11 h-11"},[e("i",{class:"fa fa-list text-white"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From Scratch")],-1)),Ba=[Oa],Na=he(()=>e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-gradient-warning rounded-full shadow w-11 h-11"},[e("i",{class:"far fa-file text-white"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From the Agenda")],-1)),Ha=[Na],Ka={class:"flex justify-center col-md-6"},Ya={method:"dialog",class:"modal-box rounded-xl"},za=he(()=>e("h3",{class:"font-bold text-lg justify-center flex text-white"}," save the Imported AGendas from Previous Meeting ",-1)),Ga=he(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),Qa={class:"w-full mt-6 p-2"},Wa={class:"font-thin text-sm flex flex-col items-center gap-6"},Ja={class:"w-full rounded-xl mx-auto p-1 custom-modal"},Za=he(()=>e("h3",{class:"text-center text-base font-bold text-primary"}," Make use of the imported Agendas ",-1)),Xa={class:"flex justify-center mt-4"},en=$e({__name:"Agenda",emits:["change-tab"],setup(R,{emit:$}){const G=xe(),E=$,T=m("default"),k=Fe(),P=Ae(),A=m("create"),b=m(""),Q=m(""),w=P.params.boardId,g=P.params.meetingId,y=P.params.scheduleId,M=m(""),S=m(null),O=m([]),ae=m([]),X=m(null),oe=m(null),ne=m(null),_e=m([]),C=m(!1),U=m(!1),_=m(!1),I=m(null),K=m(-1),q=m(-1),{errorMessage:B}=Be("assignees"),N=ye({schedule_id:Je().required(),title:h().required(),duration:bt().nullable(),description:h().nullable(),agenda_id:h().nullable(),assignees:Ge().of(h()).nullable(),children:Ge().of(h()).nullable()}),{handleSubmit:c,setErrors:le,setFieldValue:J,values:me}=De({validationSchema:N,initialValues:{schedule_id:y,title:"",duration:null,description:null,agenda_id:null,assignees:[],children:[]}}),ee=d(()=>{U.value=!0,C.value=!1,_.value=!1,K.value=-1,q.value=-1,A.value="create",J("title",""),console.log("we are here",U.value,_.value,_e)},"enableAddingNewParent"),de=d((V,l)=>{_.value=!0,I.value=l,K.value=V,q.value=-1,J("title",""),C.value=!1,A.value="create"},"enableAddingChild"),pe=d((V,l,u,r)=>{if(oe.value=u,S.value=u.id,C.value=!0,U.value=!1,_.value=!1,K.value=V,q.value=l,A.value="edit",Q.value=r,J("title",u.title),J("schedule_id",y),J("duration",u.duration),J("description",u.description),u.assignees){const j=u.assignees.map(D=>D.id);O.value=j,J("assignees",j)}else J("assignees",[])},"enableEditing"),L=c(async(V,{resetForm:l})=>{try{if(A.value==="create"){const u={title:V.title,schedule_id:V.schedule_id,duration:null,description:null,agenda_id:null,assignees:[],children:[]};if(_.value){const r=I.value?I.value.toString():null;u.agenda_id=r,await Jt(u,y)}else U.value&&await Zt(u,y)}else{const u={title:V.title,schedule_id:V.schedule_id,duration:V.duration,description:V.description,agenda_id:null,assignees:[],children:[]};if(q.value!==-1){u.assignees=V.assignees;const r=S.value?S.value.toString():null;u.agenda_id=r,await Xt(u,y)}else if(K.value!==-1){u.assignees=V.assignees;const r=S.value?S.value.toString():null;u.agenda_id=r,await es(u,y)}}await Se(),l(),te()}catch(u){u instanceof Pe?le(u.messages):k(u)}}),te=d(()=>{A.value="create",T.value="default",b.value="",Q.value="",C.value=!1,U.value=!1,_.value=!1,K.value=-1,q.value=-1,oe.value=null,S.value=null,O.value=[],J("title",""),J("duration",null),J("description",null),J("agenda_id",null),J("assignees",[]),J("children",[])},"cancelEditing"),Z=[{name:"- none -",value:"0"},{name:"5 minutes",value:"5"},{name:"10 minutes",value:"10"},{name:"15 minutes",value:"15"},{name:"20 minutes",value:"20"},{name:"25 minutes",value:"25"},{name:"30 minutes",value:"30"},{name:"35 minutes",value:"35"},{name:"40 minutes",value:"40"},{name:"45 minutes",value:"45"},{name:"50 minutes",value:"50"},{name:"55 minutes",value:"55"},{name:"60 minutes",value:"60"}],re=ie(()=>Z),o=d(()=>{J("assignees",O.value)},"selectedUsers"),f=d(()=>{J("assignees",O.value)},"removeselectedUsers"),p=ie(()=>{var l;const V=[];return ae.value&&((l=ae.value)==null?void 0:l.length)>0&&ae.value.reduce((u,r)=>(u.push({id:r.id,name:`${r.user.full_name}`}),u),V),V}),n=d(async()=>{var l;const V=(l=oe.value)==null?void 0:l.id;Q.value==="agenda"?await ts(V):await ss(V),await Se(),te()},"deleteAgenda"),x=d(async V=>{V==="scratch"?b.value=V:V==="previous"&&(T.value="custom",b.value=V,await Se())},"startAgenda"),Y=d(async()=>{b.value==="previous"&&(T.value="default",await Se()),b.value=""},"resetAgendaStartChoice"),ve=d(async()=>{var l;const V=M.value;Y(),await as(V,y),(l=ne.value)==null||l.close(),M.value="",T.value="default",b.value="",await Se()},"SaveImportedAgendas"),be=d(()=>Ce({queryKey:["getMeetingScheduleAgendasKey",y],queryFn:async()=>{var l;let V;return T.value==="custom"?(V=await ns({paginate:"false"}),V.data&&V.data.length>0?(M.value=V.data[0].schedule_id,(l=ne.value)==null||l.showModal()):(Ct({title:"Notice",text:"No agendas found in the database. Please create an agenda from scratch.",type:"warning"}),T.value="default")):T.value==="default"&&(V=await kt(y,{paginate:"false"})),(V==null?void 0:V.data)||[]}}),"getMeetingScheduleAgendas"),{isLoading:Ie,data:Ue,refetch:Se}=be(),je=ie(()=>X.value),Oe=d(async()=>{const V=await ot(g,w);ae.value=V.data},"getmemberships"),Ke=d(()=>{E("change-tab","members")},"handleManageMembersClick");return Me(()=>{Oe(),window.addEventListener("refetchMemberships",Oe)}),(V,l)=>{var u;return t(),s(z,null,[b.value==="scratch"||b.value==="previous"?(t(),s("div",Cs,[Ss,e("div",As,[e("button",{type:"submit",onClick:F(Y,["prevent"]),class:"btn btn-tool"},Ts)])])):v("",!0),b.value==="scratch"||b.value==="previous"||a(Ue)&&a(Ue).length?(t(),s("div",qs,[e("div",Ps,[e("div",Fs,[e("div",Ds,[e("div",Es,[e("div",Rs,[Us,e("ol",Ls,[(t(!0),s(z,null,W(a(Ue),(r,j)=>(t(),s("li",{class:"mb-2 hover:border-gray-400",key:j},[e("div",Vs,[js,a(G).hasPermission(["edit agenda"])?(t(),s("div",{key:0,class:"flex gap-2 items-start",onClick:D=>pe(j,-1,r,"agenda")},[e("div",Bs,[H(i(a(et)(j))+"."+i(r.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:r.description},null,8,Ns)]),e("div",Hs,[e("div",Ks,i(a(tt)(r.duration)),1)]),e("div",null,[r.assignees?(t(),s("ul",Ys,[(t(!0),s(z,null,W(r.assignees,(D,ue)=>{var fe;return t(),s("li",{class:"text-sm text-primary",key:ue},i(ue+1)+". "+i((fe=D.user)==null?void 0:fe.full_name),1)}),128))])):v("",!0)])],8,Os)):(t(),s("div",zs,[e("div",Gs,[H(i(a(et)(j))+"."+i(r.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:r.description},null,8,Qs)]),e("div",Ws,[e("div",Js,i(a(tt)(r.duration)),1)]),e("div",null,[r.assignees?(t(),s("ul",Zs,[(t(!0),s(z,null,W(r.assignees,(D,ue)=>{var fe;return t(),s("li",{class:"text-sm text-primary",key:ue},i(ue+1)+". "+i((fe=D.user)==null?void 0:fe.full_name),1)}),128))])):v("",!0)])])),e("div",Xs,[_.value&&I.value===r.id?(t(),s("form",{key:0,novalidate:"",onSubmit:l[0]||(l[0]=F((...D)=>a(L)&&a(L)(...D),["prevent"]))},[e("div",ea,[se(qe,{labeled:!1,label:"Agenda",name:"title",class:"form-control form-control-sm p-0",placeholder:"Enter Meeting Agenda",type:"text"}),ta]),e("a",{onClick:F(te,["prevent"]),class:"text-xs cursor-pointer"}," Cancel ")],32)):v("",!0)]),K.value!==j&&!_.value&&a(G).hasPermission(["create agenda"])?(t(),s("button",{key:2,onClick:D=>de(j,r.id),class:"ml-4 mt-2"}," + Add sub Agenda ",8,sa)):v("",!0)]),e("ol",aa,[(t(!0),s(z,null,W(r.children,(D,ue)=>(t(),s("li",{class:"mb-2 hover:border-gray-400",draggable:"false",key:ue},[e("div",na,[oa,a(G).hasPermission(["edit agenda"])?(t(),s("div",{key:0,class:"flex gap-2 items-start",onClick:fe=>pe(j,ue,D,"subagenda")},[e("div",la,[H(i(a(et)(j,ue))+". "+i(D.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:D.description},null,8,da)]),e("div",ra,[e("div",ca,i(a(tt)(D.duration)),1)]),e("div",null,[D.assignees?(t(),s("ul",ua,[(t(!0),s(z,null,W(D.assignees,(fe,Te)=>(t(),s("li",{class:"text-sm text-primary",key:Te},i(Te+1)+". "+i(fe.user.full_name),1))),128))])):v("",!0)])],8,ia)):(t(),s("div",_a,[e("div",ma,[H(i(a(et)(j,ue))+". "+i(D.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:D.description},null,8,pa)]),e("div",ha,[e("div",va,i(a(tt)(D.duration)),1)]),e("div",null,[D.assignees?(t(),s("ul",ba,[(t(!0),s(z,null,W(D.assignees,(fe,Te)=>(t(),s("li",{class:"text-sm text-primary",key:Te},i(Te+1)+". "+i(fe.user.full_name),1))),128))])):v("",!0)])]))])]))),128))])]))),128))]),e("div",ga,[e("div",null,[U.value?(t(),s("div",fa,[e("form",{novalidate:"",onSubmit:l[1]||(l[1]=F((...r)=>a(L)&&a(L)(...r),["prevent"])),class:"mt-4"},[e("div",ya,[se(qe,{labeled:!1,label:"Agenda",name:"title",class:"form-control form-control-sm p-0",placeholder:"Enter Meeting Agenda",type:"text"}),xa])],32),e("a",{onClick:F(te,["prevent"]),class:"text-xs cursor-pointer"}," Cancel ")])):v("",!0),a(G).hasPermission(["create agenda"])?(t(),s("button",{key:1,onClick:ee,class:"btn btn-secondary block w-full mb-4"}," Add Agenda ")):v("",!0)])]),e("div",$a,[e("div",wa,[ka,H(" "+i((u=je.value)!=null&&u.end_time?a($t)(je.value.end_time):""),1)])])]),Ma])])])]),e("div",{class:ce({hidden:!C.value,"md:block":!0,"w-[350px]":!0})},[e("div",Ca,[e("div",Sa,[e("div",Aa,[e("form",{novalidate:"",onSubmit:l[6]||(l[6]=F((...r)=>a(L)&&a(L)(...r),["prevent"]))},[e("div",Ia,[se(qe,{label:"Agenda",name:"title",class:"w-full text-sm tracking-wide",placeholder:"Enter Meeting Agenda",t:"",ype:"text"}),se(_t,{label:"Agenda Description",name:"description",theme:"snow",placeholder:"Enter Agenda  Description",toolbar:"minimal",contentType:"html"}),se(at,{name:"duration",label:"Duration",placeholder:"Select Duration",options:re.value},null,8,["options"]),e("div",Ta,[qa,e("div",{class:ce(["multiselect-container",{error:!!a(B)}])},[se(a(nt),{id:"assignees",modelValue:O.value,"onUpdate:modelValue":l[2]||(l[2]=r=>O.value=r),mode:"tags",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:p.value,valueProp:"id",trackBy:"id",label:"name",class:ce(["multiselect-container",{error:!!a(B)}]),onSelect:l[3]||(l[3]=r=>o()),onDeselect:l[4]||(l[4]=r=>f())},null,8,["modelValue","options","class"]),a(B)?(t(),s("div",Pa,i(a(B)),1)):v("",!0)],2),e("button",{onClick:F(Ke,["prevent"]),class:"btn btn-info mt-2"}," Manage Members ")]),e("div",Fa,[e("button",{onClick:l[5]||(l[5]=F(r=>n(),["prevent"])),class:"btn btn-link btn-sm text-danger h-7"}," Delete "),e("div",null,[e("button",{onClick:F(te,["prevent"]),class:"btn btn-secondary btn-sm ml-1 mr-1"}," Cancel "),Da])])])],32)])])])],2),e("div",{class:ce({hidden:C.value,"md:block":!0,"w-[350px]":!0})},Ra,2)])):b.value===""?(t(),s("div",Ua,[La,e("div",Va,[e("div",ja,[e("a",{onClick:l[7]||(l[7]=F(r=>x("scratch"),["prevent"])),class:"btn btn-primary h-auto !p-0 p-0 mb-0 card flex-1"},Ba),e("a",{onClick:l[8]||(l[8]=F(r=>x("previous"),["prevent"])),class:"btn btn-primary h-auto !p-0 p-0 mb-0 card flex-1"},Ha)])])])):v("",!0),e("div",Ka,[e("dialog",{id:"saveagendasModal",class:"modal modal-primary",ref_key:"saveagendasModal",ref:ne},[e("form",Ya,[za,Ga,e("div",Qa,[e("div",Wa,[e("form",Ja,[Za,e("div",Xa,[e("button",{type:"submit",onClick:F(ve,["prevent"]),class:"btn btn-lg btn-success"}," Save Imported Agendas ")])])])])])],512)])],64)}}});const tn=Le(en,[["__scopeId","data-v-c4b842a5"]]),Ee=d(R=>(Ne("data-v-73fba81c"),R=R(),He(),R),"_withScopeId$5"),sn={key:0},an={key:0,class:"card card-widget shadow-lg"},nn={class:"card-header"},on={class:"d-flex align-items-center"},ln={class:"ml-3 flex-1"},dn=Ee(()=>e("i",{class:"fas fa-chevron-left"},null,-1)),rn={key:0,class:"ml-auto flex self-end"},cn={key:0,type:"button",class:"btn btn-sm mr-1 btn-success btn-lg"},un=Ee(()=>e("i",{class:"fas fa-door-closed mr-1"},null,-1)),_n={key:1,type:"button",class:"btn btn-sm mr-1 btn-success btn-lg"},mn=Ee(()=>e("i",{class:"fa fa-check mr-1"},null,-1)),pn=Ee(()=>e("i",{class:"fa fa-check mr-1"},null,-1)),hn={class:"card-body"},vn=Ee(()=>e("span",{class:"info-box-icon",style:{left:"4%","margin-left":"-45px",position:"absolute",top:"88px"}},[e("div",{class:"h3 text-bold font-bold uppercase text-primary"}," Confidential")],-1)),bn={class:"text-center logo-container"},gn=["src"],fn={class:"h3 text-center text-primary text-bold font-bold uppercase"},yn=Ee(()=>e("hr",{class:"thick-line"},null,-1)),xn={class:"text-center text-primary text-bold uppercase h4"},$n={class:"text-center text-primary text-bold uppercase h4"},wn={key:0,class:"mt-2 text-primary text-bold uppercase"},kn={key:1,class:"table table-borderless"},Mn={class:"p-0"},Cn={class:"p-0 text-primary text-bold uppercase"},Sn={key:2,class:"mt-2 text-primary text-bold uppercase"},An={key:3,class:"table table-borderless"},In={class:"p-0"},Tn={class:"p-0 text-primary text-bold uppercase"},qn={key:4,class:"mt-2 text-primary text-bold uppercase"},Pn={key:5,class:"table table-borderless"},Fn={class:"p-0"},Dn={class:"p-0 text-primary text-bold uppercase"},En={key:6,class:"mt-2 text-primary text-bold uppercase"},Rn={key:7,class:"table table-borderless"},Un={class:"p-0"},Ln={class:"p-0 text-primary text-bold uppercase"},Vn=Ee(()=>e("h5",{class:"mt-2 text-primary text-bold uppercase"},"Agenda",-1)),jn={class:"list-unstyled"},On={class:"list-unstyled ml-4"},Bn={id:"MinutesEditor",class:"container"},Nn={class:"codex-editor"},Hn={class:"codex-editor__redactor",style:{"padding-bottom":"300px"}},Kn={class:"ce-block"},Yn={class:"flex w-full"},zn={class:"flex-1"},Gn={key:0,"data-list_format":"num_la_lr",class:"agenda-list mb-0"},Qn={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},Wn={class:"flex gap-2 items-start"},Jn={class:"font-medium flex-1"},Zn=["onClick"],Xn={class:"font-bold text-primary"},eo=["innerHTML"],to={key:0,class:"min-h-6"},so={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},ao={class:"flex gap-2 items-start"},no={class:"font-medium flex-1"},oo={class:"font-bold text-primary"},io=["innerHTML"],lo={key:1,class:"card card-widget shadow-lg"},ro=Ee(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, The Minutes have not been Aprroved")],-1)),co=[ro],uo={key:1},_o=Ee(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),mo=[_o],po=$e({__name:"ApprovedMinutes",setup(R){const $=Ze();function G(){$.back()}d(G,"goBack");const E=Ae(),T=xe(),k=St(),P=E.params.boardId;E.params.meetingId;const A=E.params.scheduleId;E.params.minutesId;const b=m(null),Q=m("create"),w=m(!1),g=m([]),y=m(null),M=m(null),S=m(-1),O=m(-1),ae=m(!1),X=m(!1),oe=m([{text:""}]),ne=Fe(),_e=ye({schedule_id:Je().required(),board_id:h().nullable(),committee_id:bt().nullable(),membership_id:h().nullable(),minute_id:h().nullable(),agenda_id:h().required(),detail_minute_id:h().nullable(),subdetailminute_id:h().nullable(),subagenda_id:h().nullable(),description:h().required(),status:h().required()}),{handleSubmit:C,setErrors:U,setFieldValue:_,values:I}=De({validationSchema:_e,initialValues:{schedule_id:A,board_id:P,committee_id:null,membership_id:null,minute_id:b.value,agenda_id:"",detail_minute_id:null,subdetailminute_id:null,subagenda_id:null,description:"",status:"unpublished"}});C(async(o,{resetForm:f})=>{try{const p={schedule_id:o.schedule_id,committee_id:null,membership_id:null,minute_id:b.value?b.value.toString():null,agenda_id:o.agenda_id.toString(),detail_minute_id:o.detail_minute_id?o.detail_minute_id.toString():null,subdetailminute_id:o.subdetailminute_id?o.subdetailminute_id.toString():null,subagenda_id:o.subagenda_id?o.subagenda_id.toString():null,description:o.description,status:o.status};Q.value==="create"?w.value?await os(p,A):X.value&&await is(p,A):S.value!==-1?(await ls(p,A),console.log("payload",p)):O.value!==-1&&await ds(p,A),await le(),K()}catch(p){p instanceof Pe?U(p.messages):ne(p)}});const K=d(()=>{Q.value="create",w.value=!1,y.value=null,M.value=null,S.value=-1,O.value=-1,ae.value=!1,X.value=!1,_("schedule_id",A),_("board_id",P),_("committee_id",null),_("membership_id",null),_("minute_id",b.value),_("agenda_id",""),_("detail_minute_id",null),_("subdetailminute_id",null),_("subagenda_id",null),_("description",""),_("status","unpublished")},"reset");ie(()=>{const o=w.value&&y.value===agenda.id&&O.value===pIndex&&S.value===cIndex&&Q.value==="create";return console.log("isAddingChild computed:",o),o}),ie(()=>{const o=ae.value&&!X.value&&!w.value&&Q.value==="edit";return console.log("isEditing computed:",o),o});const q=d((o,f,p,n,x)=>{K(),ae.value=!0,X.value=!1,w.value=!1,O.value=o,S.value=f,Q.value="edit",console.log("pIndex: number, cIndex:",o,f),console.log("States after enabling adding child:",{is_editing:ae.value,isAddingNewParent:X.value,addingChild:w.value,editingParentIndex:O.value,editingChildIndex:S.value,action:Q.value}),_("agenda_id",p.id),S.value!==-1?(_("subdetailminute_id",x.id),_("detail_minute_id",x.detail_minute_id),_("subagenda_id",x.subagenda_id),_("description",x.description)):O.value!==-1&&(_("detail_minute_id",n.id),_("description",n.description))},"enableEditing"),B=d(()=>Ce({queryKey:["getMinutesKey",A],queryFn:async()=>{const o=await rs(A);return b.value=o.data.id,console.log("response.data",o.data),o.data},onSuccess:o=>{},onError:o=>{console.error("Failed to fetch minutes:",o)}}),"getMinutes"),{isLoading:N,data:c,refetch:le}=B(),J=ie(()=>{var o,f,p,n;return(o=c==null?void 0:c.value)!=null&&o.attendances&&((p=(f=c==null?void 0:c.value)==null?void 0:f.attendances)==null?void 0:p.length)>0?((n=c==null?void 0:c.value)==null?void 0:n.attendances.filter(x=>x.rsvp_status==="Yes"&&x.attendance_status==="Attended"))||[]:[]}),me=ie(()=>{var o,f,p,n;return(o=c==null?void 0:c.value)!=null&&o.attendances&&((p=(f=c==null?void 0:c.value)==null?void 0:f.attendances)==null?void 0:p.length)>0?((n=c==null?void 0:c.value)==null?void 0:n.attendances.filter(x=>x.rsvp_status==="Online"&&x.attendance_status==="Attended"))||[]:[]}),ee=ie(()=>{var o,f,p,n;return(o=c==null?void 0:c.value)!=null&&o.attendances&&((p=(f=c==null?void 0:c.value)==null?void 0:f.attendances)==null?void 0:p.length)>0?((n=c==null?void 0:c.value)==null?void 0:n.attendances.filter(x=>["Yes","No","Maybe"].includes(x.rsvp_status)&&x.attendance_status==="Absent"))||[]:[]}),de=ie(()=>{var o,f,p,n;return(o=c==null?void 0:c.value)!=null&&o.attendances&&((p=(f=c==null?void 0:c.value)==null?void 0:f.attendances)==null?void 0:p.length)>0?((n=c==null?void 0:c.value)==null?void 0:n.attendances.filter(x=>x.rsvp_status==="Pending"&&x.attendance_status==="Absent"))||[]:[]}),pe=d(async()=>{const o=await kt(A,{paginate:"false"});g.value=o.data},"getmeetingagendas"),L=ie(()=>g.value);Me(async()=>{await le(),pe()}),rt(()=>oe==null?void 0:oe.value,o=>{o&&(b.value=o)},{deep:!0});const te=ie(()=>{var f;const o={};return c!=null&&c.value&&(c!=null&&c.value.detailminutes)&&((f=c==null?void 0:c.value.detailminutes)==null||f.forEach(p=>{var n;o[p.agenda_id]||(o[p.agenda_id]=[]),o[p.agenda_id].push(p),(n=p.subdetailminutes)==null||n.forEach(x=>{o[x.subagenda_id]||(o[x.subagenda_id]=[]),o[x.subagenda_id].push(x)})})),o}),Z=ie(()=>k.getSettings()),re=d(async o=>{await cs(o),await le()},"onAcceptCEOApproval");return(o,f)=>{var p,n,x,Y,ve,be,Ie,Ue,Se,je,Oe,Ke,V,l;return a(T).hasPermission(["view minutes"])?(t(),s("div",sn,[a(c)&&((p=a(c))==null?void 0:p.approvalstatus)==="approved"?(t(),s("div",an,[e("div",nn,[e("div",on,[e("div",ln,[e("a",{href:"",onClick:F(G,["prevent"]),class:"text-blue-primary"},[dn,H(" Go back To Meeting ")])]),a(c)?(t(),s("div",rn,[((x=(n=a(c))==null?void 0:n.schedule)==null?void 0:x.closestatus)==="closed"?(t(),s("button",cn,[un,H(" Meeting Closed ")])):v("",!0),((Y=a(c))==null?void 0:Y.approvalstatus)==="approved"?(t(),s("button",_n,[mn,H(" This Minutes Have been Approved ")])):(t(),s("button",{key:2,type:"button",class:"btn btn-sm mr-1 btn-warning btn-lg",onClick:f[0]||(f[0]=F(u=>{var r;return re((r=a(c))==null?void 0:r.id)},["prevent"]))},[pn,H(" Sorry, The Minutes have not been Aprroved ")]))])):v("",!0)])]),e("div",hn,[vn,e("div",bn,[e("img",{src:a(Ot)((ve=Z.value)==null?void 0:ve.logo),alt:"Organization Logo",class:"img-fluid logo"},null,8,gn)]),e("div",fn,i((be=Z.value)==null?void 0:be.name),1),yn,e("h4",xn,"MINUTES OF THE "+i((Ue=(Ie=a(c))==null?void 0:Ie.meeting)==null?void 0:Ue.title),1),e("p",$n," HELD AT "+i((je=(Se=a(c))==null?void 0:Se.meeting)==null?void 0:je.location)+" ON "+i(a(ut)((Ke=(Oe=a(c))==null?void 0:Oe.schedule)==null?void 0:Ke.date))+" STARTING AT "+i((l=(V=a(c))==null?void 0:V.schedule)==null?void 0:l.start_time),1),J.value.length?(t(),s("h5",wn,"Present")):v("",!0),J.value.length?(t(),s("table",kn,[e("tbody",null,[(t(!0),s(z,null,W(J.value,(u,r)=>(t(),s("tr",{key:u.id},[e("td",Mn,i(r+1)+". "+i(u.membership.user.full_name),1),e("td",Cn," - "+i(u.membership.position.name),1)]))),128))])])):v("",!0),me.value.length?(t(),s("h5",Sn,"Present on E-platform ")):v("",!0),me.value.length?(t(),s("table",An,[e("tbody",null,[(t(!0),s(z,null,W(me.value,(u,r)=>(t(),s("tr",{key:u.id},[e("td",In,i(r+1)+". "+i(u.membership.user.full_name),1),e("td",Tn," - "+i(u.membership.position.name),1)]))),128))])])):v("",!0),ee.value.length?(t(),s("h5",qn,"Absent With Apology ")):v("",!0),ee.value.length?(t(),s("table",Pn,[e("tbody",null,[(t(!0),s(z,null,W(ee.value,(u,r)=>(t(),s("tr",{key:u.id},[e("td",Fn,i(r+1)+". "+i(u.membership.user.full_name),1),e("td",Dn," - "+i(u.membership.position.name),1)]))),128))])])):v("",!0),de.value.length?(t(),s("h5",En," Absent ")):v("",!0),de.value.length?(t(),s("table",Rn,[e("tbody",null,[(t(!0),s(z,null,W(de.value,(u,r)=>(t(),s("tr",{key:u.id},[e("td",Un,i(r+1)+". "+i(u.membership.user.full_name),1),e("td",Ln," - "+i(u.membership.position.name),1)]))),128))])])):v("",!0),Vn,e("ul",jn,[(t(!0),s(z,null,W(L.value,(u,r)=>(t(),s(z,{key:u.id},[e("li",null,i(r+1)+". "+i(u.title),1),e("ul",On,[(t(!0),s(z,null,W(u.children,(j,D)=>(t(),s("li",{key:j.id},i(r+1)+"."+i(D+1)+" "+i(j.title),1))),128))])],64))),128))]),e("div",Bn,[e("div",Nn,[e("div",Hn,[e("div",Kn,[e("div",Yn,[e("div",zn,[L.value?(t(),s("ol",Gn,[(t(!0),s(z,null,W(L.value,(u,r)=>(t(),s("li",{class:"hover:border-gray-400",key:r},[e("div",Qn,[e("div",Wn,[e("div",Jn,[(t(!0),s(z,null,W(te.value[u.id],(j,D)=>(t(),s("div",{key:D,onClick:ue=>q(r,-1,u,j,void 0)},[e("div",Xn,i(a(pt)(a(lt)(r),u.title)),1),e("div",{innerHTML:j.description},null,8,eo)],8,Zn))),128))])])]),u.children?(t(),s("ol",to,[(t(!0),s(z,null,W(u.children,(j,D)=>(t(),s("li",{class:"mb-2 hover:border-gray-400",draggable:"false",key:D},[e("div",so,[e("div",ao,[e("div",no,[e("div",oo,i(a(pt)(a(lt)(r),j.title,void 0,void 0,void 0,a(lt)(D))),1),(t(!0),s(z,null,W(te.value[u.id],(ue,fe)=>(t(),s("div",{key:fe},[(t(!0),s(z,null,W(te.value[j.id],Te=>(t(),s("div",{key:Te.id},[e("div",{innerHTML:Te.description},null,8,io)]))),128))]))),128))])])])]))),128))])):v("",!0)]))),128))])):v("",!0)])])])])])])])])):(t(),s("div",lo,co))])):(t(),s("div",uo,mo))}}});const ho=Le(po,[["__scopeId","data-v-73fba81c"]]),Xe=d(R=>(Ne("data-v-8f302fa1"),R=R(),He(),R),"_withScopeId$4"),vo={class:"rsvp-container"},bo={key:0},go={class:"dropdown"},fo=["aria-expanded"],yo={key:0,class:"dropdown-menu show","aria-labelledby":"rsvp-status"},xo=Xe(()=>e("i",{class:"far fa-check-circle bg-success"},null,-1)),$o=Xe(()=>e("i",{class:"far fa-check-circle bg-warning"},null,-1)),wo=Xe(()=>e("i",{class:"far fa-check-circle bg-danger"},null,-1)),ko=Xe(()=>e("i",{class:"far fa-check-circle bg-info"},null,-1)),Mo=Xe(()=>e("i",{class:"far fa-check-circle bg-info"},null,-1)),Co={key:1},So=$e({__name:"MeetingRsvp",props:{attendee:{},disableRemoteRsvp:{}},emits:["rsvp-updated"],setup(R,{emit:$}){const G=xe(),E=R,T=$,k=m(!1),P=d(()=>{k.value=!k.value},"toggleDropdown"),A=d(g=>{var y;T("rsvp-updated",{attendeeId:(y=E.attendee)==null?void 0:y.id,status:g}),k.value=!1},"updateRsvp"),b=ie(()=>{var g;return((g=E.attendee)==null?void 0:g.rsvp_status)||"RSVP"}),Q=ie(()=>{var g;switch((g=E.attendee)==null?void 0:g.rsvp_status){case"Yes":return"bg-success text-white";case"No":return"bg-warning text-white";case"Maybe":return"bg-danger text-white";case"Online":return"bg-info text-white";case"Pending":return"bg-info text-white";default:return"bg-secondary text-white"}}),w=ie(()=>{var g;switch((g=E.attendee)==null?void 0:g.rsvp_status){case"Yes":return"far fa-check-circle";case"No":return"far fa-check-circle";case"Maybe":return"far fa-check-circle";case"Online":return"far fa-check-circle";case"Pending":return"far fa-check-circle";default:return"far fa-check-circle"}});return(g,y)=>{var M;return t(),s("div",vo,[((M=g.attendee.membership)==null?void 0:M.user.id)===a(G).user.id?(t(),s("div",bo,[e("div",go,[e("button",{class:ce(["btn btn-icon dropdown-toggle",Q.value]),type:"button",onClick:P,"aria-haspopup":"true","aria-expanded":k.value},[e("i",{class:ce([w.value,"mr-2"])},null,2),H(" "+i(b.value),1)],10,fo),k.value?(t(),s("ul",yo,[e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:y[0]||(y[0]=F(S=>A("Yes"),["prevent"]))},[xo,H(" Yes ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:y[1]||(y[1]=F(S=>A("No"),["prevent"]))},[$o,H("No ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:y[2]||(y[2]=F(S=>A("Maybe"),["prevent"]))},[wo,H(" Maybe ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:y[3]||(y[3]=F(S=>A("Online"),["prevent"]))},[ko,H(" Online ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:y[4]||(y[4]=F(S=>A("Pending"),["prevent"]))},[Mo,H(" Pending ")])])])):v("",!0)])])):(t(),s("div",Co,[e("button",null,[e("i",{class:ce([w.value,"mr-2"])},null,2),H(" "+i(b.value),1)])]))])}}});const Ao=Le(So,[["__scopeId","data-v-8f302fa1"]]),Io={key:0,class:"container-fluid"},To=e("div",{class:"card-header flex items-center"},[e("h2",{class:"card-header-title h3"},"Attendance")],-1),qo={class:"container-fluid"},Po={class:"row"},Fo={class:"card card-outline card-primary h-100"},Do={class:"card-body box-profile"},Eo={class:"text-center"},Ro={class:"avatar avatar-md mb-3"},Uo=["src"],Lo={class:"profile-username text-center text-primary"},Vo={class:"mt-3"},jo={class:"d-flex justify-content-between mb-2"},Oo=e("strong",null,"Invited:",-1),Bo={class:"cell-label"},No={class:"d-flex justify-content-between mb-2"},Ho=e("strong",null,"RSVP:",-1),Ko={class:"d-flex justify-content-between mb-2"},Yo=e("strong",null,"Attendance:",-1),zo={key:0},Go={key:0},Qo=["onClick"],Wo=e("i",{class:"far fa-eye"},null,-1),Jo={key:1},Zo=["onClick"],Xo={key:0},ei=["onClick"],ti={key:1,class:"container-fluid"},si=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),ai=[si],ni=$e({__name:"Attendance",setup(R){const $=xe(),G=Fe(),E=Ae(),T=Ze(),k=m("create");E.params.meetingId;const P=E.params.scheduleId,A=ye({id:h().required(),rsvp_status:h().nullable(),attendance_status:h().nullable(),signatureupload:h().nullable()}),{handleSubmit:b,setErrors:Q,setFieldValue:w,values:g}=De({validationSchema:A,initialValues:{id:"",rsvp_status:"",attendance_status:"",signatureupload:""}}),y=d(()=>{k.value="create",w("id",""),w("rsvp_status",""),w("attendance_status",""),w("signatureupload","")},"reset"),M=d(U=>{y(),k.value="rsvp",w("id",U.attendeeId),w("rsvp_status",U.status),S()},"handleRsvpUpdated"),S=b(async(U,{resetForm:_})=>{try{const I={id:U.id,rsvp_status:U.rsvp_status,location:U.location,attendance_status:U.attendance_status,meeting_id:U.meeting_id,membership_id:U.membership_id,membership:U.membership,meeting:U.meeting,invite_status:null,signatureupload:null};k.value==="create"?await gt(I,P):k.value==="rsvp"?await ft(I,I.id):k.value==="attendance"&&await yt(I,I.id),await oe(),y()}catch(I){I instanceof Pe?Q(I.messages):G(I)}}),O=d(()=>Ce({queryKey:["getMeetingAttendancesKey",P],queryFn:async()=>(await Ft(P,{paginate:"false"})).data}),"getMeetingAttendances"),{isLoading:ae,data:X,refetch:oe}=O();Me(async()=>{oe()}),Me(()=>{window.addEventListener("meetingUpdated",ne)}),At(()=>{window.removeEventListener("meetingUpdated",ne)});function ne(U){U.detail.scheduleId===P&&oe()}d(ne,"handleMeetingUpdated");const _e=d(U=>{var _;T.push({name:"BoardSignatureAttendance",params:{boardId:E.params.boardId,meetingId:E.params.meetingId,scheduleId:E.params.scheduleId,attendeeId:U.id,mediaId:(_=U.media[0])==null?void 0:_.uuid}})},"navigateToSignaturePage"),C=d(async U=>{await Dt(U),await oe()},"sendReminder");return(U,_)=>a($).hasPermission(["view attendances"])?(t(),s("div",Io,[To,e("div",qo,[e("div",Po,[(t(!0),s(z,null,W(a(X),(I,K)=>{var q,B,N,c;return t(),s("div",{class:"col-lg-3 col-md-4 col-sm-6 mb-3",key:K},[e("div",Fo,[e("div",Do,[e("div",Eo,[e("div",Ro,[e("img",{src:a(Bt)(I.membership.user.profile.avatar),class:"profile-user-img img-fluid img-circle",role:"img","data-uw-rm-alt":"ALT"},null,8,Uo)]),e("h3",Lo,i((B=(q=I.membership)==null?void 0:q.user)==null?void 0:B.full_name),1)]),e("div",Vo,[e("div",jo,[Oo,e("span",Bo,i(I.invite_status),1)]),e("div",No,[Ho,e("div",null,[se(Ao,{attendee:I,disableRemoteRsvp:0,onRsvpUpdated:M},null,8,["attendee"])])]),e("div",Ko,[Yo,e("div",null,[((N=I.membership)==null?void 0:N.user.id)===a($).user.id?(t(),s("div",zo,[I.attendance_status==="Attended"?(t(),s("div",Go,[e("a",{href:"",onClick:F(le=>_e(I),["prevent"]),class:"text-blue-500 hover:text-blue-700 transition duration-150 ease-in-out"},[Wo,H(" "+i(I.attendance_status),1)],8,Qo)])):(t(),s("div",Jo,[e("button",{type:"submit",class:"btn btn-link btn-primary btn-sm text-white",onClick:F(le=>_e(I),["prevent"])}," Sign ",8,Zo)]))])):v("",!0)]),a($).hasRole(["Super Admin","Admin","Company Secretary"])&&((c=I.membership)==null?void 0:c.user.id)!==a($).user.id?(t(),s("div",Xo,[e("button",{type:"submit",class:"btn btn-link btn-primary btn-sm text-white",onClick:F(le=>C(I.id),["prevent"])}," Send Reminder ",8,ei)])):v("",!0)])])])])])}),128))])])])):(t(),s("div",ti,ai))}}),Re=d(R=>(Ne("data-v-35f3a7a2"),R=R(),He(),R),"_withScopeId$3"),oi={key:0},ii={class:"card"},li={class:"card-header"},di={class:"card-header flex items-center"},ri=Re(()=>e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"}," Conflicts of Interest ")],-1)),ci={key:0,class:"flex items-center space-x-2"},ui=Re(()=>e("i",{class:"far fa fa-plus mr-2"},null,-1)),_i={class:"container-fluid"},mi={key:0,class:"row"},pi={class:"card card-outline card-primary h-100"},hi={class:"card-body box-profile"},vi={class:"text-center mb-3"},bi={class:"profile-username text-primary"},gi={class:"text-muted"},fi={class:"info-section"},yi=Re(()=>e("span",{class:"text-bold text-danger"},"Nature Of Interest: ",-1)),xi={class:"text-primary"},$i={class:"info-section"},wi=Re(()=>e("span",{class:"text-bold text-danger"},"Amount: ",-1)),ki={class:"info-section"},Mi=Re(()=>e("span",{class:"text-bold text-danger"},"Due Date: ",-1)),Ci={class:"info-section"},Si=Re(()=>e("span",{class:"text-bold text-danger"},"Remarks: ",-1)),Ai={class:"text-primary"},Ii={class:"info-section"},Ti=Re(()=>e("span",{class:"text-bold text-danger"},"Signed: ",-1)),qi={key:0,class:"text-center mt-3"},Pi=["onClick"],Fi={class:"flex justify-center col-md-6"},Di={method:"dialog",class:"modal-box rounded-xl"},Ei={class:"font-bold text-lg justify-center flex"},Ri=Re(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),Ui={class:"w-full mt-6 p-2"},Li={class:"font-thin text-sm flex flex-col items-center gap-6"},Vi={class:"row"},ji={type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},Oi={key:1},Bi=Re(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),Ni=[Bi],Hi=$e({__name:"ConflictofInterest",setup(R){var I,K;const $=xe(),G=Fe(),E=xe(),k=Ae().params.meetingId,P=m(null),A=m("create"),b=m(null),Q=((I=E.user)==null?void 0:I.first)+" "+((K=E.user)==null?void 0:K.last),w=ye({name:h().required(),address:h().required(),nature:h().required(),amount:h().required(),ceased_date:h().required(),remarks:h().required(),conflict_id:h().nullable()}),{handleSubmit:g,setErrors:y,setFieldValue:M,values:S}=De({validationSchema:w,initialValues:{name:Q,address:"",nature:"",amount:"",ceased_date:"",remarks:"",conflict_id:null}}),O=d(()=>{var q;X(),A.value="create",(q=b.value)==null||q.showModal()},"openCreateConflictModal"),ae=d(q=>{var B;X(),P.value=q.id.toString(),A.value="edit",M("address",q.address),M("nature",q.nature),M("amount",q.amount),M("ceased_date",q.ceased_date),M("remarks",q.remarks),(B=b.value)==null||B.showModal()},"openEditConflictModal"),X=d(()=>{M("address",""),M("nature",""),M("amount",""),M("ceased_date",""),M("remarks",""),M("conflict_id",null),A.value="create",P.value=null,wt()},"resetConflict"),oe=g(async(q,{resetForm:B})=>{var N;try{const c={address:q.address,nature:q.nature,amount:q.amount,ceased_date:q.ceased_date,remarks:q.remarks,conflict_id:null};if(A.value==="create")await Et(c,k);else{const le=P.value?P.value.toString():null;c.conflict_id=le,await Rt(c,k)}await U(),X(),(N=b.value)==null||N.close()}catch(c){c instanceof Pe?y(c.messages):G(c)}}),ne=d(()=>Ce({queryKey:["getMeetingConflictsKey",k],queryFn:async()=>(await Ut(k,{paginate:"false"})).data}),"getMeetingConflicts"),{isLoading:_e,data:C,refetch:U}=ne();Me(async()=>{await U()});const _=ie(()=>{var q;return(q=C==null?void 0:C.value)==null?void 0:q.some(B=>{var N,c,le;return((c=(N=B==null?void 0:B.membership)==null?void 0:N.user)==null?void 0:c.id)===((le=$==null?void 0:$.user)==null?void 0:le.id)})});return(q,B)=>a($).hasPermission(["view conflicts of interest"])?(t(),s("div",oi,[e("div",ii,[e("div",li,[e("div",di,[ri,a($).hasPermission(["create conflict of interest"])?(t(),s("div",ci,[_.value?v("",!0):(t(),s("button",{key:0,type:"button",onClick:F(O,["prevent"]),class:"btn btn-primary"},[ui,H(" Add Your Conflict of Interest ")]))])):v("",!0)])]),e("div",_i,[a(C)?(t(),s("div",mi,[(t(!0),s(z,null,W(a(C),(N,c)=>{var le,J,me,ee,de,pe;return t(),s("div",{class:"col-lg-4 col-md-6 col-sm-12 mb-3",key:c},[e("div",pi,[e("div",hi,[e("div",vi,[e("h3",bi,i((J=(le=N==null?void 0:N.membership)==null?void 0:le.user)==null?void 0:J.full_name),1),e("p",gi,i(N.address),1)]),e("div",fi,[yi,e("span",xi,i(N.nature),1)]),e("div",$i,[wi,e("span",null,"Kshs. "+i(N.amount),1)]),e("div",ki,[Mi,e("span",null,i(a(ut)(N.ceased_date)),1)]),e("div",Ci,[Si,e("span",Ai,i(N.remarks),1)]),e("div",Ii,[Ti,e("span",null,i(N.status),1)]),a($).hasPermission(["edit conflict of interest"])?(t(),s("div",qi,[((ee=(me=N==null?void 0:N.membership)==null?void 0:me.user)==null?void 0:ee.id)===((pe=(de=a($))==null?void 0:de.user)==null?void 0:pe.id)?(t(),s("button",{key:0,class:"btn btn-success btn-sm",onClick:F(L=>ae(N),["prevent"])}," Edit ",8,Pi)):v("",!0)])):v("",!0)])])])}),128))])):v("",!0)])]),e("div",Fi,[e("dialog",{id:"conflictmodal",class:"modal",ref_key:"ConflictModal",ref:b},[e("form",Di,[e("h3",Ei,i(A.value==="create"?"Create Conflict of Interest":"Update Conflict of Interest"),1),Ri,e("div",Ui,[e("div",Li,[e("form",{novalidate:"",onSubmit:B[0]||(B[0]=F((...N)=>a(oe)&&a(oe)(...N),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",Vi,[se(qe,{labeled:!0,label:"Meeting Member",name:"name",class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Meeting Member",type:"text",disabled:!0}),se(qe,{labeled:!0,label:"Address",name:"address",class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Input Your Address",type:"text"}),se(vt,{labeled:!0,label:"Nature of the Interest",name:"nature",class:"col-md-12 w-full text-sm text-white tracking-wide",placeholder:"Enter Nature of the Interest",rows:2}),se(qe,{labeled:!0,label:"Estimated Value Of The Interest (KSHS.)",name:"amount",class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Estimated Value Of The Interest (KSHS.)",type:"number"}),se(mt,{label:"Due Date",name:"ceased_date",flow:["day"],class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Select Due Date"}),se(vt,{labeled:!0,label:"Remarks",name:"remarks",class:"col-md-12 w-full text-sm text-white tracking-wide",placeholder:"Enter Remarks",rows:2})]),e("button",ji,i(A.value==="create"?"Create Conflict of Interest":"Update Conflict of Interest"),1)],32)])])])],512)])])):(t(),s("div",Oi,Ni))}});const Ki=Le(Hi,[["__scopeId","data-v-35f3a7a2"]]),ge=d(R=>(Ne("data-v-536934e9"),R=R(),He(),R),"_withScopeId$2"),Yi={key:0},zi={class:"card"},Gi={class:"card-header p-3"},Qi={class:"row"},Wi={class:"col-12"},Ji={class:"row"},Zi={class:"col-lg-9 col-md-8 col-12 mt-2"},Xi={"aria-label":"Breadcrumbs",class:"text-sm overflow-hidden"},el={class:"breadcrumb mb-0 bg-warning"},tl=["onClick"],sl={class:"col-lg-3 col-md-4 col-12"},al={class:"row"},nl={class:"col-md-6 col-12 mt-2"},ol={class:"dropdown"},il={class:"nav-link dropdown-toggle btn btn-secondary btn-block",href:"#",id:"navbarDropdown",type:"button",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},ll=ge(()=>e("span",{class:"text-warning mr-1"},"sort by:",-1)),dl={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},rl=["onClick"],cl={class:"col-md-6 col-12 mt-2"},ul={class:"dropdown"},_l={key:0,class:"nav-link dropdown-toggle btn btn-primary btn-block",href:"#",id:"navbarDropdown",type:"button",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},ml=ge(()=>e("i",{class:"fas fa-plus mr-2"},null,-1)),pl={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},hl=ge(()=>e("i",{class:"fas fa-plus"},null,-1)),vl=ge(()=>e("i",{class:"fas fa-file-upload"},null,-1)),bl={key:0,class:"col-12 mt-3"},gl={class:"input-group input-group-lg"},fl=ge(()=>e("div",{class:"input-group-append"},[e("button",{type:"submit",class:"btn btn-lg btn-default"},[e("i",{class:"fa fa-search"})])],-1)),yl={class:"card-body py-0 px-4 min-h-[300px] relative -top-px z-10"},xl={class:"table-responsive"},$l={class:"table mb-0"},wl={class:"w-28"},kl=["onClick"],Ml=["src"],Cl={key:1},Sl=["src"],Al={key:0},Il={class:"font-weight-bold text-primary text-truncate"},Tl={class:"text-sm font-weight-bold text-primary"},ql=ge(()=>e("span",{class:"text-black"},"Folders",-1)),Pl={class:"text-sm font-weight-bold text-primary"},Fl=ge(()=>e("span",{class:"text-black"},"Files",-1)),Dl={key:1},El={key:0},Rl={class:"font-weight-bold text-primary text-truncate"},Ul={class:"text-sm font-weight-bold text-primary"},Ll={class:"text-black"},Vl={class:"w-28"},jl={key:0},Ol={class:"text-xs text-primary text-truncate"},Bl={key:1},Nl={key:0},Hl={class:"text-xs text-primary text-truncate"},Kl={class:"w-20 text-center"},Yl={class:"flex justify-end space-x-2"},zl={key:0},Gl=["onClick"],Ql=ge(()=>e("i",{class:"far fa-edit"},null,-1)),Wl=[Ql],Jl={key:1},Zl=["onClick"],Xl=ge(()=>e("i",{class:"far fa-edit"},null,-1)),ed=[Xl],td=ge(()=>e("i",{class:"far fa-eye"},null,-1)),sd={class:"flex justify-center col-md-6"},ad={method:"dialog",class:"modal-box rounded-xl"},nd={class:"font-bold text-lg justify-center flex"},od=ge(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),id={class:"w-full mt-6 p-2"},ld={class:"font-thin text-sm flex flex-col items-center gap-6"},dd={class:"row"},rd={key:0,class:"row mt-2 ml-2"},cd={key:0,class:"row mt-2 ml-2"},ud={class:"col-md-6"},_d=["src"],md={class:"col-md-6"},pd=ge(()=>e("strong",null,"File Name:",-1)),hd={class:"text-bold text-primary"},vd=ge(()=>e("strong",null,"File Size:",-1)),bd={class:"text-bold text-primary"},gd=ge(()=>e("strong",null,"Type:",-1)),fd={class:"text-bold text-primary"},yd=ge(()=>e("strong",null,"Last Modified: ",-1)),xd={class:"text-bold text-primary"},$d={type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},wd={key:1},kd=ge(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),Md=[kd],Cd=$e({__name:"Documents",setup(R){const $=xe(),G=Fe(),E=Ae(),T=m("create"),k=m("folder"),P=E.params.boardId,A=m("name-asc"),b=m(""),Q=m([]),w=E.params.meetingId,g=m([{id:"1",name:"Folders"}]),y=m(null),M=m(!1),S=m(null),O=m(null),ae=[{id:"name-asc",name:"Name (A-Z)"},{id:"name-desc",name:"Name (Z-A)"},{id:"date-newest",name:"Newest to oldest"},{id:"date-oldest",name:"Oldest to newest"}];function X(o){A.value=o}d(X,"applySort");const oe=ie(()=>{const o=ae.find(f=>f.id===A.value);return o?o.name:"Unknown"});function ne(o){g.value.push({id:o.id,name:o.name})}d(ne,"addToNavigationPath");function _e(o){const f=g.value.slice(0,o+1);if(f.length!==g.value.length){g.value=f;const p=C(g.value.at(-1).id,q.value);Q.value=p?p.children||[]:[]}}d(_e,"navigateTo");function C(o,f){if(!Array.isArray(f))return null;for(const p of f){if(p.id===o)return p;if(p.children&&Array.isArray(p.children)){const n=C(o,p.children);if(n)return n}}return null}d(C,"findFolderById");function U(o){g.value.at(-1).id!==o.id&&(ne(o),console.log("folder",o.children),Q.value=o.children||[])}d(U,"openFolder");function _(o){let f=0,p=0;return o.children&&o.children.length>0&&o.children.forEach(n=>{n.type==="folder"?f++:n.type==="file"&&p++}),{folderCount:f,fileCount:p}}d(_,"countChildrenTypes");const I=d(()=>Ce({queryKey:["getMeetingFoldersKey",w],queryFn:async()=>(await hs(w,{paginate:"false"})).data[0].children}),"getMeetingFolders"),{isLoading:K,data:q,refetch:B}=I();Me(async()=>{await B()}),rt(q,o=>{var f;if(o&&o.length>0){if(g.value.length===1){const p=o[0];g.value[0].id=p.folderable_id.toString(),g.value[0].name=" Documents"}if(g.value.length===1)Q.value=o;else{const p=C((f=g.value.at(-1))==null?void 0:f.id,o);Q.value=p?p.children||[]:[]}}},{immediate:!0});const N=ie(()=>b.value?c.value.filter(o=>o.name.toLowerCase().includes(b.value.toLowerCase())):c.value),c=ie(()=>{const o=g.value.length>1?Q.value:q.value;return Array.isArray(o)?[...o].sort((f,p)=>{switch(A.value){case"name-asc":return f.name.localeCompare(p.name);case"name-desc":return p.name.localeCompare(f.name);case"date-newest":return new Date(p.created_at).getTime()-new Date(f.created_at).getTime();case"date-oldest":return new Date(f.created_at).getTime()-new Date(p.created_at).getTime();default:return 0}}):[]}),le=ye({name:h().required(),meeting_id:h().required(),folder_id:h().nullable(),parent_id:h(),type:h().oneOf(["folder","file"]).required(),fileupload:Je().nullable()}),{handleSubmit:J,setErrors:me,setFieldValue:ee,values:de}=De({validationSchema:le,initialValues:{name:"",meeting_id:w,folder_id:null,parent_id:"",type:"",fileupload:null}}),pe=d(o=>{var n;const f=o.target;if(!((n=f.files)!=null&&n.length))return;const p=f.files[0];ee("name",p.name),ee("type","file")},"updateName"),L=d(o=>{var p;re(),T.value="create",k.value=o,M.value=!0,(p=O.value)==null||p.showModal(),ee("type",o);const f=g.value.at(-1);ee("parent_id",f.id),console.log("parent",f)},"openCreateFolderModal"),te=J(async(o,{resetForm:f})=>{var p;try{if(T.value==="create")if(k.value==="folder"){const n={children:[],created_at:null,icon:null,id:null,meeting_id:o.meeting_id,folder_id:null,name:o.name,parent_id:o.parent_id.toString(),type:o.type,fileupload:null,media:[]};await us(n,w)}else{const n={children:[],created_at:null,icon:null,id:null,meeting_id:o.meeting_id,folder_id:null,name:o.name,parent_id:o.parent_id.toString(),type:o.type,fileupload:o.fileupload,media:[]};await _s(n,w)}else if(k.value==="folder"){const n={children:[],created_at:null,folder_id:null,icon:null,id:null,meeting_id:o.meeting_id.toString(),name:o.name,parent_id:o.parent_id.toString(),type:o.type,fileupload:null,media:[]},x=S.value?S.value.toString():null;n.folder_id=x,await ms(n,w)}else{const n={children:[],created_at:null,folder_id:null,icon:null,id:null,meeting_id:o.meeting_id.toString(),name:o.name,parent_id:o.parent_id.toString(),type:o.type,fileupload:o.fileupload,media:[]},x=S.value?S.value.toString():null;n.folder_id=x,await ps(n,w)}await B(),re(),(p=O.value)==null||p.close()}catch(n){n instanceof Pe?me(n.messages):G(n)}}),Z=d((o,f)=>{var p;re(),y.value=o,S.value=o.id.toString(),T.value="edit",k.value=f,M.value=!0,ee("name",o.name),ee("folder_id",o.id),ee("type",f),f==="file"&&(ee("fileupload",o.name),zt(o.media[0])),ee("parent_id",o.id),console.log("folder.media",o.name),(p=O.value)==null||p.showModal()},"openEditFolderModal"),re=d(()=>{ee("name",""),ee("folder_id",null),ee("fileupload",""),ee("parent_id",""),ee("type",""),k.value="folder",T.value="create",M.value=!1,y.value=null,S.value=null,wt()},"resetFolder");return(o,f)=>{const p=ct("router-link");return a($).hasPermission(["view folders"])?(t(),s("div",Yi,[e("div",zi,[e("div",Gi,[e("div",Qi,[e("div",Wi,[e("div",Ji,[e("div",Zi,[e("nav",Xi,[e("ol",el,[(t(!0),s(z,null,W(g.value,(n,x)=>(t(),s("li",{key:n.id,class:"breadcrumb-item"},[e("a",{href:"#",class:"text-gray-800 font-medium",onClick:F(Y=>_e(x),["prevent"])},i(n.name),9,tl)]))),128))])])]),e("div",sl,[e("div",al,[e("div",nl,[e("div",ol,[e("button",il,[ll,H(i(oe.value),1)]),e("div",dl,[(t(),s(z,null,W(ae,n=>e("a",{key:n.id,href:"#",class:"dropdown-item",onClick:F(x=>X(n.id),["prevent"])},i(n.name),9,rl)),64))])])]),e("div",cl,[e("div",ul,[a($).hasPermission(["create folders","upload documents","create dropzone"])?(t(),s("button",_l,[ml,H(" New ")])):v("",!0),e("div",pl,[a($).hasPermission(["create folders","create dropzone"])?(t(),s("a",{key:0,href:"#",onClick:f[0]||(f[0]=F(n=>L("folder"),["prevent"])),class:"dropdown-item"},[hl,H(" New folder ")])):v("",!0),a($).hasPermission(["upload documents"])?(t(),s("a",{key:1,href:"#",onClick:f[1]||(f[1]=F(n=>L("file"),["prevent"])),class:"dropdown-item"},[vl,H(" Upload a file ")])):v("",!0)])])])])])])]),a($).hasPermission(["search documents"])?(t(),s("div",bl,[e("div",gl,[It(e("input",{type:"search",class:"form-control form-control-lg",placeholder:"Type your keywords here","onUpdate:modelValue":f[2]||(f[2]=n=>b.value=n)},null,512),[[Tt,b.value]]),fl])])):v("",!0)])]),e("div",yl,[e("div",xl,[e("table",$l,[e("tbody",null,[(t(!0),s(z,null,W(N.value,n=>{var x,Y;return t(),s("tr",{key:n.id,class:"group bg-white hover:bg-gray-100 cursor-pointer"},[e("td",wl,[n.type==="folder"?(t(),s("div",{key:0,onClick:F(ve=>U(n),["prevent"])},[n.type==="folder"?(t(),s("img",{key:0,src:a(Nt)(n.icon),class:"img-fluid",alt:"Folder Icon"},null,8,Ml)):v("",!0)],8,kl)):(t(),s("div",Cl,[a($).hasPermission(["view documents"])?(t(),We(p,{key:0,to:{name:"BoardMediaDetails",params:{boardId:a(P),meetingId:n.meetingId,folderId:n.id,mediaId:n==null?void 0:n.media[0].uuid}},class:"d-block text-success hover:text-green-700 transition ease-in-out"},{default:ze(()=>[e("img",{src:a(Ht)(n.media[0].mime_type),class:"img-fluid",alt:"File Icon"},null,8,Sl)]),_:2},1032,["to"])):v("",!0)]))]),e("td",null,[n.type==="folder"?(t(),s("div",Al,[e("p",Il,i(n.name),1),e("p",Tl,[H(i(_(n).folderCount)+": ",1),ql]),e("p",Pl,[H(i(_(n).fileCount)+": ",1),Fl])])):(t(),s("div",Dl,[a($).hasPermission(["view documents"])?(t(),s("div",El,[e("p",Rl,i((x=n==null?void 0:n.media[0])==null?void 0:x.file_name),1),e("p",Ul,[H(" Size: "),e("span",Ll,i(a(ht)((Y=n==null?void 0:n.media[0])==null?void 0:Y.size)),1)])])):v("",!0)]))]),e("td",Vl,[n.type==="folder"?(t(),s("div",jl,[e("p",Ol,i(a(st)(n.created_at,"")),1)])):(t(),s("div",Bl,[a($).hasPermission(["view documents"])?(t(),s("div",Nl,[e("p",Hl,i(a(st)(n.created_at,"")),1)])):v("",!0)]))]),e("td",Kl,[e("div",Yl,[n.type==="folder"?(t(),s("div",zl,[a($).hasPermission(["edit folders"])?(t(),s("a",{key:0,href:"#",onClick:F(ve=>Z(n,"folder"),["prevent"]),class:"text-warning hover:text-blue-700 transition ease-in-out"},Wl,8,Gl)):v("",!0)])):(t(),s("div",Jl,[a($).hasPermission(["edit documents"])?(t(),s("a",{key:0,href:"#",onClick:F(ve=>Z(n,"file"),["prevent"]),class:"text-warning hover:text-blue-700 transition ease-in-out"},ed,8,Zl)):v("",!0),a($).hasPermission(["view documents"])&&n.type==="file"?(t(),We(p,{key:1,to:{name:"BoardMediaDetails",params:{boardId:a(P),meetingId:n.meetingId,folderId:n.id,mediaId:n==null?void 0:n.media[0].uuid}},class:"text-success :text-green-700 transition ease-in-out"},{default:ze(()=>[td]),_:2},1032,["to"])):v("",!0)]))])])])}),128))])])])])]),e("div",sd,[e("dialog",{id:"foldermodal",class:"modal",ref_key:"FolderModal",ref:O},[e("form",ad,[e("h3",nd,i(T.value==="create"?k.value==="folder"?"Create Folder":"Upload File":k.value==="folder"?"Update Folder":"Update File"),1),od,e("div",id,[e("div",ld,[e("form",{novalidate:"",onSubmit:f[4]||(f[4]=F((...n)=>a(te)&&a(te)(...n),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",dd,[se(qe,{labeled:!0,label:k.value==="folder"?"Folder name":"Upload File name",name:"name",class:"col-md-12 w-full text-sm text-white tracking-wide",placeholder:k.value==="folder"?"Folder name":"Upload File name",type:"text"},null,8,["label","placeholder"]),k.value==="file"?(t(),s("div",rd,[se(fs,{labeled:!0,label:"Upload Cover Image for the Board",name:"fileupload",class:"w-full text-sm text-white tracking-wide col-md-12",placeholder:"Enter Cover Image of the Board",type:"file",accept:a(Kt).join(", "),onChange:f[3]||(f[3]=n=>{a(Yt)(n),pe(n)})},null,8,["accept"]),a(de).fileupload?(t(),s("div",cd,[e("div",ud,[a(Ye).previewUrl?(t(),s("img",{key:0,src:a(Ye).previewUrl,alt:"File Preview",class:"file_attachment"},null,8,_d)):v("",!0)]),e("div",md,[e("p",null,[pd,e("span",hd,i(a(Ye).name),1)]),e("p",null,[vd,e("span",bd,i(a(ht)(a(Ye).size)),1)]),e("p",null,[gd,e("span",fd,i(a(Ye).type),1)]),e("p",null,[yd,e("span",xd,i(a($t)(a(Ye).lastModifiedDate)),1)])])])):v("",!0)])):v("",!0)]),e("button",$d,i(T.value==="create"?k.value==="folder"?"Create Folder":"Upload File":k.value==="folder"?"Update Folder":"Update File"),1)],32)])])])],512)])])):(t(),s("div",wd,Md))}}});const Sd=Le(Cd,[["__scopeId","data-v-536934e9"]]),Ad={key:0,class:"card"},Id=e("div",{class:"card-header flex items-center"},[e("h2",{class:"card-header-title h3"},"Details")],-1),Td={class:"card-body"},qd={class:"space-y-6"},Pd={class:"flex items-start"},Fd=e("div",{class:"mr-4 w-6 text-muted"},[e("i",{class:"fas fa-calendar-day"})],-1),Dd={class:"h3 mb-0"},Ed={class:"m-0"},Rd={class:"text-primary"},Ud={key:0},Ld={key:0,class:"m-0 text-black"},Vd={class:"text-primary"},jd={class:"m-0 text-black"},Od={class:"text-primary"},Bd={class:"text-primary"},Nd={class:"flex"},Hd={key:0,class:"w-6 mr-4 mt-2 text-muted"},Kd=e("i",{class:"fas fa-video h-6 w-6 fa-video mx-auto"},null,-1),Yd=[Kd],zd={key:0,class:"flex mb-2 flex-wrap"},Gd=["href"],Qd=e("i",{class:"fas fa-link"},null,-1),Wd=[Qd],Jd=["href"],Zd=e("button",{type:"button",class:"text-primary hover:bg-primary-100 bg-transparent py-2 px-3 rounded-md text-base flex gap-1 items-center justify-center min-w-fit"}," Run a Video Test ",-1),Xd=[Zd],er={key:1},tr={class:"m-0 text-black"},sr={class:"text-primary"},ar={class:"flex items-center"},nr={class:"m-0 text-sm"},or=["innerHTML"],ir=$e({__name:"HomeDashBoard",setup(R){const $=xe(),G=Ae();Ze();const E=G.params.boardId,T=G.params.meetingId,k=G.params.scheduleId,P=d(y=>{const M=document.createElement("textarea");M.value=y,M.style.top="0",M.style.left="0",M.style.position="fixed",document.body.appendChild(M),M.focus(),M.select();try{const O=document.execCommand("copy")?"successful":"unsuccessful"}catch(S){console.error("Fallback: Oops, unable to copy",S)}document.body.removeChild(M)},"fallbackCopyTextToClipboard"),A=d(async y=>{if(!navigator.clipboard){P(y),alert("Link copied to clipboard, paste it on your browser or share it to your platform");return}try{await navigator.clipboard.writeText(y),alert("Link copied to clipboard!")}catch(M){console.error("Failed to copy: ",M)}},"copyLinkToClipboard"),b=d(()=>Ce({queryKey:["getMeetingKey",E,T],queryFn:async()=>{const y=await xt(T);return window.dispatchEvent(new CustomEvent("updateTitle",{detail:y.data.title+" Meeting"})),y.data}}),"getMeeting"),{isLoading:Q,data:w,refetch:g}=b();return(y,M)=>{var O,ae,X,oe,ne,_e,C,U;const S=ct("router-link");return a(w)?(t(),s("div",Ad,[Id,e("div",Td,[e("div",qd,[e("div",Pd,[Fd,e("div",null,[e("div",Dd,[e("p",Ed,[H(" Title: "),e("span",Rd,i((O=a(w))==null?void 0:O.title),1)]),(t(!0),s(z,null,W((ae=a(w))==null?void 0:ae.schedules,_=>(t(),s("div",{key:_.id},[_.id===a(k)?(t(),s("div",Ud,[_.id===a(k)?(t(),s("p",Ld,[H(" Date: "),e("span",Vd,i(a(ut)(_.date)),1)])):v("",!0),e("p",jd,[H(" Start: "),e("span",Od,i(_.start_time),1),H(" End: "),e("span",Bd,i(_.end_time),1)])])):v("",!0)]))),128))])])]),e("div",Nd,[(X=a(w))!=null&&X.link?(t(),s("div",Hd,Yd)):v("",!0),e("div",null,[(oe=a(w))!=null&&oe.link?(t(),s("div",zd,[e("a",{target:"_blank",href:(ne=a(w))==null?void 0:ne.link,class:"btn btn-primary whitespace-nowrap mr-2","aria-label":"Join Web Conference - open in a new tab"}," Join Web Conference ",8,Gd),e("button",{type:"button",onClick:M[0]||(M[0]=_=>{var I;return A((I=a(w))==null?void 0:I.link)}),title:"Copy web conference link","aria-label":"Copy web conference link",class:"btn btn-primary mr-2"},Wd),e("a",{href:(_e=a(w))==null?void 0:_e.link,target:"_blank","aria-label":"Run a Video Test - open in a new tab"},Xd,8,Jd)])):(t(),s("div",er,[e("p",tr,[H(" Physical Meeting at:"),e("span",sr,i((C=a(w))==null?void 0:C.location),1)])]))])]),e("div",ar,[e("p",nr,[H(" Meeting Description: "),e("span",{class:"text-primary",innerHTML:(U=a(w))==null?void 0:U.description},null,8,or)])]),e("div",null,[a($).hasPermission(["view board"])?(t(),We(S,{key:0,to:{name:"BoardDetails",params:{boardId:a(E)}},class:"badge badge-soft"},{default:ze(()=>[H(i(a(w).meetingable.name),1)]),_:1},8,["to"])):v("",!0),a($).hasPermission(["view meeting"])?(t(),We(S,{key:1,to:{name:"BoardMeetingDetails",params:{boardId:a(E),meetingId:a(T),scheduleId:a(k)}},class:"badge badge-soft"},{default:ze(()=>[H(i(a(w).title),1)]),_:1},8,["to"])):v("",!0)])])])])):v("",!0)}}}),lr={class:"role-container w-100 d-flex justify-content-center"},dr=["aria-expanded"],rr={key:0,class:"dropdown-menu show justify-content","aria-labelledby":"role-status"},cr=["onClick"],ur={key:1,class:"text-center"},_r=$e({__name:"MemberShipPosition",props:{membership:{},positions:{},disableRemotePosition:{}},emits:["position-updated"],setup(R,{emit:$}){const G=R,E=$,T=m(null),k=m(!1),P=d(g=>{g.stopPropagation(),k.value=!k.value},"toggleDropdown"),A=d(g=>{E("position-updated",{membershipId:G.membership.id,positionId:g.id}),k.value=!1},"updateRole"),b=ie(()=>{var g;return`bg-${(g=G.membership)==null?void 0:g.position.name.toLowerCase()} text-white`}),Q=ie(()=>{var g;return(g=G.membership)==null?void 0:g.position.name}),w=ie(()=>G.positions);return(g,y)=>{var M,S,O,ae;return t(),s("div",lr,[Q.value?(t(),s("div",{key:0,class:"dropdown",ref_key:"dropdownRef",ref:T},[e("button",{class:ce(["btn btn-primary dropdown-toggle text-truncate w-100",b.value]),type:"button",onClick:P,"aria-haspopup":"true","aria-expanded":k.value},[e("i",{class:ce(["mr-2 fa "+((M=G.membership)==null?void 0:M.position.icon),"mr-2"])},null,2),H(" "+i((S=G.membership)==null?void 0:S.position.name),1)],10,dr),k.value?(t(),s("ul",rr,[(t(!0),s(z,null,W(w.value,X=>(t(),s("li",{key:X.name},[e("a",{href:"#",class:"dropdown-item",onClick:F(oe=>A(X),["prevent"])},[e("i",{class:ce(["mr-2 fa "+X.icon,"mr-2"])},null,2),H(" "+i(X.name),1)],8,cr)]))),128))])):v("",!0)],512)):(t(),s("div",ur,[e("i",{class:ce(["mr-2 fa "+((O=G.membership)==null?void 0:O.position.icon),"mr-2"])},null,2),H(" "+i((ae=G.membership)==null?void 0:ae.position.name),1)]))])}}});const mr=Le(_r,[["__scopeId","data-v-9eb14bfc"]]),Ve=d(R=>(Ne("data-v-cbbf653a"),R=R(),He(),R),"_withScopeId$1"),pr={class:"card"},hr={class:"card-header flex items-center"},vr=Ve(()=>e("h2",{class:"card-header-title h3"},"Board Meeting Members",-1)),br={class:"ml-auto flex items-center space-x-2"},gr={class:"container-fluid"},fr={key:0,class:"row"},yr={class:"card card-outline card-primary h-100"},xr={class:"card-body box-profile"},$r={class:"text-center"},wr={class:"profile-username text-center text-primary"},kr=["onClick"],Mr=["onClick"],Cr=Ve(()=>e("i",{class:"far fa-eye"},null,-1)),Sr=[Cr],Ar={class:"text-muted text-center text-bold"},Ir={key:0,class:"mt-3"},Tr=Ve(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Position ",-1)),qr={class:"text-center"},Pr={key:1,class:"mt-3"},Fr=Ve(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Position ",-1)),Dr={class:"text-center"},Er={class:"mt-3"},Rr=Ve(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Last Updated ",-1)),Ur={class:"text-center text-primary text-small"},Lr={class:"flex justify-center col-md-6"},Vr={method:"dialog",class:"modal-box rounded-xl"},jr=Ve(()=>e("h3",{class:"font-bold text-lg justify-center flex"},i("Add Members"),-1)),Or=Ve(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),Br={class:"w-full mt-6 p-2"},Nr={class:"font-thin text-sm flex flex-col items-center gap-6"},Hr={key:0,class:"message"},Kr=Ve(()=>e("button",{type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},i("Add Members"),-1)),Yr=$e({__name:"Members",emits:["memberships-updated"],setup(R,{emit:$}){const G=xe(),E=Fe(),T=Ae(),k=Ze(),P=m("create"),A=T.params.boardId,b=T.params.meetingId,Q=T.params.scheduleId,w=m(!1),g=m(null),y=m([]),M=m([]),S=$,{errorMessage:O}=Be("assignees"),ae=ye({id:h().nullable(),position_id:h().nullable(),board_id:Je().required(),meeting_id:Je().required(),memberships:Ge().of(h()).required("Members selection is required.")}),{handleSubmit:X,setErrors:oe,setFieldValue:ne,values:_e}=De({validationSchema:ae,initialValues:{board_id:A,meeting_id:b,id:"",position_id:"",memberships:[]}}),C=d(()=>{ne("memberships",y.value)},"selectedMembers"),U=d(()=>{ne("memberships",y.value)},"removeselectedMembers"),_=d(L=>{var Z;console.log(L.memberships);const te=L.memberships.map(re=>re.member.id.toString());y.value=te,ne("memberships",y.value),P.value="edit",w.value=!0,(Z=g.value)==null||Z.showModal()},"openEditMembershipsModal"),I=X(async(L,{resetForm:te})=>{var Z;try{ne("memberships",y.value);const re={board_id:L.board_id,memberships:L.memberships};if(P.value==="create")await Lt(re,b,Q);else if(P.value==="edit")await Vt(re,b,Q);else if(P.value==="position"){const o={id:L.id,position_id:L.position_id};await jt(o,b,Q)}await c(),S("memberships-updated"),K(),(Z=g.value)==null||Z.close()}catch(re){re instanceof Pe?oe(re.messages):E(re)}}),K=d(()=>{P.value="create",w.value=!1,y.value=[],ne("memberships",[]),ne("id",""),ne("position_id","")},"reset"),q=d(()=>Ce({queryKey:["getMembershipsKey",b,Q],queryFn:async()=>{const L=await ot(b,{paginate:"false"});return console.log("response.data",L.data),L.data}}),"getMemberships"),{isLoading:B,data:N,refetch:c}=q(),le=ie(()=>{var te;const L=[];return M.value&&((te=M.value)==null?void 0:te.length)>0&&M.value.reduce((Z,re)=>(Z.push({id:re.id,name:`${re.user.full_name}`}),Z),L),console.log("resul",L),L}),J=d(async()=>{const L=await vs(A,{paginate:"false"});M.value=L.data},"getMembers");Me(async()=>{J()});const me=m([]),ee=d(async()=>{const L=await bs({paginate:"false"});me.value=L.data},"getPositions");Me(async()=>{await ee()});const de=d(L=>{K(),P.value="position",ne("id",L.membershipId),ne("position_id",L.positionId),I()},"handlePositionUpdated"),pe=d(L=>{k.push({name:"ProfileDetails",params:{userId:L.id,profileId:L.profile.id}})},"openUserProfile");return(L,te)=>(t(),s(z,null,[e("div",pr,[e("div",hr,[vr,e("div",br,[e("button",{class:"btn btn-secondary btn-sm",onClick:te[0]||(te[0]=F(Z=>_({memberships:a(N)}),["prevent"]))}," Update Members ")])]),e("div",gr,[a(N)?(t(),s("div",fr,[(t(!0),s(z,null,W(a(N),(Z,re)=>(t(),s("div",{class:"col-lg-3 col-md-4 col-sm-6 mb-3",key:re},[e("div",yr,[e("div",xr,[e("div",$r,[e("h3",wr,[e("a",{href:"",onClick:F(o=>pe(Z.user),["prevent"])},i(Z.user.full_name),9,kr),e("button",{type:"button",onClick:F(o=>pe(Z.user),["prevent"]),title:"",class:"mx-2 btn btn-sm btn-primary"},Sr,8,Mr)]),e("p",Ar,i(Z.position.name),1)]),a(G).hasPermission(["assign meeting position"])?(t(),s("div",Ir,[Tr,e("div",qr,[se(mr,{membership:Z,positions:me.value,disableRemotePosition:0,onPositionUpdated:de},null,8,["membership","positions"])])])):(t(),s("div",Pr,[Fr,e("div",Dr,[e("i",{class:ce(["mr-2 fa "+Z.position.icon,"mr-2"])},null,2),H(" "+i(Z.position.name),1)])])),e("div",Er,[Rr,e("p",Ur,i(a(st)(Z.updated_at,null)),1)])])])]))),128))])):v("",!0)])]),e("div",Lr,[e("dialog",{id:"membershipsmodal",class:"modal",ref_key:"membershipsmodal",ref:g},[e("form",Vr,[jr,Or,e("div",Br,[e("div",Nr,[e("form",{novalidate:"",onSubmit:te[4]||(te[4]=F((...Z)=>a(I)&&a(I)(...Z),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",{class:ce(["multiselect-container",{error:!!a(O)}])},[se(a(nt),{id:"members",modelValue:y.value,"onUpdate:modelValue":te[1]||(te[1]=Z=>y.value=Z),mode:"tags",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:le.value,valueProp:"id",trackBy:"id",label:"name",class:ce(["multiselect-container",{error:!!a(O)}]),onSelect:te[2]||(te[2]=Z=>C()),onDeselect:te[3]||(te[3]=Z=>U())},null,8,["modelValue","options","class"]),a(O)?(t(),s("div",Hr,i(a(O)),1)):v("",!0)],2),Kr],32)])])])],512)])],64))}});const zr=Le(Yr,[["__scopeId","data-v-cbbf653a"]]),Gr={key:0},Qr={class:"card h-full"},Wr={class:"card-header flex items-center"},Jr=e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"}," Meeting Polls ")],-1),Zr={key:0,class:"flex items-center space-x-2"},Xr=e("i",{class:"far fa fa-plus mr-2"},null,-1),ec=e("span",{class:"sr-only"},"Add poll",-1),tc={class:"card-container"},sc={key:0},ac={key:1},nc={class:"row overflow-auto p-4",style:{"max-height":"100vh"}},oc={class:"card card-outline card-primary h-100"},ic={class:"card-header"},lc={class:"card-tools"},dc=["onClick"],rc=e("i",{class:"fas fa-edit"},null,-1),cc=[rc],uc={class:"card-body"},_c={class:"text-primary tex-bold uppercase"},mc=e("strong",{class:"text-primary"},"Question:",-1),pc={class:"mt-2 text-primary text-bold"},hc={class:""},vc=e("strong",null,"Answer Options:",-1),bc={class:"row"},gc={class:"col-6"},fc={class:"list-unstyled text-success"},yc={class:"col-6"},xc={class:"list-unstyled text-success"},$c={class:"d-flex justify-content-between"},wc=e("strong",null,"Due Date:",-1),kc=e("strong",null,"Status:",-1),Mc=e("strong",null,"Vote:",-1),Cc=["innerHTML"],Sc={class:""},Ac=e("strong",null,"Assignees:",-1),Ic={class:"row"},Tc={class:"col-6"},qc={class:"list-unstyled"},Pc={class:"col-6"},Fc={class:"list-unstyled"},Dc=e("strong",null,"Description:",-1),Ec=["innerHTML"],Rc={class:"flex justify-center items-center min-h-screen"},Uc={method:"dialog",class:"modal-box rounded-xl relative bg-white shadow-xl"},Lc={class:"font-bold text-lg text-center"},Vc=e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1),jc={class:"overflow-auto p-4",style:{"max-height":"80vh"}},Oc={class:"grid grid-cols-2 md:grid-cols-2 gap-4 p-2"},Bc={class:"col-span-2"},Nc={class:"flex flex-wrap -mx-2 mt-2"},Hc={class:"w-full md:w-1/2 px-1 md:px-2"},Kc={class:"w-full md:w-1/2 px-1 md:px-2"},Yc={class:"flex flex-wrap -mx-2 mt-2"},zc={class:"w-full md:w-1/3 px-1 md:px-2 text-center"},Gc=e("h2",{class:"font-bold text-sm text-center"},"Click to Add Options",-1),Qc=e("h4",{class:"text-info font-semibold"},"Your Options",-1),Wc={key:0},Jc={key:0,class:"w-full md:w-2/3 px-1 md:px-2 flex flex-col"},Zc=["onClick"],Xc={class:"flex flex-wrap -mx-2 mt-2"},eu={class:"w-full md:w-1/2 px-1 md:px-2"},tu={class:"w-full md:w-1/2 px-1 md:px-2"},su={key:0},au=e("h2",{class:"font-bold text-primary text-sm text-center"}," All Members Will be assiged this Poll ",-1),nu=[au],ou={key:0,class:"form-group col-span-3"},iu=e("label",{class:"text-bold font-medium tracking-wide"}," People To Vote ",-1),lu={key:0,class:"message"},du={key:1},ru={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},cu={key:1},uu=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),_u=[uu],mu=$e({__name:"Pollp",setup(R){const $=xe(),G=Ae(),E=m(!1),T=m("create"),k=G.params.boardId,P=G.params.meetingId,A=m(null),b=m([]),Q=m(null),w=m("single"),g=m("individuals"),y=m([]),M=m([]),S=m(""),O=Fe();Be("duedate");const{errorMessage:ae}=Be("pollassignees"),X=ye({id:h().required(),title:h().required(),poll_id:h().nullable(),deleted_at:h().nullable(),created_at:h().nullable(),updated_at:h().nullable()}),oe=ye({id:h().required(),full_name:h().required()}),ne=ye({id:h().required(),poll_id:h().nullable(),membership_id:h().required(),user:oe}),_e=ye({meeting_id:h().nullable(),board_id:h().nullable(),committee_id:h().nullable(),question:h().required(),description:h().required(),questionoptiontype:h().required(),optionstatus:h().required(),options:Ge().of(X).required(),duedate:h().required(),assigneetype:h().required(),assigneestatus:h().required(),pollassignees:Ge().of(ne).nullable(),status:h().required()}),{handleSubmit:C,setErrors:U,setFieldValue:_,values:I}=De({validationSchema:_e,initialValues:{meeting_id:P,board_id:k,committee_id:null,question:"",description:"",questionoptiontype:"",optionstatus:"",options:[{id:dt(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null}],duedate:"",assigneetype:"",assigneestatus:"",pollassignees:[],status:"inactive"}});Be("options");const K=d(()=>{var l;J(),T.value="create",E.value=!0,(l=Q.value)==null||l.showModal()},"openCreatePollModal"),q=d(l=>{var u;J(),A.value=l.id,_("question",l.question),_("description",l.description),_("questionoptiontype",l.questionoptiontype),_("optionstatus",l.optionstatus),_("duedate",l.duedate),_("assigneetype",l.assigneetype),_("assigneestatus",l.assigneestatus),_("status",l.status),_("options",l.options),g.value=l.assigneestatus,B(l.pollassignees),T.value="edit",E.value=!0,(u=Q.value)==null||u.showModal()},"openEditPollModal");function B(l){b.value=l.map(u=>({id:u.id,full_name:u.user.full_name,poll_id:u.poll_id,membership_id:u.membership_id,user:u.user})),_("pollassignees",b.value)}d(B,"mappollassigneesToReactiveRef");const N=d(()=>{_("pollassignees",b.value)},"selectedMembers"),c=d(()=>{_("pollassignees",b.value)},"removeselectedUsers"),le=C(async(l,{resetForm:u})=>{var r;try{console.log("dddd");const j={meeting_id:l.meeting_id,board_id:l.board_id,committee_id:l.committee_id,question:l.question,description:l.description,questionoptiontype:l.questionoptiontype,optionstatus:l.optionstatus,options:l.options,duedate:l.duedate,assigneetype:l.assigneetype,assigneestatus:l.assigneestatus,pollassignees:l.pollassignees,status:l.status};if(T.value==="create")await ys(j,P);else{const D=A.value;await xs(j,P,D)}(r=Q.value)==null||r.close(),await V(),J()}catch(j){j instanceof Pe?U(j.messages):O(j)}}),J=d(()=>{T.value="create",E.value=!1,A.value=null,w.value="single",g.value="all_members",b.value=[],_("meeting_id",P),_("board_id",k),_("committee_id",null),_("question",""),_("description",""),_("questionoptiontype","single"),_("optionstatus","single"),_("options",[{id:dt(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null}]),_("duedate",""),_("assigneetype","all_members"),_("assigneestatus","all_members"),_("pollassignees",[]),_("status","inactive")},"reset"),me=d(l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),"formattedDateTime"),ee=d(l=>de(l)?"bg-danger":"bg-success","dateBadgeClass"),de=d(l=>{const u=new Date,r=new Date(l);return u>r},"hasDueDatePassed"),pe=d(l=>{if(!l.votes||l.votes.length===0)return"No votes yet";const u=l.votes.length,r=l.pollassignees.length;if(u>r)return console.error("Total votes exceed total members, which is unexpected."),"Voting data error";const j=l.votes.reduce((ke,Qe)=>{const it=JSON.parse(Qe.option_id).id;return ke[it]=(ke[it]||0)+1,ke},{}),D=Object.keys(j).reduce((ke,Qe)=>j[ke]>j[Qe]?ke:Qe);if(!l.options.find(ke=>ke.id===D))return console.error("Most voted option not found in poll options."),"Voting data error";const fe=r-u;return(j[D]/u*100).toFixed(1),`${l.options.map(ke=>`${((j[ke.id]||0)/u*100).toFixed(1)}% voted for ${ke.title}`).join("<br>")}<br>Total votes: ${u} / ${fe} not yet`},"calculateVoteStats"),L=d(l=>{switch(l){case"Backlog":return"badge bg-warning";case"Pending":return"badge bg-info";case"On Progress":return"badge bg-primary";case"Completed":return"badge bg-success";default:return"badge"}},"statusClass"),te=[{name:"Single Answer",value:"single"},{name:"Multiple Answers: More than one",value:"multiple"}],Z=[{name:"Individuals",value:"individuals"},{name:"Assign All Meeting Members",value:"all_members"}],re=ie(()=>te),o=ie(()=>Z),f=d(l=>{M.value=[],y.value=[],n(),w.value=l,_("questionoptiontype",l),_("optionstatus",l)},"handleQuestionOptionTypeChange"),p=d(l=>{b.value=[],S.value=l,g.value=l,_("assigneetype",l),_("assigneestatus",l),_("pollassignees",[])},"handleAssigneeTypeChange"),n=d(()=>{Array.isArray(I.options)||(console.error("Invalid state: values.options is not an array."),_("options",[]));const l={id:dt(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null};_("options",[...I.options,l])},"addEmptyOption");rt(()=>I.options,l=>{});const x=d(l=>{const u=I.options.filter(r=>r.id!==l);console.log("vv",u),_("options",u)},"removeOption"),Y=d(()=>Ce({queryKey:["getPollMembershisKey"],queryFn:async()=>(await ot(P,{paginate:"false"})).data.map(Ue())}),"getMemberships"),{isLoading:ve,data:be,refetch:Ie}=Y(),Ue=d(()=>l=>({id:l.id,full_name:l.user.full_name,membership_id:l.id,user:l.user}),"formatEvent"),Se=ie(()=>{var l;return!be.value||((l=be.value)==null?void 0:l.length)===0?[]:be.value}),je=d(()=>Ce({queryKey:["getMeetingPollsKey",P],queryFn:async()=>(await $s(P,{paginate:"false"})).data}),"getMeetingPolls"),{isLoading:Oe,data:Ke,refetch:V}=je();return Me(async()=>{Ie(),V()}),(l,u)=>a($).hasPermission(["view poll"])?(t(),s("div",Gr,[e("div",Qr,[e("div",Wr,[Jr,a($).hasPermission(["create poll"])?(t(),s("div",Zr,[e("button",{type:"button",onClick:F(K,["prevent"]),class:"btn btn-tool"},[Xr,H(),ec])])):v("",!0)]),e("div",tc,[a(Oe)?(t(),s("div",sc,"Loading Meeting Polls...")):(t(),s("div",ac,[e("div",nc,[(t(!0),s(z,null,W(a(Ke),(r,j)=>(t(),s("div",{class:"col-lg-12 col-md-12 col-sm-12 mb-2",key:j},[e("div",oc,[e("div",ic,[e("div",lc,[a($).hasPermission(["edit poll"])?(t(),s("button",{key:0,class:"btn btn-tool",onClick:F(D=>q(r),["prevent"])},cc,8,dc)):v("",!0)])]),e("div",uc,[e("div",_c,[mc,e("p",pc,i(r.question),1),e("div",hc,[vc,e("div",bc,[e("div",gc,[e("ul",fc,[(t(!0),s(z,null,W(r.options.slice(0,Math.ceil(r.options.length/2)),(D,ue)=>(t(),s("li",{key:D.id},i(ue+1)+". "+i(D.title),1))),128))])]),e("div",yc,[e("ul",xc,[(t(!0),s(z,null,W(r.options.slice(Math.ceil(r.options.length/2)),(D,ue)=>(t(),s("li",{key:D.id},i(ue+1+Math.ceil(r.options.length/2))+". "+i(D.title),1))),128))])])])])]),e("div",$c,[e("div",null,[wc,e("p",{class:ce(ee(r.duedate))},i(me(r.duedate)),3)]),e("div",null,[kc,e("p",null,[e("span",{class:ce(L(r.status))},i(r.status),3)])]),e("div",null,[Mc,e("p",null,[e("span",{innerHTML:pe(r)},null,8,Cc)])])]),e("div",Sc,[Ac,e("div",Ic,[e("div",Tc,[e("ul",qc,[(t(!0),s(z,null,W(r.pollassignees.slice(0,Math.ceil(r.pollassignees.length/2)),(D,ue)=>(t(),s("li",{key:D.id},i(ue+1)+". "+i(D.user.full_name),1))),128))])]),e("div",Pc,[e("ul",Fc,[(t(!0),s(z,null,W(r.pollassignees.slice(Math.ceil(r.pollassignees.length/2)),(D,ue)=>(t(),s("li",{key:D.id},i(ue+1+Math.ceil(r.pollassignees.length/2))+". "+i(D.user.full_name),1))),128))])])])]),e("div",null,[Dc,e("p",{innerHTML:r.description,class:"mt-2"},null,8,Ec)])])])]))),128))])]))])]),e("div",Rc,[e("dialog",{id:"pollmodal",class:"modal w-full max-w-4xl mx-auto p-0",ref_key:"PollModal",ref:Q},[e("form",Uc,[e("h3",Lc,i(T.value=="create"?"Create Poll":"Edit Poll"),1),Vc,e("div",jc,[e("div",Oc,[e("div",Bc,[e("form",{novalidate:"",onSubmit:u[3]||(u[3]=F((...r)=>a(le)&&a(le)(...r),["prevent"])),class:""},[se(qe,{labeled:!0,label:"Poll Question",name:"question",placeholder:"Enter Poll Question",type:"text"}),se(_t,{label:"Poll description",name:"description",theme:"snow",placeholder:"Enter Poll Description",toolbar:"full",contentType:"html",class:"col-span-2"}),e("div",Nc,[e("div",Hc,[se(at,{labeled:!0,name:"questionoptiontype",label:"Select Allowed Answers On the Question",placeholder:"Select Allowed Answers On the Question",options:re.value,onSelectedItem:f},null,8,["options"])]),e("div",Kc,[se(mt,{label:"Poll Due Date",name:"duedate",flow:["month"],placeholder:"Enter Poll Due Date & Time"})])]),e("div",Yc,[e("div",zc,[e("div",null,[Gc,e("button",{onClick:F(n,["prevent"]),class:"btn btn-primary h-10 mt-2"}," Add Option ")]),Qc,a(I).options?(t(),s("ul",Wc,[(t(!0),s(z,null,W(a(I).options,(r,j)=>(t(),s("li",{class:"text-primary font-bold text-justify",key:j},i(j+1)+"."+i(r==null?void 0:r.title),1))),128))])):v("",!0)]),a(I).options?(t(),s("div",Jc,[(t(!0),s(z,null,W(a(I).options,(r,j)=>(t(),s("div",{class:"form-group flex items-center mb-2",key:j},[se(gs,{labeled:!0,label:"Title for option "+(j+1),name:"options["+j+"].title",placeholder:"Enter title",class:"flex-grow",type:"text"},null,8,["label","name"]),e("a",{href:"#",class:"ml-2 text-red-600 font-bold mt-8",onClick:F(D=>x(r.id),["prevent"])}," ✕ ",8,Zc)]))),128))])):v("",!0)]),e("div",Xc,[e("div",eu,[se(at,{labeled:!0,name:"assigneetype",label:"Select Assignee Type",placeholder:"Select Assignee Type",options:o.value,onSelectedItem:p},null,8,["options"])]),e("div",tu,[g.value==="all_members"?(t(),s("div",su,nu)):v("",!0)])]),g.value==="individuals"?(t(),s("div",ou,[iu,e("div",{class:ce(["multiselect-container",{error:!!a(ae)}])},[se(a(nt),{id:"pollassignees",modelValue:b.value,"onUpdate:modelValue":u[0]||(u[0]=r=>b.value=r),mode:"tags",required:"",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:Se.value,valueProp:"membership_id",trackBy:"membership_id",label:"full_name",class:ce(["col-span-3",["multiselect-container",{error:!!a(ae)}]]),object:!0,onSelect:u[1]||(u[1]=r=>N()),onDeselect:u[2]||(u[2]=r=>c())},null,8,["modelValue","options","class"]),a(ae)?(t(),s("div",lu,i(a(ae)),1)):v("",!0)],2)])):v("",!0),b.value&&b.value.length||g.value==="all_members"?(t(),s("div",du,[e("button",ru,i(T.value=="create"?"Create Poll":"Edit Poll"),1)])):v("",!0)],32)])])])])],512)])])):(t(),s("div",cu,_u))}});const we=d(R=>(Ne("data-v-1ead2693"),R=R(),He(),R),"_withScopeId"),pu={key:0},hu={class:"card h-full"},vu={class:"card-header flex items-center"},bu=we(()=>e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"},"Meeting Tasks")],-1)),gu={key:0,class:"flex items-center space-x-2"},fu=we(()=>e("i",{class:"far fa fa-plus mr-2"},null,-1)),yu=we(()=>e("span",{class:"sr-only"},"Add task",-1)),xu={class:"card-container"},$u={key:0},wu={key:1},ku={class:"row overflow-auto p-4",style:{"max-height":"100vh"}},Mu={class:"card card-outline card-primary h-100"},Cu={class:"card-header"},Su={class:"card-tools"},Au=["onClick"],Iu=we(()=>e("i",{class:"fas fa-edit"},null,-1)),Tu=[Iu],qu={class:"card-body"},Pu={class:"text-primary text-bold uppercase"},Fu={class:"d-flex justify-content-between"},Du=we(()=>e("strong",null,"Due Date:",-1)),Eu=we(()=>e("strong",null,"Status:",-1)),Ru={key:0,class:"badge bg-warning"},Uu={key:1,class:"badge bg-info"},Lu={key:2,class:"badge bg-primary"},Vu={key:3,class:"badge bg-success"},ju={class:""},Ou=we(()=>e("strong",null,"Assignees:",-1)),Bu={class:"row"},Nu={class:"col-6"},Hu={class:"list-unstyled"},Ku={class:"col-6"},Yu={class:"list-unstyled"},zu=we(()=>e("strong",null,"Description:",-1)),Gu=["innerHTML"],Qu={class:"flex justify-center col-md-6"},Wu={method:"dialog",class:"modal-box rounded-xl"},Ju={class:"font-bold text-lg justify-center flex"},Zu=we(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),Xu={class:"overflow-auto p-4",style:{"max-height":"80vh"}},e_={class:"grid grid-cols-3 md:grid-cols-3 gap-2 p-2"},t_={class:"col-span-3"},s_={class:"flex flex-wrap -mx-2 mt-2"},a_={class:"w-full md:w-1/2 px-1 md:px-2"},n_={class:"w-full md:w-1/2 px-1 md:px-2"},o_={class:"flex flex-wrap -mx-2 mt-2"},i_={class:"w-full md:w-1/2 px-1 md:px-2"},l_={class:"w-full md:w-1/2 px-1 md:px-2"},d_={key:0},r_=we(()=>e("h2",{class:"font-bold text-primary text-sm text-center"},"All Members Will be assigned this Task",-1)),c_=[r_],u_={key:0,class:"form-group col-span-3"},__=we(()=>e("label",{class:"text-bold font-medium tracking-wide"},"People to Assign",-1)),m_={key:0,class:"message"},p_={key:1},h_={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},v_={key:1},b_=we(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),g_=[b_],f_=$e({__name:"Taskp",setup(R){const $=xe(),G=Ae(),E=m(!1),T=m("create"),k=G.params.boardId,P=G.params.meetingId,A=m(null),b=m([]),Q=m(null),w=m(null),g=m("individuals"),y=m(""),M=Fe();Be("duedate");const{errorMessage:S}=Be("taskassignees"),O=d(n=>{const x=new Date,Y=new Date(n);return x>Y},"hasDueDatePassed"),ae=ye({id:h().nullable(),full_name:h().nullable()}),X=ye({id:h().nullable(),task_id:h().nullable(),membership_id:h().nullable(),user:ae}),oe=ye({meeting_id:h().nullable(),board_id:h().nullable(),committee_id:h().nullable(),title:h().required(),duedate:h().required(),description:h().required(),status:h().required(),assigneetype:h().required(),assigneestatus:h().required(),taskassignees:Ge().of(X).nullable()}),{handleSubmit:ne,setErrors:_e,setFieldValue:C,values:U}=De({validationSchema:oe,initialValues:{meeting_id:P,board_id:k,committee_id:null,title:"",duedate:"",description:"",status:"pending",assigneetype:"",assigneestatus:"",taskassignees:[]}}),_=d(()=>{var n;c(),T.value="create",E.value=!0,(n=w.value)==null||n.showModal()},"openCreateTaskModal"),I=d(n=>{var x;c(),Q.value=n,A.value=n.id,C("title",n.title),C("duedate",n.duedate),C("description",n.description),C("status",n.status),C("assigneetype",n.assigneetype),C("assigneestatus",n.assigneestatus),g.value=n.assigneestatus,K(n.taskassignees),T.value="edit",E.value=!0,(x=w.value)==null||x.showModal(),console.log(n)},"openEditTaskModal");function K(n){b.value=n.map(x=>({id:x.id,full_name:x.user.full_name,task_id:x.task_id,membership_id:x.membership_id,user:x.user})),C("taskassignees",b.value),console.log(U)}d(K,"maptaskassigneesToReactiveRef");const q=d(()=>{C("taskassignees",b.value)},"selectedMembers"),B=d(()=>{C("taskassignees",b.value)},"removeselectedUsers"),N=ne(async(n,{resetForm:x})=>{var Y;try{const ve={meeting_id:n.meeting_id,board_id:n.board_id,committee_id:n.committee_id,title:n.title,duedate:n.duedate,description:n.description,status:n.status,assigneetype:n.assigneetype,assigneestatus:n.assigneestatus,taskassignees:n.taskassignees};if(T.value==="create")await ws(ve,P);else{const be=A.value;await ks(ve,P,be)}(Y=w.value)==null||Y.close(),await p(),c()}catch(ve){ve instanceof Pe?_e(ve.messages):M(ve)}}),c=d(()=>{T.value="create",E.value=!1,A.value=null,g.value="all_members",b.value=[],C("meeting_id",P),C("board_id",k),C("committee_id",null),C("title",""),C("duedate",""),C("description","description ................"),C("status","pending"),C("assigneetype","all_members"),C("assigneestatus","all_members"),C("taskassignees",[])},"reset"),le=d(n=>{b.value=[],y.value=n,g.value=n,C("assigneetype",n),C("assigneestatus",n),C("taskassignees",[])},"handleAssigneeTypeChange"),J=[{name:"Individuals",value:"individuals"},{name:"Assign All Meeting Members",value:"all_members"}],me=ie(()=>J),ee=d(()=>Ce({queryKey:["getPollMembershisKey"],queryFn:async()=>(await ot(P,{paginate:"false"})).data.map(te())}),"getMemberships"),{isLoading:de,data:pe,refetch:L}=ee(),te=d(()=>n=>({id:n.id,full_name:n.user.full_name,membership_id:n.id,user:n.user}),"formatEvent"),Z=ie(()=>{var n;return!pe.value||((n=pe.value)==null?void 0:n.length)===0?[]:pe.value}),re=d(()=>Ce({queryKey:["getMeetingTasksKey",P],queryFn:async()=>(await Ms(P,{paginate:"false"})).data}),"getMeetingTasks"),{isLoading:o,data:f,refetch:p}=re();return Me(async()=>{p(),L()}),(n,x)=>a($).hasPermission(["view task"])?(t(),s("div",pu,[e("div",hu,[e("div",vu,[bu,a($).hasPermission(["create task"])?(t(),s("div",gu,[e("button",{type:"button",onClick:F(_,["prevent"]),class:"btn btn-tool"},[fu,H(),yu])])):v("",!0)]),e("div",xu,[a(o)?(t(),s("div",$u,"Loading Meeting Tasks...")):(t(),s("div",wu,[e("div",ku,[(t(!0),s(z,null,W(a(f),(Y,ve)=>(t(),s("div",{class:"col-lg-12 col-md-12 col-sm-12 mb-2",key:ve},[e("div",Mu,[e("div",Cu,[e("div",Su,[a($).hasPermission(["edit task"])?(t(),s("button",{key:0,class:"btn btn-tool",onClick:F(be=>I(Y),["prevent"])},Tu,8,Au)):v("",!0)])]),e("div",qu,[e("div",Pu,i(Y.title),1),e("div",Fu,[e("div",null,[Du,e("p",{class:ce({"text-danger":O(Y.duedate)&&Y.status!=="completed","text-success":!O(Y.duedate)||Y.status==="completed"})},i(a(st)(Y.duedate)),3)]),e("div",null,[Eu,e("p",null,[Y.status==="backlog"?(t(),s("span",Ru,"Backlog")):Y.status==="pending"?(t(),s("span",Uu,"Pending")):Y.status==="onprogress"?(t(),s("span",Lu,"On Progress")):Y.status==="completed"?(t(),s("span",Vu,"Completed")):v("",!0)])])]),e("div",ju,[Ou,e("div",Bu,[e("div",Nu,[e("ul",Hu,[(t(!0),s(z,null,W(Y.taskassignees.slice(0,Math.ceil(Y.taskassignees.length/2)),(be,Ie)=>(t(),s("li",{key:be.id},i(Ie+1)+". "+i(be.user.full_name),1))),128))])]),e("div",Ku,[e("ul",Yu,[(t(!0),s(z,null,W(Y.taskassignees.slice(Math.ceil(Y.taskassignees.length/2)),(be,Ie)=>(t(),s("li",{key:be.id},i(Ie+1+Math.ceil(Y.taskassignees.length/2))+". "+i(be.user.full_name),1))),128))])])])]),e("div",null,[zu,e("p",{innerHTML:Y.description,class:"mt-2"},null,8,Gu)])])])]))),128))])]))])]),e("div",Qu,[e("dialog",{id:"taskmodal",class:"modal",ref_key:"TaskModal",ref:w},[e("form",Wu,[e("h3",Ju,i(T.value=="create"?"Create Meeting Task":"Edit Meeting Task"),1),Zu,e("div",Xu,[e("div",e_,[e("div",t_,[e("form",{novalidate:"",onSubmit:x[3]||(x[3]=F((...Y)=>a(N)&&a(N)(...Y),["prevent"])),class:""},[e("div",s_,[e("div",a_,[se(qe,{labeled:!0,label:"Task Title",name:"title",placeholder:"Enter Task Title",type:"text"})]),e("div",n_,[se(mt,{label:"Task Due Date",name:"duedate",flow:["month"],placeholder:"Task Due Date"})])]),se(_t,{label:"Task Description",name:"description",theme:"snow",placeholder:"Enter Task Description",toolbar:"full",contentType:"html",class:"col-span-3"}),e("div",o_,[e("div",i_,[se(at,{labeled:!0,name:"assigneetype",label:"Select Assignee Type",placeholder:"Select Assignee Type",options:me.value,onSelectedItem:le},null,8,["options"])]),e("div",l_,[g.value==="all_members"?(t(),s("div",d_,c_)):v("",!0)])]),g.value==="individuals"?(t(),s("div",u_,[__,e("div",{class:ce(["multiselect-container",{error:!!a(S)}])},[se(a(nt),{id:"taskassignees",modelValue:b.value,"onUpdate:modelValue":x[0]||(x[0]=Y=>b.value=Y),mode:"tags",required:"",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:Z.value,valueProp:"membership_id",trackBy:"membership_id",label:"full_name",class:ce(["col-span-3",["multiselect-container",{error:!!a(S)}]]),object:!0,onSelect:x[1]||(x[1]=Y=>q()),onDeselect:x[2]||(x[2]=Y=>B())},null,8,["modelValue","options","class"]),a(S)?(t(),s("div",m_,i(a(S)),1)):v("",!0)],2)])):v("",!0),b.value&&b.value.length||g.value==="all_members"?(t(),s("div",p_,[e("button",h_,i(T.value=="create"?"Create Task":"Edit Task"),1)])):v("",!0)],32)])])])])],512)])])):(t(),s("div",v_,g_))}});const y_=Le(f_,[["__scopeId","data-v-1ead2693"]]),x_={key:0},$_={class:"row"},w_={class:"col-md-6"},k_={class:"col-md-6"},M_={key:1},C_=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),S_=[C_],A_=$e({__name:"TaskPolls",setup(R){const $=xe();return(G,E)=>a($).hasPermission(["view task","view poll"])?(t(),s("div",x_,[e("div",$_,[e("div",w_,[se(y_)]),e("div",k_,[se(mu)])])])):(t(),s("div",M_,S_))}});const I_={key:0,class:"container-fluid"},T_={key:0,class:"container-fluid"},q_={class:"py-6"},P_={class:"flex items-center"},F_={class:"lg:inline-flex p-3 mr-4rounded-lg custom-size"},D_={class:"calendar-icon w-full flex flex-col items-center justify-center mt-1 calendaheight"},E_={class:"month customonth"},R_={class:"day font-medium customday"},U_={class:"year font-medium customyear"},L_={class:""},V_={class:"header-pretitle text-xs mb-1"},j_=e("i",{class:"fas fa-chevron-left fa-xs"},null,-1),O_={class:"flex items-center space-x-4"},B_={class:"header-title leading-10 mb-2 h6 lg:mb-0 text-blue-primary font-bold"},N_=e("button",{class:"!hidden lg:!flex text-muted btn btn-icon","data-bs-toggle":"tooltip",title:"","data-copy-btn":"","data-copy-text":"https://app.boardable.com/felix-1/meetings/59bfaf-123456","aria-label":"Copy meeting link","data-bs-original-title":"Copy meeting link"},[e("i",{class:"fas fa-link"})],-1),H_={class:"ml-auto flex self-end"},K_=e("div",{class:"dropdown"},[e("a",{class:"nav-link",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[e("i",{class:"fas fa-ellipsis-v"})]),e("div",{class:"dropdown-menu --73","aria-labelledby":"navbarDropdown",style:{left:"-73px !important"}},[e("a",{class:"dropdown-item",href:"#"},"Re-send meeting invite"),e("a",{class:"dropdown-item",href:"#"},"Create Follow Up Meeting"),e("div",{class:"dropdown-divider"}),e("a",{class:"dropdown-item",href:"#"},"Delete Meeting")])],-1),Y_={class:"lg:flex mr-2"},z_=e("div",{class:"flex justify-center btn-sm"},null,-1),G_={class:"card-outline card-outline-tabs"},Q_={class:"card-header p-0 border-bottom-0"},W_={class:"nav nav-tabs",id:"custom-tabs-four-tab",role:"tablist"},J_=["onClick"],Z_={class:"card-body"},X_={class:"tab-content",id:"custom-tabs-four-tabContent"},em=["id"],tm={class:"flex justify-center col-md-6"},sm={method:"dialog",class:"modal-box rounded-xl"},am=e("h3",{class:"font-bold text-lg justify-center flex"}," Take Minutes ",-1),nm=e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1),om={class:"w-full mt-6 p-2"},im={class:"font-thin text-sm flex flex-col items-center gap-6"},lm={class:"w-full rounded-xl mx-auto p-1 custom-modal"},dm=e("h3",{class:"text-center text-base font-bold text-primary"}," How would you like to start? ",-1),rm={class:"flex justify-center space-x-4 py-6"},cm=e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-white rounded-full shadow w-11 h-11"},[e("i",{class:"fa fa-list"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From Scratch")],-1),um=e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-white rounded-full shadow w-11 h-11"},[e("i",{class:"far fa-file"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From the Agenda")],-1),_m={key:1,class:"container-fluid"},mm=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),pm=[mm],Em=$e({__name:"BoardMeetingDetails",setup(R){const $=Ae(),G=Ze(),E=xe(),T=m("home"),k=m(""),P=[{id:"home",name:"Meeting Details",component:ir,permissions:["view meeting"]},{id:"agenda",name:"Agenda",component:tn,permissions:["view agenda"]},{id:"minutes",name:"Minutes",component:ho,permissions:["view minutes"]},{id:"documents",name:"Documents",component:Sd,permissions:["view documents"]},{id:"tasks",name:"Task & Polls",component:A_,permissions:["view task","view poll"]},{id:"members",name:"Members",component:zr,permissions:["view meeting memberships"]},{id:"conflict-of-interest",name:"Conflict of Interest",component:Ki,permissions:["view conflicts of interest"]},{id:"attendance",name:"Attendance",component:ni,permissions:["view attendances"]}],A=ie(()=>P.filter(K=>K.permissions?K.permissions.every(q=>E.hasPermission([q])):!0)),b=d(K=>{k.value=T.value,T.value=K},"setActiveTab"),Q=d(()=>{k.value==="agenda"&&(b("agenda"),window.dispatchEvent(new CustomEvent("refetchMemberships")))},"handleMembershipsUpdated");qt(()=>{$.query.previousTab&&(k.value=$.query.previousTab),$.query.currentTab&&(T.value=$.query.currentTab)});function w(){G.push({name:"BoardDetails",params:{boardId:g}})}d(w,"goBack");const g=$.params.boardId,y=$.params.meetingId,M=$.params.scheduleId,S=m(),O=m(null),ae=Fe(),X=m("create"),oe=ye({id:h().required(),rsvp_status:h().nullable(),attendance_status:h().nullable()}),{handleSubmit:ne,setErrors:_e,setFieldValue:C,values:U}=De({validationSchema:oe,initialValues:{id:"",rsvp_status:"",attendance_status:""}});ne(async(K,{resetForm:q})=>{try{const B={id:K.id,rsvp_status:K.rsvp_status,location:K.location,attendance_status:K.attendance_status,meeting_id:K.meeting_id,membership_id:K.membership_id,membership:K.membership,meeting:K.meeting};X.value==="create"?await gt(B,y):X.value==="rsvp"?await ft(B,B.id):X.value==="attendance"&&await yt(B,B.id),await E.updateProfile(),window.dispatchEvent(new CustomEvent("meetingUpdated",{detail:{meetingId:y}})),_()}catch(B){B instanceof Pe?_e(B.messages):ae(B)}});const _=d(()=>{X.value="create",C("id",""),C("rsvp_status",""),C("attendance_status","")},"reset");m([]);const I=d(()=>{G.push({name:"BoardMeetingMinutes",params:{boardId:g,meetingId:y,scheduleId:M},query:{defaultMinutes:"true"}})},"openMinuteTemplateSelectionModal");return Me(async()=>{try{const q=(await xt(y)).data;S.value=q}catch(K){console.error("Error fetching meeting data:",K)}}),(K,q)=>{var N,c,le,J,me,ee;const B=ct("router-link");return a(E).hasPermission(["view meeting"])?(t(),s("div",I_,[S.value?(t(),s("div",T_,[e("div",q_,[e("div",P_,[e("div",F_,[e("div",D_,[e("div",E_,i(a(Gt)((c=(N=S.value)==null?void 0:N.schedules[0])==null?void 0:c.date)),1),e("div",R_,[e("span",null,i(a(Qt)((J=(le=S.value)==null?void 0:le.schedules[0])==null?void 0:J.date)),1)]),e("div",U_,[e("span",null,i(a(Wt)((ee=(me=S.value)==null?void 0:me.schedules[0])==null?void 0:ee.date)),1)])])]),e("div",L_,[e("p",V_,[e("a",{href:"",onClick:q[0]||(q[0]=F(de=>w(),["prevent"])),class:"mb-2 h6 lg:mb-0 text-blue-primary font-bold"},[j_,H(" Meetings ")])]),e("div",O_,[e("h1",B_,i(S.value.title),1),N_])]),e("div",H_,[K_,e("div",Y_,[a(E).hasPermission(["create minutes","edit minutes"])?(t(),s("button",{key:0,class:"btn btn-secondary",onClick:q[1]||(q[1]=F(de=>I(),["prevent"]))}," Minutes ")):v("",!0)]),z_])]),e("div",G_,[e("div",Q_,[e("ul",W_,[(t(!0),s(z,null,W(A.value,de=>(t(),s("li",{class:"nav-item",key:de.id},[e("a",{class:ce(["nav-link",{active:T.value===de.id}]),onClick:pe=>b(de.id)},i(de.name),11,J_)]))),128))])]),e("div",Z_,[e("div",X_,[(t(!0),s(z,null,W(A.value,de=>(t(),s("div",{key:de.id,class:ce(["tab-pane fade",{"show active":T.value===de.id}]),id:de.id,role:"tabpanel"},[(t(),We(Pt(de.component),{onChangeTab:b,onMembershipsUpdated:Q},null,32))],10,em))),128))])])])]),e("div",tm,[e("dialog",{id:"minutetemplateselectionmodal",class:"modal",ref_key:"MinuteTemplateSelectionmodal",ref:O},[e("form",sm,[am,nm,e("div",om,[e("div",im,[e("form",lm,[dm,e("div",rm,[se(B,{to:{name:"BoardMeetingMinutes",params:{boardId:a(g),meetingId:a(y)},query:{defaultMinutes:"false"}},class:"btn btn-secondary h-auto !p-0 p-0 mb-0 card flex-1"},{default:ze(()=>[cm]),_:1},8,["to"]),se(B,{to:{name:"BoardMeetingMinutes",params:{boardId:a(g),meetingId:a(y)},query:{defaultMinutes:"true"}},class:"btn btn-secondary h-auto !p-0 p-0 mb-0 card flex-1"},{default:ze(()=>[um]),_:1},8,["to"])])])])])])],512)])])):v("",!0)])):(t(),s("div",_m,pm))}}});export{Em as default};
