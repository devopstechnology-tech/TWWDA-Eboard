var dt=Object.defineProperty;var r=(U,f)=>dt(U,"name",{value:f,configurable:!0});import{d as ge,i as ke,j as qe,r as v,C as Z,P as $e,H as Xe,V as Be,b as Je,u as a,o as t,c as o,e,F as z,R as Q,g as O,t as c,h as _,T as B,Y as rt,Z as ct,f as A,l as xe,w as De,W as Oe,X as Ne,_ as Ae,U as H,$ as et,a0 as ut,k as tt,a1 as He,a2 as _t}from"./main-9b499219.js";import{e as mt}from"./useBoardRequest-2247a6a5.js";import{d as pt,e as ht,g as vt,f as Ye,h as Ve,j as bt,k as ft,m as Se,n as gt,o as yt,p as xt,q as $t,t as wt,v as We,F as Ze,w as kt,x as Mt,l as St}from"./Breadcrumb-74d93201.js";import{u as Ee,c as me,a as m,d as st,b as Ue,f as Ie,e as Ce}from"./useUnexpectedErrorHandler-f37df04f.js";import{u as Ct,a as Pt,b as Tt,c as qt,d as Dt,v as Pe,e as Ft,f as It,F as je,g as Bt,h as At,i as Et,j as Ut,k as Rt,l as Ke,m as Lt}from"./FormDynamicInput-4c66f355.js";import{F as Te}from"./FormInput-360d6aac.js";import{F as Vt}from"./FormUpload-c235b23e.js";import{u as we}from"./useQuery-7facd994.js";import{_ as Fe}from"./FormDateTimeInput.vue_vue_type_style_index_0_lang-fbef2fd1.js";import{F as ze}from"./FormQuillEditor-fc7ac95e.js";import{F as jt}from"./FormRadioInput-98e80d8a.js";import{u as Ot}from"./useStaffRequest-4eed05d9.js";import{u as Nt,a as Ht,b as Kt}from"./usePollRequest-adad518d.js";import{u as zt,a as Gt,b as Qt}from"./useTaskRequest-a11374e2.js";import"./index-df77389a.js";import"./folder_routes-6d34764d.js";import"./useQueryClient-0be5c548.js";import"./staff_routes-8adeed43.js";const X=r(U=>(Oe("data-v-455161d6"),U=U(),Ne(),U),"_withScopeId$3"),Yt={key:0},Wt={class:"card"},Zt={class:"card-header p-3"},Xt={class:"row"},Jt={class:"col-12"},es={class:"row"},ts={class:"col-lg-9 col-md-8 col-12 mt-2"},ss={"aria-label":"Breadcrumbs",class:"text-sm overflow-hidden"},os={class:"breadcrumb mb-0 bg-warning"},as=["onClick"],ns={class:"col-lg-3 col-md-4 col-12"},ls={class:"row"},is={class:"col-md-6 col-12 mt-2"},ds={class:"dropdown"},rs={class:"nav-link dropdown-toggle btn btn-secondary btn-block",href:"#",id:"navbarDropdown",type:"button",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},cs=X(()=>e("span",{class:"text-warning mr-1"},"sort by:",-1)),us={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},_s=["onClick"],ms={class:"col-md-6 col-12 mt-2"},ps={key:0,class:"dropdown"},hs={key:0,class:"nav-link dropdown-toggle btn btn-primary btn-block",href:"#",id:"navbarDropdown",type:"button",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},vs=X(()=>e("i",{class:"fas fa-plus mr-2"},null,-1)),bs={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},fs=X(()=>e("i",{class:"fas fa-plus"},null,-1)),gs=X(()=>e("i",{class:"fas fa-file-upload"},null,-1)),ys={key:0,class:"col-12 mt-3"},xs={class:"input-group input-group-lg"},$s=X(()=>e("div",{class:"input-group-append"},[e("button",{type:"submit",class:"btn btn-lg btn-default"},[e("i",{class:"fa fa-search"})])],-1)),ws={class:"card-body py-0 px-4 min-h-[300px] relative -top-px z-10"},ks={class:"table-responsive"},Ms={class:"table mb-0"},Ss={class:"w-28"},Cs={key:0},Ps=["onClick"],Ts=["src"],qs={key:1},Ds=["src"],Fs={key:0},Is={class:"font-weight-bold text-primary text-truncate"},Bs={class:"text-sm font-weight-bold text-primary"},As=X(()=>e("span",{class:"text-black"},"Folders",-1)),Es={class:"text-sm font-weight-bold text-primary"},Us=X(()=>e("span",{class:"text-black"},"Files",-1)),Rs={key:1},Ls={key:0},Vs={class:"font-weight-bold text-primary text-truncate"},js={class:"text-sm font-weight-bold text-primary"},Os={class:"text-black"},Ns={class:"w-28"},Hs={key:0},Ks={class:"text-xs text-primary text-truncate"},zs={key:1},Gs={key:0},Qs={class:"text-xs text-primary text-truncate"},Ys={class:"w-20 text-center"},Ws={class:"flex justify-end space-x-2"},Zs={key:0},Xs=["onClick"],Js=X(()=>e("i",{class:"far fa-edit"},null,-1)),eo=[Js],to={key:1},so=["onClick"],oo=X(()=>e("i",{class:"far fa-edit"},null,-1)),ao=[oo],no=X(()=>e("i",{class:"far fa-eye"},null,-1)),lo={class:"flex justify-center col-md-6"},io={method:"dialog",class:"modal-box rounded-xl"},ro={class:"font-bold text-lg justify-center flex"},co=X(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),uo={class:"w-full mt-6 p-2"},_o={class:"font-thin text-sm flex flex-col items-center gap-6"},mo={class:"row"},po={key:0,class:"row mt-2 ml-2"},ho={key:0,class:"row mt-2 ml-2"},vo={class:"col-md-6"},bo=["src"],fo={class:"col-md-6"},go=X(()=>e("strong",null,"File Name:",-1)),yo={class:"text-bold text-primary"},xo=X(()=>e("strong",null,"File Size:",-1)),$o={class:"text-bold text-primary"},wo=X(()=>e("strong",null,"Type:",-1)),ko={class:"text-bold text-primary"},Mo=X(()=>e("strong",null,"Last Modified: ",-1)),So={class:"text-bold text-primary"},Co={type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},Po={key:1},To=X(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),qo=[To],Do=ge({__name:"Documents",setup(U){const f=ke(),E=Ee(),k=qe(),q=v("create"),h=v("folder"),R=v("name-asc"),M=v(""),F=v([]),C=k.params.boardId,$=v([{id:"1",name:"Folders"}]),L=v(null),ae=v(!1),N=v(null),b=v(null),P=[{id:"name-asc",name:"Name (A-Z)"},{id:"name-desc",name:"Name (Z-A)"},{id:"date-newest",name:"Newest to oldest"},{id:"date-oldest",name:"Oldest to newest"}];function de(n){R.value=n}r(de,"applySort");const ee=Z(()=>{const n=P.find(l=>l.id===R.value);return n?n.name:"Unknown"});function re(n){console.log("folder",n),$.value.push({id:n.id,name:n.name})}r(re,"addToNavigationPath");function he(n){const l=$.value.slice(0,n+1);if(l.length!==$.value.length){$.value=l;const d=D($.value.at(-1).id,ue.value);F.value=d?d.children||[]:[]}}r(he,"navigateTo");function D(n,l){if(!Array.isArray(l))return null;for(const d of l){if(d.id===n)return d;if(d.children&&Array.isArray(d.children)){const s=D(n,d.children);if(s)return s}}return null}r(D,"findFolderById");function ce(n){$.value.at(-1).id!==n.id&&(re(n),console.log("folder",n.children),F.value=n.children||[])}r(ce,"openFolder");function x(n){let l=0,d=0;return n.children&&n.children.length>0&&n.children.forEach(s=>{s.type==="folder"?l++:s.type==="file"&&d++}),{folderCount:l,fileCount:d}}r(x,"countChildrenTypes");const W=r(()=>we({queryKey:["getBoardFoldersKey",C],queryFn:async()=>(await Dt(C,{paginate:"false"})).data}),"getBoardFolders"),{isLoading:ve,data:ue,refetch:te}=W();$e(async()=>{await te()}),Xe(ue,n=>{var l;if(n&&n.length>0)if($.value.length===1&&(n[0],$.value[0].id="1",$.value[0].name="Documents"),$.value.length===1)F.value=n;else{const d=D((l=$.value.at(-1))==null?void 0:l.id,n);F.value=d?d.children||[]:[]}},{immediate:!0});const pe=Z(()=>M.value?se.value.filter(n=>n.name.toLowerCase().includes(M.value.toLowerCase())):se.value),se=Z(()=>{const n=$.value.length>1?F.value:ue.value;return Array.isArray(n)?[...n].sort((l,d)=>{switch(R.value){case"name-asc":return l.name.localeCompare(d.name);case"name-desc":return d.name.localeCompare(l.name);case"date-newest":return new Date(d.created_at).getTime()-new Date(l.created_at).getTime();case"date-oldest":return new Date(l.created_at).getTime()-new Date(d.created_at).getTime();default:return 0}}):[]}),be=me({name:m().required(),meeting_id:m().required(),board_id:m().required(),folder_id:m().nullable(),parent_id:m(),type:m().oneOf(["folder","file"]).required(),fileupload:st().nullable()}),{handleSubmit:ne,setErrors:_e,setFieldValue:p,values:V}=Ue({validationSchema:be,initialValues:{name:"",meeting_id:C,board_id:C,folder_id:null,parent_id:"",type:"",fileupload:null}}),w=r(n=>{var s;const l=n.target;if(!((s=l.files)!=null&&s.length))return;const d=l.files[0];p("name",d.name),p("type","file")},"updateName"),j=r(n=>{var d;S(),q.value="create",h.value=n,ae.value=!0,(d=b.value)==null||d.showModal(),p("type",n);const l=$.value.at(-1);p("parent_id",l.id),console.log("parent",l)},"openCreateFolderModal"),le=ne(async(n,{resetForm:l})=>{var d;try{if(q.value==="create")if(h.value==="folder"){const s={children:[],created_at:null,icon:null,id:null,meeting_id:n.meeting_id,board_id:n.board_id,folder_id:null,name:n.name,parent_id:n.parent_id.toString(),type:n.type,fileupload:null,media:[]};await Ct(s,C)}else{const s={children:[],created_at:null,icon:null,id:null,meeting_id:n.meeting_id,board_id:n.board_id,folder_id:null,name:n.name,parent_id:n.parent_id.toString(),type:n.type,fileupload:n.fileupload,media:[]};await Pt(s,C)}else if(h.value==="folder"){const s={children:[],created_at:null,folder_id:null,icon:null,id:null,meeting_id:n.meeting_id,board_id:n.board_id,name:n.name,parent_id:n.parent_id.toString(),type:n.type,fileupload:null,media:[]},T=N.value?N.value.toString():null;s.folder_id=T,await Tt(s,C,s.folder_id)}else{const s={children:[],created_at:null,folder_id:null,icon:null,id:null,meeting_id:n.meeting_id,board_id:n.board_id,name:n.name,parent_id:n.parent_id.toString(),type:n.type,fileupload:n.fileupload,media:[]},T=N.value?N.value.toString():null;s.folder_id=T,await qt(s,C,s.folder_id)}await te(),S(),(d=b.value)==null||d.close()}catch(s){s instanceof Be?_e(s.messages):E(s)}}),u=r((n,l)=>{var d;S(),L.value=n,N.value=n.id.toString(),q.value="edit",h.value=l,ae.value=!0,p("name",n.name),p("folder_id",n.id),p("type",l),l==="file"&&(p("fileupload",n.name),yt(n.media[0])),p("parent_id",n.id),console.log("folder.media",n.name),(d=b.value)==null||d.showModal()},"openEditFolderModal"),S=r(()=>{p("name",""),p("folder_id",null),p("fileupload",""),p("parent_id",""),p("type",""),h.value="folder",q.value="create",ae.value=!1,L.value=null,N.value=null,pt()},"resetFolder");return(n,l)=>{const d=Je("router-link");return a(f).hasPermission(["view folders"])?(t(),o("div",Yt,[e("div",Wt,[e("div",Zt,[e("div",Xt,[e("div",Jt,[e("div",es,[e("div",ts,[e("nav",ss,[e("ol",os,[(t(!0),o(z,null,Q($.value,(s,T)=>(t(),o("li",{key:s.id,class:"breadcrumb-item"},[e("a",{href:"#",class:"text-gray-800 font-medium",onClick:B(g=>he(T),["prevent"])},c(s.name),9,as)]))),128))])])]),e("div",ns,[e("div",ls,[e("div",is,[e("div",ds,[e("button",rs,[cs,O(c(ee.value),1)]),e("div",us,[(t(),o(z,null,Q(P,s=>e("a",{key:s.id,href:"#",class:"dropdown-item",onClick:B(T=>de(s.id),["prevent"])},c(s.name),9,_s)),64))])])]),e("div",ms,[$.value.length>1?(t(),o("div",ps,[a(f).hasPermission(["create folders","upload documents","create dropzone"])?(t(),o("button",hs,[vs,O(" New ")])):_("",!0),e("div",bs,[a(f).hasPermission(["create folders","create dropzone"])?(t(),o("a",{key:0,href:"#",onClick:l[0]||(l[0]=B(s=>j("folder"),["prevent"])),class:"dropdown-item"},[fs,O(" New folder ")])):_("",!0),a(f).hasPermission(["upload documents"])?(t(),o("a",{key:1,href:"#",onClick:l[1]||(l[1]=B(s=>j("file"),["prevent"])),class:"dropdown-item"},[gs,O(" Upload a file ")])):_("",!0)])])):_("",!0)])])])])]),a(f).hasPermission(["search documents"])?(t(),o("div",ys,[e("div",xs,[rt(e("input",{type:"search",class:"form-control form-control-lg",placeholder:"Type your keywords here","onUpdate:modelValue":l[2]||(l[2]=s=>M.value=s)},null,512),[[ct,M.value]]),$s])])):_("",!0)])]),e("div",ws,[e("div",ks,[e("table",Ms,[e("tbody",null,[(t(!0),o(z,null,Q(pe.value,s=>{var T,g,J,K;return t(),o("tr",{key:s.id,class:"group bg-white hover:bg-gray-100 cursor-pointer"},[e("td",Ss,[s.type==="folder"?(t(),o("div",Cs,[e("div",{onClick:B(oe=>ce(s),["prevent"])},[e("img",{src:a(ht)(s.icon),class:"img-fluid",alt:"Folder Icon"},null,8,Ts)],8,Ps)])):(t(),o("div",qs,[a(f).hasPermission(["view documents"])?(t(),xe(d,{key:0,to:{name:"BoardMediaDetails",params:{boardId:a(C),folderId:s.id,mediaId:(T=s==null?void 0:s.media[0])==null?void 0:T.uuid}},class:"d-block text-success hover:text-green-700 transition ease-in-out"},{default:De(()=>{var oe;return[e("img",{src:a(vt)((oe=s==null?void 0:s.media[0])==null?void 0:oe.mime_type),class:"img-fluid",alt:"File Icon"},null,8,Ds)]}),_:2},1032,["to"])):_("",!0)]))]),e("td",null,[s.type==="folder"?(t(),o("div",Fs,[e("p",Is,c(s.name),1),e("p",Bs,[O(c(x(s).folderCount)+": ",1),As]),e("p",Es,[O(c(x(s).fileCount)+": ",1),Us])])):(t(),o("div",Rs,[a(f).hasPermission(["view documents"])?(t(),o("div",Ls,[e("p",Vs,c((g=s==null?void 0:s.media[0])==null?void 0:g.file_name),1),e("p",js,[O(" Size: "),e("span",Os,c(a(Ye)((J=s==null?void 0:s.media[0])==null?void 0:J.size)),1)])])):_("",!0)]))]),e("td",Ns,[s.type==="folder"?(t(),o("div",Hs,[e("p",Ks,c(a(Ve)(s.created_at,"")),1)])):(t(),o("div",zs,[a(f).hasPermission(["view documents"])?(t(),o("div",Gs,[e("p",Qs,c(a(Ve)(s.created_at,"")),1)])):_("",!0)]))]),e("td",Ys,[e("div",Ws,[s.type==="folder"?(t(),o("div",Zs,[a(f).hasPermission(["edit folders"])?(t(),o("a",{key:0,href:"#",onClick:B(oe=>u(s,"folder"),["prevent"]),class:"text-warning hover:text-blue-700 transition ease-in-out"},eo,8,Xs)):_("",!0)])):(t(),o("div",to,[a(f).hasPermission(["edit documents"])?(t(),o("a",{key:0,href:"#",onClick:B(oe=>u(s,"file"),["prevent"]),class:"text-warning hover:text-blue-700 transition ease-in-out"},ao,8,so)):_("",!0),a(f).hasPermission(["view documents"])&&s.type==="file"?(t(),xe(d,{key:1,to:{name:"BoardMediaDetails",params:{boardId:a(C),folderId:s.id,mediaId:(K=s==null?void 0:s.media[0])==null?void 0:K.uuid}},class:"text-success hover:text-green-700 transition ease-in-out"},{default:De(()=>[no]),_:2},1032,["to"])):_("",!0)]))])])])}),128))])])])])]),e("div",lo,[e("dialog",{id:"foldermodal",class:"modal",ref_key:"FolderModal",ref:b},[e("form",io,[e("h3",ro,c(q.value==="create"?h.value==="folder"?"Create Folder":"Upload File":h.value==="folder"?"Update Folder":"Update File"),1),co,e("div",uo,[e("div",_o,[e("form",{novalidate:"",onSubmit:l[4]||(l[4]=B((...s)=>a(le)&&a(le)(...s),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",mo,[A(Te,{labeled:!0,label:h.value==="folder"?"Folder name":"Upload File name",name:"name",class:"col-md-12 w-full text-sm text-white tracking-wide",placeholder:h.value==="folder"?"Folder name":"Upload File name",type:"text"},null,8,["label","placeholder"]),h.value==="file"?(t(),o("div",po,[A(Vt,{labeled:!0,label:"Upload Cover Image for the Board",name:"fileupload",class:"w-full text-sm text-white tracking-wide col-md-12",placeholder:"Enter Cover Image of the Board",type:"file",accept:a(bt).join(", "),onChange:l[3]||(l[3]=s=>{a(ft)(s),w(s)})},null,8,["accept"]),a(V).fileupload?(t(),o("div",ho,[e("div",vo,[a(Se).previewUrl?(t(),o("img",{key:0,src:a(Se).previewUrl,alt:"File Preview",class:"file_attachment"},null,8,bo)):_("",!0)]),e("div",fo,[e("p",null,[go,e("span",yo,c(a(Se).name),1)]),e("p",null,[xo,e("span",$o,c(a(Ye)(a(Se).size)),1)]),e("p",null,[wo,e("span",ko,c(a(Se).type),1)]),e("p",null,[Mo,e("span",So,c(a(gt)(a(Se).lastModifiedDate)),1)])])])):_("",!0)])):_("",!0)]),e("button",Co,c(q.value==="create"?h.value==="folder"?"Create Folder":"Upload File":h.value==="folder"?"Update Folder":"Update File"),1)],32)])])])],512)])])):(t(),o("div",Po,qo))}}});const Fo=Ae(Do,[["__scopeId","data-v-455161d6"]]),Me=r(U=>(Oe("data-v-7113a82b"),U=U(),Ne(),U),"_withScopeId$2"),Io={class:"row"},Bo={class:"col-md-12"},Ao={class:"card card-widget"},Eo={class:"card-header"},Uo=Me(()=>e("h1",{class:"h2 mb-2 lg:mb-0"},"Meetings",-1)),Ro={class:"card-tools"},Lo=Me(()=>e("i",{class:"far fa fa-plus mr-2"},null,-1)),Vo=[Lo],jo={key:0,class:"card-body"},Oo={key:0,class:"products-list product-list-in-card pl-2 pr-2"},No={class:"product-img meeting-custom-size mr-2"},Ho={key:0,class:"calendar-icon w-full flex flex-col items-center justify-center mt-1 calendaheight"},Ko={class:"month customonth"},zo={class:"day font-medium customday"},Go={class:"year font-medium customyear"},Qo=Me(()=>e("div",null,[e("span",{class:"text-danger font-bold ml-2 mr-2"}," Upcoming ")],-1)),Yo={class:"product-info"},Wo={class:"text-primary text-bold"},Zo={key:0,class:"badge float-right bg-white"},Xo=["onClick"],Jo={class:"badge float-right bg-white"},ea=Me(()=>e("i",{class:"far fa-eye"},null,-1)),ta={class:"badge float-right bg-white"},sa=["onClick"],oa=Me(()=>e("i",{class:"far fa-edit"},null,-1)),aa=[oa],na={key:1,class:"product-description"},la=["innerHTML"],ia={key:2,class:"row border-top border-bottom border-warning d-flex justify-content-between align-items-center bg-warning"},da={class:"text-primary bg-primary font-bold ml-2 mr-2"},ra={class:"text-primary font-bold ml-2 mr-2"},ca={key:0},ua=["onClick"],_a={key:3,class:"text-bold text-red"},ma={key:4,class:"text-bold text-red"},pa={class:"text-primary font-bold ml-2 mr-2"},ha={class:"text-primary font-bold ml-2 mr-2"},va=["onClick"],ba=Me(()=>e("i",{class:"far fa-eye"},null,-1)),fa={key:1},ga={class:"flex justify-center col-md-6"},ya={method:"dialog",class:"modal-box rounded-xl"},xa={class:"font-bold text-lg justify-center flex"},$a=Me(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),wa={class:"grid grid-cols-3 md:grid-cols-3 gap-2 p-2"},ka={class:"col-span-3"},Ma={key:0,class:"flex flex-wrap -mx-2 mt-2"},Sa={class:"w-full md:w-1/2 px-1 md:px-2"},Ca={class:"w-full md:w-1/2 px-1 md:px-2"},Pa={key:1,class:"flex flex-wrap -mx-2 mt-2"},Ta={class:"w-full md:w-1/2 px-1 md:px-2"},qa={key:2,class:"flex flex-wrap -mx-2 mt-2"},Da={key:3,class:"flex flex-wrap -mx-2 mt-2"},Fa={class:"w-full md:w-1/3 px-1 md:px-2"},Ia={class:"w-full md:w-1/3 px-1 md:px-2"},Ba={class:"w-full md:w-1/3 px-1 md:px-2"},Aa=["onClick"],Ea={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},Ua=ge({__name:"HomeDashboard",setup(U){const f=ke(),E=v(!1),k=v("create"),q=v(null),h=v(null);v(null);const R=Ee();v(1),v(15),v();const F=qe().params.boardId,C=v(""),$=me({id:m().required(),date:m().required(),start_time:m().required(),end_time:m().required(),status:m().nullable(),heldstatus:m().nullable(),meeting_id:m().nullable()}),L=me({title:m().required(),conference:m().required(),location:m().required(),link:m().nullable(),description:m().required(),status:m().required(),board_id:m().required(),type:m().required(),schedules:Ie().of($).required()}),{handleSubmit:ae,setErrors:N,setFieldValue:b,values:P}=Ue({validationSchema:L,initialValues:{title:"",conference:"",location:"",description:"",link:null,board_id:F,status:"unpublished",type:"single",schedules:[{id:Pe(),date:"",start_time:"",end_time:"",status:null,heldstatus:null,meeting_id:null}]}}),de=r(()=>{var u;te(),k.value="create",E.value=!0,(u=h.value)==null||u.showModal()},"openCreateMeetingModal"),ee=r(u=>{var n;te(),q.value=u,b("title",u.title),b("conference",u.conference),b("location",u.location),b("description",u.description),b("type",u.type),b("status",u.status),b("schedules",u.schedules);const S={id:u.nearestSchedule.id,date:u.nearestSchedule.date,start_time:u.nearestSchedule.start_time,end_time:u.nearestSchedule.end_time,status:u.nearestSchedule.status,heldstatus:u.nearestSchedule.heldstatus,meeting_id:u.nearestSchedule.meeting_id};b("schedules",[...P.schedules,S]),u.conference==="Custom 3rd party Links"&&(ce(u.conference),b("link",u.link)),console.log("values",P),k.value="edit",E.value=!0,(n=h.value)==null||n.showModal()},"openEditMeetingModal"),re=r((u,S)=>{var l;te(),q.value=u,b("title",u.title),b("conference",u.conference),b("location",u.location),b("description",u.description),b("type",u.type),b("status",u.status);const n={id:S.id,date:S.date,start_time:S.start_time,end_time:S.end_time,status:S.status,heldstatus:S.heldstatus,meeting_id:S.meeting_id};b("schedules",[n]),u.conference==="Custom 3rd party Links"&&(ce(u.conference),b("link",u.link)),console.log("values",P),k.value="schedule",E.value=!0,(l=h.value)==null||l.showModal()},"openEditScheduleMeetingModal"),he=[{name:"In Person",value:"No Vedio (Meeting in Person)"},{name:"3rd party",value:"Custom 3rd party Links"}],D=[{name:"Single",value:"single"},{name:"Find Date",value:"manual"}],ce=r(u=>{C.value=u},"handleConferenceTypeChange");$e(async()=>{}),Z(()=>ve);const x=Z(()=>he),W=Z(()=>D),ve=r(u=>we({queryKey:["getBoardMeetingsKey"],queryFn:async()=>(await At(u,{paginate:"false"})).data}),"getMeetings"),ue=ae(async u=>{var S,n,l;console.log("values",u),console.log("setErrors",N);try{k.value==="create"?await Ft(u):(S=q.value)!=null&&S.id&&await It(u,(n=q.value)==null?void 0:n.id),await _e(),te(),E.value=!1,(l=h.value)==null||l.close()}catch(d){d instanceof Be?N(d.messages):R(d)}});function te(){b("title",""),b("conference",""),b("location",""),b("description",""),b("link",null),b("type","single"),b("status","unpublished"),b("schedules",[{id:Pe(),date:"",start_time:"",end_time:"",status:null,heldstatus:null,meeting_id:null}])}r(te,"reseting");const pe=r(()=>{Array.isArray(P.schedules)||(console.error("Invalid state: values.schedules is not an array."),b("schedules",[]));const u={id:Pe(),date:"",start_time:"",end_time:"",status:null,heldstatus:null,meeting_id:null};b("schedules",[...P.schedules,u])},"addEmptySchedule"),se=r(u=>{if(P.schedules.length===1){ut({title:"Error",text:"You need at least one date to schedule.",type:"error"});return}const S=P.schedules.filter((n,l)=>l!==u);b("schedules",S)},"removeSchedule"),{isLoading:be,data:ne,refetch:_e}=ve(F),p=v("published"),V=Z(()=>{if(!ne.value)return[];const u=new Date;return ne.value.filter(n=>p.value==="past"?new Date(n.created_at)<u:n.status.toLowerCase()===p.value).map(n=>{if(n.schedules&&n.schedules.length>0){const l=[...n.schedules].sort((g,J)=>{const K=new Date(g.date.split("-").reverse().join("-")),oe=new Date(J.date.split("-").reverse().join("-"));return K.getTime()-oe.getTime()});let d=l[0],s=1/0;return l.forEach(g=>{const K=new Date(g.date.split("-").reverse().join("-")).getTime()-u.getTime();Math.abs(K)<Math.abs(s)&&(s=K,d=g)}),{...n,nearestSchedule:d,schedules:l.filter(g=>g.id!==d.id)}}else return n})}),w=r(u=>{p.value=u},"filterMeetings"),j=r(u=>{switch(u){case"scheduled":return"text-primary";case"held":return"text-success";case"cancelled":return"text-danger";case"postponed":return"text-warning";default:return""}},"getHeldStatusClass"),le=r(async u=>{await Bt(u),await _e()},"onPublish");return(u,S)=>{const n=Je("router-link");return t(),o(z,null,[e("div",Io,[e("div",Bo,[e("div",Ao,[e("div",Eo,[Uo,e("div",Ro,[e("button",{type:"button",class:H(["btn btn-tool",{"btn-info":p.value==="published"}]),onClick:S[0]||(S[0]=l=>w("published"))}," Published ",2),e("button",{type:"button",class:H(["btn btn-tool",{"btn-info":p.value==="unpublished"}]),onClick:S[1]||(S[1]=l=>w("unpublished"))}," UnPublished ",2),e("button",{type:"button",class:H(["btn btn-tool",{"btn-info":p.value==="past"}]),onClick:S[2]||(S[2]=l=>w("past"))}," Past ",2),a(f).hasPermission(["create meeting"])?(t(),o("button",{key:0,type:"button",onClick:B(de,["prevent"]),class:"btn btn-tool"},Vo)):_("",!0)])]),a(f).hasPermission(["view meeting"])?(t(),o("div",jo,[V.value.length>0?(t(),o("ul",Oo,[(t(!0),o(z,null,Q(V.value,l=>(t(),o("li",{class:"item",key:l.id},[e("div",No,[l!=null&&l.nearestSchedule?(t(),o("div",Ho,[e("div",Ko,c(a(xt)(l.nearestSchedule.date)),1),e("div",zo,[e("span",null,c(a($t)(l.nearestSchedule.date)),1)]),e("div",Go,[e("span",null,c(a(wt)(l.nearestSchedule.date)),1)])])):_("",!0),Qo]),e("div",Yo,[a(f).hasPermission(["view meeting"])?(t(),xe(n,{key:0,to:{name:"BoardMeetingDetails",params:{boardId:a(F),meetingId:l.id,scheduleId:l.nearestSchedule.id}},class:"product-title"},{default:De(()=>[O(" Meeting: "),e("span",Wo,c(l.title),1),p.value==="unpublished"?(t(),o("span",Zo,[a(f).hasPermission(["publish meeting"])?(t(),o("a",{key:0,href:"",onClick:B(d=>le(l.id),["prevent"]),class:"text-blue-500 hover:text-blue-700 transition duration-150 ease-in-out"}," Publish ",8,Xo)):_("",!0)])):_("",!0),e("span",Jo,[a(f).hasPermission(["view meeting"])?(t(),xe(n,{key:0,to:{name:"BoardMeetingDetails",params:{boardId:a(F),meetingId:l.id,scheduleId:l.nearestSchedule.id}},class:"text-green-500 hover:text-green-700 transition duration-150 ease-in-out"},{default:De(()=>[ea]),_:2},1032,["to"])):_("",!0)]),e("span",ta,[a(f).hasPermission(["edit meeting"])?(t(),o("a",{key:0,href:"",onClick:B(d=>ee(l),["prevent"]),class:"text-blue-500 hover:text-blue-700 transition duration-150 ease-in-out"},aa,8,sa)):_("",!0)])]),_:2},1032,["to"])):_("",!0),a(f).hasPermission(["edit meeting"])?(t(),o("span",na,[O(" Description: "),e("span",{class:"text-primary text-bold",innerHTML:l.description},null,8,la)])):_("",!0),l!=null&&l.nearestSchedule?(t(),o("div",ia,[e("div",null,[e("span",da," Upcoming "+c(a(We)(l.nearestSchedule.date)),1),O(" || When: "),e("span",ra,c(a(Ze)(l.nearestSchedule.date)),1),O(" || Held Status: "),e("span",{class:H([j(l.nearestSchedule.heldstatus),"font-bold ml-2 mr-2"])},c(l.nearestSchedule.heldstatus),3)]),l!=null&&l.nearestSchedule?(t(),o("span",ca,[l.nearestSchedule.heldstatus==="scheduled"?(t(),o("button",{key:0,class:"btn btn-sm btn-warning font-bold ml-2 mr-2 mt-1 mb-1",onClick:B(d=>re(l,l.nearestSchedule),["prevent"])}," Postpone ",8,ua)):_("",!0)])):_("",!0)])):_("",!0),l.schedules.length?(t(),o("div",_a,"Other Schedules")):(t(),o("div",ma,"no Other Recuring Schdedules")),(t(!0),o(z,null,Q(l.schedules,d=>(t(),o("div",{class:H(["row","border-top","border-bottom","border-warning","d-flex","justify-content-between","align-items-center",a(kt)(d.date)?"bg-gray":""]),key:d.id},[e("div",null,[O(" Day: "),e("span",pa,c(a(We)(d.date)),1),O(" || When: "),e("span",ha,c(a(Ze)(d.date)),1),O(" || Held Status: "),e("span",{class:H([j(d.heldstatus),"font-bold ml-2 mr-2"])},c(d.heldstatus),3)]),e("span",null,[d.heldstatus==="scheduled"&&a(f).hasPermission(["edit meeting"])?(t(),o("button",{key:0,class:"btn btn-sm btn-warning font-bold ml-2 mr-2 mt-1 mb-1",onClick:B(s=>re(l,d),["prevent"])}," Postpone ",8,va)):_("",!0),a(f).hasPermission(["view meeting"])?(t(),xe(n,{key:1,to:{name:"BoardMeetingDetails",params:{boardId:a(F),meetingId:l.id,scheduleId:d.id}},class:"mr-2 hover:text-info transition duration-150 ease-in-out"},{default:De(()=>[ba]),_:2},1032,["to"])):_("",!0)])],2))),128))])]))),128))])):(t(),o("div",fa," No meetings found for "+c(p.value),1))])):_("",!0)])])]),e("div",ga,[e("dialog",{id:"meetingmodal",class:"modal",ref_key:"MeetingModal",ref:h},[e("form",ya,[e("h3",xa,c(k.value=="create"?"Create Meeting":"Edit Meeting"),1),$a,e("div",{class:"overflow-auto p-4",style:et([{"max-height":"80vh"},k.value=="schedule"?"height:500px;":""])},[e("div",wa,[e("div",ka,[e("form",{novalidate:"",onSubmit:S[3]||(S[3]=B((...l)=>a(ue)&&a(ue)(...l),["prevent"])),class:""},[k.value=="create"||k.value=="edit"?(t(),o("div",Ma,[e("div",Sa,[A(Te,{labeled:!0,label:"Meeting Title",name:"title",placeholder:"Enter Meeting Title",type:"text"})]),e("div",Ca,[A(je,{labeled:!0,name:"conference",label:"Select Meeting Type",placeholder:"Select Meeting Type",options:x.value,onSelectedItem:ce},null,8,["options"])])])):_("",!0),k.value=="create"||k.value=="edit"?(t(),o("div",Pa,[e("div",Ta,[C.value==="Custom 3rd party Links"?(t(),xe(Te,{key:0,labeled:!0,label:"Meeting Link",name:"link",placeholder:"Enter Third Party Link",type:"text"})):_("",!0)]),e("div",{class:H(["w-full px-1 md:px-2",C.value==="Custom 3rd party Links"?"md:w-1/2":""])},[A(Te,{labeled:!0,label:"Meeting Location",name:"location",placeholder:"e.g 'Conference Room 6'",type:"text"})],2)])):_("",!0),k.value=="create"||k.value=="edit"?(t(),o("div",qa,[k.value=="create"||k.value=="edit"?(t(),xe(ze,{key:0,label:"Meeting Description",name:"description",theme:"snow",placeholder:"Enter Meeting Description",toolbar:"full",contentType:"html",class:"col-span-3"})):_("",!0)])):_("",!0),k.value=="create"||k.value=="edit"?(t(),o("div",Da,[A(jt,{name:"type",label:"Meeting Schedule Type",placeholder:"Select Meeting Schedule Type",inline:!0,options:W.value,checked:a(P).type},null,8,["options","checked"])])):_("",!0),a(P).schedules?(t(!0),o(z,{key:4},Q(a(P).schedules,(l,d)=>(t(),o("div",{class:"flex flex-wrap -mx-2 mt-2 relative",key:d},[e("div",Fa,[A(Fe,{label:"Meeting Date "+(d+1),name:"schedules["+d+"].date",mode:"date-picker",modeltype:"dd-MM-yyyy",enabletimepicker:!1,placeholder:"Meeting Date"},null,8,["label","name"])]),e("div",Ia,[A(Fe,{label:"Meeting Start Time "+(d+1),name:"schedules["+d+"].start_time",mode:"time-picker",modeltype:"h:mm bbbb",is24:!1,enabletimepicker:!0,placeholder:"Select Start Time"},null,8,["label","name"])]),e("div",Ba,[A(Fe,{label:"Meeting End Time "+(d+1),name:"schedules["+d+"].end_time",mode:"time-picker",modeltype:"h:mm bbbb",is24:!1,enabletimepicker:!0,placeholder:"Select End Time"},null,8,["label","name"])]),k.value!=="schedule"?(t(),o("button",{key:0,type:"button",class:"absolute top-0 right-0 mt-2 mr-2 text-red-600 font-bold",onClick:B(s=>se(d),["prevent"])}," ✕ ",8,Aa)):_("",!0)]))),128)):_("",!0),a(P).type==="manual"&&k.value!=="schedule"?(t(),o("button",{key:5,type:"button",class:"btn btn-primary mt-4",onClick:pe}," Add Another Data ")):_("",!0),e("button",Ea,c(k.value==="create"?"Create Meeting":"Edit Meeting"),1)],32)])])],4)])],512)])],64)}}});const Ra=Ae(Ua,[["__scopeId","data-v-7113a82b"]]),La={class:"role-container w-100 d-flex justify-content-center"},Va=["aria-expanded"],ja={key:0,class:"dropdown-menu show justify-content","aria-labelledby":"role-status"},Oa=["onClick"],Na={key:1,class:"text-center"},Ha=ge({__name:"MemberPosition",props:{member:{},positions:{},disableRemotePosition:{}},emits:["position-updated"],setup(U,{emit:f}){const E=U,k=f,q=v(null),h=v(!1),R=r(L=>{L.stopPropagation(),h.value=!h.value},"toggleDropdown"),M=r(L=>{k("position-updated",{memberId:E.member.id,positionId:L.id}),h.value=!1},"updateRole"),F=Z(()=>{var L;return`bg-${(L=E.member)==null?void 0:L.position.name.toLowerCase()} text-white`}),C=Z(()=>{var L;return(L=E.member)==null?void 0:L.position.name}),$=Z(()=>E.positions);return(L,ae)=>{var N,b,P,de;return t(),o("div",La,[C.value?(t(),o("div",{key:0,class:"dropdown",ref_key:"dropdownRef",ref:q},[e("button",{class:H(["btn btn-primary dropdown-toggle text-truncate w-100",F.value]),type:"button",onClick:R,"aria-haspopup":"true","aria-expanded":h.value},[e("i",{class:H(["mr-2 fa "+((N=E.member)==null?void 0:N.position.icon),"mr-2"])},null,2),O(" "+c((b=E.member)==null?void 0:b.position.name),1)],10,Va),h.value?(t(),o("ul",ja,[(t(!0),o(z,null,Q($.value,ee=>(t(),o("li",{key:ee.name},[e("a",{href:"#",class:"dropdown-item",onClick:B(re=>M(ee),["prevent"])},[e("i",{class:H(["mr-2 fa "+ee.icon,"mr-2"])},null,2),O(" "+c(ee.name),1)],8,Oa)]))),128))])):_("",!0)],512)):(t(),o("div",Na,[e("i",{class:H(["mr-2 fa "+((P=E.member)==null?void 0:P.position.icon),"mr-2"])},null,2),O(" "+c((de=E.member)==null?void 0:de.position.name),1)]))])}}});const Ka=Ae(Ha,[["__scopeId","data-v-c85c72a2"]]),ye=r(U=>(Oe("data-v-889c2096"),U=U(),Ne(),U),"_withScopeId$1"),za={class:"card"},Ga={class:"card-header flex items-center"},Qa=ye(()=>e("h2",{class:"card-header-title h3"},"Board Members",-1)),Ya={class:"ml-auto flex items-center space-x-2"},Wa={class:"container-fluid"},Za={class:"row"},Xa={class:"card card-outline card-primary h-100"},Ja={class:"card-body box-profile"},en={class:"text-center"},tn={class:"profile-username text-center text-primary"},sn=["onClick"],on=["onClick"],an=ye(()=>e("i",{class:"far fa-eye"},null,-1)),nn=[an],ln={class:"text-muted text-center text-bold"},dn={key:0,class:"mt-3"},rn=ye(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Position ",-1)),cn={class:"text-center"},un={key:1,class:"mt-3"},_n=ye(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Position ",-1)),mn={class:"text-center"},pn={class:"mt-3"},hn=ye(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Last Updated ",-1)),vn={class:"text-center text-primary text-small"},bn={class:"flex justify-center col-md-6"},fn={method:"dialog",class:"modal-box rounded-xl"},gn=ye(()=>e("h3",{class:"font-bold text-lg justify-center flex"},c("Add Members"),-1)),yn=ye(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),xn={class:"w-full mt-6 p-2"},$n={class:"font-thin text-sm flex flex-col items-center gap-6"},wn={key:0,class:"message"},kn=ye(()=>e("button",{type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},c("Add Members"),-1)),Mn=ge({__name:"Members",setup(U){const f=ke(),E=qe(),k=tt(),q=Ee(),h=v("create"),R=E.params.boardId,M=v(!1),F=v(null),C=v([]),$=v([]),{errorMessage:L}=Ce("assignees"),ae=me({id:m().nullable(),position_id:m().nullable(),board_id:st().required(),members:Ie().of(m()).nullable()}),{handleSubmit:N,setErrors:b,setFieldValue:P,values:de}=Ue({validationSchema:ae,initialValues:{id:"",position_id:"",board_id:R,members:[]}}),ee=r(()=>{P("members",C.value)},"selectedUsers"),re=r(()=>{P("members",C.value)},"removeselectedUsers"),he=r(p=>{var w;const V=p.members.map(j=>j.user.id.toString());C.value=V,P("members",C.value),h.value="edit",M.value=!0,(w=F.value)==null||w.showModal()},"openEditMembersModal"),D=N(async(p,{resetForm:V})=>{var w;try{P("members",C.value);const j={board_id:p.board_id,members:p.members};if(h.value==="create")await Et(j,R);else if(h.value==="edit")await Ut(j,R);else if(h.value==="position"){const le={id:p.id,position_id:p.position_id};await useUpdateMemberPositionRequest(le,R)}await pe(),ce(),(w=F.value)==null||w.close()}catch(j){j instanceof Be?b(j.messages):q(j)}}),ce=r(()=>{h.value="create",M.value=!1,C.value=[],P("members",[]),P("position_id","")},"reset"),x=Z(()=>{var V;const p=[];return $.value&&((V=$.value)==null?void 0:V.length)>0&&$.value.reduce((w,j)=>(w.push({id:j.id,name:`${j.full_name}`}),w),p),p}),W=r(async()=>{const p=await Ot({paginate:"false"});$.value=p.data},"getUsers");$e(async()=>{window.dispatchEvent(new CustomEvent("updateTitle",{detail:"Members"})),W()});const ve=r(()=>we({queryKey:["getBoardMembersKey",R],queryFn:async()=>(await Ke(R,{paginate:"false"})).data}),"getBoardMembers"),{isLoading:ue,data:te,refetch:pe}=ve(),se=v([]),be=r(async()=>{const p=await Rt({paginate:"false"});se.value=p.data},"getPositions");$e(async()=>{await be()});const ne=r(p=>{ce(),h.value="position",P("id",p.memberId),P("position_id",p.positionId),D()},"handlePositionUpdated"),_e=r(p=>{k.push({name:"ProfileDetails",params:{userId:p.id,profileId:p.profile.id}})},"openUserProfile");return(p,V)=>(t(),o(z,null,[e("div",za,[e("div",Ga,[Qa,e("div",Ya,[e("button",{class:"btn btn-secondary btn-sm",onClick:V[0]||(V[0]=B(w=>he({members:a(te)}),["prevent"]))}," Update Members ")])]),e("div",Wa,[e("div",Za,[(t(!0),o(z,null,Q(a(te),(w,j)=>(t(),o("div",{class:"col-lg-3 col-md-4 col-sm-6 mb-3",key:j},[e("div",Xa,[e("div",Ja,[e("div",en,[e("h3",tn,[e("a",{href:"",onClick:B(le=>{var u,S;return((S=(u=a(f))==null?void 0:u.user)==null?void 0:S.id)===w.user.id?_e(w.user):""},["prevent"])},c(w.user.full_name),9,sn),a(f).hasPermission(["view board member profile"])?(t(),o("button",{key:0,type:"button",onClick:B(le=>_e(w.user),["prevent"]),title:"",class:"mx-2 btn btn-sm btn-primary"},nn,8,on)):_("",!0)]),e("p",ln,c(w.position.name),1)]),a(f).hasPermission(["assign board position"])?(t(),o("div",dn,[rn,e("div",cn,[A(Ka,{member:w,positions:se.value,disableRemotePosition:0,onPositionUpdated:ne},null,8,["member","positions"])])])):(t(),o("div",un,[_n,e("div",mn,[e("i",{class:H(["mr-2 fa "+w.position.icon,"mr-2"])},null,2),O(" "+c(w.position.name),1)])])),e("div",pn,[hn,e("p",vn,c(a(Ve)(w.updated_at,null)),1)])])])]))),128))])])]),O("> "),e("div",bn,[e("dialog",{id:"membersmodal",class:"modal",ref_key:"membersmodal",ref:F},[e("form",fn,[gn,yn,e("div",xn,[e("div",$n,[e("form",{novalidate:"",onSubmit:V[4]||(V[4]=B((...w)=>a(D)&&a(D)(...w),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",{class:H(["multiselect-container",{error:!!a(L)}])},[A(a(He),{id:"members",modelValue:C.value,"onUpdate:modelValue":V[1]||(V[1]=w=>C.value=w),mode:"tags",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:x.value,valueProp:"id",trackBy:"id",label:"name",class:H(["multiselect-container",{error:!!a(L)}]),onSelect:V[2]||(V[2]=w=>ee()),onDeselect:V[3]||(V[3]=w=>re())},null,8,["modelValue","options","class"]),a(L)?(t(),o("div",wn,c(a(L)),1)):_("",!0)],2),kn],32)])])])],512)])],64))}});const Sn=Ae(Mn,[["__scopeId","data-v-889c2096"]]),Cn={key:0},Pn={class:"card h-full"},Tn={class:"card-header flex items-center"},qn=e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"}," Board Polls ")],-1),Dn={key:0,class:"flex items-center space-x-2"},Fn=e("i",{class:"far fa fa-plus mr-2"},null,-1),In=e("span",{class:"sr-only"},"Add poll",-1),Bn={class:"card-container"},An={key:0},En={key:1},Un={class:"row overflow-auto p-4",style:{"max-height":"100vh"}},Rn={class:"card card-outline card-primary h-100"},Ln={class:"card-header"},Vn={class:"card-tools"},jn=["onClick"],On=e("i",{class:"fas fa-edit"},null,-1),Nn=[On],Hn={class:"card-body"},Kn={class:"text-primary tex-bold uppercase"},zn=e("strong",{class:"text-primary"},"Question:",-1),Gn={class:"mt-2 text-primary text-bold"},Qn={class:""},Yn=e("strong",null,"Answer Options:",-1),Wn={class:"row"},Zn={class:"col-6"},Xn={class:"list-unstyled text-success"},Jn={class:"col-6"},el={class:"list-unstyled text-success"},tl={class:"d-flex justify-content-between"},sl=e("strong",null,"Due Date:",-1),ol=e("strong",null,"Status:",-1),al=e("strong",null,"Vote:",-1),nl=["innerHTML"],ll={class:""},il=e("strong",null,"Assignees:",-1),dl={class:"row"},rl={class:"col-6"},cl={class:"list-unstyled"},ul={class:"col-6"},_l={class:"list-unstyled"},ml=e("strong",null,"Description:",-1),pl=["innerHTML"],hl={class:"flex justify-center items-center min-h-screen"},vl={method:"dialog",class:"modal-box rounded-xl relative bg-white shadow-xl"},bl={class:"font-bold text-lg text-center"},fl=e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1),gl={class:"overflow-auto p-4",style:{"max-height":"80vh"}},yl={class:"grid grid-cols-2 md:grid-cols-2 gap-4 p-2"},xl={class:"col-span-2"},$l={class:"flex flex-wrap -mx-2 mt-2"},wl={class:"w-full md:w-1/2 px-1 md:px-2"},kl={class:"w-full md:w-1/2 px-1 md:px-2"},Ml={class:"flex flex-wrap -mx-2 mt-2"},Sl={class:"w-full md:w-1/3 px-1 md:px-2 text-center"},Cl=e("h2",{class:"font-bold text-sm text-center"},"Click to Add Options",-1),Pl=e("h4",{class:"text-info font-semibold"},"Your Options",-1),Tl={key:0},ql={key:0,class:"w-full md:w-2/3 px-1 md:px-2 flex flex-col"},Dl=["onClick"],Fl={class:"flex flex-wrap -mx-2 mt-2"},Il={class:"w-full md:w-1/2 px-1 md:px-2"},Bl={class:"w-full md:w-1/2 px-1 md:px-2"},Al={key:0},El=e("h2",{class:"font-bold text-primary text-sm text-center"}," All Members Will be assiged this Poll ",-1),Ul=[El],Rl={key:0,class:"form-group col-span-3"},Ll=e("label",{class:"text-bold font-medium tracking-wide"}," People To Vote ",-1),Vl={key:0,class:"message"},jl={key:1},Ol={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},Nl={key:1},Hl=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),Kl=[Hl],zl=ge({__name:"Pollp",setup(U){const f=ke(),E=qe(),k=v(!1),q=v("create"),h=E.params.boardId,R=v(null),M=v([]),F=v(null),C=v("single"),$=v("individuals"),L=v([]),ae=v([]),N=v(""),b=Ee();Ce("duedate");const{errorMessage:P}=Ce("pollassignees"),de=me({id:m().required(),title:m().required(),poll_id:m().nullable(),deleted_at:m().nullable(),created_at:m().nullable(),updated_at:m().nullable()}),ee=me({id:m().required(),full_name:m().required()}),re=me({id:m().required(),poll_id:m().nullable(),member_id:m().required(),user:ee}),he=me({board_id:m().nullable(),question:m().required(),description:m().required(),questionoptiontype:m().required(),optionstatus:m().required(),options:Ie().of(de).required(),duedate:m().required(),assigneetype:m().required(),assigneestatus:m().required(),pollassignees:Ie().of(re).nullable(),status:m().required()}),{handleSubmit:D,setErrors:ce,setFieldValue:x,values:W}=Ue({validationSchema:he,initialValues:{board_id:h,question:"",description:"",questionoptiontype:"",optionstatus:"",options:[{id:Pe(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null}],duedate:"",assigneetype:"",assigneestatus:"",pollassignees:[],status:"inactive"}});Ce("options");const ve=r(()=>{var i;ne(),q.value="create",k.value=!0,(i=F.value)==null||i.showModal()},"openCreatePollModal"),ue=r(i=>{var I;ne(),R.value=i.id,x("question",i.question),x("description",i.description),x("questionoptiontype",i.questionoptiontype),x("optionstatus",i.optionstatus),x("duedate",i.duedate),x("assigneetype",i.assigneetype),x("assigneestatus",i.assigneestatus),x("status",i.status),x("options",i.options),$.value=i.assigneestatus,te(i.pollassignees),q.value="edit",k.value=!0,(I=F.value)==null||I.showModal()},"openEditPollModal");function te(i){M.value=i.map(I=>({id:I.id,full_name:I.user.full_name,poll_id:I.poll_id,member_id:I.member_id,user:I.user})),x("pollassignees",M.value)}r(te,"mappollassigneesToReactiveRef");const pe=r(()=>{x("pollassignees",M.value)},"selectedMembers"),se=r(()=>{x("pollassignees",M.value)},"removeselectedUsers"),be=D(async(i,{resetForm:I})=>{var y;try{console.log("dddd");const G={board_id:i.board_id,question:i.question,description:i.description,questionoptiontype:i.questionoptiontype,optionstatus:i.optionstatus,options:i.options,duedate:i.duedate,assigneetype:i.assigneetype,assigneestatus:i.assigneestatus,pollassignees:i.pollassignees,status:i.status};if(q.value==="create")await Nt(G,h);else{const Y=R.value;await Ht(G,Y)}(y=F.value)==null||y.close(),await Ge(),ne()}catch(G){G instanceof Be?ce(G.messages):b(G)}}),ne=r(()=>{q.value="create",k.value=!1,R.value=null,C.value="single",$.value="all_members",M.value=[],x("board_id",h),x("question",""),x("description",""),x("questionoptiontype","single"),x("optionstatus","single"),x("options",[{id:Pe(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null}]),x("duedate",""),x("assigneetype","all_members"),x("assigneestatus","all_members"),x("pollassignees",[]),x("status","inactive")},"reset"),_e=r(i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),"formattedDateTime"),p=r(i=>V(i)?"bg-danger":"bg-success","dateBadgeClass"),V=r(i=>{const I=new Date,y=new Date(i);return I>y},"hasDueDatePassed"),w=r(i=>{var Qe;if(!i.votes||((Qe=i.votes)==null?void 0:Qe.length)===0)return"No votes yet";const I=i.votes.reduce((Re,Le)=>Re+Le.voteCount,0),y=i.totalMembers;if(I>y)return console.error("Total votes exceed total members, which is unexpected."),"Voting data error";if(I===0)return"No votes yet";const G=i==null?void 0:i.votes.reduce((Re,Le)=>Re.voteCount>Le.voteCount?Re:Le),Y=y-I;return`${(G.voteCount/I*100).toFixed(1)}% voted for ${G.title}<br>${I} voted / ${Y} not yet`},"calculateVoteStats"),j=r(i=>{switch(i){case"Backlog":return"badge bg-warning";case"Pending":return"badge bg-info";case"On Progress":return"badge bg-primary";case"Completed":return"badge bg-success";default:return"badge"}},"statusClass"),le=[{name:"Single Answer",value:"single"},{name:"Multiple Answers: More than one",value:"multiple"}],u=[{name:"Individuals",value:"individuals"},{name:"Assign All Board Members",value:"all_members"}],S=Z(()=>le),n=Z(()=>u),l=r(i=>{ae.value=[],L.value=[],s(),C.value=i,x("questionoptiontype",i),x("optionstatus",i)},"handleQuestionOptionTypeChange"),d=r(i=>{M.value=[],N.value=i,$.value=i,x("assigneetype",i),x("assigneestatus",i)},"handleAssigneeTypeChange"),s=r(()=>{Array.isArray(W.options)||(console.error("Invalid state: values.options is not an array."),x("options",[]));const i={id:Pe(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null};x("options",[...W.options,i])},"addEmptyOption");Xe(()=>W.options,i=>{});const T=r(i=>{const I=W.options.filter(y=>y.id!==i);console.log("vv",I),x("options",I)},"removeOption"),g=r(()=>we({queryKey:["getPollMembershisKey"],queryFn:async()=>(await Ke(h,{paginate:"false"})).data.map(ot())}),"getMembers"),{isLoading:J,data:K,refetch:oe}=g(),ot=r(()=>i=>({id:i.id,full_name:i.user.full_name,member_id:i.id,user:i.user}),"formatEvent"),at=Z(()=>{var i;return!K.value||((i=K.value)==null?void 0:i.length)===0?[]:K.value}),nt=r(()=>we({queryKey:["getBoardPollsKey",h],queryFn:async()=>(await Kt(h,{paginate:"false"})).data}),"getBoardPolls"),{isLoading:lt,data:it,refetch:Ge}=nt();return $e(async()=>{oe(),Ge()}),(i,I)=>a(f).hasPermission(["view poll"])?(t(),o("div",Cn,[e("div",Pn,[e("div",Tn,[qn,a(f).hasPermission(["create poll"])?(t(),o("div",Dn,[e("button",{type:"button",onClick:B(ve,["prevent"]),class:"btn btn-tool"},[Fn,O(),In])])):_("",!0)]),e("div",Bn,[a(lt)?(t(),o("div",An,"Loading Board Polls...")):(t(),o("div",En,[e("div",Un,[(t(!0),o(z,null,Q(a(it),(y,G)=>(t(),o("div",{class:"col-lg-12 col-md-12 col-sm-12 mb-2",key:G},[e("div",Rn,[e("div",Ln,[e("div",Vn,[a(f).hasPermission(["edit poll"])?(t(),o("button",{key:0,class:"btn btn-tool",onClick:B(Y=>ue(y),["prevent"])},Nn,8,jn)):_("",!0)])]),e("div",Hn,[e("div",Kn,[zn,e("p",Gn,c(y.question),1),e("div",Qn,[Yn,e("div",Wn,[e("div",Zn,[e("ul",Xn,[(t(!0),o(z,null,Q(y.options.slice(0,Math.ceil(y.options.length/2)),(Y,fe)=>(t(),o("li",{key:Y.id},c(fe+1)+". "+c(Y.title),1))),128))])]),e("div",Jn,[e("ul",el,[(t(!0),o(z,null,Q(y.options.slice(Math.ceil(y.options.length/2)),(Y,fe)=>(t(),o("li",{key:Y.id},c(fe+1+Math.ceil(y.options.length/2))+". "+c(Y.title),1))),128))])])])])]),e("div",tl,[e("div",null,[sl,e("p",{class:H(p(y.duedate))},c(_e(y.duedate)),3)]),e("div",null,[ol,e("p",null,[e("span",{class:H(j(y.status))},c(y.status),3)])]),e("div",null,[al,e("p",null,[e("span",{innerHTML:w(y)},null,8,nl)])])]),e("div",ll,[il,e("div",dl,[e("div",rl,[e("ul",cl,[(t(!0),o(z,null,Q(y.pollassignees.slice(0,Math.ceil(y.pollassignees.length/2)),(Y,fe)=>(t(),o("li",{key:Y.id},c(fe+1)+". "+c(Y.user.full_name),1))),128))])]),e("div",ul,[e("ul",_l,[(t(!0),o(z,null,Q(y.pollassignees.slice(Math.ceil(y.pollassignees.length/2)),(Y,fe)=>(t(),o("li",{key:Y.id},c(fe+1+Math.ceil(y.pollassignees.length/2))+". "+c(Y.user.full_name),1))),128))])])])]),e("div",null,[ml,e("p",{innerHTML:y.description,class:"mt-2"},null,8,pl)])])])]))),128))])]))])]),e("div",hl,[e("dialog",{id:"pollmodal",class:"modal w-full max-w-4xl mx-auto p-0",ref_key:"PollModal",ref:F},[e("form",vl,[e("h3",bl,c(q.value=="create"?"Create Poll":"Edit Poll"),1),fl,e("div",gl,[e("div",yl,[e("div",xl,[e("form",{novalidate:"",onSubmit:I[3]||(I[3]=B((...y)=>a(be)&&a(be)(...y),["prevent"])),class:""},[A(Te,{labeled:!0,label:"Poll Question",name:"question",placeholder:"Enter Poll Question",type:"text"}),A(ze,{label:"Poll description",name:"description",theme:"snow",placeholder:"Enter Poll Description",toolbar:"full",contentType:"html",class:"col-span-2"}),e("div",$l,[e("div",wl,[A(je,{labeled:!0,name:"questionoptiontype",label:"Select Allowed Answers On the Question",placeholder:"Select Allowed Answers On the Question",options:S.value,onSelectedItem:l},null,8,["options"])]),e("div",kl,[A(Fe,{label:"Poll Due Date",name:"duedate",flow:["month"],placeholder:"Enter Poll Due Date & Time"})])]),e("div",Ml,[e("div",Sl,[e("div",null,[Cl,e("button",{onClick:B(s,["prevent"]),class:"btn btn-primary h-10 mt-2"}," Add Option ")]),Pl,a(W).options?(t(),o("ul",Tl,[(t(!0),o(z,null,Q(a(W).options,(y,G)=>(t(),o("li",{class:"text-primary font-bold text-justify",key:G},c(G+1)+"."+c(y==null?void 0:y.title),1))),128))])):_("",!0)]),a(W).options?(t(),o("div",ql,[(t(!0),o(z,null,Q(a(W).options,(y,G)=>(t(),o("div",{class:"form-group flex items-center mb-2",key:G},[A(Lt,{labeled:!0,label:"Title for option "+(G+1),name:"options["+G+"].title",placeholder:"Enter title",class:"flex-grow",type:"text"},null,8,["label","name"]),e("a",{href:"#",class:"ml-2 text-red-600 font-bold mt-8",onClick:B(Y=>T(y.id),["prevent"])}," ✕ ",8,Dl)]))),128))])):_("",!0)]),e("div",Fl,[e("div",Il,[A(je,{labeled:!0,name:"assigneetype",label:"Select Assignee Type",placeholder:"Select Assignee Type",options:n.value,onSelectedItem:d},null,8,["options"])]),e("div",Bl,[$.value==="all_members"?(t(),o("div",Al,Ul)):_("",!0)])]),$.value==="individuals"?(t(),o("div",Rl,[Ll,e("div",{class:H(["multiselect-container",{error:!!a(P)}])},[A(a(He),{id:"pollassignees",modelValue:M.value,"onUpdate:modelValue":I[0]||(I[0]=y=>M.value=y),mode:"tags",required:"",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:at.value,valueProp:"member_id",trackBy:"member_id",label:"full_name",class:H(["col-span-3",["multiselect-container",{error:!!a(P)}]]),object:!0,onSelect:I[1]||(I[1]=y=>pe()),onDeselect:I[2]||(I[2]=y=>se())},null,8,["modelValue","options","class"]),a(P)?(t(),o("div",Vl,c(a(P)),1)):_("",!0)],2)])):_("",!0),M.value&&M.value.length||$.value==="all_members"?(t(),o("div",jl,[e("button",Ol,c(q.value=="create"?"Create Poll":"Edit Poll"),1)])):_("",!0)],32)])])])])],512)])])):(t(),o("div",Nl,Kl))}});const ie=r(U=>(Oe("data-v-01de394e"),U=U(),Ne(),U),"_withScopeId"),Gl={key:0},Ql={class:"card h-full"},Yl={class:"card-header flex items-center"},Wl=ie(()=>e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"},"Meeting Tasks")],-1)),Zl={key:0,class:"flex items-center space-x-2"},Xl=ie(()=>e("i",{class:"far fa fa-plus mr-2"},null,-1)),Jl=ie(()=>e("span",{class:"sr-only"},"Add task",-1)),ei={class:"card-container"},ti={key:0},si={key:1},oi={class:"row overflow-auto p-4",style:{"max-height":"100vh"}},ai={class:"card card-outline card-primary h-100"},ni={class:"card-header"},li={class:"card-tools"},ii=["onClick"],di=ie(()=>e("i",{class:"fas fa-edit"},null,-1)),ri=[di],ci={class:"card-body"},ui={class:"text-primary text-bold uppercase"},_i={class:"d-flex justify-content-between"},mi=ie(()=>e("strong",null,"Due Date:",-1)),pi=ie(()=>e("strong",null,"Status:",-1)),hi={key:0,class:"badge bg-warning"},vi={key:1,class:"badge bg-info"},bi={key:2,class:"badge bg-primary"},fi={key:3,class:"badge bg-success"},gi={class:""},yi=ie(()=>e("strong",null,"Assignees:",-1)),xi={class:"row"},$i={class:"col-6"},wi={class:"list-unstyled"},ki={class:"col-6"},Mi={class:"list-unstyled"},Si=ie(()=>e("strong",null,"Description:",-1)),Ci=["innerHTML"],Pi={class:"flex justify-center col-md-6"},Ti={method:"dialog",class:"modal-box rounded-xl"},qi={class:"font-bold text-lg justify-center flex"},Di=ie(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),Fi={class:"overflow-auto p-4",style:{"max-height":"80vh"}},Ii={class:"grid grid-cols-3 md:grid-cols-3 gap-2 p-2"},Bi={class:"col-span-3"},Ai={class:"flex flex-wrap -mx-2 mt-2"},Ei={class:"w-full md:w-1/2 px-1 md:px-2"},Ui={class:"w-full md:w-1/2 px-1 md:px-2"},Ri={class:"flex flex-wrap -mx-2 mt-2"},Li={class:"w-full md:w-1/2 px-1 md:px-2"},Vi={class:"w-full md:w-1/2 px-1 md:px-2"},ji={key:0},Oi=ie(()=>e("h2",{class:"font-bold text-primary text-sm text-center"},"All Members Will be assigned this Task",-1)),Ni=[Oi],Hi={key:0,class:"form-group col-span-3"},Ki=ie(()=>e("label",{class:"text-bold font-medium tracking-wide"},"People to Assign",-1)),zi={key:0,class:"message"},Gi={key:1},Qi={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},Yi={key:1},Wi=ie(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),Zi=[Wi],Xi=ge({__name:"Taskp",setup(U){const f=ke(),E=qe(),k=v(!1),q=v("create"),h=E.params.boardId,R=v(null),M=v([]),F=v(null),C=v(null),$=v("individuals"),L=v(""),ae=Ee();Ce("duedate");const{errorMessage:N}=Ce("taskassignees"),b=r(s=>{const T=new Date,g=new Date(s);return T>g},"hasDueDatePassed"),P=me({id:m().nullable(),full_name:m().nullable()}),de=me({id:m().nullable(),task_id:m().nullable(),member_id:m().nullable(),user:P}),ee=me({board_id:m().nullable(),title:m().required(),duedate:m().required(),description:m().required(),status:m().required(),assigneetype:m().required(),assigneestatus:m().required(),taskassignees:Ie().of(de).nullable()}),{handleSubmit:re,setErrors:he,setFieldValue:D,values:ce}=Ue({validationSchema:ee,initialValues:{board_id:h,title:"",duedate:"",description:"",status:"pending",assigneetype:"",assigneestatus:"",taskassignees:[]}}),x=r(()=>{var s;se(),q.value="create",k.value=!0,(s=C.value)==null||s.showModal()},"openCreateTaskModal"),W=r(s=>{var T;se(),F.value=s,R.value=s.id,D("title",s.title),D("duedate",s.duedate),D("description",s.description),D("status",s.status),D("assigneetype",s.assigneetype),D("assigneestatus",s.assigneestatus),$.value=s.assigneestatus,ve(s.taskassignees),q.value="edit",k.value=!0,(T=C.value)==null||T.showModal()},"openEditTaskModal");function ve(s){M.value=s.map(T=>({id:T.id,full_name:T.user.full_name,task_id:T.task_id,member_id:T.member_id,user:T.user})),D("taskassignees",M.value)}r(ve,"maptaskassigneesToReactiveRef");const ue=r(()=>{D("taskassignees",M.value)},"selectedMembers"),te=r(()=>{D("taskassignees",M.value)},"removeselectedUsers"),pe=re(async(s,{resetForm:T})=>{var g;try{const J={board_id:s.board_id,title:s.title,duedate:s.duedate,description:s.description,status:s.status,assigneetype:s.assigneetype,assigneestatus:s.assigneestatus,taskassignees:s.taskassignees};if(q.value==="create")await zt(J,h);else{const K=R.value;await Gt(J,K)}(g=C.value)==null||g.close(),await d(),se()}catch(J){J instanceof Be?he(J.messages):ae(J)}}),se=r(()=>{q.value="create",k.value=!1,R.value=null,$.value="all_members",M.value=[],D("board_id",h),D("title",""),D("duedate",""),D("description","description ................"),D("status","pending"),D("assigneetype","all_members"),D("assigneestatus","all_members"),D("taskassignees",[])},"reset"),be=r(s=>{M.value=[],L.value=s,$.value=s,D("assigneetype",s),D("assigneestatus",s)},"handleAssigneeTypeChange"),ne=[{name:"Individuals",value:"individuals"},{name:"Assign All Meeting Members",value:"all_members"}],_e=Z(()=>ne),p=r(()=>we({queryKey:["getBoardMembersKey"],queryFn:async()=>(await Ke(h,{paginate:"false"})).data.map(le())}),"getMembers"),{isLoading:V,data:w,refetch:j}=p(),le=r(()=>s=>({id:s.id,full_name:s.user.full_name,member_id:s.id,user:s.user}),"formatEvent"),u=Z(()=>{var s;return!w.value||((s=w.value)==null?void 0:s.length)===0?[]:w.value}),S=r(()=>we({queryKey:["getBoardTasksKey",h],queryFn:async()=>(await Qt(h,{paginate:"false"})).data}),"getBoardTasks"),{isLoading:n,data:l,refetch:d}=S();return $e(async()=>{d(),j()}),(s,T)=>a(f).hasPermission(["view task"])?(t(),o("div",Gl,[e("div",Ql,[e("div",Yl,[Wl,a(f).hasPermission(["create task"])?(t(),o("div",Zl,[e("button",{type:"button",onClick:B(x,["prevent"]),class:"btn btn-tool"},[Xl,O(),Jl])])):_("",!0)]),e("div",ei,[a(n)?(t(),o("div",ti,"Loading Meeting Tasks...")):(t(),o("div",si,[e("div",oi,[(t(!0),o(z,null,Q(a(l),(g,J)=>(t(),o("div",{class:"col-lg-12 col-md-12 col-sm-12 mb-2",key:J},[e("div",ai,[e("div",ni,[e("div",li,[a(f).hasPermission(["edit task"])?(t(),o("button",{key:0,class:"btn btn-tool",onClick:B(K=>W(g),["prevent"])},ri,8,ii)):_("",!0)])]),e("div",ci,[e("div",ui,c(g.title),1),e("div",_i,[e("div",null,[mi,e("p",{class:H({"text-danger":b(g.duedate)&&g.status!=="completed","text-success":!b(g.duedate)||g.status==="completed"})},c(a(Ve)(g.duedate)),3)]),e("div",null,[pi,e("p",null,[g.status==="backlog"?(t(),o("span",hi,"Backlog")):g.status==="pending"?(t(),o("span",vi,"Pending")):g.status==="onprogress"?(t(),o("span",bi,"On Progress")):g.status==="completed"?(t(),o("span",fi,"Completed")):_("",!0)])])]),e("div",gi,[yi,e("div",xi,[e("div",$i,[e("ul",wi,[(t(!0),o(z,null,Q(g.taskassignees.slice(0,Math.ceil(g.taskassignees.length/2)),(K,oe)=>(t(),o("li",{key:K.id},c(oe+1)+". "+c(K.user.full_name),1))),128))])]),e("div",ki,[e("ul",Mi,[(t(!0),o(z,null,Q(g.taskassignees.slice(Math.ceil(g.taskassignees.length/2)),(K,oe)=>(t(),o("li",{key:K.id},c(oe+1+Math.ceil(g.taskassignees.length/2))+". "+c(K.user.full_name),1))),128))])])])]),e("div",null,[Si,e("p",{innerHTML:g.description,class:"mt-2"},null,8,Ci)])])])]))),128))])]))])]),e("div",Pi,[e("dialog",{id:"taskmodal",class:"modal",ref_key:"TaskModal",ref:C},[e("form",Ti,[e("h3",qi,c(q.value=="create"?"Create Meeting Task":"Edit Meeting Task"),1),Di,e("div",Fi,[e("div",Ii,[e("div",Bi,[e("form",{novalidate:"",onSubmit:T[3]||(T[3]=B((...g)=>a(pe)&&a(pe)(...g),["prevent"])),class:""},[e("div",Ai,[e("div",Ei,[A(Te,{labeled:!0,label:"Task Title",name:"title",placeholder:"Enter Task Title",type:"text"})]),e("div",Ui,[A(Fe,{label:"Task Due Date",name:"duedate",flow:["month"],placeholder:"Task Due Date"})])]),A(ze,{label:"Task Description",name:"description",theme:"snow",placeholder:"Enter Task Description",toolbar:"full",contentType:"html",class:"col-span-3"}),e("div",Ri,[e("div",Li,[A(je,{labeled:!0,name:"assigneetype",label:"Select Assignee Type",placeholder:"Select Assignee Type",options:_e.value,onSelectedItem:be},null,8,["options"])]),e("div",Vi,[$.value==="all_members"?(t(),o("div",ji,Ni)):_("",!0)])]),$.value==="individuals"?(t(),o("div",Hi,[Ki,e("div",{class:H(["multiselect-container",{error:!!a(N)}])},[A(a(He),{id:"taskassignees",modelValue:M.value,"onUpdate:modelValue":T[0]||(T[0]=g=>M.value=g),mode:"tags",required:"",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:u.value,valueProp:"member_id",trackBy:"member_id",label:"full_name",class:H(["col-span-3",["multiselect-container",{error:!!a(N)}]]),object:!0,onSelect:T[1]||(T[1]=g=>ue()),onDeselect:T[2]||(T[2]=g=>te())},null,8,["modelValue","options","class"]),a(N)?(t(),o("div",zi,c(a(N)),1)):_("",!0)],2)])):_("",!0),M.value&&M.value.length||$.value==="all_members"?(t(),o("div",Gi,[e("button",Qi,c(q.value=="create"?"Create Task":"Edit Task"),1)])):_("",!0)],32)])])])])],512)])])):(t(),o("div",Yi,Zi))}});const Ji=Ae(Xi,[["__scopeId","data-v-01de394e"]]),ed={key:0},td={class:"row"},sd={class:"col-md-6"},od={class:"col-md-6"},ad={key:1},nd=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),ld=[nd],id=ge({__name:"TaskPolls",setup(U){const f=ke();return(E,k)=>a(f).hasPermission(["view task","view poll"])?(t(),o("div",ed,[e("div",td,[e("div",sd,[A(Ji)]),e("div",od,[A(zl)])])])):(t(),o("div",ad,ld))}});const dd={class:"col-md-12"},rd={key:0,class:"card card-widget widget-user shadow-lg"},cd=e("div",{style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.5)"}},null,-1),ud=[cd],_d={class:"card-footer"},md={class:""},pd={class:"widget-user-image",style:{left:"4%","margin-left":"-45px",position:"absolute",top:"190px"}},hd=["src"],vd={class:"ml-3 flex-1",style:{"margin-top":"-28px"}},bd=e("i",{class:"fas fa-chevron-left fa-xs"},null,-1),fd={class:"h2 mb-2 lg:mb-0",style:{"margin-left":"150px"}},gd={class:"card-outline card-outline-tabs"},yd={class:"card-header p-0 border-bottom-0"},xd={class:"nav nav-tabs",id:"custom-tabs-four-tab",role:"tablist"},$d=e("li",{class:"nav-item"},[e("a",{class:"nav-link active",id:"custom-tabs-four-home-tab","data-toggle":"pill",href:"#custom-tabs-four-home",role:"tab","aria-controls":"custom-tabs-four-home","aria-selected":"true"},"Meetings")],-1),wd={key:0,class:"nav-item"},kd=e("a",{class:"nav-link",id:"custom-tabs-four-documents-tab","data-toggle":"pill",href:"#custom-tabs-four-documents",role:"tab","aria-controls":"custom-tabs-four-documents","aria-selected":"false"}," Documents ",-1),Md=[kd],Sd=e("li",{class:"nav-item"},[e("a",{class:"nav-link",id:"custom-tabs-four-discussions-tab","data-toggle":"pill",href:"#custom-tabs-four-discussions",role:"tab","aria-controls":"custom-tabs-four-discussions","aria-selected":"false"}," Discussions ")],-1),Cd=e("li",{class:"nav-item"},[e("a",{class:"nav-link",id:"custom-tabs-four-tasks-tab","data-toggle":"pill",href:"#custom-tabs-four-tasks",role:"tab","aria-controls":"custom-tabs-four-tasks","aria-selected":"false"}," Task & Polls ")],-1),Pd=e("li",{class:"nav-item"},[e("a",{class:"nav-link",id:"custom-tabs-four-members-tab","data-toggle":"pill",href:"#custom-tabs-four-members",role:"tab","aria-controls":"custom-tabs-four-members","aria-selected":"false"}," Members ")],-1),Td={class:"card-body"},qd={class:"tab-content",id:"custom-tabs-four-tabContent"},Dd={class:"tab-pane fade active show",id:"custom-tabs-four-home",role:"tabpanel","aria-labelledby":"custom-tabs-four-home-tab"},Fd={class:"tab-pane fade",id:"custom-tabs-four-documents",role:"tabpanel","aria-labelledby":"custom-tabs-four-documents-tab"},Id=e("div",{class:"tab-pane fade",id:"custom-tabs-four-discussions",role:"tabpanel","aria-labelledby":"custom-tabs-four-discussions-tab"},null,-1),Bd={class:"tab-pane fade",id:"custom-tabs-four-tasks",role:"tabpanel","aria-labelledby":"custom-tabs-four-tasks-tab"},Ad=e("div",{class:"tab-pane fade",id:"custom-tabs-four-goals",role:"tabpanel","aria-labelledby":"custom-tabs-four-goals-tab"},null,-1),Ed={class:"tab-pane fade",id:"custom-tabs-four-members",role:"tabpanel","aria-labelledby":"custom-tabs-four-members-tab"},sr=ge({__name:"BoardDetails",setup(U){const f=ke(),E=v(),k=qe(),q=tt();function h(){q.push({name:_t})}r(h,"goBack");const R=k.params.boardId;return $e(async()=>{try{const F=(await mt(R)).data;E.value=F,window.dispatchEvent(new CustomEvent("updateTitle",{detail:F.name}))}catch(M){console.error("Error fetching board data:",M)}}),(M,F)=>(t(),o("div",dd,[E.value?(t(),o("div",rd,[e("div",{class:"widget-user-header text-white",style:et([{backgroundImage:`url(${a(Mt)(E.value.cover)})`,backgroundPosition:"center center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},{height:"250px",width:"100%",position:"relative"}])},ud,4),e("div",_d,[e("div",md,[e("div",pd,[e("img",{class:"img-circle elevation-2",src:a(St)(E.value.icon),alt:"User Avatar",style:{width:"128px",height:"128px"}},null,8,hd)]),e("div",vd,[e("a",{href:"",onClick:F[0]||(F[0]=B(C=>h(),["prevent"])),class:"mb-2 lg:mb-0 text-blue-primary",style:{"margin-left":"140px","margin-top":"-44px"}},[bd,O(" Boards ")]),e("h3",fd,c(E.value.name),1),e("div",gd,[e("div",yd,[e("ul",xd,[$d,a(f).hasPermission(["view folders"])?(t(),o("li",wd,Md)):_("",!0),Sd,Cd,Pd])]),e("div",Td,[e("div",qd,[e("div",Dd,[A(Ra)]),e("div",Fd,[A(Fo)]),Id,e("div",Bd,[A(id)]),Ad,e("div",Ed,[A(Sn)])])])])])])])])):_("",!0)]))}});export{sr as default};
