var St=Object.defineProperty;var l=(w,m)=>St(w,"name",{value:m,configurable:!0});import{q as je,d as ge,i as ye,r as h,j as Ce,V as Ae,C as de,P as we,o as t,c as s,e,T as j,h as g,u as a,F as W,R as J,g as Y,t as o,f as se,U as re,a4 as ot,a3 as At,W as Ne,X as Be,_ as Ie,k as Ze,n as It,H as lt,a6 as qt,a5 as Tt,b as dt,Z as bt,$ as Pt,l as Qe,w as Ye,a8 as Ft,a1 as Dt,a9 as Et,aa as Rt}from"./main-a9f2cfe9.js";import{u as qe,e as Ue,c as be,d as We,a as b,g as gt,f as ze,b as Te}from"./useUnexpectedErrorHandler-16280be0.js";import{Q as ft}from"./index-66c2f00f.js";import{A as Je}from"./attendance_routes-75c20f26.js";import{F as at,d as yt}from"./FormSelect-d45e4c1d.js";import{y as tt,z as st,m as xt,A as Ut,t as rt,B as jt,C as pt,D as Lt,d as $t,l as Vt,g as Ot,f as ht,e as nt,h as Nt,j as Bt,k as Ke,n as Ht,o as Kt,p as Yt,q as zt}from"./Breadcrumb-7a663afc.js";import{u as Gt,a as Qt,b as Wt,c as Zt,d as Jt,e as Xt,f as es,g as ts,h as wt,i as ss,j as as,k as ns,l as os,m as is,n as ls}from"./useMinuteRequest-1343beb2.js";import{u as ct,a as ds,b as rs,c as cs,d as us,e as _s,f as ms}from"./useTaskRequest-8819b4d7.js";import{F as Se}from"./FormInput-139a23bd.js";import{F as ut}from"./FormQuillEditor-778f598f.js";import{u as Me}from"./useQuery-e9652e60.js";import{_ as _t}from"./FormDateTimeInput.vue_vue_type_style_index_0_lang-e4584ded.js";import{F as vt}from"./FormTextBox-e5e2ff5b.js";import{j as ps,k as hs,l as vs,m as bs,n as gs,i as fs,o as ys,v as it}from"./usePositionRequest-01cf2072.js";import{F as xs}from"./FormUpload-276fcdbd.js";import{u as $s,a as ws,b as ks}from"./usePollRequest-712c654f.js";import"./membership_routes-72332848.js";import"./useQueryClient-1703431f.js";import"./folder_routes-53c554e5.js";async function Ms(w,m){const q=je(),M=ft.stringify(m,{arrayFormat:"brackets"});return await q.get(Je()+"/schedule/"+w+"?"+M).json()}l(Ms,"useGetMeetingAttendancesRequest");async function kt(w,m){return(await je().post(Je()+"/creatersvp/"+m,{json:w})).json()}l(kt,"useCreateAttendanceRSVPRequest");async function Mt(w,m){return(await je().post(Je()+"/updatersvp/"+m,{json:w})).json()}l(Mt,"useUpdateAttendanceRSVPRequest");async function Cs(w){return(await je().post(Je()+"/reminder/"+w)).json()}l(Cs,"useSendAttendancesReminder");async function Ct(w,m){return(await je().post(Je()+"/signattendance/"+m,{json:w})).json()}l(Ct,"useUpdateAttendanceSignatureRequest");const me=l(w=>(Ne("data-v-23f0e53e"),w=w(),Be(),w),"_withScopeId$6"),Ss={key:0,class:"card-header flex items-center"},As=me(()=>e("div",{class:"flex items-center flex-1 w-full"},null,-1)),Is={class:"flex items-center space-x-2"},qs=me(()=>e("span",{class:"text-danger"},"Reset Agenda Start Choice",-1)),Ts=[qs],Ps={key:1,class:"flex gap-5"},Fs={class:"flex-1"},Ds={class:"card card-outline card-danger",style:{"min-height":"384px"}},Es={class:"card-body"},Rs={class:"flex w-full"},Us={class:"flex-1"},js=me(()=>e("div",{class:"relative h-8"},[e("div",{class:"absolute border -right-16 text-[10px] bottom-2 rounded text-center px-2 py-0.5 text-gray-700 z-10 border-gray-200 bg-gray-200"},[e("div",{class:"absolute left-0 right-0 text-green text-xxs bold -top-2.5"}," Start ")])],-1)),Ls={"data-list_format":"num_la_lr",class:"agenda-list mb-0 border-l border-blue"},Vs={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},Os=me(()=>e("div",{class:"absolute border -right-16 top-4 text-[10px] rounded text-center py-0.5 text-gray-700 z-10 border-gray-200 bg-gray-200 px-2"},null,-1)),Ns=["onClick"],Bs={class:"font-medium flex-1"},Hs=["innerHTML"],Ks={class:"flex items-center gap-2 mt-1 h-6"},Ys={class:"text-xs text-gray-600"},zs={key:0,class:"list-none assignees-list"},Gs={key:1,class:"flex gap-2 items-start"},Qs={class:"font-medium flex-1"},Ws=["innerHTML"],Zs={class:"flex items-center gap-2 mt-1 h-6"},Js={class:"text-xs text-gray-600"},Xs={key:0,class:"list-none assignees-list"},ea={class:"ml-4 mt-2"},ta={class:"flex gap-x-2"},sa=me(()=>e("button",{type:"submit",class:"btn btn-primary h-10"}," Save ",-1)),aa=["onClick"],na={class:"min-h-6 border-l border-blue"},oa={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},ia=me(()=>e("div",{class:"absolute border -right-16 top-4 text-[10px] rounded text-center py-0.5 text-gray-700 z-10 border-gray-200 bg-white px-1"}," 10:30pm ",-1)),la=["onClick"],da={class:"font-medium flex-1"},ra=["innerHTML"],ca={class:"flex items-center gap-2 mt-1 h-6"},ua={class:"text-xs text-gray-600"},_a={key:0,class:"list-none assignees-list"},ma={key:1,class:"flex gap-2 items-start"},pa={class:"font-medium flex-1"},ha=["innerHTML"],va={class:"flex items-center gap-2 mt-1 h-6"},ba={class:"text-xs text-gray-600"},ga={key:0,class:"list-none assignees-list"},fa={class:"mt-4"},ya={key:0,class:"mt-4"},xa={class:"flex gap-x-2"},$a=me(()=>e("button",{type:"submit",class:"btn btn-primary h-10"}," Save ",-1)),wa={class:"relative h-8"},ka={class:"absolute border -right-16 text-[10px] bottom-2 rounded text-center px-2 py-0.5 text-gray-700 z-10 border-gray-200 bg-gray-200"},Ma=me(()=>e("div",{class:"absolute left-0 right-0 text-green text-xxs bold -top-2.5"}," END ",-1)),Ca=me(()=>e("div",null,[e("div",{class:"w-16 flex h-full justify-center py-4"},[e("div",{class:"bg-gray-200 h-full relative left-1.5",style:{width:"1px"}},"   ")])],-1)),Sa={class:"w-[350px] relative"},Aa={class:"w-[350px]"},Ia={class:"card card-outline card-danger mb-0"},qa={class:"card-body"},Ta={class:"form-group"},Pa=me(()=>e("label",{class:"text-xs uppercase font-medium text-gray-700 tracking-wide"}," People Responsible ",-1)),Fa={key:0,class:"message"},Da={class:"flex justify-between"},Ea=me(()=>e("button",{type:"submit",class:"btn btn-sm btn-primary ml-1 mr-1"}," Save ",-1)),Ra=me(()=>e("div",{class:"w-[350px] relative"},[e("div",{class:"w-[350px] card card-outline card-danger"},[e("div",{class:"bg-gray-200 rounded-lg h-96 flex items-center justify-center"},[e("div",{class:"text-center text-gray-700"},[Y(" Select an agenda item to edit "),e("br",{role:"presentation","data-uw-rm-sr":""}),e("div",{class:"text-xl mt-1"},[e("svg",{class:"svg-inline--fa fa-turn-down-left","aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"turn-down-left",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":""},[e("path",{fill:"currentColor",d:"M6.5 271.6c-8.7 9.2-8.7 23.7 0 32.9l121.4 129c8.8 9.3 21 14.6 33.7 14.6c25.6 0 46.3-20.7 46.3-46.3l0-41.7 144 0c88.4 0 160-71.6 160-160l0-112c0-30.9-25.1-56-56-56l-32 0c-30.9 0-56 25.1-56 56l0 120c0 4.4-3.6 8-8 8l-152 0 0-41.7c0-25.6-20.7-46.3-46.3-46.3c-12.8 0-25 5.3-33.7 14.6L6.5 271.6zm153.5-93l0 61.5c0 13.3 10.7 24 24 24l176 0c30.9 0 56-25.1 56-56l0-120c0-4.4 3.6-8 8-8l32 0c4.4 0 8 3.6 8 8l0 112c0 61.9-50.1 112-112 112l-168 0c-13.3 0-24 10.7-24 24l0 61.5L57 288 160 178.5z"})])])])])])],-1)),Ua=[Ra],ja={key:2,class:"card card-outline card-danger"},La=me(()=>e("div",{class:"card-header text-center justify-center bg-gradient-info"},[e("h3",{class:"text-center font-bold text-lg"}," Choose Your Starting Point ")],-1)),Va={class:"card-body"},Oa={class:"flex justify-center space-x-4 py-6"},Na=me(()=>e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-gradient-success rounded-full shadow w-11 h-11"},[e("i",{class:"fa fa-list text-white"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From Scratch")],-1)),Ba=[Na],Ha=me(()=>e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-gradient-warning rounded-full shadow w-11 h-11"},[e("i",{class:"far fa-file text-white"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From the Agenda")],-1)),Ka=[Ha],Ya={class:"flex justify-center col-md-6"},za={method:"dialog",class:"modal-box rounded-xl"},Ga=me(()=>e("h3",{class:"font-bold text-lg justify-center flex text-white"}," save the Imported AGendas from Previous Meeting ",-1)),Qa=me(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),Wa={class:"w-full mt-6 p-2"},Za={class:"font-thin text-sm flex flex-col items-center gap-6"},Ja={class:"w-full rounded-xl mx-auto p-1 custom-modal"},Xa=me(()=>e("h3",{class:"text-center text-base font-bold text-primary"}," Make use of the imported Agendas ",-1)),en={class:"flex justify-center mt-4"},tn=ge({__name:"Agenda",emits:["change-tab"],setup(w,{emit:m}){const q=ye(),M=m,F=h("default"),k=qe(),S=Ce(),D=h("create"),f=h(""),z=h(""),C=S.params.boardId,y=S.params.meetingId,$=S.params.scheduleId,I=h(""),T=h(null),B=h([]),ae=h([]),ee=h(null),oe=h(null),ne=h(null),ue=h([]),P=h(!1),O=h(!1),_=h(!1),E=h(null),G=h(-1),U=h(-1),{errorMessage:H}=Ue("assignees"),K=be({schedule_id:We().required(),title:b().required(),duration:gt().nullable(),description:b().nullable(),agenda_id:b().nullable(),assignees:ze().of(b()).nullable(),children:ze().of(b()).nullable()}),{handleSubmit:c,setErrors:ie,setFieldValue:X,values:_e}=Te({validationSchema:K,initialValues:{schedule_id:$,title:"",duration:null,description:null,agenda_id:null,assignees:[],children:[]}}),te=l(()=>{O.value=!0,P.value=!1,_.value=!1,G.value=-1,U.value=-1,D.value="create",X("title",""),console.log("we are here",O.value,_.value,ue)},"enableAddingNewParent"),le=l((N,i)=>{_.value=!0,E.value=i,G.value=N,U.value=-1,X("title",""),P.value=!1,D.value="create"},"enableAddingChild"),pe=l((N,i,u,r)=>{if(oe.value=u,T.value=u.id,P.value=!0,O.value=!1,_.value=!1,G.value=N,U.value=i,D.value="edit",z.value=r,X("title",u.title),X("schedule_id",$),X("duration",u.duration),X("description",u.description),u.assignees){const Q=u.assignees.map(L=>L.id);B.value=Q,X("assignees",Q)}else X("assignees",[])},"enableEditing"),V=c(async(N,{resetForm:i})=>{try{if(D.value==="create"){const u={title:N.title,schedule_id:N.schedule_id,duration:null,description:null,agenda_id:null,assignees:[],children:[]};if(_.value){const r=E.value?E.value.toString():null;u.agenda_id=r,await Gt(u,$)}else O.value&&await Qt(u,$)}else{const u={title:N.title,schedule_id:N.schedule_id,duration:N.duration,description:N.description,agenda_id:null,assignees:[],children:[]};if(U.value!==-1){u.assignees=N.assignees;const r=T.value?T.value.toString():null;u.agenda_id=r,await Wt(u,$)}else if(G.value!==-1){u.assignees=N.assignees;const r=T.value?T.value.toString():null;u.agenda_id=r,await Zt(u,$)}}await ke(),i(),x()}catch(u){u instanceof Ae?ie(u.messages):k(u)}}),x=l(()=>{D.value="create",F.value="default",f.value="",z.value="",P.value=!1,O.value=!1,_.value=!1,G.value=-1,U.value=-1,oe.value=null,T.value=null,B.value=[],X("title",""),X("duration",null),X("description",null),X("agenda_id",null),X("assignees",[]),X("children",[])},"cancelEditing"),A=[{name:"- none -",value:"0"},{name:"5 minutes",value:"5"},{name:"10 minutes",value:"10"},{name:"15 minutes",value:"15"},{name:"20 minutes",value:"20"},{name:"25 minutes",value:"25"},{name:"30 minutes",value:"30"},{name:"35 minutes",value:"35"},{name:"40 minutes",value:"40"},{name:"45 minutes",value:"45"},{name:"50 minutes",value:"50"},{name:"55 minutes",value:"55"},{name:"60 minutes",value:"60"}],R=de(()=>A),n=l(()=>{X("assignees",B.value)},"selectedUsers"),v=l(()=>{X("assignees",B.value)},"removeselectedUsers"),p=de(()=>{var i;const N=[];return ae.value&&((i=ae.value)==null?void 0:i.length)>0&&ae.value.reduce((u,r)=>(u.push({id:r.id,name:`${r.user.full_name}`}),u),N),N}),d=l(async()=>{var i;const N=(i=oe.value)==null?void 0:i.id;z.value==="agenda"?await Jt(N):await Xt(N),await ke(),x()},"deleteAgenda"),Z=l(async N=>{N==="scratch"?f.value=N:N==="previous"&&(F.value="custom",f.value=N,await ke())},"startAgenda"),$e=l(async()=>{f.value==="previous"&&(F.value="default",await ke()),f.value=""},"resetAgendaStartChoice"),De=l(async()=>{var i;const N=I.value;$e(),await es(N,$),(i=ne.value)==null||i.close(),I.value="",F.value="default",f.value="",await ke()},"SaveImportedAgendas"),Ee=l(()=>Me({queryKey:["getMeetingScheduleAgendasKey",$],queryFn:async()=>{var i;let N;return F.value==="custom"?(N=await ts({paginate:"false"}),N.data&&N.data.length>0?(I.value=N.data[0].schedule_id,(i=ne.value)==null||i.showModal()):(At({title:"Notice",text:"No agendas found in the database. Please create an agenda from scratch.",type:"warning"}),F.value="default")):F.value==="default"&&(N=await wt($,{paginate:"false"})),(N==null?void 0:N.data)||[]}}),"getMeetingScheduleAgendas"),{isLoading:Ge,data:Re,refetch:ke}=Ee(),Ve=de(()=>ee.value),Oe=l(async()=>{const N=await ct(y,C,{paginate:"false"});ae.value=N.data},"getmemberships"),He=l(()=>{M("change-tab","members")},"handleManageMembersClick");return we(()=>{Oe(),window.addEventListener("refetchMemberships",Oe)}),(N,i)=>{var u;return t(),s(W,null,[f.value==="scratch"||f.value==="previous"?(t(),s("div",Ss,[As,e("div",Is,[e("button",{type:"submit",onClick:j($e,["prevent"]),class:"btn btn-tool"},Ts)])])):g("",!0),f.value==="scratch"||f.value==="previous"||a(Re)&&a(Re).length?(t(),s("div",Ps,[e("div",Fs,[e("div",Ds,[e("div",Es,[e("div",Rs,[e("div",Us,[js,e("ol",Ls,[(t(!0),s(W,null,J(a(Re),(r,Q)=>(t(),s("li",{class:"mb-2 hover:border-gray-400",key:Q},[e("div",Vs,[Os,a(q).hasPermission(["edit agenda"])?(t(),s("div",{key:0,class:"flex gap-2 items-start",onClick:L=>pe(Q,-1,r,"agenda")},[e("div",Bs,[Y(o(a(tt)(Q))+"."+o(r.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:r.description},null,8,Hs)]),e("div",Ks,[e("div",Ys,o(a(st)(r.duration)),1)]),e("div",null,[r.assignees?(t(),s("ul",zs,[(t(!0),s(W,null,J(r.assignees,(L,ce)=>{var ve;return t(),s("li",{class:"text-sm text-primary",key:ce},o(ce+1)+". "+o((ve=L.user)==null?void 0:ve.full_name),1)}),128))])):g("",!0)])],8,Ns)):(t(),s("div",Gs,[e("div",Qs,[Y(o(a(tt)(Q))+"."+o(r.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:r.description},null,8,Ws)]),e("div",Zs,[e("div",Js,o(a(st)(r.duration)),1)]),e("div",null,[r.assignees?(t(),s("ul",Xs,[(t(!0),s(W,null,J(r.assignees,(L,ce)=>{var ve;return t(),s("li",{class:"text-sm text-primary",key:ce},o(ce+1)+". "+o((ve=L.user)==null?void 0:ve.full_name),1)}),128))])):g("",!0)])])),e("div",ea,[_.value&&E.value===r.id?(t(),s("form",{key:0,novalidate:"",onSubmit:i[0]||(i[0]=j((...L)=>a(V)&&a(V)(...L),["prevent"]))},[e("div",ta,[se(Se,{labeled:!1,label:"Agenda",name:"title",class:"form-control form-control-sm p-0",placeholder:"Enter Meeting Agenda",type:"text"}),sa]),e("a",{onClick:j(x,["prevent"]),class:"text-xs cursor-pointer"}," Cancel ")],32)):g("",!0)]),G.value!==Q&&!_.value&&a(q).hasPermission(["create agenda"])?(t(),s("button",{key:2,onClick:L=>le(Q,r.id),class:"ml-4 mt-2"}," + Add sub Agenda ",8,aa)):g("",!0)]),e("ol",na,[(t(!0),s(W,null,J(r.children,(L,ce)=>(t(),s("li",{class:"mb-2 hover:border-gray-400",draggable:"false",key:ce},[e("div",oa,[ia,a(q).hasPermission(["edit agenda"])?(t(),s("div",{key:0,class:"flex gap-2 items-start",onClick:ve=>pe(Q,ce,L,"subagenda")},[e("div",da,[Y(o(a(tt)(Q,ce))+". "+o(L.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:L.description},null,8,ra)]),e("div",ca,[e("div",ua,o(a(st)(L.duration)),1)]),e("div",null,[L.assignees?(t(),s("ul",_a,[(t(!0),s(W,null,J(L.assignees,(ve,fe)=>(t(),s("li",{class:"text-sm text-primary",key:fe},o(fe+1)+". "+o(ve.user.full_name),1))),128))])):g("",!0)])],8,la)):(t(),s("div",ma,[e("div",pa,[Y(o(a(tt)(Q,ce))+". "+o(L.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:L.description},null,8,ha)]),e("div",va,[e("div",ba,o(a(st)(L.duration)),1)]),e("div",null,[L.assignees?(t(),s("ul",ga,[(t(!0),s(W,null,J(L.assignees,(ve,fe)=>(t(),s("li",{class:"text-sm text-primary",key:fe},o(fe+1)+". "+o(ve.user.full_name),1))),128))])):g("",!0)])]))])]))),128))])]))),128))]),e("div",fa,[e("div",null,[O.value?(t(),s("div",ya,[e("form",{novalidate:"",onSubmit:i[1]||(i[1]=j((...r)=>a(V)&&a(V)(...r),["prevent"])),class:"mt-4"},[e("div",xa,[se(Se,{labeled:!1,label:"Agenda",name:"title",class:"form-control form-control-sm p-0",placeholder:"Enter Meeting Agenda",type:"text"}),$a])],32),e("a",{onClick:j(x,["prevent"]),class:"text-xs cursor-pointer"}," Cancel ")])):g("",!0),a(q).hasPermission(["create agenda"])?(t(),s("button",{key:1,onClick:te,class:"btn btn-secondary block w-full mb-4"}," Add Agenda ")):g("",!0)])]),e("div",wa,[e("div",ka,[Ma,Y(" "+o((u=Ve.value)!=null&&u.end_time?a(xt)(Ve.value.end_time):""),1)])])]),Ca])])])]),e("div",{class:re({hidden:!P.value,"md:block":!0,"w-[350px]":!0})},[e("div",Sa,[e("div",Aa,[e("div",Ia,[e("form",{novalidate:"",onSubmit:i[6]||(i[6]=j((...r)=>a(V)&&a(V)(...r),["prevent"]))},[e("div",qa,[se(Se,{label:"Agenda",name:"title",class:"w-full text-sm tracking-wide",placeholder:"Enter Meeting Agenda",t:"",ype:"text"}),se(ut,{label:"Agenda Description",name:"description",theme:"snow",placeholder:"Enter Agenda  Description",toolbar:"minimal",contentType:"html"}),se(at,{name:"duration",label:"Duration",placeholder:"Select Duration",options:R.value},null,8,["options"]),e("div",Ta,[Pa,e("div",{class:re(["multiselect-container",{error:!!a(H)}])},[se(a(ot),{id:"assignees",modelValue:B.value,"onUpdate:modelValue":i[2]||(i[2]=r=>B.value=r),mode:"tags",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:p.value,valueProp:"id",trackBy:"id",label:"name",class:re(["multiselect-container",{error:!!a(H)}]),onSelect:i[3]||(i[3]=r=>n()),onDeselect:i[4]||(i[4]=r=>v())},null,8,["modelValue","options","class"]),a(H)?(t(),s("div",Fa,o(a(H)),1)):g("",!0)],2),e("button",{onClick:j(He,["prevent"]),class:"btn btn-info mt-2"}," Manage Members ")]),e("div",Da,[e("button",{onClick:i[5]||(i[5]=j(r=>d(),["prevent"])),class:"btn btn-link btn-sm text-danger h-7"}," Delete "),e("div",null,[e("button",{onClick:j(x,["prevent"]),class:"btn btn-secondary btn-sm ml-1 mr-1"}," Cancel "),Ea])])])],32)])])])],2),e("div",{class:re({hidden:P.value,"md:block":!0,"w-[350px]":!0})},Ua,2)])):f.value===""?(t(),s("div",ja,[La,e("div",Va,[e("div",Oa,[e("a",{onClick:i[7]||(i[7]=j(r=>Z("scratch"),["prevent"])),class:"btn btn-primary h-auto !p-0 p-0 mb-0 card flex-1"},Ba),e("a",{onClick:i[8]||(i[8]=j(r=>Z("previous"),["prevent"])),class:"btn btn-primary h-auto !p-0 p-0 mb-0 card flex-1"},Ka)])])])):g("",!0),e("div",Ya,[e("dialog",{id:"saveagendasModal",class:"modal modal-primary",ref_key:"saveagendasModal",ref:ne},[e("form",za,[Ga,Qa,e("div",Wa,[e("div",Za,[e("form",Ja,[Xa,e("div",en,[e("button",{type:"submit",onClick:j(De,["prevent"]),class:"btn btn-lg btn-success"}," Save Imported Agendas ")])])])])])],512)])],64)}}});const sn=Ie(tn,[["__scopeId","data-v-23f0e53e"]]),Pe=l(w=>(Ne("data-v-6d32ca70"),w=w(),Be(),w),"_withScopeId$5"),an={key:0},nn={key:0,class:"card card-widget shadow-lg"},on={class:"card-header"},ln={class:"d-flex align-items-center"},dn={class:"ml-3 flex-1"},rn=Pe(()=>e("i",{class:"fas fa-chevron-left"},null,-1)),cn={key:0,class:"ml-auto flex self-end"},un={key:0,type:"button",class:"btn btn-sm mr-1 btn-success btn-lg"},_n=Pe(()=>e("i",{class:"fas fa-door-closed mr-1"},null,-1)),mn={key:1,type:"button",class:"btn btn-sm mr-1 btn-success btn-lg"},pn=Pe(()=>e("i",{class:"fa fa-check mr-1"},null,-1)),hn=Pe(()=>e("i",{class:"fa fa-check mr-1"},null,-1)),vn={class:"card-body"},bn=Pe(()=>e("span",{class:"info-box-icon",style:{left:"4%","margin-left":"-45px",position:"absolute",top:"88px"}},[e("div",{class:"h3 text-bold font-bold uppercase text-primary"}," Confidential")],-1)),gn={class:"text-center logo-container"},fn=["src"],yn={class:"h3 text-center text-primary text-bold font-bold uppercase"},xn=Pe(()=>e("hr",{class:"thick-line"},null,-1)),$n={class:"text-center text-primary text-bold uppercase h4"},wn={class:"text-center text-primary text-bold uppercase h4"},kn={key:0,class:"mt-2 text-primary text-bold uppercase"},Mn={key:1,class:"table table-borderless"},Cn={class:"p-0"},Sn={class:"p-0 text-primary text-bold uppercase"},An={key:2,class:"mt-2 text-primary text-bold uppercase"},In={key:3,class:"table table-borderless"},qn={class:"p-0"},Tn={class:"p-0 text-primary text-bold uppercase"},Pn={key:4,class:"mt-2 text-primary text-bold uppercase"},Fn={key:5,class:"table table-borderless"},Dn={class:"p-0"},En={class:"p-0 text-primary text-bold uppercase"},Rn={key:6,class:"mt-2 text-primary text-bold uppercase"},Un={key:7,class:"table table-borderless"},jn={class:"p-0"},Ln={class:"p-0 text-primary text-bold uppercase"},Vn=Pe(()=>e("h5",{class:"mt-2 text-primary text-bold uppercase"},"Agenda",-1)),On={class:"list-unstyled"},Nn={class:"list-unstyled ml-4"},Bn={id:"MinutesEditor",class:"container"},Hn={class:"codex-editor"},Kn={class:"codex-editor__redactor",style:{"padding-bottom":"300px"}},Yn={class:"ce-block"},zn={class:"flex w-full"},Gn={class:"flex-1"},Qn={key:0,"data-list_format":"num_la_lr",class:"agenda-list mb-0"},Wn={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},Zn={class:"flex gap-2 items-start"},Jn={class:"font-medium flex-1"},Xn=["onClick"],eo=["innerHTML"],to={class:"min-h-6"},so={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},ao={class:"flex gap-2 items-start"},no={class:"font-medium flex-1"},oo={class:"font-bold text-primary"},io=["innerHTML"],lo={key:1,class:"card card-widget shadow-lg"},ro=Pe(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, The Minutes have not been Aprroved")],-1)),co=[ro],uo={key:1},_o=Pe(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),mo=[_o],po=ge({__name:"ApprovedMinutes",setup(w){const m=Ze();function q(){m.back()}l(q,"goBack");const M=Ce(),F=ye(),k=It(),S=M.params.boardId;M.params.meetingId;const D=M.params.scheduleId;M.params.minutesId;const f=h(null),z=h("create"),C=h(!1),y=h([]),$=h(null),I=h(null),T=h(-1),B=h(-1),ae=h(!1),ee=h(!1),oe=h([{text:""}]),ne=qe(),ue=be({schedule_id:We().required(),board_id:b().nullable(),committee_id:gt().nullable(),membership_id:b().nullable(),minute_id:b().nullable(),agenda_id:b().required(),detail_minute_id:b().nullable(),subdetailminute_id:b().nullable(),subagenda_id:b().nullable(),description:b().required(),status:b().required()}),{handleSubmit:P,setErrors:O,setFieldValue:_,values:E}=Te({validationSchema:ue,initialValues:{schedule_id:D,board_id:S,committee_id:null,membership_id:null,minute_id:f.value,agenda_id:"",detail_minute_id:null,subdetailminute_id:null,subagenda_id:null,description:"",status:"unpublished"}});P(async(n,{resetForm:v})=>{try{const p={schedule_id:n.schedule_id,committee_id:null,membership_id:null,minute_id:f.value?f.value.toString():null,agenda_id:n.agenda_id.toString(),detail_minute_id:n.detail_minute_id?n.detail_minute_id.toString():null,subdetailminute_id:n.subdetailminute_id?n.subdetailminute_id.toString():null,subagenda_id:n.subagenda_id?n.subagenda_id.toString():null,description:n.description,status:n.status};z.value==="create"?C.value?await ss(p,D):ee.value&&await as(p,D):T.value!==-1?(await ns(p,D),console.log("payload",p)):B.value!==-1&&await os(p,D),await ie(),G()}catch(p){p instanceof Ae?O(p.messages):ne(p)}});const G=l(()=>{z.value="create",C.value=!1,$.value=null,I.value=null,T.value=-1,B.value=-1,ae.value=!1,ee.value=!1,_("schedule_id",D),_("board_id",S),_("committee_id",null),_("membership_id",null),_("minute_id",f.value),_("agenda_id",""),_("detail_minute_id",null),_("subdetailminute_id",null),_("subagenda_id",null),_("description",""),_("status","unpublished")},"reset");de(()=>{const n=C.value&&$.value===agenda.id&&B.value===pIndex&&T.value===cIndex&&z.value==="create";return console.log("isAddingChild computed:",n),n}),de(()=>{const n=ae.value&&!ee.value&&!C.value&&z.value==="edit";return console.log("isEditing computed:",n),n});const U=l((n,v,p,d,Z)=>{G(),ae.value=!0,ee.value=!1,C.value=!1,B.value=n,T.value=v,z.value="edit",console.log("pIndex: number, cIndex:",n,v),console.log("States after enabling adding child:",{is_editing:ae.value,isAddingNewParent:ee.value,addingChild:C.value,editingParentIndex:B.value,editingChildIndex:T.value,action:z.value}),_("agenda_id",p.id),T.value!==-1?(_("subdetailminute_id",Z.id),_("detail_minute_id",Z.detail_minute_id),_("subagenda_id",Z.subagenda_id),_("description",Z.description)):B.value!==-1&&(_("detail_minute_id",d.id),_("description",d.description))},"enableEditing"),H=l(()=>Me({queryKey:["getMinutesKey",D],queryFn:async()=>{const n=await is(D,{paginate:"false"});return f.value=n.data.id,n.data},onSuccess:n=>{},onError:n=>{console.error("Failed to fetch minutes:",n)}}),"getMinutes"),{isLoading:K,data:c,refetch:ie}=H(),X=de(()=>{var n,v,p,d;return(n=c==null?void 0:c.value)!=null&&n.attendances&&((p=(v=c==null?void 0:c.value)==null?void 0:v.attendances)==null?void 0:p.length)>0?((d=c==null?void 0:c.value)==null?void 0:d.attendances.filter(Z=>Z.rsvp_status==="Yes"&&Z.attendance_status==="Attended"))||[]:[]}),_e=de(()=>{var n,v,p,d;return(n=c==null?void 0:c.value)!=null&&n.attendances&&((p=(v=c==null?void 0:c.value)==null?void 0:v.attendances)==null?void 0:p.length)>0?((d=c==null?void 0:c.value)==null?void 0:d.attendances.filter(Z=>Z.rsvp_status==="Online"&&Z.attendance_status==="Attended"))||[]:[]}),te=de(()=>{var n,v,p,d;return(n=c==null?void 0:c.value)!=null&&n.attendances&&((p=(v=c==null?void 0:c.value)==null?void 0:v.attendances)==null?void 0:p.length)>0?((d=c==null?void 0:c.value)==null?void 0:d.attendances.filter(Z=>["Yes","No","Maybe"].includes(Z.rsvp_status)&&Z.attendance_status==="Absent"))||[]:[]}),le=de(()=>{var n,v,p,d;return(n=c==null?void 0:c.value)!=null&&n.attendances&&((p=(v=c==null?void 0:c.value)==null?void 0:v.attendances)==null?void 0:p.length)>0?((d=c==null?void 0:c.value)==null?void 0:d.attendances.filter(Z=>Z.rsvp_status==="Pending"&&Z.attendance_status==="Absent"))||[]:[]}),pe=l(async()=>{const n=await wt(D,{paginate:"false"});y.value=n.data},"getmeetingagendas"),V=de(()=>y.value);we(async()=>{await ie(),pe()}),lt(()=>oe==null?void 0:oe.value,n=>{n&&(f.value=n)},{deep:!0});const x=de(()=>{var v;const n={};return c!=null&&c.value&&(c!=null&&c.value.detailminutes)&&((v=c==null?void 0:c.value.detailminutes)==null||v.forEach(p=>{var d;n[p.agenda_id]||(n[p.agenda_id]=[]),n[p.agenda_id].push(p),(d=p.subdetailminutes)==null||d.forEach(Z=>{n[Z.subagenda_id]||(n[Z.subagenda_id]=[]),n[Z.subagenda_id].push(Z)})})),n}),A=de(()=>k.getSettings()),R=l(async n=>{await ls(n),await ie()},"onAcceptCEOApproval");return(n,v)=>{var p,d,Z,$e,De,Ee,Ge,Re,ke,Ve,Oe,He,N,i;return a(F).hasPermission(["view minutes"])?(t(),s("div",an,[a(c)&&((p=a(c))==null?void 0:p.approvalstatus)==="approved"?(t(),s("div",nn,[e("div",on,[e("div",ln,[e("div",dn,[e("a",{href:"",onClick:j(q,["prevent"]),class:"text-blue-primary"},[rn,Y(" Go back To Meeting ")])]),a(c)?(t(),s("div",cn,[((Z=(d=a(c))==null?void 0:d.schedule)==null?void 0:Z.closestatus)==="closed"?(t(),s("button",un,[_n,Y(" Meeting Closed ")])):g("",!0),(($e=a(c))==null?void 0:$e.approvalstatus)==="approved"?(t(),s("button",mn,[pn,Y(" This Minutes Have been Approved ")])):(t(),s("button",{key:2,type:"button",class:"btn btn-sm mr-1 btn-warning btn-lg",onClick:v[0]||(v[0]=j(u=>{var r;return R((r=a(c))==null?void 0:r.id)},["prevent"]))},[hn,Y(" Sorry, The Minutes have not been Aprroved ")]))])):g("",!0)])]),e("div",vn,[bn,e("div",gn,[e("img",{src:a(Ut)((De=A.value)==null?void 0:De.logo),alt:"Organization Logo",class:"img-fluid logo"},null,8,fn)]),e("div",yn,o((Ee=A.value)==null?void 0:Ee.name),1),xn,e("h4",$n,"MINUTES OF THE "+o((Re=(Ge=a(c))==null?void 0:Ge.meeting)==null?void 0:Re.title),1),e("p",wn," HELD AT "+o((Ve=(ke=a(c))==null?void 0:ke.meeting)==null?void 0:Ve.location)+" ON "+o(a(rt)((He=(Oe=a(c))==null?void 0:Oe.schedule)==null?void 0:He.date))+" STARTING AT "+o((i=(N=a(c))==null?void 0:N.schedule)==null?void 0:i.start_time),1),X.value.length?(t(),s("h5",kn,"Present")):g("",!0),X.value.length?(t(),s("table",Mn,[e("tbody",null,[(t(!0),s(W,null,J(X.value,(u,r)=>(t(),s("tr",{key:u.id},[e("td",Cn,o(r+1)+". "+o(u.membership.user.full_name),1),e("td",Sn," - "+o(u.membership.position.name),1)]))),128))])])):g("",!0),_e.value.length?(t(),s("h5",An,"Present on E-platform ")):g("",!0),_e.value.length?(t(),s("table",In,[e("tbody",null,[(t(!0),s(W,null,J(_e.value,(u,r)=>(t(),s("tr",{key:u.id},[e("td",qn,o(r+1)+". "+o(u.membership.user.full_name),1),e("td",Tn," - "+o(u.membership.position.name),1)]))),128))])])):g("",!0),te.value.length?(t(),s("h5",Pn,"Absent With Apology ")):g("",!0),te.value.length?(t(),s("table",Fn,[e("tbody",null,[(t(!0),s(W,null,J(te.value,(u,r)=>(t(),s("tr",{key:u.id},[e("td",Dn,o(r+1)+". "+o(u.membership.user.full_name),1),e("td",En," - "+o(u.membership.position.name),1)]))),128))])])):g("",!0),le.value.length?(t(),s("h5",Rn," Absent ")):g("",!0),le.value.length?(t(),s("table",Un,[e("tbody",null,[(t(!0),s(W,null,J(le.value,(u,r)=>(t(),s("tr",{key:u.id},[e("td",jn,o(r+1)+". "+o(u.membership.user.full_name),1),e("td",Ln," - "+o(u.membership.position.name),1)]))),128))])])):g("",!0),Vn,e("ul",On,[(t(!0),s(W,null,J(V.value,(u,r)=>(t(),s(W,{key:u.id},[e("li",null,o(r+1)+". "+o(u.title),1),e("ul",Nn,[(t(!0),s(W,null,J(u.children,(Q,L)=>(t(),s("li",{key:Q.id},o(r+1)+"."+o(L+1)+" "+o(Q.title),1))),128))])],64))),128))]),e("div",Bn,[e("div",Hn,[e("div",Kn,[e("div",Yn,[e("div",zn,[e("div",Gn,[V.value?(t(),s("ol",Qn,[(t(!0),s(W,null,J(V.value,(u,r)=>(t(),s("li",{class:"mb-2 hover:border-gray-400",key:r},[e("div",Wn,[e("div",Zn,[e("div",Jn,[(t(!0),s(W,null,J(x.value[u.id],(Q,L)=>(t(),s("div",{key:L,onClick:ce=>U(r,-1,u,Q,void 0)},[e("div",{innerHTML:Q.description},null,8,eo)],8,Xn))),128))])])]),e("ol",to,[(t(!0),s(W,null,J(u.children,(Q,L)=>(t(),s("li",{class:"mb-2 hover:border-gray-400",draggable:"false",key:L},[e("div",so,[e("div",ao,[e("div",no,[e("div",oo,o(a(jt)(a(pt)(r),Q.title,void 0,void 0,void 0,a(pt)(L))),1),(t(!0),s(W,null,J(x.value[u.id],(ce,ve)=>(t(),s("div",{key:ve},[(t(!0),s(W,null,J(x.value[Q.id],fe=>(t(),s("div",{key:fe.id},[e("div",{innerHTML:fe.description},null,8,io)]))),128))]))),128))])])])]))),128))])]))),128))])):g("",!0)])])])])])])])])):(t(),s("div",lo,co))])):(t(),s("div",uo,mo))}}});const ho=Ie(po,[["__scopeId","data-v-6d32ca70"]]),Xe=l(w=>(Ne("data-v-e4d80329"),w=w(),Be(),w),"_withScopeId$4"),vo={class:"rsvp-container"},bo={key:0},go={class:"dropdown"},fo=["aria-expanded"],yo={key:0,class:"dropdown-menu show","aria-labelledby":"rsvp-status"},xo=Xe(()=>e("i",{class:"far fa-check-circle bg-success"},null,-1)),$o=Xe(()=>e("i",{class:"far fa-check-circle bg-warning"},null,-1)),wo=Xe(()=>e("i",{class:"far fa-check-circle bg-danger"},null,-1)),ko=Xe(()=>e("i",{class:"far fa-check-circle bg-info"},null,-1)),Mo=Xe(()=>e("i",{class:"far fa-check-circle bg-info"},null,-1)),Co={key:1},So=ge({__name:"MeetingRsvp",props:{attendee:{},disableRemoteRsvp:{}},emits:["rsvp-updated"],setup(w,{emit:m}){const q=ye(),M=w,F=m,k=h(!1),S=l(()=>{k.value=!k.value},"toggleDropdown"),D=l(y=>{var $;F("rsvp-updated",{attendeeId:($=M.attendee)==null?void 0:$.id,status:y}),k.value=!1},"updateRsvp"),f=de(()=>{var y;return((y=M.attendee)==null?void 0:y.rsvp_status)||"RSVP"}),z=de(()=>{var y;switch((y=M.attendee)==null?void 0:y.rsvp_status){case"Yes":return"bg-success text-white";case"No":return"bg-warning text-white";case"Maybe":return"bg-danger text-white";case"Online":return"bg-info text-white";case"Pending":return"bg-info text-white";default:return"bg-secondary text-white"}}),C=de(()=>{var y;switch((y=M.attendee)==null?void 0:y.rsvp_status){case"Yes":return"far fa-check-circle";case"No":return"far fa-check-circle";case"Maybe":return"far fa-check-circle";case"Online":return"far fa-check-circle";case"Pending":return"far fa-check-circle";default:return"far fa-check-circle"}});return(y,$)=>{var I;return t(),s("div",vo,[((I=y.attendee.membership)==null?void 0:I.user.id)===a(q).user.id?(t(),s("div",bo,[e("div",go,[e("button",{class:re(["btn btn-icon dropdown-toggle",z.value]),type:"button",onClick:S,"aria-haspopup":"true","aria-expanded":k.value},[e("i",{class:re([C.value,"mr-2"])},null,2),Y(" "+o(f.value),1)],10,fo),k.value?(t(),s("ul",yo,[e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:$[0]||($[0]=j(T=>D("Yes"),["prevent"]))},[xo,Y(" Yes ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:$[1]||($[1]=j(T=>D("No"),["prevent"]))},[$o,Y("No ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:$[2]||($[2]=j(T=>D("Maybe"),["prevent"]))},[wo,Y(" Maybe ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:$[3]||($[3]=j(T=>D("Online"),["prevent"]))},[ko,Y(" Online ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:$[4]||($[4]=j(T=>D("Pending"),["prevent"]))},[Mo,Y(" Pending ")])])])):g("",!0)])])):(t(),s("div",Co,[e("button",null,[e("i",{class:re([C.value,"mr-2"])},null,2),Y(" "+o(f.value),1)])]))])}}});const Ao=Ie(So,[["__scopeId","data-v-e4d80329"]]),Io={key:0,class:"container-fluid"},qo=e("div",{class:"card-header flex items-center"},[e("h2",{class:"card-header-title h3"},"Attendance")],-1),To={class:"container-fluid"},Po={class:"row"},Fo={class:"card card-outline card-primary h-100"},Do={class:"card-body box-profile"},Eo={class:"text-center"},Ro={class:"avatar avatar-md mb-3"},Uo=["src"],jo={class:"profile-username text-center text-primary"},Lo={class:"mt-3"},Vo={class:"d-flex justify-content-between mb-2"},Oo=e("strong",null,"Invited:",-1),No={class:"cell-label"},Bo={class:"d-flex justify-content-between mb-2"},Ho=e("strong",null,"RSVP:",-1),Ko={class:"d-flex justify-content-between mb-2"},Yo=e("strong",null,"Attendance:",-1),zo={key:0},Go={key:0},Qo=["onClick"],Wo=e("i",{class:"far fa-eye"},null,-1),Zo={key:1},Jo=["onClick"],Xo={key:0},ei=["onClick"],ti={key:1,class:"container-fluid"},si=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),ai=[si],ni=ge({__name:"Attendance",setup(w){const m=ye(),q=qe(),M=Ce(),F=Ze(),k=h("create");M.params.meetingId;const S=M.params.scheduleId,D=be({id:b().required(),rsvp_status:b().nullable(),attendance_status:b().nullable(),signatureupload:b().nullable()}),{handleSubmit:f,setErrors:z,setFieldValue:C,values:y}=Te({validationSchema:D,initialValues:{id:"",rsvp_status:"",attendance_status:"",signatureupload:""}}),$=l(()=>{k.value="create",C("id",""),C("rsvp_status",""),C("attendance_status",""),C("signatureupload","")},"reset"),I=l(O=>{$(),k.value="rsvp",C("id",O.attendeeId),C("rsvp_status",O.status),T()},"handleRsvpUpdated"),T=f(async(O,{resetForm:_})=>{try{const E={id:O.id,rsvp_status:O.rsvp_status,location:O.location,attendance_status:O.attendance_status,meeting_id:O.meeting_id,membership_id:O.membership_id,membership:O.membership,meeting:O.meeting,invite_status:null,signatureupload:null};k.value==="create"?await kt(E,S):k.value==="rsvp"?await Mt(E,E.id):k.value==="attendance"&&await Ct(E,E.id),await oe(),$()}catch(E){E instanceof Ae?z(E.messages):q(E)}}),B=l(()=>Me({queryKey:["getMeetingAttendancesKey",S],queryFn:async()=>(await Ms(S,{paginate:"false"})).data}),"getMeetingAttendances"),{isLoading:ae,data:ee,refetch:oe}=B();we(async()=>{oe()}),we(()=>{window.addEventListener("meetingUpdated",ne)}),qt(()=>{window.removeEventListener("meetingUpdated",ne)});function ne(O){O.detail.scheduleId===S&&oe()}l(ne,"handleMeetingUpdated");const ue=l(O=>{var _;F.push({name:"SignatureAttendance",params:{boardId:M.params.boardId,meetingId:M.params.meetingId,scheduleId:M.params.scheduleId,attendeeId:O.id,mediaId:(_=O.media[0])==null?void 0:_.uuid}})},"navigateToSignaturePage"),P=l(async O=>{await Cs(O),await oe()},"sendReminder");return(O,_)=>a(m).hasPermission(["view attendances"])?(t(),s("div",Io,[qo,e("div",To,[e("div",Po,[(t(!0),s(W,null,J(a(ee),(E,G)=>{var U,H,K,c;return t(),s("div",{class:"col-lg-3 col-md-4 col-sm-6 mb-3",key:G},[e("div",Fo,[e("div",Do,[e("div",Eo,[e("div",Ro,[e("img",{src:a(Lt)(E.membership.user.profile.avatar),class:"profile-user-img img-fluid img-circle",role:"img","data-uw-rm-alt":"ALT"},null,8,Uo)]),e("h3",jo,o((H=(U=E.membership)==null?void 0:U.user)==null?void 0:H.full_name),1)]),e("div",Lo,[e("div",Vo,[Oo,e("span",No,o(E.invite_status),1)]),e("div",Bo,[Ho,e("div",null,[se(Ao,{attendee:E,disableRemoteRsvp:0,onRsvpUpdated:I},null,8,["attendee"])])]),e("div",Ko,[Yo,e("div",null,[((K=E.membership)==null?void 0:K.user.id)===a(m).user.id?(t(),s("div",zo,[E.attendance_status==="Attended"?(t(),s("div",Go,[e("a",{href:"",onClick:j(ie=>ue(E),["prevent"]),class:"text-blue-500 hover:text-blue-700 transition duration-150 ease-in-out"},[Wo,Y(" "+o(E.attendance_status),1)],8,Qo)])):(t(),s("div",Zo,[e("button",{type:"submit",class:"btn btn-link btn-primary btn-sm text-white",onClick:j(ie=>ue(E),["prevent"])}," Sign ",8,Jo)]))])):g("",!0)]),a(m).hasRole(["Super Admin","Admin","Company Secretary"])&&((c=E.membership)==null?void 0:c.user.id)!==a(m).user.id?(t(),s("div",Xo,[e("button",{type:"submit",class:"btn btn-link btn-primary btn-sm text-white",onClick:j(ie=>P(E.id),["prevent"])}," Send Reminder ",8,ei)])):g("",!0)])])])])])}),128))])])])):(t(),s("div",ti,ai))}}),mt=Tt("api/v1/conflicts");async function oi(w,m){const q=je(),M=ft.stringify(m,{arrayFormat:"brackets"});return await q.get(mt()+"/meeting/"+w+"?"+M).json()}l(oi,"useGetMeetingConflictsRequest");async function ii(w,m){return(await je().post(mt()+"/meeting/create/"+m,{json:w})).json()}l(ii,"useCreateMeetingConflictRequest");async function li(w,m){return(await je().patch(mt()+"/meeting/update/"+m+"/"+w.conflict_id,{json:w})).json()}l(li,"useUpdateMeetingConflictRequest");const Fe=l(w=>(Ne("data-v-23412619"),w=w(),Be(),w),"_withScopeId$3"),di={key:0},ri={class:"card"},ci={class:"card-header"},ui={class:"card-header flex items-center"},_i=Fe(()=>e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"}," Conflicts of Interest ")],-1)),mi={key:0,class:"flex items-center space-x-2"},pi=Fe(()=>e("i",{class:"far fa fa-plus mr-2"},null,-1)),hi={class:"container-fluid"},vi={key:0,class:"row"},bi={class:"card card-outline card-primary h-100"},gi={class:"card-body box-profile"},fi={class:"text-center mb-3"},yi={class:"profile-username text-primary"},xi={class:"text-muted"},$i={class:"info-section"},wi=Fe(()=>e("span",{class:"text-bold text-danger"},"Nature Of Interest: ",-1)),ki={class:"text-primary"},Mi={class:"info-section"},Ci=Fe(()=>e("span",{class:"text-bold text-danger"},"Amount: ",-1)),Si={class:"info-section"},Ai=Fe(()=>e("span",{class:"text-bold text-danger"},"Due Date: ",-1)),Ii={class:"info-section"},qi=Fe(()=>e("span",{class:"text-bold text-danger"},"Remarks: ",-1)),Ti={class:"text-primary"},Pi={class:"info-section"},Fi=Fe(()=>e("span",{class:"text-bold text-danger"},"Signed: ",-1)),Di={key:0,class:"text-center mt-3"},Ei=["onClick"],Ri={class:"flex justify-center col-md-6"},Ui={method:"dialog",class:"modal-box rounded-xl"},ji={class:"font-bold text-lg justify-center flex"},Li=Fe(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),Vi={class:"w-full mt-6 p-2"},Oi={class:"font-thin text-sm flex flex-col items-center gap-6"},Ni={class:"row"},Bi={type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},Hi={key:1},Ki=Fe(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),Yi=[Ki],zi=ge({__name:"ConflictofInterest",setup(w){var E,G;const m=ye(),q=qe(),M=ye(),k=Ce().params.meetingId,S=h(null),D=h("create"),f=h(null),z=((E=M.user)==null?void 0:E.first)+" "+((G=M.user)==null?void 0:G.last),C=be({name:b().required(),address:b().required(),nature:b().required(),amount:b().required(),ceased_date:b().required(),remarks:b().required(),conflict_id:b().nullable()}),{handleSubmit:y,setErrors:$,setFieldValue:I,values:T}=Te({validationSchema:C,initialValues:{name:z,address:"",nature:"",amount:"",ceased_date:"",remarks:"",conflict_id:null}}),B=l(()=>{var U;ee(),D.value="create",(U=f.value)==null||U.showModal()},"openCreateConflictModal"),ae=l(U=>{var H;ee(),S.value=U.id.toString(),D.value="edit",I("address",U.address),I("nature",U.nature),I("amount",U.amount),I("ceased_date",U.ceased_date),I("remarks",U.remarks),(H=f.value)==null||H.showModal()},"openEditConflictModal"),ee=l(()=>{I("address",""),I("nature",""),I("amount",""),I("ceased_date",""),I("remarks",""),I("conflict_id",null),D.value="create",S.value=null,$t()},"resetConflict"),oe=y(async(U,{resetForm:H})=>{var K;try{const c={address:U.address,nature:U.nature,amount:U.amount,ceased_date:U.ceased_date,remarks:U.remarks,conflict_id:null};if(D.value==="create")await ii(c,k);else{const ie=S.value?S.value.toString():null;c.conflict_id=ie,await li(c,k)}await O(),ee(),(K=f.value)==null||K.close()}catch(c){c instanceof Ae?$(c.messages):q(c)}}),ne=l(()=>Me({queryKey:["getMeetingConflictsKey",k],queryFn:async()=>(await oi(k,{paginate:"false"})).data}),"getMeetingConflicts"),{isLoading:ue,data:P,refetch:O}=ne();we(async()=>{await O()});const _=de(()=>{var U;return(U=P==null?void 0:P.value)==null?void 0:U.some(H=>{var K,c,ie;return((c=(K=H==null?void 0:H.membership)==null?void 0:K.user)==null?void 0:c.id)===((ie=m==null?void 0:m.user)==null?void 0:ie.id)})});return(U,H)=>a(m).hasPermission(["view conflicts of interest"])?(t(),s("div",di,[e("div",ri,[e("div",ci,[e("div",ui,[_i,a(m).hasPermission(["create conflict of interest"])?(t(),s("div",mi,[_.value?g("",!0):(t(),s("button",{key:0,type:"button",onClick:j(B,["prevent"]),class:"btn btn-primary"},[pi,Y(" Add Your Conflict of Interest ")]))])):g("",!0)])]),e("div",hi,[a(P)?(t(),s("div",vi,[(t(!0),s(W,null,J(a(P),(K,c)=>{var ie,X,_e,te,le,pe;return t(),s("div",{class:"col-lg-4 col-md-6 col-sm-12 mb-3",key:c},[e("div",bi,[e("div",gi,[e("div",fi,[e("h3",yi,o((X=(ie=K==null?void 0:K.membership)==null?void 0:ie.user)==null?void 0:X.full_name),1),e("p",xi,o(K.address),1)]),e("div",$i,[wi,e("span",ki,o(K.nature),1)]),e("div",Mi,[Ci,e("span",null,"Kshs. "+o(K.amount),1)]),e("div",Si,[Ai,e("span",null,o(a(rt)(K.ceased_date)),1)]),e("div",Ii,[qi,e("span",Ti,o(K.remarks),1)]),e("div",Pi,[Fi,e("span",null,o(K.status),1)]),a(m).hasPermission(["edit conflict of interest"])?(t(),s("div",Di,[((te=(_e=K==null?void 0:K.membership)==null?void 0:_e.user)==null?void 0:te.id)===((pe=(le=a(m))==null?void 0:le.user)==null?void 0:pe.id)?(t(),s("button",{key:0,class:"btn btn-success btn-sm",onClick:j(V=>ae(K),["prevent"])}," Edit ",8,Ei)):g("",!0)])):g("",!0)])])])}),128))])):g("",!0)])]),e("div",Ri,[e("dialog",{id:"conflictmodal",class:"modal",ref_key:"ConflictModal",ref:f},[e("form",Ui,[e("h3",ji,o(D.value==="create"?"Create Conflict of Interest":"Update Conflict of Interest"),1),Li,e("div",Vi,[e("div",Oi,[e("form",{novalidate:"",onSubmit:H[0]||(H[0]=j((...K)=>a(oe)&&a(oe)(...K),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",Ni,[se(Se,{labeled:!0,label:"Meeting Member",name:"name",class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Meeting Member",type:"text",disabled:!0}),se(Se,{labeled:!0,label:"Address",name:"address",class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Input Your Address",type:"text"}),se(vt,{labeled:!0,label:"Nature of the Interest",name:"nature",class:"col-md-12 w-full text-sm text-white tracking-wide",placeholder:"Enter Nature of the Interest",rows:2}),se(Se,{labeled:!0,label:"Estimated Value Of The Interest (KSHS.)",name:"amount",class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Estimated Value Of The Interest (KSHS.)",type:"number"}),se(_t,{label:"Due Date",name:"ceased_date",flow:["day"],class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Select Due Date"}),se(vt,{labeled:!0,label:"Remarks",name:"remarks",class:"col-md-12 w-full text-sm text-white tracking-wide",placeholder:"Enter Remarks",rows:2})]),e("button",Bi,o(D.value==="create"?"Create Conflict of Interest":"Update Conflict of Interest"),1)],32)])])])],512)])])):(t(),s("div",Hi,Yi))}});const Gi=Ie(zi,[["__scopeId","data-v-23412619"]]),he=l(w=>(Ne("data-v-3f98911c"),w=w(),Be(),w),"_withScopeId$2"),Qi={key:0},Wi={class:"card"},Zi={class:"card-header p-3"},Ji={class:"row"},Xi={class:"col-12"},el={class:"row"},tl={class:"col-lg-9 col-md-8 col-12 mt-2"},sl={"aria-label":"Breadcrumbs",class:"text-sm overflow-hidden"},al={class:"breadcrumb mb-0 bg-warning"},nl=["onClick"],ol={class:"col-lg-3 col-md-4 col-12"},il={class:"row"},ll={class:"col-md-6 col-12 mt-2"},dl={class:"dropdown"},rl={class:"nav-link dropdown-toggle btn btn-secondary btn-block",href:"#",id:"navbarDropdown",type:"button",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},cl=he(()=>e("span",{class:"text-warning mr-1"},"sort by:",-1)),ul={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},_l=["onClick"],ml={class:"col-md-6 col-12 mt-2"},pl={class:"dropdown"},hl={key:0,class:"nav-link dropdown-toggle btn btn-primary btn-block",href:"#",id:"navbarDropdown",type:"button",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},vl=he(()=>e("i",{class:"fas fa-plus mr-2"},null,-1)),bl={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},gl=he(()=>e("i",{class:"fas fa-plus"},null,-1)),fl=he(()=>e("i",{class:"fas fa-file-upload"},null,-1)),yl={key:0,class:"col-12 mt-3"},xl={class:"input-group input-group-lg"},$l=he(()=>e("div",{class:"input-group-append"},[e("button",{type:"submit",class:"btn btn-lg btn-default"},[e("i",{class:"fa fa-search"})])],-1)),wl={class:"card-body py-0 px-4 min-h-[300px] relative -top-px z-10"},kl={class:"table-responsive"},Ml={class:"table mb-0"},Cl={class:"w-28"},Sl=["onClick"],Al=["src"],Il={key:1},ql=["src"],Tl={key:0},Pl={class:"font-weight-bold text-primary text-truncate"},Fl={class:"text-sm font-weight-bold text-primary"},Dl=he(()=>e("span",{class:"text-black"},"Folders",-1)),El={class:"text-sm font-weight-bold text-primary"},Rl=he(()=>e("span",{class:"text-black"},"Files",-1)),Ul={key:1},jl={key:0},Ll={class:"font-weight-bold text-primary text-truncate"},Vl={class:"text-sm font-weight-bold text-primary"},Ol={class:"text-black"},Nl={class:"w-28"},Bl={key:0},Hl={class:"text-xs text-primary text-truncate"},Kl={key:1},Yl={key:0},zl={class:"text-xs text-primary text-truncate"},Gl={class:"w-20 text-center"},Ql={class:"flex justify-end space-x-2"},Wl={key:0},Zl=["onClick"],Jl=he(()=>e("i",{class:"far fa-edit"},null,-1)),Xl=[Jl],ed={key:1},td=["onClick"],sd=he(()=>e("i",{class:"far fa-edit"},null,-1)),ad=[sd],nd=he(()=>e("i",{class:"far fa-eye"},null,-1)),od={class:"flex justify-center col-md-6"},id={method:"dialog",class:"modal-box rounded-xl"},ld={class:"font-bold text-lg justify-center flex"},dd=he(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),rd={class:"w-full mt-6 p-2"},cd={class:"font-thin text-sm flex flex-col items-center gap-6"},ud={class:"row"},_d={key:0,class:"row mt-2 ml-2"},md={key:0,class:"row mt-2 ml-2"},pd={class:"col-md-6"},hd=["src"],vd={class:"col-md-6"},bd=he(()=>e("strong",null,"File Name:",-1)),gd={class:"text-bold text-primary"},fd=he(()=>e("strong",null,"File Size:",-1)),yd={class:"text-bold text-primary"},xd=he(()=>e("strong",null,"Type:",-1)),$d={class:"text-bold text-primary"},wd=he(()=>e("strong",null,"Last Modified: ",-1)),kd={class:"text-bold text-primary"},Md={type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},Cd={key:1},Sd=he(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),Ad=[Sd],Id=ge({__name:"Documents",setup(w){const m=ye(),q=qe(),M=Ce(),F=h("create"),k=h("folder"),S=M.params.boardId,D=h("name-asc"),f=h(""),z=h([]),C=M.params.meetingId,y=h([{id:"1",name:"Folders"}]),$=h(null),I=h(!1),T=h(null),B=h(null),ae=[{id:"name-asc",name:"Name (A-Z)"},{id:"name-desc",name:"Name (Z-A)"},{id:"date-newest",name:"Newest to oldest"},{id:"date-oldest",name:"Oldest to newest"}];function ee(n){D.value=n}l(ee,"applySort");const oe=de(()=>{const n=ae.find(v=>v.id===D.value);return n?n.name:"Unknown"});function ne(n){y.value.push({id:n.id,name:n.name})}l(ne,"addToNavigationPath");function ue(n){const v=y.value.slice(0,n+1);if(v.length!==y.value.length){y.value=v;const p=P(y.value.at(-1).id,U.value);z.value=p?p.children||[]:[]}}l(ue,"navigateTo");function P(n,v){if(!Array.isArray(v))return null;for(const p of v){if(p.id===n)return p;if(p.children&&Array.isArray(p.children)){const d=P(n,p.children);if(d)return d}}return null}l(P,"findFolderById");function O(n){y.value.at(-1).id!==n.id&&(ne(n),console.log("folder",n.children),z.value=n.children||[])}l(O,"openFolder");function _(n){let v=0,p=0;return n.children&&n.children.length>0&&n.children.forEach(d=>{d.type==="folder"?v++:d.type==="file"&&p++}),{folderCount:v,fileCount:p}}l(_,"countChildrenTypes");const E=l(()=>Me({queryKey:["getMeetingFoldersKey",C],queryFn:async()=>(await gs(C,{paginate:"false"})).data[0].children}),"getMeetingFolders"),{isLoading:G,data:U,refetch:H}=E();we(async()=>{await H()}),lt(U,n=>{var v;if(n&&n.length>0){if(y.value.length===1){const p=n[0];y.value[0].id=p.folderable_id.toString(),y.value[0].name=" Documents"}if(y.value.length===1)z.value=n;else{const p=P((v=y.value.at(-1))==null?void 0:v.id,n);z.value=p?p.children||[]:[]}}},{immediate:!0});const K=de(()=>f.value?c.value.filter(n=>n.name.toLowerCase().includes(f.value.toLowerCase())):c.value),c=de(()=>{const n=y.value.length>1?z.value:U.value;return Array.isArray(n)?[...n].sort((v,p)=>{switch(D.value){case"name-asc":return v.name.localeCompare(p.name);case"name-desc":return p.name.localeCompare(v.name);case"date-newest":return new Date(p.created_at).getTime()-new Date(v.created_at).getTime();case"date-oldest":return new Date(v.created_at).getTime()-new Date(p.created_at).getTime();default:return 0}}):[]}),ie=be({name:b().required(),meeting_id:b().required(),folder_id:b().nullable(),parent_id:b(),type:b().oneOf(["folder","file"]).required(),fileupload:We().nullable()}),{handleSubmit:X,setErrors:_e,setFieldValue:te,values:le}=Te({validationSchema:ie,initialValues:{name:"",meeting_id:C,folder_id:null,parent_id:"",type:"",fileupload:null}}),pe=l(n=>{var d;const v=n.target;if(!((d=v.files)!=null&&d.length))return;const p=v.files[0];te("name",p.name),te("type","file")},"updateName"),V=l(n=>{var p;R(),F.value="create",k.value=n,I.value=!0,(p=B.value)==null||p.showModal(),te("type",n);const v=y.value.at(-1);te("parent_id",v.id),console.log("parent",v)},"openCreateFolderModal"),x=X(async(n,{resetForm:v})=>{var p;try{if(F.value==="create")if(k.value==="folder"){const d={children:[],created_at:null,icon:null,id:null,meeting_id:n.meeting_id,folder_id:null,name:n.name,parent_id:n.parent_id.toString(),type:n.type,fileupload:null,media:[]};await ps(d,C,S)}else{const d={children:[],created_at:null,icon:null,id:null,meeting_id:n.meeting_id,folder_id:null,name:n.name,parent_id:n.parent_id.toString(),type:n.type,fileupload:n.fileupload,media:[]};await hs(d,C,S)}else if(k.value==="folder"){const d={children:[],created_at:null,folder_id:null,icon:null,id:null,meeting_id:n.meeting_id.toString(),name:n.name,parent_id:n.parent_id.toString(),type:n.type,fileupload:null,media:[]},Z=T.value?T.value.toString():null;d.folder_id=Z,await vs(d,C,S)}else{const d={children:[],created_at:null,folder_id:null,icon:null,id:null,meeting_id:n.meeting_id.toString(),name:n.name,parent_id:n.parent_id.toString(),type:n.type,fileupload:n.fileupload,media:[]},Z=T.value?T.value.toString():null;d.folder_id=Z,await bs(d,C,S)}await H(),R(),(p=B.value)==null||p.close()}catch(d){d instanceof Ae?_e(d.messages):q(d)}}),A=l((n,v)=>{var p;R(),$.value=n,T.value=n.id.toString(),F.value="edit",k.value=v,I.value=!0,te("name",n.name),te("folder_id",n.id),te("type",v),v==="file"&&(te("fileupload",n.name),Ht(n.media[0])),te("parent_id",n.id),console.log("folder.media",n.name),(p=B.value)==null||p.showModal()},"openEditFolderModal"),R=l(()=>{te("name",""),te("folder_id",null),te("fileupload",""),te("parent_id",""),te("type",""),k.value="folder",F.value="create",I.value=!1,$.value=null,T.value=null,$t()},"resetFolder");return(n,v)=>{const p=dt("router-link");return a(m).hasPermission(["view folders"])?(t(),s("div",Qi,[e("div",Wi,[e("div",Zi,[e("div",Ji,[e("div",Xi,[e("div",el,[e("div",tl,[e("nav",sl,[e("ol",al,[(t(!0),s(W,null,J(y.value,(d,Z)=>(t(),s("li",{key:d.id,class:"breadcrumb-item"},[e("a",{href:"#",class:"text-gray-800 font-medium",onClick:j($e=>ue(Z),["prevent"])},o(d.name),9,nl)]))),128))])])]),e("div",ol,[e("div",il,[e("div",ll,[e("div",dl,[e("button",rl,[cl,Y(o(oe.value),1)]),e("div",ul,[(t(),s(W,null,J(ae,d=>e("a",{key:d.id,href:"#",class:"dropdown-item",onClick:j(Z=>ee(d.id),["prevent"])},o(d.name),9,_l)),64))])])]),e("div",ml,[e("div",pl,[a(m).hasPermission(["create folders","upload documents","create dropzone"])?(t(),s("button",hl,[vl,Y(" New ")])):g("",!0),e("div",bl,[a(m).hasPermission(["create folders","create dropzone"])?(t(),s("a",{key:0,href:"#",onClick:v[0]||(v[0]=j(d=>V("folder"),["prevent"])),class:"dropdown-item"},[gl,Y(" New folder ")])):g("",!0),a(m).hasPermission(["upload documents"])?(t(),s("a",{key:1,href:"#",onClick:v[1]||(v[1]=j(d=>V("file"),["prevent"])),class:"dropdown-item"},[fl,Y(" Upload a file ")])):g("",!0)])])])])])])]),a(m).hasPermission(["search documents"])?(t(),s("div",yl,[e("div",xl,[bt(e("input",{type:"search",class:"form-control form-control-lg",placeholder:"Type your keywords here","onUpdate:modelValue":v[2]||(v[2]=d=>f.value=d)},null,512),[[Pt,f.value]]),$l])])):g("",!0)])]),e("div",wl,[e("div",kl,[e("table",Ml,[e("tbody",null,[(t(!0),s(W,null,J(K.value,d=>{var Z,$e;return t(),s("tr",{key:d.id,class:"group bg-white hover:bg-gray-100 cursor-pointer"},[e("td",Cl,[d.type==="folder"?(t(),s("div",{key:0,onClick:j(De=>O(d),["prevent"])},[d.type==="folder"?(t(),s("img",{key:0,src:a(Vt)(d.icon),class:"img-fluid",alt:"Folder Icon"},null,8,Al)):g("",!0)],8,Sl)):(t(),s("div",Il,[a(m).hasPermission(["view documents"])?(t(),Qe(p,{key:0,to:{name:"MediaDetails",params:{boardId:a(S),meetingId:d.meetingId,folderId:d.id,mediaId:d==null?void 0:d.media[0].uuid}},class:"d-block text-success hover:text-green-700 transition ease-in-out"},{default:Ye(()=>[e("img",{src:a(Ot)(d.media[0].mime_type),class:"img-fluid",alt:"File Icon"},null,8,ql)]),_:2},1032,["to"])):g("",!0)]))]),e("td",null,[d.type==="folder"?(t(),s("div",Tl,[e("p",Pl,o(d.name),1),e("p",Fl,[Y(o(_(d).folderCount)+": ",1),Dl]),e("p",El,[Y(o(_(d).fileCount)+": ",1),Rl])])):(t(),s("div",Ul,[a(m).hasPermission(["view documents"])?(t(),s("div",jl,[e("p",Ll,o((Z=d==null?void 0:d.media[0])==null?void 0:Z.file_name),1),e("p",Vl,[Y(" Size: "),e("span",Ol,o(a(ht)(($e=d==null?void 0:d.media[0])==null?void 0:$e.size)),1)])])):g("",!0)]))]),e("td",Nl,[d.type==="folder"?(t(),s("div",Bl,[e("p",Hl,o(a(nt)(d.created_at,"")),1)])):(t(),s("div",Kl,[a(m).hasPermission(["view documents"])?(t(),s("div",Yl,[e("p",zl,o(a(nt)(d.created_at,"")),1)])):g("",!0)]))]),e("td",Gl,[e("div",Ql,[d.type==="folder"?(t(),s("div",Wl,[a(m).hasPermission(["edit folders"])?(t(),s("a",{key:0,href:"#",onClick:j(De=>A(d,"folder"),["prevent"]),class:"text-warning hover:text-blue-700 transition ease-in-out"},Xl,8,Zl)):g("",!0)])):(t(),s("div",ed,[a(m).hasPermission(["edit documents"])?(t(),s("a",{key:0,href:"#",onClick:j(De=>A(d,"file"),["prevent"]),class:"text-warning hover:text-blue-700 transition ease-in-out"},ad,8,td)):g("",!0),a(m).hasPermission(["view documents"])&&d.type==="file"?(t(),Qe(p,{key:1,to:{name:"MediaDetails",params:{boardId:a(S),meetingId:d.meetingId,folderId:d.id,mediaId:d==null?void 0:d.media[0].uuid}},class:"text-success :text-green-700 transition ease-in-out"},{default:Ye(()=>[nd]),_:2},1032,["to"])):g("",!0)]))])])])}),128))])])])])]),e("div",od,[e("dialog",{id:"foldermodal",class:"modal",ref_key:"FolderModal",ref:B},[e("form",id,[e("h3",ld,o(F.value==="create"?k.value==="folder"?"Create Folder":"Upload File":k.value==="folder"?"Update Folder":"Update File"),1),dd,e("div",rd,[e("div",cd,[e("form",{novalidate:"",onSubmit:v[4]||(v[4]=j((...d)=>a(x)&&a(x)(...d),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",ud,[se(Se,{labeled:!0,label:k.value==="folder"?"Folder name":"Upload File name",name:"name",class:"col-md-12 w-full text-sm text-white tracking-wide",placeholder:k.value==="folder"?"Folder name":"Upload File name",type:"text"},null,8,["label","placeholder"]),k.value==="file"?(t(),s("div",_d,[se(xs,{labeled:!0,label:"Upload Cover Image for the Board",name:"fileupload",class:"w-full text-sm text-white tracking-wide col-md-12",placeholder:"Enter Cover Image of the Board",type:"file",accept:a(Nt).join(", "),onChange:v[3]||(v[3]=d=>{a(Bt)(d),pe(d)})},null,8,["accept"]),a(le).fileupload?(t(),s("div",md,[e("div",pd,[a(Ke).previewUrl?(t(),s("img",{key:0,src:a(Ke).previewUrl,alt:"File Preview",class:"file_attachment"},null,8,hd)):g("",!0)]),e("div",vd,[e("p",null,[bd,e("span",gd,o(a(Ke).name),1)]),e("p",null,[fd,e("span",yd,o(a(ht)(a(Ke).size)),1)]),e("p",null,[xd,e("span",$d,o(a(Ke).type),1)]),e("p",null,[wd,e("span",kd,o(a(xt)(a(Ke).lastModifiedDate)),1)])])])):g("",!0)])):g("",!0)]),e("button",Md,o(F.value==="create"?k.value==="folder"?"Create Folder":"Upload File":k.value==="folder"?"Update Folder":"Update File"),1)],32)])])])],512)])])):(t(),s("div",Cd,Ad))}}});const qd=Ie(Id,[["__scopeId","data-v-3f98911c"]]),Td={key:0,class:"card"},Pd=e("div",{class:"card-header flex items-center"},[e("h2",{class:"card-header-title h3"},"Details")],-1),Fd={class:"card-body"},Dd={class:"space-y-6"},Ed={class:"flex items-start"},Rd=e("div",{class:"mr-4 w-6 text-muted"},[e("i",{class:"fas fa-calendar-day"})],-1),Ud={class:"h3 mb-0"},jd={class:"m-0"},Ld={class:"text-primary"},Vd={key:0},Od={key:0,class:"m-0 text-black"},Nd={class:"text-primary"},Bd={class:"m-0 text-black"},Hd={class:"text-primary"},Kd={class:"text-primary"},Yd={class:"flex"},zd={key:0,class:"w-6 mr-4 mt-2 text-muted"},Gd=e("i",{class:"fas fa-video h-6 w-6 fa-video mx-auto"},null,-1),Qd=[Gd],Wd={key:0,class:"flex mb-2 flex-wrap"},Zd=["href"],Jd=e("i",{class:"fas fa-link"},null,-1),Xd=[Jd],er=["href"],tr=e("button",{type:"button",class:"text-primary hover:bg-primary-100 bg-transparent py-2 px-3 rounded-md text-base flex gap-1 items-center justify-center min-w-fit"}," Run a Video Test ",-1),sr=[tr],ar={key:1},nr={class:"m-0 text-black"},or={class:"text-primary"},ir={class:"flex items-center"},lr={class:"m-0 text-sm"},dr=["innerHTML"],rr=ge({__name:"HomeDashBoard",setup(w){const m=ye(),q=Ce();Ze();const M=q.params.boardId,F=q.params.meetingId,k=q.params.scheduleId,S=l($=>{const I=document.createElement("textarea");I.value=$,I.style.top="0",I.style.left="0",I.style.position="fixed",document.body.appendChild(I),I.focus(),I.select();try{const B=document.execCommand("copy")?"successful":"unsuccessful"}catch(T){console.error("Fallback: Oops, unable to copy",T)}document.body.removeChild(I)},"fallbackCopyTextToClipboard"),D=l(async $=>{if(!navigator.clipboard){S($),alert("Link copied to clipboard, paste it on your browser or share it to your platform");return}try{await navigator.clipboard.writeText($),alert("Link copied to clipboard!")}catch(I){console.error("Failed to copy: ",I)}},"copyLinkToClipboard"),f=l(()=>Me({queryKey:["getMeetingKey",M,F],queryFn:async()=>{const $=await yt(F);return window.dispatchEvent(new CustomEvent("updateTitle",{detail:$.data.title+" Meeting"})),$.data}}),"getMeeting"),{isLoading:z,data:C,refetch:y}=f();return($,I)=>{var B,ae,ee,oe,ne,ue,P,O;const T=dt("router-link");return a(C)?(t(),s("div",Td,[Pd,e("div",Fd,[e("div",Dd,[e("div",Ed,[Rd,e("div",null,[e("div",Ud,[e("p",jd,[Y(" Title: "),e("span",Ld,o((B=a(C))==null?void 0:B.title),1)]),(t(!0),s(W,null,J((ae=a(C))==null?void 0:ae.schedules,_=>(t(),s("div",{key:_.id},[_.id===a(k)?(t(),s("div",Vd,[_.id===a(k)?(t(),s("p",Od,[Y(" Date: "),e("span",Nd,o(a(rt)(_.date)),1)])):g("",!0),e("p",Bd,[Y(" Start: "),e("span",Hd,o(_.start_time),1),Y(" End: "),e("span",Kd,o(_.end_time),1)])])):g("",!0)]))),128))])])]),e("div",Yd,[(ee=a(C))!=null&&ee.link?(t(),s("div",zd,Qd)):g("",!0),e("div",null,[(oe=a(C))!=null&&oe.link?(t(),s("div",Wd,[e("a",{target:"_blank",href:(ne=a(C))==null?void 0:ne.link,class:"btn btn-primary whitespace-nowrap mr-2","aria-label":"Join Web Conference - open in a new tab"}," Join Web Conference ",8,Zd),e("button",{type:"button",onClick:I[0]||(I[0]=_=>{var E;return D((E=a(C))==null?void 0:E.link)}),title:"Copy web conference link","aria-label":"Copy web conference link",class:"btn btn-primary mr-2"},Xd),e("a",{href:(ue=a(C))==null?void 0:ue.link,target:"_blank","aria-label":"Run a Video Test - open in a new tab"},sr,8,er)])):(t(),s("div",ar,[e("p",nr,[Y(" Physical Meeting at:"),e("span",or,o((P=a(C))==null?void 0:P.location),1)])]))])]),e("div",ir,[e("p",lr,[Y(" Meeting Description: "),e("span",{class:"text-primary",innerHTML:(O=a(C))==null?void 0:O.description},null,8,dr)])]),e("div",null,[a(m).hasPermission(["view board"])?(t(),Qe(T,{key:0,to:{name:"BoardDetails",params:{boardId:a(M)}},class:"badge badge-soft"},{default:Ye(()=>[Y(o(a(C).meetingable.name),1)]),_:1},8,["to"])):g("",!0),a(m).hasPermission(["view meeting"])?(t(),Qe(T,{key:1,to:{name:"BoardMeetingDetails",params:{boardId:a(M),meetingId:a(F),scheduleId:a(k)}},class:"badge badge-soft"},{default:Ye(()=>[Y(o(a(C).title),1)]),_:1},8,["to"])):g("",!0)])])])])):g("",!0)}}}),cr={class:"role-container w-100 d-flex justify-content-center"},ur=["aria-expanded"],_r={key:0,class:"dropdown-menu show justify-content","aria-labelledby":"role-status"},mr=["onClick"],pr={key:1,class:"text-center"},hr=ge({__name:"MemberShipPosition",props:{membership:{},positions:{},disableRemotePosition:{}},emits:["position-updated"],setup(w,{emit:m}){const q=w,M=m,F=h(null),k=h(!1),S=l(y=>{y.stopPropagation(),k.value=!k.value},"toggleDropdown"),D=l(y=>{M("position-updated",{membershipId:q.membership.id,positionId:y.id}),k.value=!1},"updateRole"),f=de(()=>{var y;return`bg-${(y=q.membership)==null?void 0:y.position.name.toLowerCase()} text-white`}),z=de(()=>{var y;return(y=q.membership)==null?void 0:y.position.name}),C=de(()=>q.positions);return(y,$)=>{var I,T,B,ae;return t(),s("div",cr,[z.value?(t(),s("div",{key:0,class:"dropdown",ref_key:"dropdownRef",ref:F},[e("button",{class:re(["btn btn-primary dropdown-toggle text-truncate w-100",f.value]),type:"button",onClick:S,"aria-haspopup":"true","aria-expanded":k.value},[e("i",{class:re(["mr-2 fa "+((I=q.membership)==null?void 0:I.position.icon),"mr-2"])},null,2),Y(" "+o((T=q.membership)==null?void 0:T.position.name),1)],10,ur),k.value?(t(),s("ul",_r,[(t(!0),s(W,null,J(C.value,ee=>(t(),s("li",{key:ee.name},[e("a",{href:"#",class:"dropdown-item",onClick:j(oe=>D(ee),["prevent"])},[e("i",{class:re(["mr-2 fa "+ee.icon,"mr-2"])},null,2),Y(" "+o(ee.name),1)],8,mr)]))),128))])):g("",!0)],512)):(t(),s("div",pr,[e("i",{class:re(["mr-2 fa "+((B=q.membership)==null?void 0:B.position.icon),"mr-2"])},null,2),Y(" "+o((ae=q.membership)==null?void 0:ae.position.name),1)]))])}}});const vr=Ie(hr,[["__scopeId","data-v-e30f8b13"]]),Le=l(w=>(Ne("data-v-a8a00729"),w=w(),Be(),w),"_withScopeId$1"),br={class:"card"},gr={class:"card-header flex items-center"},fr=Le(()=>e("h2",{class:"card-header-title h3"},"Board Meeting Members",-1)),yr={class:"ml-auto flex items-center space-x-2"},xr={class:"container-fluid"},$r={key:0,class:"row"},wr={class:"card card-outline card-primary h-100"},kr={class:"card-body box-profile"},Mr={class:"text-center"},Cr={class:"profile-username text-center text-primary"},Sr=["onClick"],Ar=["onClick"],Ir=Le(()=>e("i",{class:"far fa-eye"},null,-1)),qr=[Ir],Tr={class:"text-muted text-center text-bold"},Pr={key:0,class:"mt-3"},Fr=Le(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Position ",-1)),Dr={class:"text-center"},Er={key:1,class:"mt-3"},Rr=Le(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Position ",-1)),Ur={class:"text-center"},jr={class:"mt-3"},Lr=Le(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Last Updated ",-1)),Vr={class:"text-center text-primary text-small"},Or={class:"flex justify-center col-md-6"},Nr={method:"dialog",class:"modal-box rounded-xl"},Br=Le(()=>e("h3",{class:"font-bold text-lg justify-center flex"},o("Add Members"),-1)),Hr=Le(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),Kr={class:"w-full mt-6 p-2"},Yr={class:"font-thin text-sm flex flex-col items-center gap-6"},zr={key:0,class:"message"},Gr=Le(()=>e("button",{type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},o("Add Members"),-1)),Qr=ge({__name:"Members",emits:["memberships-updated"],setup(w,{emit:m}){const q=ye(),M=qe(),F=Ce(),k=Ze(),S=h("create"),D=F.params.boardId,f=F.params.meetingId,z=F.params.scheduleId,C=h(!1),y=h(null),$=h([]),I=h([]),T=m,{errorMessage:B}=Ue("assignees"),ae=be({id:b().nullable(),position_id:b().nullable(),board_id:We().required(),meeting_id:We().required(),memberships:ze().of(b()).required("Members selection is required.")}),{handleSubmit:ee,setErrors:oe,setFieldValue:ne,values:ue}=Te({validationSchema:ae,initialValues:{board_id:D,meeting_id:f,id:"",position_id:"",memberships:[]}}),P=l(()=>{ne("memberships",$.value)},"selectedMembers"),O=l(()=>{ne("memberships",$.value)},"removeselectedMembers"),_=l(V=>{var A;console.log(V.memberships);const x=V.memberships.map(R=>R.member.id.toString());$.value=x,ne("memberships",$.value),S.value="edit",C.value=!0,(A=y.value)==null||A.showModal()},"openEditMembershipsModal"),E=ee(async(V,{resetForm:x})=>{var A;try{ne("memberships",$.value);const R={board_id:V.board_id,memberships:V.memberships};if(S.value==="create")await ds(R,f,z);else if(S.value==="edit")await rs(R,f,z);else if(S.value==="position"){const n={id:V.id,position_id:V.position_id};await cs(n,f,z)}await c(),T("memberships-updated"),G(),(A=y.value)==null||A.close()}catch(R){R instanceof Ae?oe(R.messages):M(R)}}),G=l(()=>{S.value="create",C.value=!1,$.value=[],ne("memberships",[]),ne("id",""),ne("position_id","")},"reset"),U=l(()=>Me({queryKey:["getMembershipsKey",f,z],queryFn:async()=>{const V=await ct(f,z,{paginate:"false"});return console.log("response.data",V.data),V.data}}),"getMemberships"),{isLoading:H,data:K,refetch:c}=U(),ie=de(()=>{var x;const V=[];return I.value&&((x=I.value)==null?void 0:x.length)>0&&I.value.reduce((A,R)=>(A.push({id:R.id,name:`${R.user.full_name}`}),A),V),console.log("resul",V),V}),X=l(async()=>{const V=await fs(D,{paginate:"false"});I.value=V.data},"getMembers");we(async()=>{X()});const _e=h([]),te=l(async()=>{const V=await ys({paginate:"false"});_e.value=V.data},"getPositions");we(async()=>{await te()});const le=l(V=>{G(),S.value="position",ne("id",V.membershipId),ne("position_id",V.positionId),E()},"handlePositionUpdated"),pe=l(V=>{k.push({name:"ProfileDetails",params:{userId:V.id,profileId:V.profile.id}})},"openUserProfile");return(V,x)=>(t(),s(W,null,[e("div",br,[e("div",gr,[fr,e("div",yr,[e("button",{class:"btn btn-secondary btn-sm",onClick:x[0]||(x[0]=j(A=>_({memberships:a(K)}),["prevent"]))}," Update Members ")])]),e("div",xr,[a(K)?(t(),s("div",$r,[(t(!0),s(W,null,J(a(K),(A,R)=>(t(),s("div",{class:"col-lg-3 col-md-4 col-sm-6 mb-3",key:R},[e("div",wr,[e("div",kr,[e("div",Mr,[e("h3",Cr,[e("a",{href:"",onClick:j(n=>pe(A.user),["prevent"])},o(A.user.full_name),9,Sr),e("button",{type:"button",onClick:j(n=>pe(A.user),["prevent"]),title:"",class:"mx-2 btn btn-sm btn-primary"},qr,8,Ar)]),e("p",Tr,o(A.position.name),1)]),a(q).hasPermission(["assign meeting position"])?(t(),s("div",Pr,[Fr,e("div",Dr,[se(vr,{membership:A,positions:_e.value,disableRemotePosition:0,onPositionUpdated:le},null,8,["membership","positions"])])])):(t(),s("div",Er,[Rr,e("div",Ur,[e("i",{class:re(["mr-2 fa "+A.position.icon,"mr-2"])},null,2),Y(" "+o(A.position.name),1)])])),e("div",jr,[Lr,e("p",Vr,o(a(nt)(A.updated_at,null)),1)])])])]))),128))])):g("",!0)])]),e("div",Or,[e("dialog",{id:"membershipsmodal",class:"modal",ref_key:"membershipsmodal",ref:y},[e("form",Nr,[Br,Hr,e("div",Kr,[e("div",Yr,[e("form",{novalidate:"",onSubmit:x[4]||(x[4]=j((...A)=>a(E)&&a(E)(...A),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",{class:re(["multiselect-container",{error:!!a(B)}])},[se(a(ot),{id:"members",modelValue:$.value,"onUpdate:modelValue":x[1]||(x[1]=A=>$.value=A),mode:"tags",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:ie.value,valueProp:"id",trackBy:"id",label:"name",class:re(["multiselect-container",{error:!!a(B)}]),onSelect:x[2]||(x[2]=A=>P()),onDeselect:x[3]||(x[3]=A=>O())},null,8,["modelValue","options","class"]),a(B)?(t(),s("div",zr,o(a(B)),1)):g("",!0)],2),Gr],32)])])])],512)])],64))}});const Wr=Ie(Qr,[["__scopeId","data-v-a8a00729"]]),Zr=["for"],Jr=["id","disabled","placeholder","type","required"],Xr={key:1,class:"message"},ec=ge({__name:"FormDynamicInput",props:{label:{},name:{},direction:{},disabled:{type:Boolean},padding:{},placeholder:{default:"Enter details"},type:{default:"text"},labeled:{type:Boolean,default:!0},required:{type:Boolean,default:!1}},setup(w){const m=w,{errorMessage:q,value:M}=Ue(m.name);return(F,k)=>(t(),s("div",{class:re(["field-container",{error:!!a(q)}])},[m.labeled?(t(),s("label",{key:0,for:m.name},o(m.label),9,Zr)):g("",!0),bt(e("input",{id:m.name,"onUpdate:modelValue":k[0]||(k[0]=S=>Dt(M)?M.value=S:null),disabled:m.disabled,placeholder:m.placeholder,type:m.type,required:m.required,class:re(["w-full",m.disabled?"input-disabled":""])},null,10,Jr),[[Ft,a(M)]]),a(q)?(t(),s("div",Xr,o(a(q)),1)):g("",!0)],2))}});const tc=Ie(ec,[["__scopeId","data-v-551f40ab"]]),sc={key:0},ac={class:"card h-full"},nc={class:"card-header flex items-center"},oc=e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"}," Meeting Polls ")],-1),ic={key:0,class:"flex items-center space-x-2"},lc=e("i",{class:"far fa fa-plus mr-2"},null,-1),dc=e("span",{class:"sr-only"},"Add poll",-1),rc={class:"card-container"},cc={key:0},uc={key:1},_c={class:"row overflow-auto p-4",style:{"max-height":"100vh"}},mc={class:"card card-outline card-primary h-100"},pc={class:"card-header"},hc={class:"card-tools"},vc=["onClick"],bc=e("i",{class:"fas fa-edit"},null,-1),gc=[bc],fc={class:"card-body"},yc={class:"text-primary tex-bold uppercase"},xc=e("strong",{class:"text-primary"},"Question:",-1),$c={class:"mt-2 text-primary text-bold"},wc={class:""},kc=e("strong",null,"Answer Options:",-1),Mc={class:"row"},Cc={class:"col-6"},Sc={class:"list-unstyled text-success"},Ac={class:"col-6"},Ic={class:"list-unstyled text-success"},qc={class:"d-flex justify-content-between"},Tc=e("strong",null,"Due Date:",-1),Pc=e("strong",null,"Status:",-1),Fc=e("strong",null,"Vote:",-1),Dc=["innerHTML"],Ec={class:""},Rc=e("strong",null,"Assignees:",-1),Uc={class:"row"},jc={class:"col-6"},Lc={class:"list-unstyled"},Vc={class:"col-6"},Oc={class:"list-unstyled"},Nc=e("strong",null,"Description:",-1),Bc=["innerHTML"],Hc={class:"flex justify-center items-center min-h-screen"},Kc={method:"dialog",class:"modal-box rounded-xl relative bg-white shadow-xl"},Yc={class:"font-bold text-lg text-center"},zc=e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1),Gc={class:"overflow-auto p-4",style:{"max-height":"80vh"}},Qc={class:"grid grid-cols-2 md:grid-cols-2 gap-4 p-2"},Wc={class:"col-span-2"},Zc={class:"flex flex-wrap -mx-2 mt-2"},Jc={class:"w-full md:w-1/2 px-1 md:px-2"},Xc={class:"w-full md:w-1/2 px-1 md:px-2"},eu={class:"flex flex-wrap -mx-2 mt-2"},tu={class:"w-full md:w-1/3 px-1 md:px-2 text-center"},su=e("h2",{class:"font-bold text-sm text-center"},"Click to Add Options",-1),au=e("h4",{class:"text-info font-semibold"},"Your Options",-1),nu={key:0},ou={key:0,class:"w-full md:w-2/3 px-1 md:px-2 flex flex-col"},iu=["onClick"],lu={class:"flex flex-wrap -mx-2 mt-2"},du={class:"w-full md:w-1/2 px-1 md:px-2"},ru={class:"w-full md:w-1/2 px-1 md:px-2"},cu={key:0},uu=e("h2",{class:"font-bold text-primary text-sm text-center"}," All Members Will be assiged this Poll ",-1),_u=[uu],mu={key:0,class:"form-group col-span-3"},pu=e("label",{class:"text-bold font-medium tracking-wide"}," People To Vote ",-1),hu={key:0,class:"message"},vu={key:1},bu={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},gu={key:1},fu=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),yu=[fu],xu=ge({__name:"Pollp",setup(w){const m=ye(),q=Ce(),M=h(!1),F=h("create"),k=q.params.boardId,S=q.params.meetingId,D=h(null),f=h([]),z=h(null),C=h("single"),y=h("individuals"),$=h([]),I=h([]),T=h(""),B=qe();Ue("duedate");const{errorMessage:ae}=Ue("pollassignees"),ee=be({id:b().required(),title:b().required(),poll_id:b().nullable(),deleted_at:b().nullable(),created_at:b().nullable(),updated_at:b().nullable()}),oe=be({id:b().required(),full_name:b().required()}),ne=be({id:b().required(),poll_id:b().nullable(),membership_id:b().required(),user:oe}),ue=be({meeting_id:b().nullable(),board_id:b().nullable(),committee_id:b().nullable(),question:b().required(),description:b().required(),questionoptiontype:b().required(),optionstatus:b().required(),options:ze().of(ee).required(),duedate:b().required(),assigneetype:b().required(),assigneestatus:b().required(),pollassignees:ze().of(ne).nullable(),status:b().required()}),{handleSubmit:P,setErrors:O,setFieldValue:_,values:E}=Te({validationSchema:ue,initialValues:{meeting_id:S,board_id:k,committee_id:null,question:"",description:"",questionoptiontype:"",optionstatus:"",options:[{id:it(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null}],duedate:"",assigneetype:"",assigneestatus:"",pollassignees:[],status:"inactive"}});Ue("options");const G=l(()=>{var i;X(),F.value="create",M.value=!0,(i=z.value)==null||i.showModal()},"openCreatePollModal"),U=l(i=>{var u;X(),D.value=i.id,_("question",i.question),_("description",i.description),_("questionoptiontype",i.questionoptiontype),_("optionstatus",i.optionstatus),_("duedate",i.duedate),_("assigneetype",i.assigneetype),_("assigneestatus",i.assigneestatus),_("status",i.status),_("options",i.options),y.value=i.assigneestatus,H(i.pollassignees),F.value="edit",M.value=!0,(u=z.value)==null||u.showModal()},"openEditPollModal");function H(i){f.value=i.map(u=>({id:u.id,full_name:u.user.full_name,poll_id:u.poll_id,membership_id:u.membership_id,user:u.user})),_("pollassignees",f.value)}l(H,"mappollassigneesToReactiveRef");const K=l(()=>{_("pollassignees",f.value)},"selectedMembers"),c=l(()=>{_("pollassignees",f.value)},"removeselectedUsers"),ie=P(async(i,{resetForm:u})=>{var r;try{console.log("dddd");const Q={meeting_id:i.meeting_id,board_id:i.board_id,committee_id:i.committee_id,question:i.question,description:i.description,questionoptiontype:i.questionoptiontype,optionstatus:i.optionstatus,options:i.options,duedate:i.duedate,assigneetype:i.assigneetype,assigneestatus:i.assigneestatus,pollassignees:i.pollassignees,status:i.status};if(F.value==="create")await $s(Q,S,k);else{const L=D.value;await ws(Q,S,k,L)}(r=z.value)==null||r.close(),await N(),X()}catch(Q){Q instanceof Ae?O(Q.messages):B(Q)}}),X=l(()=>{F.value="create",M.value=!1,D.value=null,C.value="single",y.value="all_members",f.value=[],_("meeting_id",S),_("board_id",k),_("committee_id",null),_("question",""),_("description",""),_("questionoptiontype","single"),_("optionstatus","single"),_("options",[{id:it(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null}]),_("duedate",""),_("assigneetype","all_members"),_("assigneestatus","all_members"),_("pollassignees",[]),_("status","inactive")},"reset"),_e=l(i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),"formattedDateTime"),te=l(i=>le(i)?"bg-danger":"bg-success","dateBadgeClass"),le=l(i=>{const u=new Date,r=new Date(i);return u>r},"hasDueDatePassed"),pe=l(i=>{var ve;if(!i.votes||((ve=i.votes)==null?void 0:ve.length)===0)return"No votes yet";const u=i.votes.reduce((fe,et)=>fe+et.voteCount,0),r=i.totalMembers;if(u>r)return console.error("Total votes exceed total members, which is unexpected."),"Voting data error";if(u===0)return"No votes yet";const Q=i==null?void 0:i.votes.reduce((fe,et)=>fe.voteCount>et.voteCount?fe:et),L=r-u;return`${(Q.voteCount/u*100).toFixed(1)}% voted for ${Q.title}<br>${u} voted / ${L} not yet`},"calculateVoteStats"),V=l(i=>{switch(i){case"Backlog":return"badge bg-warning";case"Pending":return"badge bg-info";case"On Progress":return"badge bg-primary";case"Completed":return"badge bg-success";default:return"badge"}},"statusClass"),x=[{name:"Single Answer",value:"single"},{name:"Multiple Answers: More than one",value:"multiple"}],A=[{name:"Individuals",value:"individuals"},{name:"Assign All Meeting Members",value:"all_members"}],R=de(()=>x),n=de(()=>A),v=l(i=>{I.value=[],$.value=[],d(),C.value=i,_("questionoptiontype",i),_("optionstatus",i)},"handleQuestionOptionTypeChange"),p=l(i=>{f.value=[],T.value=i,y.value=i,_("assigneetype",i),_("assigneestatus",i)},"handleAssigneeTypeChange"),d=l(()=>{Array.isArray(E.options)||(console.error("Invalid state: values.options is not an array."),_("options",[]));const i={id:it(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null};_("options",[...E.options,i])},"addEmptyOption");lt(()=>E.options,i=>{});const Z=l(i=>{const u=E.options.filter(r=>r.id!==i);console.log("vv",u),_("options",u)},"removeOption"),$e=l(()=>Me({queryKey:["getPollMembershisKey"],queryFn:async()=>(await ct(S,k,{paginate:"false"})).data.map(Re())}),"getMemberships"),{isLoading:De,data:Ee,refetch:Ge}=$e(),Re=l(()=>i=>({id:i.id,full_name:i.user.full_name,membership_id:i.id,user:i.user}),"formatEvent"),ke=de(()=>{var i;return!Ee.value||((i=Ee.value)==null?void 0:i.length)===0?[]:Ee.value}),Ve=l(()=>Me({queryKey:["getMeetingPollsKey",S],queryFn:async()=>(await ks(S,{paginate:"false"})).data}),"getMeetingPolls"),{isLoading:Oe,data:He,refetch:N}=Ve();return we(async()=>{Ge(),N()}),(i,u)=>a(m).hasPermission(["view poll"])?(t(),s("div",sc,[e("div",ac,[e("div",nc,[oc,a(m).hasPermission(["create poll"])?(t(),s("div",ic,[e("button",{type:"button",onClick:j(G,["prevent"]),class:"btn btn-tool"},[lc,Y(),dc])])):g("",!0)]),e("div",rc,[a(Oe)?(t(),s("div",cc,"Loading Meeting Polls...")):(t(),s("div",uc,[e("div",_c,[(t(!0),s(W,null,J(a(He),(r,Q)=>(t(),s("div",{class:"col-lg-12 col-md-12 col-sm-12 mb-2",key:Q},[e("div",mc,[e("div",pc,[e("div",hc,[a(m).hasPermission(["edit poll"])?(t(),s("button",{key:0,class:"btn btn-tool",onClick:j(L=>U(r),["prevent"])},gc,8,vc)):g("",!0)])]),e("div",fc,[e("div",yc,[xc,e("p",$c,o(r.question),1),e("div",wc,[kc,e("div",Mc,[e("div",Cc,[e("ul",Sc,[(t(!0),s(W,null,J(r.options.slice(0,Math.ceil(r.options.length/2)),(L,ce)=>(t(),s("li",{key:L.id},o(ce+1)+". "+o(L.title),1))),128))])]),e("div",Ac,[e("ul",Ic,[(t(!0),s(W,null,J(r.options.slice(Math.ceil(r.options.length/2)),(L,ce)=>(t(),s("li",{key:L.id},o(ce+1+Math.ceil(r.options.length/2))+". "+o(L.title),1))),128))])])])])]),e("div",qc,[e("div",null,[Tc,e("p",{class:re(te(r.duedate))},o(_e(r.duedate)),3)]),e("div",null,[Pc,e("p",null,[e("span",{class:re(V(r.status))},o(r.status),3)])]),e("div",null,[Fc,e("p",null,[e("span",{innerHTML:pe(r)},null,8,Dc)])])]),e("div",Ec,[Rc,e("div",Uc,[e("div",jc,[e("ul",Lc,[(t(!0),s(W,null,J(r.pollassignees.slice(0,Math.ceil(r.pollassignees.length/2)),(L,ce)=>(t(),s("li",{key:L.id},o(ce+1)+". "+o(L.user.full_name),1))),128))])]),e("div",Vc,[e("ul",Oc,[(t(!0),s(W,null,J(r.pollassignees.slice(Math.ceil(r.pollassignees.length/2)),(L,ce)=>(t(),s("li",{key:L.id},o(ce+1+Math.ceil(r.pollassignees.length/2))+". "+o(L.user.full_name),1))),128))])])])]),e("div",null,[Nc,e("p",{innerHTML:r.description,class:"mt-2"},null,8,Bc)])])])]))),128))])]))])]),e("div",Hc,[e("dialog",{id:"pollmodal",class:"modal w-full max-w-4xl mx-auto p-0",ref_key:"PollModal",ref:z},[e("form",Kc,[e("h3",Yc,o(F.value=="create"?"Create Poll":"Edit Poll"),1),zc,e("div",Gc,[e("div",Qc,[e("div",Wc,[e("form",{novalidate:"",onSubmit:u[3]||(u[3]=j((...r)=>a(ie)&&a(ie)(...r),["prevent"])),class:""},[se(Se,{labeled:!0,label:"Poll Question",name:"question",placeholder:"Enter Poll Question",type:"text"}),se(ut,{label:"Poll description",name:"description",theme:"snow",placeholder:"Enter Poll Description",toolbar:"full",contentType:"html",class:"col-span-2"}),e("div",Zc,[e("div",Jc,[se(at,{labeled:!0,name:"questionoptiontype",label:"Select Allowed Answers On the Question",placeholder:"Select Allowed Answers On the Question",options:R.value,onSelectedItem:v},null,8,["options"])]),e("div",Xc,[se(_t,{label:"Poll Due Date",name:"duedate",flow:["month"],placeholder:"Enter Poll Due Date & Time"})])]),e("div",eu,[e("div",tu,[e("div",null,[su,e("button",{onClick:j(d,["prevent"]),class:"btn btn-primary h-10 mt-2"}," Add Option ")]),au,a(E).options?(t(),s("ul",nu,[(t(!0),s(W,null,J(a(E).options,(r,Q)=>(t(),s("li",{class:"text-primary font-bold text-justify",key:Q},o(Q+1)+"."+o(r==null?void 0:r.title),1))),128))])):g("",!0)]),a(E).options?(t(),s("div",ou,[(t(!0),s(W,null,J(a(E).options,(r,Q)=>(t(),s("div",{class:"form-group flex items-center mb-2",key:Q},[se(tc,{labeled:!0,label:"Title for option "+(Q+1),name:"options["+Q+"].title",placeholder:"Enter title",class:"flex-grow",type:"text"},null,8,["label","name"]),e("a",{href:"#",class:"ml-2 text-red-600 font-bold mt-8",onClick:j(L=>Z(r.id),["prevent"])}," ✕ ",8,iu)]))),128))])):g("",!0)]),e("div",lu,[e("div",du,[se(at,{labeled:!0,name:"assigneetype",label:"Select Assignee Type",placeholder:"Select Assignee Type",options:n.value,onSelectedItem:p},null,8,["options"])]),e("div",ru,[y.value==="all_members"?(t(),s("div",cu,_u)):g("",!0)])]),y.value==="individuals"?(t(),s("div",mu,[pu,e("div",{class:re(["multiselect-container",{error:!!a(ae)}])},[se(a(ot),{id:"pollassignees",modelValue:f.value,"onUpdate:modelValue":u[0]||(u[0]=r=>f.value=r),mode:"tags",required:"",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:ke.value,valueProp:"membership_id",trackBy:"membership_id",label:"full_name",class:re(["col-span-3",["multiselect-container",{error:!!a(ae)}]]),object:!0,onSelect:u[1]||(u[1]=r=>K()),onDeselect:u[2]||(u[2]=r=>c())},null,8,["modelValue","options","class"]),a(ae)?(t(),s("div",hu,o(a(ae)),1)):g("",!0)],2)])):g("",!0),f.value&&f.value.length||y.value==="all_members"?(t(),s("div",vu,[e("button",bu,o(F.value=="create"?"Create Poll":"Edit Poll"),1)])):g("",!0)],32)])])])])],512)])])):(t(),s("div",gu,yu))}});const xe=l(w=>(Ne("data-v-9c71c5ca"),w=w(),Be(),w),"_withScopeId"),$u={key:0},wu={class:"card h-full"},ku={class:"card-header flex items-center"},Mu=xe(()=>e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"},"Meeting Tasks")],-1)),Cu={key:0,class:"flex items-center space-x-2"},Su=xe(()=>e("i",{class:"far fa fa-plus mr-2"},null,-1)),Au=xe(()=>e("span",{class:"sr-only"},"Add task",-1)),Iu={class:"card-container"},qu={key:0},Tu={key:1},Pu={class:"row overflow-auto p-4",style:{"max-height":"100vh"}},Fu={class:"card card-outline card-primary h-100"},Du={class:"card-header"},Eu={class:"card-tools"},Ru=["onClick"],Uu=xe(()=>e("i",{class:"fas fa-edit"},null,-1)),ju=[Uu],Lu={class:"card-body"},Vu={class:"text-primary text-bold uppercase"},Ou={class:"d-flex justify-content-between"},Nu=xe(()=>e("strong",null,"Due Date:",-1)),Bu=xe(()=>e("strong",null,"Status:",-1)),Hu={key:0,class:"badge bg-warning"},Ku={key:1,class:"badge bg-info"},Yu={key:2,class:"badge bg-primary"},zu={key:3,class:"badge bg-success"},Gu={class:""},Qu=xe(()=>e("strong",null,"Assignees:",-1)),Wu={class:"row"},Zu={class:"col-6"},Ju={class:"list-unstyled"},Xu={class:"col-6"},e_={class:"list-unstyled"},t_=xe(()=>e("strong",null,"Description:",-1)),s_=["innerHTML"],a_={class:"flex justify-center col-md-6"},n_={method:"dialog",class:"modal-box rounded-xl"},o_={class:"font-bold text-lg justify-center flex"},i_=xe(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),l_={class:"overflow-auto p-4",style:{"max-height":"80vh"}},d_={class:"grid grid-cols-3 md:grid-cols-3 gap-2 p-2"},r_={class:"col-span-3"},c_={class:"flex flex-wrap -mx-2 mt-2"},u_={class:"w-full md:w-1/2 px-1 md:px-2"},__={class:"w-full md:w-1/2 px-1 md:px-2"},m_={class:"flex flex-wrap -mx-2 mt-2"},p_={class:"w-full md:w-1/2 px-1 md:px-2"},h_={class:"w-full md:w-1/2 px-1 md:px-2"},v_={key:0},b_=xe(()=>e("h2",{class:"font-bold text-primary text-sm text-center"},"All Members Will be assigned this Task",-1)),g_=[b_],f_={key:0,class:"form-group col-span-3"},y_=xe(()=>e("label",{class:"text-bold font-medium tracking-wide"},"People to Assign",-1)),x_={key:0,class:"message"},$_={key:1},w_={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},k_={key:1},M_=xe(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),C_=[M_],S_=ge({__name:"Taskp",setup(w){const m=ye(),q=Ce(),M=h(!1),F=h("create"),k=q.params.boardId,S=q.params.meetingId,D=h(null),f=h([]),z=h(null),C=h(null),y=h("individuals"),$=h(""),I=qe();Ue("duedate");const{errorMessage:T}=Ue("taskassignees"),B=l(x=>{const A=new Date,R=new Date(x);return A>R},"hasDueDatePassed"),ae=be({id:b().required(),full_name:b().required()}),ee=be({id:b().required(),task_id:b().nullable(),membership_id:b().required(),user:ae}),oe=be({meeting_id:b().nullable(),board_id:b().nullable(),committee_id:b().nullable(),title:b().required(),duedate:b().required(),description:b().required(),status:b().required(),assigneetype:b().required(),assigneestatus:b().required(),taskassignees:ze().of(ee).nullable()}),{handleSubmit:ne,setErrors:ue,setFieldValue:P,values:O}=Te({validationSchema:oe,initialValues:{meeting_id:S,board_id:k,committee_id:null,title:"",duedate:"",description:"",status:"pending",assigneetype:"",assigneestatus:"",taskassignees:[]}}),_=l(()=>{var x;c(),F.value="create",M.value=!0,(x=C.value)==null||x.showModal()},"openCreateTaskModal"),E=l(x=>{var A;c(),z.value=x,D.value=x.id,P("title",x.title),P("duedate",x.duedate),P("description",x.description),P("status",x.status),P("assigneetype",x.assigneetype),P("assigneestatus",x.assigneestatus),y.value=x.assigneestatus,G(x.taskassignees),F.value="edit",M.value=!0,(A=C.value)==null||A.showModal()},"openEditTaskModal");function G(x){f.value=x.map(A=>({id:A.id,full_name:A.user.full_name,task_id:A.task_id,membership_id:A.membership_id,user:A.user})),P("taskassignees",f.value)}l(G,"maptaskassigneesToReactiveRef");const U=l(()=>{P("taskassignees",f.value)},"selectedMembers"),H=l(()=>{P("taskassignees",f.value)},"removeselectedUsers"),K=ne(async(x,{resetForm:A})=>{var R;try{const n={meeting_id:x.meeting_id,board_id:x.board_id,committee_id:x.committee_id,title:x.title,duedate:x.duedate,description:x.description,status:x.status,assigneetype:x.assigneetype,assigneestatus:x.assigneestatus,taskassignees:x.taskassignees};if(F.value==="create")await us(n,S,k);else{const v=D.value;await _s(n,S,k,v)}(R=C.value)==null||R.close(),await V(),c()}catch(n){n instanceof Ae?ue(n.messages):I(n)}}),c=l(()=>{F.value="create",M.value=!1,D.value=null,y.value="all_members",f.value=[],P("meeting_id",S),P("board_id",k),P("committee_id",null),P("title",""),P("duedate",""),P("description","description ................"),P("status","pending"),P("assigneetype","all_members"),P("assigneestatus","all_members"),P("taskassignees",[])},"reset"),ie=l(x=>{f.value=[],$.value=x,y.value=x,P("assigneetype",x),P("assigneestatus",x)},"handleAssigneeTypeChange"),X=[{name:"Individuals",value:"individuals"},{name:"Assign All Meeting Members",value:"all_members"}],_e=de(()=>X),te=l(()=>Me({queryKey:["getMeetingTasksKey",S],queryFn:async()=>(await ms(S,{paginate:"false"})).data}),"getMeetingTasks"),{isLoading:le,data:pe,refetch:V}=te();return we(async()=>{V()}),(x,A)=>a(m).hasPermission(["view task"])?(t(),s("div",$u,[e("div",wu,[e("div",ku,[Mu,a(m).hasPermission(["create task"])?(t(),s("div",Cu,[e("button",{type:"button",onClick:j(_,["prevent"]),class:"btn btn-tool"},[Su,Y(),Au])])):g("",!0)]),e("div",Iu,[a(le)?(t(),s("div",qu,"Loading Meeting Tasks...")):(t(),s("div",Tu,[e("div",Pu,[(t(!0),s(W,null,J(a(pe),(R,n)=>(t(),s("div",{class:"col-lg-12 col-md-12 col-sm-12 mb-2",key:n},[e("div",Fu,[e("div",Du,[e("div",Eu,[a(m).hasPermission(["edit task"])?(t(),s("button",{key:0,class:"btn btn-tool",onClick:j(v=>E(R),["prevent"])},ju,8,Ru)):g("",!0)])]),e("div",Lu,[e("div",Vu,o(R.title),1),e("div",Ou,[e("div",null,[Nu,e("p",{class:re({"text-danger":B(R.duedate)&&R.status!=="completed","text-success":!B(R.duedate)||R.status==="completed"})},o(a(nt)(R.duedate)),3)]),e("div",null,[Bu,e("p",null,[R.status==="backlog"?(t(),s("span",Hu,"Backlog")):R.status==="pending"?(t(),s("span",Ku,"Pending")):R.status==="onprogress"?(t(),s("span",Yu,"On Progress")):R.status==="completed"?(t(),s("span",zu,"Completed")):g("",!0)])])]),e("div",Gu,[Qu,e("div",Wu,[e("div",Zu,[e("ul",Ju,[(t(!0),s(W,null,J(R.taskassignees.slice(0,Math.ceil(R.taskassignees.length/2)),(v,p)=>(t(),s("li",{key:v.id},o(p+1)+". "+o(v.user.full_name),1))),128))])]),e("div",Xu,[e("ul",e_,[(t(!0),s(W,null,J(R.taskassignees.slice(Math.ceil(R.taskassignees.length/2)),(v,p)=>(t(),s("li",{key:v.id},o(p+1+Math.ceil(R.taskassignees.length/2))+". "+o(v.user.full_name),1))),128))])])])]),e("div",null,[t_,e("p",{innerHTML:R.description,class:"mt-2"},null,8,s_)])])])]))),128))])]))])]),e("div",a_,[e("dialog",{id:"taskmodal",class:"modal",ref_key:"TaskModal",ref:C},[e("form",n_,[e("h3",o_,o(F.value=="create"?"Create Meeting Task":"Edit Meeting Task"),1),i_,e("div",l_,[e("div",d_,[e("div",r_,[e("form",{novalidate:"",onSubmit:A[3]||(A[3]=j((...R)=>a(K)&&a(K)(...R),["prevent"])),class:""},[e("div",c_,[e("div",u_,[se(Se,{labeled:!0,label:"Task Title",name:"title",placeholder:"Enter Task Title",type:"text"})]),e("div",__,[se(_t,{label:"Task Due Date",name:"duedate",flow:["month"],placeholder:"Task Due Date"})])]),se(ut,{label:"Task Description",name:"description",theme:"snow",placeholder:"Enter Task Description",toolbar:"full",contentType:"html",class:"col-span-3"}),e("div",m_,[e("div",p_,[se(at,{labeled:!0,name:"assigneetype",label:"Select Assignee Type",placeholder:"Select Assignee Type",options:_e.value,onSelectedItem:ie},null,8,["options"])]),e("div",h_,[y.value==="all_members"?(t(),s("div",v_,g_)):g("",!0)])]),y.value==="individuals"?(t(),s("div",f_,[y_,e("div",{class:re(["multiselect-container",{error:!!a(T)}])},[se(a(ot),{id:"taskassignees",modelValue:f.value,"onUpdate:modelValue":A[0]||(A[0]=R=>f.value=R),mode:"tags",required:"",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:x.Memberships,valueProp:"membership_id",trackBy:"membership_id",label:"full_name",class:re(["col-span-3",["multiselect-container",{error:!!a(T)}]]),object:!0,onSelect:A[1]||(A[1]=R=>U()),onDeselect:A[2]||(A[2]=R=>H())},null,8,["modelValue","options","class"]),a(T)?(t(),s("div",x_,o(a(T)),1)):g("",!0)],2)])):g("",!0),f.value&&f.value.length||y.value==="all_members"?(t(),s("div",$_,[e("button",w_,o(F.value=="create"?"Create Task":"Edit Task"),1)])):g("",!0)],32)])])])])],512)])])):(t(),s("div",k_,C_))}});const A_=Ie(S_,[["__scopeId","data-v-9c71c5ca"]]),I_={key:0},q_={class:"row"},T_={class:"col-md-6"},P_={class:"col-md-6"},F_={key:1},D_=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),E_=[D_],R_=ge({__name:"TaskPolls",setup(w){const m=ye();return(q,M)=>a(m).hasPermission(["view task","view poll"])?(t(),s("div",I_,[e("div",q_,[e("div",T_,[se(A_)]),e("div",P_,[se(xu)])])])):(t(),s("div",F_,E_))}});const U_={key:0,class:"container-fluid"},j_={key:0,class:"container-fluid"},L_={class:"py-6"},V_={class:"flex items-center"},O_={class:"lg:inline-flex p-3 mr-4rounded-lg custom-size"},N_={class:"calendar-icon w-full flex flex-col items-center justify-center mt-1 calendaheight"},B_={class:"month customonth"},H_={class:"day font-medium customday"},K_={class:"year font-medium customyear"},Y_={class:""},z_={class:"header-pretitle text-xs mb-1"},G_=e("i",{class:"fas fa-chevron-left fa-xs"},null,-1),Q_={class:"flex items-center space-x-4"},W_={class:"header-title leading-10 mb-2 h6 lg:mb-0 text-blue-primary font-bold"},Z_=e("button",{class:"!hidden lg:!flex text-muted btn btn-icon","data-bs-toggle":"tooltip",title:"","data-copy-btn":"","data-copy-text":"https://app.boardable.com/felix-1/meetings/59bfaf-123456","aria-label":"Copy meeting link","data-bs-original-title":"Copy meeting link"},[e("i",{class:"fas fa-link"})],-1),J_={class:"ml-auto flex self-end"},X_=e("div",{class:"dropdown"},[e("a",{class:"nav-link",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[e("i",{class:"fas fa-ellipsis-v"})]),e("div",{class:"dropdown-menu --73","aria-labelledby":"navbarDropdown",style:{left:"-73px !important"}},[e("a",{class:"dropdown-item",href:"#"},"Re-send meeting invite"),e("a",{class:"dropdown-item",href:"#"},"Create Follow Up Meeting"),e("div",{class:"dropdown-divider"}),e("a",{class:"dropdown-item",href:"#"},"Delete Meeting")])],-1),em={class:"lg:flex mr-2"},tm=e("div",{class:"flex justify-center btn-sm"},null,-1),sm={class:"card-outline card-outline-tabs"},am={class:"card-header p-0 border-bottom-0"},nm={class:"nav nav-tabs",id:"custom-tabs-four-tab",role:"tablist"},om=["onClick"],im={class:"card-body"},lm={class:"tab-content",id:"custom-tabs-four-tabContent"},dm=["id"],rm={class:"flex justify-center col-md-6"},cm={method:"dialog",class:"modal-box rounded-xl"},um=e("h3",{class:"font-bold text-lg justify-center flex"}," Take Minutes ",-1),_m=e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1),mm={class:"w-full mt-6 p-2"},pm={class:"font-thin text-sm flex flex-col items-center gap-6"},hm={class:"w-full rounded-xl mx-auto p-1 custom-modal"},vm=e("h3",{class:"text-center text-base font-bold text-primary"}," How would you like to start? ",-1),bm={class:"flex justify-center space-x-4 py-6"},gm=e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-white rounded-full shadow w-11 h-11"},[e("i",{class:"fa fa-list"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From Scratch")],-1),fm=e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-white rounded-full shadow w-11 h-11"},[e("i",{class:"far fa-file"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From the Agenda")],-1),ym={key:1,class:"container-fluid"},xm=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),$m=[xm],Bm=ge({__name:"MeetingsDetails",setup(w){const m=Ce(),q=Ze(),M=ye(),F=h("home"),k=h(""),S=[{id:"home",name:"Meeting Details",component:rr,permissions:["view meeting"]},{id:"agenda",name:"Agenda",component:sn,permissions:["view agenda"]},{id:"minutes",name:"Minutes",component:ho,permissions:["view minutes"]},{id:"documents",name:"Documents",component:qd,permissions:["view documents"]},{id:"tasks",name:"Task & Polls",component:R_,permissions:["view task","view poll"]},{id:"members",name:"Members",component:Wr,permissions:["view meeting memberships"]},{id:"conflict-of-interest",name:"Conflict of Interest",component:Gi,permissions:["view conflict forms"]},{id:"attendance",name:"Attendance",component:ni,permissions:["view attendances"]}],D=de(()=>S.filter(G=>G.permissions?G.permissions.every(U=>M.hasPermission([U])):!0)),f=l(G=>{k.value=F.value,F.value=G},"setActiveTab"),z=l(()=>{k.value==="agenda"&&(f("agenda"),window.dispatchEvent(new CustomEvent("refetchMemberships")))},"handleMembershipsUpdated");Et(()=>{m.query.previousTab&&(k.value=m.query.previousTab),m.query.currentTab&&(F.value=m.query.currentTab)});function C(){q.push({name:"BoardDetails",params:{boardId:y}})}l(C,"goBack");const y=m.params.boardId,$=m.params.meetingId,I=m.params.scheduleId,T=h(),B=h(null),ae=qe(),ee=h("create"),oe=be({id:b().required(),rsvp_status:b().nullable(),attendance_status:b().nullable()}),{handleSubmit:ne,setErrors:ue,setFieldValue:P,values:O}=Te({validationSchema:oe,initialValues:{id:"",rsvp_status:"",attendance_status:""}});ne(async(G,{resetForm:U})=>{try{const H={id:G.id,rsvp_status:G.rsvp_status,location:G.location,attendance_status:G.attendance_status,meeting_id:G.meeting_id,membership_id:G.membership_id,membership:G.membership,meeting:G.meeting};ee.value==="create"?await kt(H,$):ee.value==="rsvp"?await Mt(H,H.id):ee.value==="attendance"&&await Ct(H,H.id),await M.updateProfile(),window.dispatchEvent(new CustomEvent("meetingUpdated",{detail:{meetingId:$}})),_()}catch(H){H instanceof Ae?ue(H.messages):ae(H)}});const _=l(()=>{ee.value="create",P("id",""),P("rsvp_status",""),P("attendance_status","")},"reset");h([]);const E=l(()=>{q.push({name:"BoardMeetingMinutes",params:{boardId:y,meetingId:$,scheduleId:I},query:{defaultMinutes:"true"}})},"openMinuteTemplateSelectionModal");return we(async()=>{try{const U=(await yt($)).data;T.value=U}catch(G){console.error("Error fetching meeting data:",G)}}),(G,U)=>{var K,c,ie,X,_e,te;const H=dt("router-link");return a(M).hasPermission(["view meeting"])?(t(),s("div",U_,[T.value?(t(),s("div",j_,[e("div",L_,[e("div",V_,[e("div",O_,[e("div",N_,[e("div",B_,o(a(Kt)((c=(K=T.value)==null?void 0:K.schedules[0])==null?void 0:c.date)),1),e("div",H_,[e("span",null,o(a(Yt)((X=(ie=T.value)==null?void 0:ie.schedules[0])==null?void 0:X.date)),1)]),e("div",K_,[e("span",null,o(a(zt)((te=(_e=T.value)==null?void 0:_e.schedules[0])==null?void 0:te.date)),1)])])]),e("div",Y_,[e("p",z_,[e("a",{href:"",onClick:U[0]||(U[0]=j(le=>C(),["prevent"])),class:"mb-2 h6 lg:mb-0 text-blue-primary font-bold"},[G_,Y(" Meetings ")])]),e("div",Q_,[e("h1",W_,o(T.value.title),1),Z_])]),e("div",J_,[X_,e("div",em,[a(M).hasPermission(["create minutes","edit minutes"])?(t(),s("button",{key:0,class:"btn btn-secondary",onClick:U[1]||(U[1]=j(le=>E(),["prevent"]))}," Minutes ")):g("",!0)]),tm])]),e("div",sm,[e("div",am,[e("ul",nm,[(t(!0),s(W,null,J(D.value,le=>(t(),s("li",{class:"nav-item",key:le.id},[e("a",{class:re(["nav-link",{active:F.value===le.id}]),onClick:pe=>f(le.id)},o(le.name),11,om)]))),128))])]),e("div",im,[e("div",lm,[(t(!0),s(W,null,J(D.value,le=>(t(),s("div",{key:le.id,class:re(["tab-pane fade",{"show active":F.value===le.id}]),id:le.id,role:"tabpanel"},[(t(),Qe(Rt(le.component),{onChangeTab:f,onMembershipsUpdated:z},null,32))],10,dm))),128))])])])]),e("div",rm,[e("dialog",{id:"minutetemplateselectionmodal",class:"modal",ref_key:"MinuteTemplateSelectionmodal",ref:B},[e("form",cm,[um,_m,e("div",mm,[e("div",pm,[e("form",hm,[vm,e("div",bm,[se(H,{to:{name:"BoardMeetingMinutes",params:{boardId:a(y),meetingId:a($)},query:{defaultMinutes:"false"}},class:"btn btn-secondary h-auto !p-0 p-0 mb-0 card flex-1"},{default:Ye(()=>[gm]),_:1},8,["to"]),se(H,{to:{name:"BoardMeetingMinutes",params:{boardId:a(y),meetingId:a($)},query:{defaultMinutes:"true"}},class:"btn btn-secondary h-auto !p-0 p-0 mb-0 card flex-1"},{default:Ye(()=>[fm]),_:1},8,["to"])])])])])])],512)])])):g("",!0)])):(t(),s("div",ym,$m))}}});export{Bm as default};
