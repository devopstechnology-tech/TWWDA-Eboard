var ne=Object.defineProperty;var l=(f,h)=>ne(f,"name",{value:h,configurable:!0});import{d as se,r as a,j as oe,P as N,C as w,V as ae,b as ie,o as m,c as p,e as t,U as E,F as j,R as le,t as _,h as z,g as G,T as F,f as r,l as re,w as de,u as I,W as ce,X as ue,_ as me}from"./main-6dda9e4d.js";import{u as pe,c as fe,a as i,b as _e}from"./useUnexpectedErrorHandler-26b06961.js";import{u as ge,a as he,F as K,c as be,e as ve}from"./FormSelect-b27300f4.js";import{_ as O}from"./FormDateTimeInput.vue_vue_type_style_index_0_lang-ad2debca.js";import{F as M}from"./FormInput-a47218b6.js";import{F as ye}from"./FormTextBox-64a6d3af.js";import{G as we}from"./Breadcrumb-6e28567b.js";import{u as Me}from"./useQuery-93a34df9.js";import"./index-c370e191.js";import"./useQueryClient-918ce480.js";const g=l(f=>(ce("data-v-4e28a0ff"),f=f(),ue(),f),"_withScopeId"),xe={class:"row"},ke={class:"col-md-12"},Ce={class:"card card-widget"},Te={class:"card-header"},Se=g(()=>t("h1",{class:"h2 mb-2 lg:mb-0"},"Meetings",-1)),qe={class:"card-tools"},Ee={key:0,class:"card-body"},ze={key:0,class:"products-list product-list-in-card pl-2 pr-2"},Fe=g(()=>t("div",{class:"product-img"},[t("div",{class:"calendar-icon w-10 h-10 flex flex-col items-center justify-center mt-1"},[t("div",{class:"month"},"Mar"),t("div",{class:"day font-medium"},[t("span",null,"27")])])],-1)),Ie={class:"product-info"},De={href:"javascript:void(0)",class:"product-title"},Le={key:0,class:"badge float-right bg-white"},Pe=["onClick"],Be={class:"badge float-right bg-white"},Re=g(()=>t("i",{class:"far fa-eye"},null,-1)),Ve={class:"badge float-right bg-white"},Ue=["onClick"],$e=g(()=>t("i",{class:"far fa-edit"},null,-1)),Ne=[$e],je={class:"product-description"},Ge={key:1},Ke={class:"flex justify-center col-md-6"},Oe={method:"dialog",class:"modal-box rounded-xl"},He={class:"font-bold text-lg justify-center flex"},Je=g(()=>t("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"âœ•",-1)),Qe={class:"w-full mt-6 p-2"},We={class:"font-thin text-sm flex flex-col items-center gap-6"},Xe={class:"grid grid-cols-3 gap-2"},Ze={type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},Ae=se({__name:"Meetings",setup(f){const h=a(!1),b=a("create");a("");const x=a(null),k=a(null),H=pe();a(1),a(15),a(),oe();const D=a(""),L=a(""),C=a(""),v=a(""),J=fe({title:i().required(),conference:i().required(),location:i().required(),link:i().nullable(),description:i().required(),status:i().required(),board_id:i().nullable(),committee_id:i().nullable(),modeltype:i().required(),type:i().required(),timezone:i().required(),start_time:i().required(),end_time:i().required()}),{handleSubmit:Q,setErrors:P,setFieldValue:n,values:Ye}=_e({validationSchema:J,initialValues:{title:"",conference:"",location:"",description:"",link:null,board_id:null,committee_id:null,modeltype:"",status:"unpublished",type:"",timezone:"",start_time:"",end_time:""}});a(new Date);const W=l(e=>{var o,c,s,u,$;x.value=e,e.meetingable.type==="Board"?(C.value="board",D.value=e.meetingable.details.id,n("board_id",e.meetingable.details.id),n("modeltype",e.meetingable.type)):e.meetingable.type==="Committee"&&(L.value=e.meetingable.details.id,C.value="committee",n("committee_id",e.meetingable.details.id),n("modeltype",e.meetingable.type)),n("title",e.title),n("conference",e.conference),n("location",e.location),n("description",e.description),e.conference==="Custom 3rd party Links"&&(B(e.conference),n("link",e.link)),n("type",(o=e.schedule)==null?void 0:o.type),n("timezone",(c=e.schedule)==null?void 0:c.timezone),n("start_time",(s=e.schedule)==null?void 0:s.start_time),n("end_time",(u=e.schedule)==null?void 0:u.end_time),console.log(v.value,e,e.conference==="Custom 3rd party Links"),b.value="edit",h.value=!0,($=k.value)==null||$.showModal()},"openEditMeetingModal"),X=[{name:"In Person",value:"No Vedio (Meeting in Person)"},{name:"3rd party",value:"Custom 3rd party Links"}],Z=[{name:"Single meeting",value:"Single meeting)"},{name:"Recurring meeting",value:"Recurring meeting"},{name:"Find a meeting date",value:"Find a meeting date"}],B=l(e=>{v.value=e},"handleConferenceTypeChange");N(async()=>{}),w(()=>R);const A=w(()=>X),Y=w(()=>Z),R=l(()=>Me({queryKey:["getMeetingsKey"],queryFn:async()=>(await ve({paginate:"false"})).data}),"getMeetings"),V=Q(async e=>{var o,c,s;console.log("values",e),console.log("setErrors",P);try{b.value==="create"?await ge(e):(o=x.value)!=null&&o.id&&await he(e,(c=x.value)==null?void 0:c.id),await T(),ee(),h.value=!1,(s=k.value)==null||s.close()}catch(u){u instanceof ae?P(u.messages):H(u)}});function U(e){const o=Intl.DateTimeFormat().resolvedOptions().timeZone;n("timezone",o)}l(U,"handleTimezoneUpdate");function ee(){D.value="",L.value="",C.value="",n("board_id",null),n("modeltype",""),n("committee_id",null),n("title",""),n("conference",""),n("location",""),n("description",""),n("link",null),n("type",""),n("timezone",""),n("start_time",""),n("end_time","")}l(ee,"reseting");const{isLoading:et,data:y,refetch:T}=R(),d=a("published"),S=w(()=>{if(!y.value)return[];if(console.log(JSON.stringify(y.value,null,2)),d.value==="past"){const e=new Date;return y.value.filter(o=>new Date(o.created_at)<e)}else return y.value.filter(e=>e.status.toLowerCase()===d.value)}),q=l(e=>{d.value=e},"filterMeetings"),te=l(async e=>{await be(e),await T()},"onPublish");return N(async()=>{await T()}),(e,o)=>{const c=ie("router-link");return m(),p(j,null,[t("div",xe,[t("div",ke,[t("div",Ce,[t("div",Te,[Se,t("div",qe,[t("button",{type:"button",class:E(["btn btn-tool",{"btn-info":d.value==="published"}]),onClick:o[0]||(o[0]=s=>q("published"))}," Published ",2),t("button",{type:"button",class:E(["btn btn-tool",{"btn-info":d.value==="unpublished"}]),onClick:o[1]||(o[1]=s=>q("unpublished"))}," UnPublished ",2),t("button",{type:"button",class:E(["btn btn-tool",{"btn-info":d.value==="past"}]),onClick:o[2]||(o[2]=s=>q("past"))}," Past ",2)])]),S.value?(m(),p("div",Ee,[S.value.length>0?(m(),p("ul",ze,[(m(!0),p(j,null,le(S.value,s=>(m(),p("li",{class:"item",key:s.id},[Fe,t("div",Ie,[t("a",De,[G(_(s.title)+" ",1),d.value==="unpublished"?(m(),p("span",Le,[t("a",{href:"",onClick:F(u=>te(s.id),["prevent"]),class:"text-blue-500 hover:text-blue-700 transition duration-150 ease-in-out"}," Publish ",8,Pe)])):z("",!0),t("span",Be,[r(c,{to:{name:"BoardMeetingDetails",params:{boardId:s==null?void 0:s.meetingable.details.id,meetingId:s.id}},class:"text-green-500 hover:text-green-700 transition duration-150 ease-in-out"},{default:de(()=>[Re]),_:2},1032,["to"])]),t("span",Ve,[t("a",{href:"",onClick:F(u=>W(s),["prevent"]),class:"text-blue-500 hover:text-blue-700 transition duration-150 ease-in-out"},Ne,8,Ue)])]),t("span",je,_(I(we)(s.description,80)),1)])]))),128))])):(m(),p("div",Ge," No meetings found for "+_(d.value),1))])):z("",!0)])])]),t("div",Ke,[t("dialog",{id:"meetingmodal",class:"modal",ref_key:"MeetingModal",ref:k},[t("form",Oe,[t("h3",He,_(b.value=="create"?"Create Meeting":"Edit Meeting"),1),G(" "+_(v.value)+" ",1),Je,t("div",Qe,[t("div",We,[t("form",{novalidate:"",onSubmit:o[3]||(o[3]=F((...s)=>I(V)&&I(V)(...s),["prevent"])),class:"w-full rounded-xl mx-auto p-1"},[t("div",Xe,[r(M,{labeled:!0,label:"Meeting Title",name:"title",class:"w-full text-sm text-white tracking-wide",placeholder:"Enter Meeting Title",type:"text"}),r(K,{labeled:!0,name:"conference",label:"Select Conference Type",placeholder:"Select Conference Type",options:A.value,onSelectedItem:B},null,8,["options"]),v.value==="Custom 3rd party Links"?(m(),re(M,{key:0,labeled:!0,label:"Meeting Link",name:"link",class:"w-full text-sm text-white tracking-wide",placeholder:"Enter Third Party Link'",type:"text"})):z("",!0),r(M,{labeled:!0,label:"Meeting Location",name:"location",class:"w-full text-sm text-white tracking-wide",placeholder:"e.g 'Conference Room 6'",type:"text"}),r(ye,{labeled:!0,label:"Meeting Description",name:"description",class:"col-span-3",placeholder:"Enter Meeting Description",rows:2}),r(K,{labeled:!0,name:"type",label:"Meeting Schedule",placeholder:"Select Meeting Schedule",options:Y.value},null,8,["options"]),r(M,{labeled:!0,label:"Meeting Timezone",name:"timezone",class:"w-full text-sm text-white tracking-wide",placeholder:"Enter Meeting Timezone",type:"text"}),r(O,{label:"Meeting Start Time",name:"start_time",flow:["day"],placeholder:"Select Start Time",onUpdateTimezone:U}),r(O,{label:"Meeting End Time",name:"end_time",flow:["day"],placeholder:"Enter End Time",onUpdateTimezone:U})]),t("button",Ze,_(b.value=="create"?"Create Meeting":"Edit Meeting"),1)],32)])])])],512)])],64)}}});const mt=me(Ae,[["__scopeId","data-v-4e28a0ff"]]);export{mt as default};
