var dt=Object.defineProperty;var r=(U,f)=>dt(U,"name",{value:f,configurable:!0});import{d as ge,i as ke,j as qe,r as v,C as Z,P as $e,H as Xe,V as Be,b as Je,u as a,o as t,c as o,e,F as z,R as Q,g as O,t as c,h as _,T as B,Y as rt,Z as ct,f as A,l as xe,w as De,W as Oe,X as Ne,_ as Ae,U as H,$ as et,a0 as ut,k as tt,a1 as He,a2 as _t}from"./main-451c20d4.js";import{f as mt}from"./useBoardRequest-61ad7599.js";import{d as pt,e as ht,g as vt,f as Ye,h as Ve,j as bt,k as ft,m as Se,n as gt,o as yt,p as xt,q as $t,t as wt,v as We,F as Ze,w as kt,x as Mt,l as St}from"./Breadcrumb-ecf3abcd.js";import{u as Ee,c as me,a as m,d as st,b as Ue,f as Ie,e as Ce}from"./useUnexpectedErrorHandler-2f1b2730.js";import{u as Ct,a as Pt,b as Tt,c as qt,d as Dt,v as Pe,e as Ft,f as It,F as je,g as Bt,h as At,i as Et,j as Ut,k as Rt,l as Lt,m as Ke,n as Vt}from"./FormDynamicInput-57fd3f34.js";import{F as Te}from"./FormInput-4bdc1ca0.js";import{F as jt}from"./FormUpload-637793d3.js";import{u as we}from"./useQuery-64b3e593.js";import{_ as Fe}from"./FormDateTimeInput.vue_vue_type_style_index_0_lang-abff0e84.js";import{F as ze}from"./FormQuillEditor-e4b30354.js";import{F as Ot}from"./FormRadioInput-35542934.js";import{u as Nt}from"./useStaffRequest-4d0920bc.js";import{u as Ht,a as Kt,b as zt}from"./usePollRequest-ac4b87eb.js";import{u as Gt,a as Qt,b as Yt}from"./useTaskRequest-e083a7cb.js";import"./index-053adef9.js";import"./folder_routes-48149054.js";import"./useQueryClient-78663db9.js";import"./staff_routes-45a2bbdb.js";const X=r(U=>(Oe("data-v-455161d6"),U=U(),Ne(),U),"_withScopeId$3"),Wt={key:0},Zt={class:"card"},Xt={class:"card-header p-3"},Jt={class:"row"},es={class:"col-12"},ts={class:"row"},ss={class:"col-lg-9 col-md-8 col-12 mt-2"},os={"aria-label":"Breadcrumbs",class:"text-sm overflow-hidden"},as={class:"breadcrumb mb-0 bg-warning"},ns=["onClick"],ls={class:"col-lg-3 col-md-4 col-12"},is={class:"row"},ds={class:"col-md-6 col-12 mt-2"},rs={class:"dropdown"},cs={class:"nav-link dropdown-toggle btn btn-secondary btn-block",href:"#",id:"navbarDropdown",type:"button",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},us=X(()=>e("span",{class:"text-warning mr-1"},"sort by:",-1)),_s={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},ms=["onClick"],ps={class:"col-md-6 col-12 mt-2"},hs={key:0,class:"dropdown"},vs={key:0,class:"nav-link dropdown-toggle btn btn-primary btn-block",href:"#",id:"navbarDropdown",type:"button",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},bs=X(()=>e("i",{class:"fas fa-plus mr-2"},null,-1)),fs={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},gs=X(()=>e("i",{class:"fas fa-plus"},null,-1)),ys=X(()=>e("i",{class:"fas fa-file-upload"},null,-1)),xs={key:0,class:"col-12 mt-3"},$s={class:"input-group input-group-lg"},ws=X(()=>e("div",{class:"input-group-append"},[e("button",{type:"submit",class:"btn btn-lg btn-default"},[e("i",{class:"fa fa-search"})])],-1)),ks={class:"card-body py-0 px-4 min-h-[300px] relative -top-px z-10"},Ms={class:"table-responsive"},Ss={class:"table mb-0"},Cs={class:"w-28"},Ps={key:0},Ts=["onClick"],qs=["src"],Ds={key:1},Fs=["src"],Is={key:0},Bs={class:"font-weight-bold text-primary text-truncate"},As={class:"text-sm font-weight-bold text-primary"},Es=X(()=>e("span",{class:"text-black"},"Folders",-1)),Us={class:"text-sm font-weight-bold text-primary"},Rs=X(()=>e("span",{class:"text-black"},"Files",-1)),Ls={key:1},Vs={key:0},js={class:"font-weight-bold text-primary text-truncate"},Os={class:"text-sm font-weight-bold text-primary"},Ns={class:"text-black"},Hs={class:"w-28"},Ks={key:0},zs={class:"text-xs text-primary text-truncate"},Gs={key:1},Qs={key:0},Ys={class:"text-xs text-primary text-truncate"},Ws={class:"w-20 text-center"},Zs={class:"flex justify-end space-x-2"},Xs={key:0},Js=["onClick"],eo=X(()=>e("i",{class:"far fa-edit"},null,-1)),to=[eo],so={key:1},oo=["onClick"],ao=X(()=>e("i",{class:"far fa-edit"},null,-1)),no=[ao],lo=X(()=>e("i",{class:"far fa-eye"},null,-1)),io={class:"flex justify-center col-md-6"},ro={method:"dialog",class:"modal-box rounded-xl"},co={class:"font-bold text-lg justify-center flex"},uo=X(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),_o={class:"w-full mt-6 p-2"},mo={class:"font-thin text-sm flex flex-col items-center gap-6"},po={class:"row"},ho={key:0,class:"row mt-2 ml-2"},vo={key:0,class:"row mt-2 ml-2"},bo={class:"col-md-6"},fo=["src"],go={class:"col-md-6"},yo=X(()=>e("strong",null,"File Name:",-1)),xo={class:"text-bold text-primary"},$o=X(()=>e("strong",null,"File Size:",-1)),wo={class:"text-bold text-primary"},ko=X(()=>e("strong",null,"Type:",-1)),Mo={class:"text-bold text-primary"},So=X(()=>e("strong",null,"Last Modified: ",-1)),Co={class:"text-bold text-primary"},Po={type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},To={key:1},qo=X(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),Do=[qo],Fo=ge({__name:"Documents",setup(U){const f=ke(),E=Ee(),k=qe(),D=v("create"),h=v("folder"),R=v("name-asc"),M=v(""),F=v([]),C=k.params.boardId,$=v([{id:"1",name:"Folders"}]),L=v(null),ae=v(!1),N=v(null),b=v(null),P=[{id:"name-asc",name:"Name (A-Z)"},{id:"name-desc",name:"Name (Z-A)"},{id:"date-newest",name:"Newest to oldest"},{id:"date-oldest",name:"Oldest to newest"}];function de(n){R.value=n}r(de,"applySort");const ee=Z(()=>{const n=P.find(l=>l.id===R.value);return n?n.name:"Unknown"});function re(n){console.log("folder",n),$.value.push({id:n.id,name:n.name})}r(re,"addToNavigationPath");function he(n){const l=$.value.slice(0,n+1);if(l.length!==$.value.length){$.value=l;const d=q($.value.at(-1).id,ue.value);F.value=d?d.children||[]:[]}}r(he,"navigateTo");function q(n,l){if(!Array.isArray(l))return null;for(const d of l){if(d.id===n)return d;if(d.children&&Array.isArray(d.children)){const s=q(n,d.children);if(s)return s}}return null}r(q,"findFolderById");function ce(n){$.value.at(-1).id!==n.id&&(re(n),console.log("folder",n.children),F.value=n.children||[])}r(ce,"openFolder");function y(n){let l=0,d=0;return n.children&&n.children.length>0&&n.children.forEach(s=>{s.type==="folder"?l++:s.type==="file"&&d++}),{folderCount:l,fileCount:d}}r(y,"countChildrenTypes");const W=r(()=>we({queryKey:["getBoardFoldersKey",C],queryFn:async()=>(await Dt(C,{paginate:"false"})).data}),"getBoardFolders"),{isLoading:ve,data:ue,refetch:te}=W();$e(async()=>{await te()}),Xe(ue,n=>{var l;if(n&&n.length>0)if($.value.length===1&&(n[0],$.value[0].id="1",$.value[0].name="Documents"),$.value.length===1)F.value=n;else{const d=q((l=$.value.at(-1))==null?void 0:l.id,n);F.value=d?d.children||[]:[]}},{immediate:!0});const pe=Z(()=>M.value?se.value.filter(n=>n.name.toLowerCase().includes(M.value.toLowerCase())):se.value),se=Z(()=>{const n=$.value.length>1?F.value:ue.value;return Array.isArray(n)?[...n].sort((l,d)=>{switch(R.value){case"name-asc":return l.name.localeCompare(d.name);case"name-desc":return d.name.localeCompare(l.name);case"date-newest":return new Date(d.created_at).getTime()-new Date(l.created_at).getTime();case"date-oldest":return new Date(l.created_at).getTime()-new Date(d.created_at).getTime();default:return 0}}):[]}),be=me({name:m().required(),meeting_id:m().required(),board_id:m().required(),folder_id:m().nullable(),parent_id:m(),type:m().oneOf(["folder","file"]).required(),fileupload:st().nullable()}),{handleSubmit:ne,setErrors:_e,setFieldValue:p,values:V}=Ue({validationSchema:be,initialValues:{name:"",meeting_id:C,board_id:C,folder_id:null,parent_id:"",type:"",fileupload:null}}),w=r(n=>{var s;const l=n.target;if(!((s=l.files)!=null&&s.length))return;const d=l.files[0];p("name",d.name),p("type","file")},"updateName"),j=r(n=>{var d;S(),D.value="create",h.value=n,ae.value=!0,(d=b.value)==null||d.showModal(),p("type",n);const l=$.value.at(-1);p("parent_id",l.id),console.log("parent",l)},"openCreateFolderModal"),le=ne(async(n,{resetForm:l})=>{var d;try{if(D.value==="create")if(h.value==="folder"){const s={children:[],created_at:null,icon:null,id:null,meeting_id:n.meeting_id,board_id:n.board_id,folder_id:null,name:n.name,parent_id:n.parent_id.toString(),type:n.type,fileupload:null,media:[]};await Ct(s,C)}else{const s={children:[],created_at:null,icon:null,id:null,meeting_id:n.meeting_id,board_id:n.board_id,folder_id:null,name:n.name,parent_id:n.parent_id.toString(),type:n.type,fileupload:n.fileupload,media:[]};await Pt(s,C)}else if(h.value==="folder"){const s={children:[],created_at:null,folder_id:null,icon:null,id:null,meeting_id:n.meeting_id,board_id:n.board_id,name:n.name,parent_id:n.parent_id.toString(),type:n.type,fileupload:null,media:[]},T=N.value?N.value.toString():null;s.folder_id=T,await Tt(s,C,s.folder_id)}else{const s={children:[],created_at:null,folder_id:null,icon:null,id:null,meeting_id:n.meeting_id,board_id:n.board_id,name:n.name,parent_id:n.parent_id.toString(),type:n.type,fileupload:n.fileupload,media:[]},T=N.value?N.value.toString():null;s.folder_id=T,await qt(s,C,s.folder_id)}await te(),S(),(d=b.value)==null||d.close()}catch(s){s instanceof Be?_e(s.messages):E(s)}}),u=r((n,l)=>{var d;S(),L.value=n,N.value=n.id.toString(),D.value="edit",h.value=l,ae.value=!0,p("name",n.name),p("folder_id",n.id),p("type",l),l==="file"&&(p("fileupload",n.name),yt(n.media[0])),p("parent_id",n.id),console.log("folder.media",n.name),(d=b.value)==null||d.showModal()},"openEditFolderModal"),S=r(()=>{p("name",""),p("folder_id",null),p("fileupload",""),p("parent_id",""),p("type",""),h.value="folder",D.value="create",ae.value=!1,L.value=null,N.value=null,pt()},"resetFolder");return(n,l)=>{const d=Je("router-link");return a(f).hasPermission(["view folders"])?(t(),o("div",Wt,[e("div",Zt,[e("div",Xt,[e("div",Jt,[e("div",es,[e("div",ts,[e("div",ss,[e("nav",os,[e("ol",as,[(t(!0),o(z,null,Q($.value,(s,T)=>(t(),o("li",{key:s.id,class:"breadcrumb-item"},[e("a",{href:"#",class:"text-gray-800 font-medium",onClick:B(g=>he(T),["prevent"])},c(s.name),9,ns)]))),128))])])]),e("div",ls,[e("div",is,[e("div",ds,[e("div",rs,[e("button",cs,[us,O(c(ee.value),1)]),e("div",_s,[(t(),o(z,null,Q(P,s=>e("a",{key:s.id,href:"#",class:"dropdown-item",onClick:B(T=>de(s.id),["prevent"])},c(s.name),9,ms)),64))])])]),e("div",ps,[$.value.length>1?(t(),o("div",hs,[a(f).hasPermission(["create folders","upload documents","create dropzone"])?(t(),o("button",vs,[bs,O(" New ")])):_("",!0),e("div",fs,[a(f).hasPermission(["create folders","create dropzone"])?(t(),o("a",{key:0,href:"#",onClick:l[0]||(l[0]=B(s=>j("folder"),["prevent"])),class:"dropdown-item"},[gs,O(" New folder ")])):_("",!0),a(f).hasPermission(["upload documents"])?(t(),o("a",{key:1,href:"#",onClick:l[1]||(l[1]=B(s=>j("file"),["prevent"])),class:"dropdown-item"},[ys,O(" Upload a file ")])):_("",!0)])])):_("",!0)])])])])]),a(f).hasPermission(["search documents"])?(t(),o("div",xs,[e("div",$s,[rt(e("input",{type:"search",class:"form-control form-control-lg",placeholder:"Type your keywords here","onUpdate:modelValue":l[2]||(l[2]=s=>M.value=s)},null,512),[[ct,M.value]]),ws])])):_("",!0)])]),e("div",ks,[e("div",Ms,[e("table",Ss,[e("tbody",null,[(t(!0),o(z,null,Q(pe.value,s=>{var T,g,J,K;return t(),o("tr",{key:s.id,class:"group bg-white hover:bg-gray-100 cursor-pointer"},[e("td",Cs,[s.type==="folder"?(t(),o("div",Ps,[e("div",{onClick:B(oe=>ce(s),["prevent"])},[e("img",{src:a(ht)(s.icon),class:"img-fluid",alt:"Folder Icon"},null,8,qs)],8,Ts)])):(t(),o("div",Ds,[a(f).hasPermission(["view documents"])?(t(),xe(d,{key:0,to:{name:"BoardMediaDetails",params:{boardId:a(C),folderId:s.id,mediaId:(T=s==null?void 0:s.media[0])==null?void 0:T.uuid}},class:"d-block text-success hover:text-green-700 transition ease-in-out"},{default:De(()=>{var oe;return[e("img",{src:a(vt)((oe=s==null?void 0:s.media[0])==null?void 0:oe.mime_type),class:"img-fluid",alt:"File Icon"},null,8,Fs)]}),_:2},1032,["to"])):_("",!0)]))]),e("td",null,[s.type==="folder"?(t(),o("div",Is,[e("p",Bs,c(s.name),1),e("p",As,[O(c(y(s).folderCount)+": ",1),Es]),e("p",Us,[O(c(y(s).fileCount)+": ",1),Rs])])):(t(),o("div",Ls,[a(f).hasPermission(["view documents"])?(t(),o("div",Vs,[e("p",js,c((g=s==null?void 0:s.media[0])==null?void 0:g.file_name),1),e("p",Os,[O(" Size: "),e("span",Ns,c(a(Ye)((J=s==null?void 0:s.media[0])==null?void 0:J.size)),1)])])):_("",!0)]))]),e("td",Hs,[s.type==="folder"?(t(),o("div",Ks,[e("p",zs,c(a(Ve)(s.created_at,"")),1)])):(t(),o("div",Gs,[a(f).hasPermission(["view documents"])?(t(),o("div",Qs,[e("p",Ys,c(a(Ve)(s.created_at,"")),1)])):_("",!0)]))]),e("td",Ws,[e("div",Zs,[s.type==="folder"?(t(),o("div",Xs,[a(f).hasPermission(["edit folders"])?(t(),o("a",{key:0,href:"#",onClick:B(oe=>u(s,"folder"),["prevent"]),class:"text-warning hover:text-blue-700 transition ease-in-out"},to,8,Js)):_("",!0)])):(t(),o("div",so,[a(f).hasPermission(["edit documents"])?(t(),o("a",{key:0,href:"#",onClick:B(oe=>u(s,"file"),["prevent"]),class:"text-warning hover:text-blue-700 transition ease-in-out"},no,8,oo)):_("",!0),a(f).hasPermission(["view documents"])&&s.type==="file"?(t(),xe(d,{key:1,to:{name:"BoardMediaDetails",params:{boardId:a(C),folderId:s.id,mediaId:(K=s==null?void 0:s.media[0])==null?void 0:K.uuid}},class:"text-success hover:text-green-700 transition ease-in-out"},{default:De(()=>[lo]),_:2},1032,["to"])):_("",!0)]))])])])}),128))])])])])]),e("div",io,[e("dialog",{id:"foldermodal",class:"modal",ref_key:"FolderModal",ref:b},[e("form",ro,[e("h3",co,c(D.value==="create"?h.value==="folder"?"Create Folder":"Upload File":h.value==="folder"?"Update Folder":"Update File"),1),uo,e("div",_o,[e("div",mo,[e("form",{novalidate:"",onSubmit:l[4]||(l[4]=B((...s)=>a(le)&&a(le)(...s),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",po,[A(Te,{labeled:!0,label:h.value==="folder"?"Folder name":"Upload File name",name:"name",class:"col-md-12 w-full text-sm text-white tracking-wide",placeholder:h.value==="folder"?"Folder name":"Upload File name",type:"text"},null,8,["label","placeholder"]),h.value==="file"?(t(),o("div",ho,[A(jt,{labeled:!0,label:"Upload Cover Image for the Board",name:"fileupload",class:"w-full text-sm text-white tracking-wide col-md-12",placeholder:"Enter Cover Image of the Board",type:"file",accept:a(bt).join(", "),onChange:l[3]||(l[3]=s=>{a(ft)(s),w(s)})},null,8,["accept"]),a(V).fileupload?(t(),o("div",vo,[e("div",bo,[a(Se).previewUrl?(t(),o("img",{key:0,src:a(Se).previewUrl,alt:"File Preview",class:"file_attachment"},null,8,fo)):_("",!0)]),e("div",go,[e("p",null,[yo,e("span",xo,c(a(Se).name),1)]),e("p",null,[$o,e("span",wo,c(a(Ye)(a(Se).size)),1)]),e("p",null,[ko,e("span",Mo,c(a(Se).type),1)]),e("p",null,[So,e("span",Co,c(a(gt)(a(Se).lastModifiedDate)),1)])])])):_("",!0)])):_("",!0)]),e("button",Po,c(D.value==="create"?h.value==="folder"?"Create Folder":"Upload File":h.value==="folder"?"Update Folder":"Update File"),1)],32)])])])],512)])])):(t(),o("div",To,Do))}}});const Io=Ae(Fo,[["__scopeId","data-v-455161d6"]]),Me=r(U=>(Oe("data-v-7113a82b"),U=U(),Ne(),U),"_withScopeId$2"),Bo={class:"row"},Ao={class:"col-md-12"},Eo={class:"card card-widget"},Uo={class:"card-header"},Ro=Me(()=>e("h1",{class:"h2 mb-2 lg:mb-0"},"Meetings",-1)),Lo={class:"card-tools"},Vo=Me(()=>e("i",{class:"far fa fa-plus mr-2"},null,-1)),jo=[Vo],Oo={key:0,class:"card-body"},No={key:0,class:"products-list product-list-in-card pl-2 pr-2"},Ho={class:"product-img meeting-custom-size mr-2"},Ko={key:0,class:"calendar-icon w-full flex flex-col items-center justify-center mt-1 calendaheight"},zo={class:"month customonth"},Go={class:"day font-medium customday"},Qo={class:"year font-medium customyear"},Yo=Me(()=>e("div",null,[e("span",{class:"text-danger font-bold ml-2 mr-2"}," Upcoming ")],-1)),Wo={class:"product-info"},Zo={class:"text-primary text-bold"},Xo={key:0,class:"badge float-right bg-white"},Jo=["onClick"],ea={class:"badge float-right bg-white"},ta=Me(()=>e("i",{class:"far fa-eye"},null,-1)),sa={class:"badge float-right bg-white"},oa=["onClick"],aa=Me(()=>e("i",{class:"far fa-edit"},null,-1)),na=[aa],la={key:1,class:"product-description"},ia=["innerHTML"],da={key:2,class:"row border-top border-bottom border-warning d-flex justify-content-between align-items-center bg-warning"},ra={class:"text-primary bg-primary font-bold ml-2 mr-2"},ca={class:"text-primary font-bold ml-2 mr-2"},ua={key:0},_a=["onClick"],ma={key:3,class:"text-bold text-red"},pa={key:4,class:"text-bold text-red"},ha={class:"text-primary font-bold ml-2 mr-2"},va={class:"text-primary font-bold ml-2 mr-2"},ba=["onClick"],fa=Me(()=>e("i",{class:"far fa-eye"},null,-1)),ga={key:1},ya={class:"flex justify-center col-md-6"},xa={method:"dialog",class:"modal-box rounded-xl"},$a={class:"font-bold text-lg justify-center flex"},wa=Me(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),ka={class:"grid grid-cols-3 md:grid-cols-3 gap-2 p-2"},Ma={class:"col-span-3"},Sa={key:0,class:"flex flex-wrap -mx-2 mt-2"},Ca={class:"w-full md:w-1/2 px-1 md:px-2"},Pa={class:"w-full md:w-1/2 px-1 md:px-2"},Ta={key:1,class:"flex flex-wrap -mx-2 mt-2"},qa={class:"w-full md:w-1/2 px-1 md:px-2"},Da={key:2,class:"flex flex-wrap -mx-2 mt-2"},Fa={key:3,class:"flex flex-wrap -mx-2 mt-2"},Ia={class:"w-full md:w-1/3 px-1 md:px-2"},Ba={class:"w-full md:w-1/3 px-1 md:px-2"},Aa={class:"w-full md:w-1/3 px-1 md:px-2"},Ea=["onClick"],Ua={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},Ra=ge({__name:"HomeDashboard",setup(U){const f=ke(),E=v(!1),k=v("create"),D=v(null),h=v(null);v(null);const R=Ee();v(1),v(15),v();const F=qe().params.boardId,C=v(""),$=me({id:m().required(),date:m().required(),start_time:m().required(),end_time:m().required(),status:m().nullable(),heldstatus:m().nullable(),meeting_id:m().nullable()}),L=me({title:m().required(),conference:m().required(),location:m().required(),link:m().nullable(),description:m().required(),status:m().required(),board_id:m().required(),type:m().required(),schedules:Ie().of($).required()}),{handleSubmit:ae,setErrors:N,setFieldValue:b,values:P}=Ue({validationSchema:L,initialValues:{title:"",conference:"",location:"",description:"",link:null,board_id:F,status:"unpublished",type:"single",schedules:[{id:Pe(),date:"",start_time:"",end_time:"",status:null,heldstatus:null,meeting_id:null}]}}),de=r(()=>{var u;te(),k.value="create",E.value=!0,(u=h.value)==null||u.showModal()},"openCreateMeetingModal"),ee=r(u=>{var n;te(),D.value=u,b("title",u.title),b("conference",u.conference),b("location",u.location),b("description",u.description),b("type",u.type),b("status",u.status),b("schedules",u.schedules);const S={id:u.nearestSchedule.id,date:u.nearestSchedule.date,start_time:u.nearestSchedule.start_time,end_time:u.nearestSchedule.end_time,status:u.nearestSchedule.status,heldstatus:u.nearestSchedule.heldstatus,meeting_id:u.nearestSchedule.meeting_id};b("schedules",[...P.schedules,S]),u.conference==="Custom 3rd party Links"&&(ce(u.conference),b("link",u.link)),console.log("values",P),k.value="edit",E.value=!0,(n=h.value)==null||n.showModal()},"openEditMeetingModal"),re=r((u,S)=>{var l;te(),D.value=u,b("title",u.title),b("conference",u.conference),b("location",u.location),b("description",u.description),b("type",u.type),b("status",u.status);const n={id:S.id,date:S.date,start_time:S.start_time,end_time:S.end_time,status:S.status,heldstatus:S.heldstatus,meeting_id:S.meeting_id};b("schedules",[n]),u.conference==="Custom 3rd party Links"&&(ce(u.conference),b("link",u.link)),console.log("values",P),k.value="schedule",E.value=!0,(l=h.value)==null||l.showModal()},"openEditScheduleMeetingModal"),he=[{name:"In Person",value:"No Vedio (Meeting in Person)"},{name:"3rd party",value:"Custom 3rd party Links"}],q=[{name:"Single",value:"single"},{name:"Find Date",value:"manual"}],ce=r(u=>{C.value=u},"handleConferenceTypeChange");$e(async()=>{}),Z(()=>ve);const y=Z(()=>he),W=Z(()=>q),ve=r(u=>we({queryKey:["getBoardMeetingsKey"],queryFn:async()=>(await At(u,{paginate:"false"})).data}),"getMeetings"),ue=ae(async u=>{var S,n,l;console.log("values",u),console.log("setErrors",N);try{k.value==="create"?await Ft(u):(S=D.value)!=null&&S.id&&await It(u,(n=D.value)==null?void 0:n.id),await _e(),te(),E.value=!1,(l=h.value)==null||l.close()}catch(d){d instanceof Be?N(d.messages):R(d)}});function te(){b("title",""),b("conference",""),b("location",""),b("description",""),b("link",null),b("type","single"),b("status","unpublished"),b("schedules",[{id:Pe(),date:"",start_time:"",end_time:"",status:null,heldstatus:null,meeting_id:null}])}r(te,"reseting");const pe=r(()=>{Array.isArray(P.schedules)||(console.error("Invalid state: values.schedules is not an array."),b("schedules",[]));const u={id:Pe(),date:"",start_time:"",end_time:"",status:null,heldstatus:null,meeting_id:null};b("schedules",[...P.schedules,u])},"addEmptySchedule"),se=r(u=>{if(P.schedules.length===1){ut({title:"Error",text:"You need at least one date to schedule.",type:"error"});return}const S=P.schedules.filter((n,l)=>l!==u);b("schedules",S)},"removeSchedule"),{isLoading:be,data:ne,refetch:_e}=ve(F),p=v("published"),V=Z(()=>{if(!ne.value)return[];const u=new Date;return ne.value.filter(n=>p.value==="past"?new Date(n.created_at)<u:n.status.toLowerCase()===p.value).map(n=>{if(n.schedules&&n.schedules.length>0){const l=[...n.schedules].sort((g,J)=>{const K=new Date(g.date.split("-").reverse().join("-")),oe=new Date(J.date.split("-").reverse().join("-"));return K.getTime()-oe.getTime()});let d=l[0],s=1/0;return l.forEach(g=>{const K=new Date(g.date.split("-").reverse().join("-")).getTime()-u.getTime();Math.abs(K)<Math.abs(s)&&(s=K,d=g)}),{...n,nearestSchedule:d,schedules:l.filter(g=>g.id!==d.id)}}else return n})}),w=r(u=>{p.value=u},"filterMeetings"),j=r(u=>{switch(u){case"scheduled":return"text-primary";case"held":return"text-success";case"cancelled":return"text-danger";case"postponed":return"text-warning";default:return""}},"getHeldStatusClass"),le=r(async u=>{await Bt(u),await _e()},"onPublish");return(u,S)=>{const n=Je("router-link");return t(),o(z,null,[e("div",Bo,[e("div",Ao,[e("div",Eo,[e("div",Uo,[Ro,e("div",Lo,[e("button",{type:"button",class:H(["btn btn-tool",{"btn-info":p.value==="published"}]),onClick:S[0]||(S[0]=l=>w("published"))}," Published ",2),e("button",{type:"button",class:H(["btn btn-tool",{"btn-info":p.value==="unpublished"}]),onClick:S[1]||(S[1]=l=>w("unpublished"))}," UnPublished ",2),e("button",{type:"button",class:H(["btn btn-tool",{"btn-info":p.value==="past"}]),onClick:S[2]||(S[2]=l=>w("past"))}," Past ",2),a(f).hasPermission(["create meeting"])?(t(),o("button",{key:0,type:"button",onClick:B(de,["prevent"]),class:"btn btn-tool"},jo)):_("",!0)])]),a(f).hasPermission(["view meeting"])?(t(),o("div",Oo,[V.value.length>0?(t(),o("ul",No,[(t(!0),o(z,null,Q(V.value,l=>(t(),o("li",{class:"item",key:l.id},[e("div",Ho,[l!=null&&l.nearestSchedule?(t(),o("div",Ko,[e("div",zo,c(a(xt)(l.nearestSchedule.date)),1),e("div",Go,[e("span",null,c(a($t)(l.nearestSchedule.date)),1)]),e("div",Qo,[e("span",null,c(a(wt)(l.nearestSchedule.date)),1)])])):_("",!0),Yo]),e("div",Wo,[a(f).hasPermission(["view meeting"])?(t(),xe(n,{key:0,to:{name:"BoardMeetingDetails",params:{boardId:a(F),meetingId:l.id,scheduleId:l.nearestSchedule.id}},class:"product-title"},{default:De(()=>[O(" Meeting: "),e("span",Zo,c(l.title),1),p.value==="unpublished"?(t(),o("span",Xo,[a(f).hasPermission(["publish meeting"])?(t(),o("a",{key:0,href:"",onClick:B(d=>le(l.id),["prevent"]),class:"text-blue-500 hover:text-blue-700 transition duration-150 ease-in-out"}," Publish ",8,Jo)):_("",!0)])):_("",!0),e("span",ea,[a(f).hasPermission(["view meeting"])?(t(),xe(n,{key:0,to:{name:"BoardMeetingDetails",params:{boardId:a(F),meetingId:l.id,scheduleId:l.nearestSchedule.id}},class:"text-green-500 hover:text-green-700 transition duration-150 ease-in-out"},{default:De(()=>[ta]),_:2},1032,["to"])):_("",!0)]),e("span",sa,[a(f).hasPermission(["edit meeting"])?(t(),o("a",{key:0,href:"",onClick:B(d=>ee(l),["prevent"]),class:"text-blue-500 hover:text-blue-700 transition duration-150 ease-in-out"},na,8,oa)):_("",!0)])]),_:2},1032,["to"])):_("",!0),a(f).hasPermission(["edit meeting"])?(t(),o("span",la,[O(" Description: "),e("span",{class:"text-primary text-bold",innerHTML:l.description},null,8,ia)])):_("",!0),l!=null&&l.nearestSchedule?(t(),o("div",da,[e("div",null,[e("span",ra," Upcoming "+c(a(We)(l.nearestSchedule.date)),1),O(" || When: "),e("span",ca,c(a(Ze)(l.nearestSchedule.date)),1),O(" || Held Status: "),e("span",{class:H([j(l.nearestSchedule.heldstatus),"font-bold ml-2 mr-2"])},c(l.nearestSchedule.heldstatus),3)]),l!=null&&l.nearestSchedule?(t(),o("span",ua,[l.nearestSchedule.heldstatus==="scheduled"?(t(),o("button",{key:0,class:"btn btn-sm btn-warning font-bold ml-2 mr-2 mt-1 mb-1",onClick:B(d=>re(l,l.nearestSchedule),["prevent"])}," Postpone ",8,_a)):_("",!0)])):_("",!0)])):_("",!0),l.schedules.length?(t(),o("div",ma,"Other Schedules")):(t(),o("div",pa,"no Other Recuring Schdedules")),(t(!0),o(z,null,Q(l.schedules,d=>(t(),o("div",{class:H(["row","border-top","border-bottom","border-warning","d-flex","justify-content-between","align-items-center",a(kt)(d.date)?"bg-gray":""]),key:d.id},[e("div",null,[O(" Day: "),e("span",ha,c(a(We)(d.date)),1),O(" || When: "),e("span",va,c(a(Ze)(d.date)),1),O(" || Held Status: "),e("span",{class:H([j(d.heldstatus),"font-bold ml-2 mr-2"])},c(d.heldstatus),3)]),e("span",null,[d.heldstatus==="scheduled"&&a(f).hasPermission(["edit meeting"])?(t(),o("button",{key:0,class:"btn btn-sm btn-warning font-bold ml-2 mr-2 mt-1 mb-1",onClick:B(s=>re(l,d),["prevent"])}," Postpone ",8,ba)):_("",!0),a(f).hasPermission(["view meeting"])?(t(),xe(n,{key:1,to:{name:"BoardMeetingDetails",params:{boardId:a(F),meetingId:l.id,scheduleId:d.id}},class:"mr-2 hover:text-info transition duration-150 ease-in-out"},{default:De(()=>[fa]),_:2},1032,["to"])):_("",!0)])],2))),128))])]))),128))])):(t(),o("div",ga," No meetings found for "+c(p.value),1))])):_("",!0)])])]),e("div",ya,[e("dialog",{id:"meetingmodal",class:"modal",ref_key:"MeetingModal",ref:h},[e("form",xa,[e("h3",$a,c(k.value=="create"?"Create Meeting":"Edit Meeting"),1),wa,e("div",{class:"overflow-auto p-4",style:et([{"max-height":"80vh"},k.value=="schedule"?"height:500px;":""])},[e("div",ka,[e("div",Ma,[e("form",{novalidate:"",onSubmit:S[3]||(S[3]=B((...l)=>a(ue)&&a(ue)(...l),["prevent"])),class:""},[k.value=="create"||k.value=="edit"?(t(),o("div",Sa,[e("div",Ca,[A(Te,{labeled:!0,label:"Meeting Title",name:"title",placeholder:"Enter Meeting Title",type:"text"})]),e("div",Pa,[A(je,{labeled:!0,name:"conference",label:"Select Meeting Type",placeholder:"Select Meeting Type",options:y.value,onSelectedItem:ce},null,8,["options"])])])):_("",!0),k.value=="create"||k.value=="edit"?(t(),o("div",Ta,[e("div",qa,[C.value==="Custom 3rd party Links"?(t(),xe(Te,{key:0,labeled:!0,label:"Meeting Link",name:"link",placeholder:"Enter Third Party Link",type:"text"})):_("",!0)]),e("div",{class:H(["w-full px-1 md:px-2",C.value==="Custom 3rd party Links"?"md:w-1/2":""])},[A(Te,{labeled:!0,label:"Meeting Location",name:"location",placeholder:"e.g 'Conference Room 6'",type:"text"})],2)])):_("",!0),k.value=="create"||k.value=="edit"?(t(),o("div",Da,[k.value=="create"||k.value=="edit"?(t(),xe(ze,{key:0,label:"Meeting Description",name:"description",theme:"snow",placeholder:"Enter Meeting Description",toolbar:"full",contentType:"html",class:"col-span-3"})):_("",!0)])):_("",!0),k.value=="create"||k.value=="edit"?(t(),o("div",Fa,[A(Ot,{name:"type",label:"Meeting Schedule Type",placeholder:"Select Meeting Schedule Type",inline:!0,options:W.value,checked:a(P).type},null,8,["options","checked"])])):_("",!0),a(P).schedules?(t(!0),o(z,{key:4},Q(a(P).schedules,(l,d)=>(t(),o("div",{class:"flex flex-wrap -mx-2 mt-2 relative",key:d},[e("div",Ia,[A(Fe,{label:"Meeting Date "+(d+1),name:"schedules["+d+"].date",mode:"date-picker",modeltype:"dd-MM-yyyy",enabletimepicker:!1,placeholder:"Meeting Date"},null,8,["label","name"])]),e("div",Ba,[A(Fe,{label:"Meeting Start Time "+(d+1),name:"schedules["+d+"].start_time",mode:"time-picker",modeltype:"h:mm bbbb",is24:!1,enabletimepicker:!0,placeholder:"Select Start Time"},null,8,["label","name"])]),e("div",Aa,[A(Fe,{label:"Meeting End Time "+(d+1),name:"schedules["+d+"].end_time",mode:"time-picker",modeltype:"h:mm bbbb",is24:!1,enabletimepicker:!0,placeholder:"Select End Time"},null,8,["label","name"])]),k.value!=="schedule"?(t(),o("button",{key:0,type:"button",class:"absolute top-0 right-0 mt-2 mr-2 text-red-600 font-bold",onClick:B(s=>se(d),["prevent"])}," ✕ ",8,Ea)):_("",!0)]))),128)):_("",!0),a(P).type==="manual"&&k.value!=="schedule"?(t(),o("button",{key:5,type:"button",class:"btn btn-primary mt-4",onClick:pe}," Add Another Data ")):_("",!0),e("button",Ua,c(k.value==="create"?"Create Meeting":"Edit Meeting"),1)],32)])])],4)])],512)])],64)}}});const La=Ae(Ra,[["__scopeId","data-v-7113a82b"]]),Va={class:"role-container w-100 d-flex justify-content-center"},ja=["aria-expanded"],Oa={key:0,class:"dropdown-menu show justify-content","aria-labelledby":"role-status"},Na=["onClick"],Ha={key:1,class:"text-center"},Ka=ge({__name:"MemberPosition",props:{member:{},positions:{},disableRemotePosition:{}},emits:["position-updated"],setup(U,{emit:f}){const E=U,k=f,D=v(null),h=v(!1),R=r(L=>{L.stopPropagation(),h.value=!h.value},"toggleDropdown"),M=r(L=>{k("position-updated",{memberId:E.member.id,positionId:L.id}),h.value=!1},"updateRole"),F=Z(()=>{var L;return`bg-${(L=E.member)==null?void 0:L.position.name.toLowerCase()} text-white`}),C=Z(()=>{var L;return(L=E.member)==null?void 0:L.position.name}),$=Z(()=>E.positions);return(L,ae)=>{var N,b,P,de;return t(),o("div",Va,[C.value?(t(),o("div",{key:0,class:"dropdown",ref_key:"dropdownRef",ref:D},[e("button",{class:H(["btn btn-primary dropdown-toggle text-truncate w-100",F.value]),type:"button",onClick:R,"aria-haspopup":"true","aria-expanded":h.value},[e("i",{class:H(["mr-2 fa "+((N=E.member)==null?void 0:N.position.icon),"mr-2"])},null,2),O(" "+c((b=E.member)==null?void 0:b.position.name),1)],10,ja),h.value?(t(),o("ul",Oa,[(t(!0),o(z,null,Q($.value,ee=>(t(),o("li",{key:ee.name},[e("a",{href:"#",class:"dropdown-item",onClick:B(re=>M(ee),["prevent"])},[e("i",{class:H(["mr-2 fa "+ee.icon,"mr-2"])},null,2),O(" "+c(ee.name),1)],8,Na)]))),128))])):_("",!0)],512)):(t(),o("div",Ha,[e("i",{class:H(["mr-2 fa "+((P=E.member)==null?void 0:P.position.icon),"mr-2"])},null,2),O(" "+c((de=E.member)==null?void 0:de.position.name),1)]))])}}});const za=Ae(Ka,[["__scopeId","data-v-c85c72a2"]]),ye=r(U=>(Oe("data-v-afd0c974"),U=U(),Ne(),U),"_withScopeId$1"),Ga={class:"card"},Qa={class:"card-header flex items-center"},Ya=ye(()=>e("h2",{class:"card-header-title h3"},"Board Members",-1)),Wa={class:"ml-auto flex items-center space-x-2"},Za={class:"container-fluid"},Xa={class:"row"},Ja={class:"card card-outline card-primary h-100"},en={class:"card-body box-profile"},tn={class:"text-center"},sn={class:"profile-username text-center text-primary"},on=["onClick"],an=["onClick"],nn=ye(()=>e("i",{class:"far fa-eye"},null,-1)),ln=[nn],dn={class:"text-muted text-center text-bold"},rn={key:0,class:"mt-3"},cn=ye(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Position ",-1)),un={class:"text-center"},_n={key:1,class:"mt-3"},mn=ye(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Position ",-1)),pn={class:"text-center"},hn={class:"mt-3"},vn=ye(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Last Updated ",-1)),bn={class:"text-center text-primary text-small"},fn={class:"flex justify-center col-md-6"},gn={method:"dialog",class:"modal-box rounded-xl"},yn=ye(()=>e("h3",{class:"font-bold text-lg justify-center flex"},c("Add Members"),-1)),xn=ye(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),$n={class:"w-full mt-6 p-2"},wn={class:"font-thin text-sm flex flex-col items-center gap-6"},kn={key:0,class:"message"},Mn=ye(()=>e("button",{type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},c("Add Members"),-1)),Sn=ge({__name:"Members",setup(U){const f=ke(),E=qe(),k=tt(),D=Ee(),h=v("create"),R=E.params.boardId,M=v(!1),F=v(null),C=v([]),$=v([]),{errorMessage:L}=Ce("assignees"),ae=me({id:m().nullable(),position_id:m().nullable(),board_id:st().required(),members:Ie().of(m()).nullable()}),{handleSubmit:N,setErrors:b,setFieldValue:P,values:de}=Ue({validationSchema:ae,initialValues:{id:"",position_id:"",board_id:R,members:[]}}),ee=r(()=>{P("members",C.value)},"selectedUsers"),re=r(()=>{P("members",C.value)},"removeselectedUsers"),he=r(p=>{var w;const V=p.members.map(j=>j.user.id.toString());C.value=V,P("members",C.value),h.value="edit",M.value=!0,(w=F.value)==null||w.showModal()},"openEditMembersModal"),q=N(async(p,{resetForm:V})=>{var w;try{P("members",C.value);const j={board_id:p.board_id,members:p.members};if(h.value==="create")await Et(j,R);else if(h.value==="edit")await Ut(j,R);else if(h.value==="position"){const le={id:p.id,position_id:p.position_id};await Rt(le,R)}await pe(),ce(),(w=F.value)==null||w.close()}catch(j){j instanceof Be?b(j.messages):D(j)}}),ce=r(()=>{h.value="create",M.value=!1,C.value=[],P("members",[]),P("position_id","")},"reset"),y=Z(()=>{var V;const p=[];return $.value&&((V=$.value)==null?void 0:V.length)>0&&$.value.reduce((w,j)=>(w.push({id:j.id,name:`${j.full_name}`}),w),p),p}),W=r(async()=>{const p=await Nt({paginate:"false"});$.value=p.data},"getUsers");$e(async()=>{window.dispatchEvent(new CustomEvent("updateTitle",{detail:"Members"})),W()});const ve=r(()=>we({queryKey:["getBoardMembersKey",R],queryFn:async()=>(await Ke(R,{paginate:"false"})).data}),"getBoardMembers"),{isLoading:ue,data:te,refetch:pe}=ve(),se=v([]),be=r(async()=>{const p=await Lt({paginate:"false"});se.value=p.data},"getPositions");$e(async()=>{await be()});const ne=r(p=>{ce(),h.value="position",P("id",p.memberId),P("position_id",p.positionId),q()},"handlePositionUpdated"),_e=r(p=>{k.push({name:"ProfileDetails",params:{userId:p.id,profileId:p.profile.id}})},"openUserProfile");return(p,V)=>(t(),o(z,null,[e("div",Ga,[e("div",Qa,[Ya,e("div",Wa,[e("button",{class:"btn btn-secondary btn-sm",onClick:V[0]||(V[0]=B(w=>he({members:a(te)}),["prevent"]))}," Update Members ")])]),e("div",Za,[e("div",Xa,[(t(!0),o(z,null,Q(a(te),(w,j)=>(t(),o("div",{class:"col-lg-3 col-md-4 col-sm-6 mb-3",key:j},[e("div",Ja,[e("div",en,[e("div",tn,[e("h3",sn,[e("a",{href:"",onClick:B(le=>{var u,S;return((S=(u=a(f))==null?void 0:u.user)==null?void 0:S.id)===w.user.id?_e(w.user):""},["prevent"])},c(w.user.full_name),9,on),a(f).hasPermission(["view board member profile"])?(t(),o("button",{key:0,type:"button",onClick:B(le=>_e(w.user),["prevent"]),title:"",class:"mx-2 btn btn-sm btn-primary"},ln,8,an)):_("",!0)]),e("p",dn,c(w.position.name),1)]),a(f).hasPermission(["assign board position"])?(t(),o("div",rn,[cn,e("div",un,[A(za,{member:w,positions:se.value,disableRemotePosition:0,onPositionUpdated:ne},null,8,["member","positions"])])])):(t(),o("div",_n,[mn,e("div",pn,[e("i",{class:H(["mr-2 fa "+w.position.icon,"mr-2"])},null,2),O(" "+c(w.position.name),1)])])),e("div",hn,[vn,e("p",bn,c(a(Ve)(w.updated_at,null)),1)])])])]))),128))])])]),O("> "),e("div",fn,[e("dialog",{id:"membersmodal",class:"modal",ref_key:"membersmodal",ref:F},[e("form",gn,[yn,xn,e("div",$n,[e("div",wn,[e("form",{novalidate:"",onSubmit:V[4]||(V[4]=B((...w)=>a(q)&&a(q)(...w),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",{class:H(["multiselect-container",{error:!!a(L)}])},[A(a(He),{id:"members",modelValue:C.value,"onUpdate:modelValue":V[1]||(V[1]=w=>C.value=w),mode:"tags",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:y.value,valueProp:"id",trackBy:"id",label:"name",class:H(["multiselect-container",{error:!!a(L)}]),onSelect:V[2]||(V[2]=w=>ee()),onDeselect:V[3]||(V[3]=w=>re())},null,8,["modelValue","options","class"]),a(L)?(t(),o("div",kn,c(a(L)),1)):_("",!0)],2),Mn],32)])])])],512)])],64))}});const Cn=Ae(Sn,[["__scopeId","data-v-afd0c974"]]),Pn={key:0},Tn={class:"card h-full"},qn={class:"card-header flex items-center"},Dn=e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"}," Board Polls ")],-1),Fn={key:0,class:"flex items-center space-x-2"},In=e("i",{class:"far fa fa-plus mr-2"},null,-1),Bn=e("span",{class:"sr-only"},"Add poll",-1),An={class:"card-container"},En={key:0},Un={key:1},Rn={class:"row overflow-auto p-4",style:{"max-height":"100vh"}},Ln={class:"card card-outline card-primary h-100"},Vn={class:"card-header"},jn={class:"card-tools"},On=["onClick"],Nn=e("i",{class:"fas fa-edit"},null,-1),Hn=[Nn],Kn={class:"card-body"},zn={class:"text-primary tex-bold uppercase"},Gn=e("strong",{class:"text-primary"},"Question:",-1),Qn={class:"mt-2 text-primary text-bold"},Yn={class:""},Wn=e("strong",null,"Answer Options:",-1),Zn={class:"row"},Xn={class:"col-6"},Jn={class:"list-unstyled text-success"},el={class:"col-6"},tl={class:"list-unstyled text-success"},sl={class:"d-flex justify-content-between"},ol=e("strong",null,"Due Date:",-1),al=e("strong",null,"Status:",-1),nl=e("strong",null,"Vote:",-1),ll=["innerHTML"],il={class:""},dl=e("strong",null,"Assignees:",-1),rl={class:"row"},cl={class:"col-6"},ul={class:"list-unstyled"},_l={class:"col-6"},ml={class:"list-unstyled"},pl=e("strong",null,"Description:",-1),hl=["innerHTML"],vl={class:"flex justify-center items-center min-h-screen"},bl={method:"dialog",class:"modal-box rounded-xl relative bg-white shadow-xl"},fl={class:"font-bold text-lg text-center"},gl=e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1),yl={class:"overflow-auto p-4",style:{"max-height":"80vh"}},xl={class:"grid grid-cols-2 md:grid-cols-2 gap-4 p-2"},$l={class:"col-span-2"},wl={class:"flex flex-wrap -mx-2 mt-2"},kl={class:"w-full md:w-1/2 px-1 md:px-2"},Ml={class:"w-full md:w-1/2 px-1 md:px-2"},Sl={class:"flex flex-wrap -mx-2 mt-2"},Cl={class:"w-full md:w-1/3 px-1 md:px-2 text-center"},Pl=e("h2",{class:"font-bold text-sm text-center"},"Click to Add Options",-1),Tl=e("h4",{class:"text-info font-semibold"},"Your Options",-1),ql={key:0},Dl={key:0,class:"w-full md:w-2/3 px-1 md:px-2 flex flex-col"},Fl=["onClick"],Il={class:"flex flex-wrap -mx-2 mt-2"},Bl={class:"w-full md:w-1/2 px-1 md:px-2"},Al={class:"w-full md:w-1/2 px-1 md:px-2"},El={key:0},Ul=e("h2",{class:"font-bold text-primary text-sm text-center"}," All Members Will be assiged this Poll ",-1),Rl=[Ul],Ll={key:0,class:"form-group col-span-3"},Vl=e("label",{class:"text-bold font-medium tracking-wide"}," People To Vote ",-1),jl={key:0,class:"message"},Ol={key:1},Nl={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},Hl={key:1},Kl=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),zl=[Kl],Gl=ge({__name:"Pollp",setup(U){const f=ke(),E=qe(),k=v(!1),D=v("create"),h=E.params.boardId,R=v(null),M=v([]),F=v(null),C=v("single"),$=v("individuals"),L=v([]),ae=v([]),N=v(""),b=Ee();Ce("duedate");const{errorMessage:P}=Ce("pollassignees"),de=me({id:m().required(),title:m().required(),poll_id:m().nullable(),deleted_at:m().nullable(),created_at:m().nullable(),updated_at:m().nullable()}),ee=me({id:m().required(),full_name:m().required()}),re=me({id:m().required(),poll_id:m().nullable(),member_id:m().required(),user:ee}),he=me({board_id:m().nullable(),question:m().required(),description:m().required(),questionoptiontype:m().required(),optionstatus:m().required(),options:Ie().of(de).required(),duedate:m().required(),assigneetype:m().required(),assigneestatus:m().required(),pollassignees:Ie().of(re).nullable(),status:m().required()}),{handleSubmit:q,setErrors:ce,setFieldValue:y,values:W}=Ue({validationSchema:he,initialValues:{board_id:h,question:"",description:"",questionoptiontype:"",optionstatus:"",options:[{id:Pe(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null}],duedate:"",assigneetype:"",assigneestatus:"",pollassignees:[],status:"inactive"}});Ce("options");const ve=r(()=>{var i;ne(),D.value="create",k.value=!0,(i=F.value)==null||i.showModal()},"openCreatePollModal"),ue=r(i=>{var I;ne(),R.value=i.id,y("question",i.question),y("description",i.description),y("questionoptiontype",i.questionoptiontype),y("optionstatus",i.optionstatus),y("duedate",i.duedate),y("assigneetype",i.assigneetype),y("assigneestatus",i.assigneestatus),y("status",i.status),y("options",i.options),$.value=i.assigneestatus,te(i.pollassignees),D.value="edit",k.value=!0,(I=F.value)==null||I.showModal()},"openEditPollModal");function te(i){M.value=i.map(I=>({id:I.id,full_name:I.user.full_name,poll_id:I.poll_id,member_id:I.member_id,user:I.user})),y("pollassignees",M.value)}r(te,"mappollassigneesToReactiveRef");const pe=r(()=>{y("pollassignees",M.value)},"selectedMembers"),se=r(()=>{y("pollassignees",M.value)},"removeselectedUsers"),be=q(async(i,{resetForm:I})=>{var x;try{console.log("dddd");const G={board_id:i.board_id,question:i.question,description:i.description,questionoptiontype:i.questionoptiontype,optionstatus:i.optionstatus,options:i.options,duedate:i.duedate,assigneetype:i.assigneetype,assigneestatus:i.assigneestatus,pollassignees:i.pollassignees,status:i.status};if(D.value==="create")await Ht(G,h);else{const Y=R.value;await Kt(G,Y)}(x=F.value)==null||x.close(),await Ge(),ne()}catch(G){G instanceof Be?ce(G.messages):b(G)}}),ne=r(()=>{D.value="create",k.value=!1,R.value=null,C.value="single",$.value="all_members",M.value=[],y("board_id",h),y("question",""),y("description",""),y("questionoptiontype","single"),y("optionstatus","single"),y("options",[{id:Pe(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null}]),y("duedate",""),y("assigneetype","all_members"),y("assigneestatus","all_members"),y("pollassignees",[]),y("status","inactive")},"reset"),_e=r(i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),"formattedDateTime"),p=r(i=>V(i)?"bg-danger":"bg-success","dateBadgeClass"),V=r(i=>{const I=new Date,x=new Date(i);return I>x},"hasDueDatePassed"),w=r(i=>{var Qe;if(!i.votes||((Qe=i.votes)==null?void 0:Qe.length)===0)return"No votes yet";const I=i.votes.reduce((Re,Le)=>Re+Le.voteCount,0),x=i.totalMembers;if(I>x)return console.error("Total votes exceed total members, which is unexpected."),"Voting data error";if(I===0)return"No votes yet";const G=i==null?void 0:i.votes.reduce((Re,Le)=>Re.voteCount>Le.voteCount?Re:Le),Y=x-I;return`${(G.voteCount/I*100).toFixed(1)}% voted for ${G.title}<br>${I} voted / ${Y} not yet`},"calculateVoteStats"),j=r(i=>{switch(i){case"Backlog":return"badge bg-warning";case"Pending":return"badge bg-info";case"On Progress":return"badge bg-primary";case"Completed":return"badge bg-success";default:return"badge"}},"statusClass"),le=[{name:"Single Answer",value:"single"},{name:"Multiple Answers: More than one",value:"multiple"}],u=[{name:"Individuals",value:"individuals"},{name:"Assign All Board Members",value:"all_members"}],S=Z(()=>le),n=Z(()=>u),l=r(i=>{ae.value=[],L.value=[],s(),C.value=i,y("questionoptiontype",i),y("optionstatus",i)},"handleQuestionOptionTypeChange"),d=r(i=>{M.value=[],N.value=i,$.value=i,y("assigneetype",i),y("assigneestatus",i),y("pollassignees",[])},"handleAssigneeTypeChange"),s=r(()=>{Array.isArray(W.options)||(console.error("Invalid state: values.options is not an array."),y("options",[]));const i={id:Pe(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null};y("options",[...W.options,i])},"addEmptyOption");Xe(()=>W.options,i=>{});const T=r(i=>{const I=W.options.filter(x=>x.id!==i);console.log("vv",I),y("options",I)},"removeOption"),g=r(()=>we({queryKey:["getPollMembershisKey"],queryFn:async()=>(await Ke(h,{paginate:"false"})).data.map(ot())}),"getMembers"),{isLoading:J,data:K,refetch:oe}=g(),ot=r(()=>i=>({id:i.id,full_name:i.user.full_name,member_id:i.id,user:i.user}),"formatEvent"),at=Z(()=>{var i;return!K.value||((i=K.value)==null?void 0:i.length)===0?[]:K.value}),nt=r(()=>we({queryKey:["getBoardPollsKey",h],queryFn:async()=>(await zt(h,{paginate:"false"})).data}),"getBoardPolls"),{isLoading:lt,data:it,refetch:Ge}=nt();return $e(async()=>{oe(),Ge()}),(i,I)=>a(f).hasPermission(["view poll"])?(t(),o("div",Pn,[e("div",Tn,[e("div",qn,[Dn,a(f).hasPermission(["create poll"])?(t(),o("div",Fn,[e("button",{type:"button",onClick:B(ve,["prevent"]),class:"btn btn-tool"},[In,O(),Bn])])):_("",!0)]),e("div",An,[a(lt)?(t(),o("div",En,"Loading Board Polls...")):(t(),o("div",Un,[e("div",Rn,[(t(!0),o(z,null,Q(a(it),(x,G)=>(t(),o("div",{class:"col-lg-12 col-md-12 col-sm-12 mb-2",key:G},[e("div",Ln,[e("div",Vn,[e("div",jn,[a(f).hasPermission(["edit poll"])?(t(),o("button",{key:0,class:"btn btn-tool",onClick:B(Y=>ue(x),["prevent"])},Hn,8,On)):_("",!0)])]),e("div",Kn,[e("div",zn,[Gn,e("p",Qn,c(x.question),1),e("div",Yn,[Wn,e("div",Zn,[e("div",Xn,[e("ul",Jn,[(t(!0),o(z,null,Q(x.options.slice(0,Math.ceil(x.options.length/2)),(Y,fe)=>(t(),o("li",{key:Y.id},c(fe+1)+". "+c(Y.title),1))),128))])]),e("div",el,[e("ul",tl,[(t(!0),o(z,null,Q(x.options.slice(Math.ceil(x.options.length/2)),(Y,fe)=>(t(),o("li",{key:Y.id},c(fe+1+Math.ceil(x.options.length/2))+". "+c(Y.title),1))),128))])])])])]),e("div",sl,[e("div",null,[ol,e("p",{class:H(p(x.duedate))},c(_e(x.duedate)),3)]),e("div",null,[al,e("p",null,[e("span",{class:H(j(x.status))},c(x.status),3)])]),e("div",null,[nl,e("p",null,[e("span",{innerHTML:w(x)},null,8,ll)])])]),e("div",il,[dl,e("div",rl,[e("div",cl,[e("ul",ul,[(t(!0),o(z,null,Q(x.pollassignees.slice(0,Math.ceil(x.pollassignees.length/2)),(Y,fe)=>(t(),o("li",{key:Y.id},c(fe+1)+". "+c(Y.user.full_name),1))),128))])]),e("div",_l,[e("ul",ml,[(t(!0),o(z,null,Q(x.pollassignees.slice(Math.ceil(x.pollassignees.length/2)),(Y,fe)=>(t(),o("li",{key:Y.id},c(fe+1+Math.ceil(x.pollassignees.length/2))+". "+c(Y.user.full_name),1))),128))])])])]),e("div",null,[pl,e("p",{innerHTML:x.description,class:"mt-2"},null,8,hl)])])])]))),128))])]))])]),e("div",vl,[e("dialog",{id:"pollmodal",class:"modal w-full max-w-4xl mx-auto p-0",ref_key:"PollModal",ref:F},[e("form",bl,[e("h3",fl,c(D.value=="create"?"Create Poll":"Edit Poll"),1),gl,e("div",yl,[e("div",xl,[e("div",$l,[e("form",{novalidate:"",onSubmit:I[3]||(I[3]=B((...x)=>a(be)&&a(be)(...x),["prevent"])),class:""},[A(Te,{labeled:!0,label:"Poll Question",name:"question",placeholder:"Enter Poll Question",type:"text"}),A(ze,{label:"Poll description",name:"description",theme:"snow",placeholder:"Enter Poll Description",toolbar:"full",contentType:"html",class:"col-span-2"}),e("div",wl,[e("div",kl,[A(je,{labeled:!0,name:"questionoptiontype",label:"Select Allowed Answers On the Question",placeholder:"Select Allowed Answers On the Question",options:S.value,onSelectedItem:l},null,8,["options"])]),e("div",Ml,[A(Fe,{label:"Poll Due Date",name:"duedate",flow:["month"],placeholder:"Enter Poll Due Date & Time"})])]),e("div",Sl,[e("div",Cl,[e("div",null,[Pl,e("button",{onClick:B(s,["prevent"]),class:"btn btn-primary h-10 mt-2"}," Add Option ")]),Tl,a(W).options?(t(),o("ul",ql,[(t(!0),o(z,null,Q(a(W).options,(x,G)=>(t(),o("li",{class:"text-primary font-bold text-justify",key:G},c(G+1)+"."+c(x==null?void 0:x.title),1))),128))])):_("",!0)]),a(W).options?(t(),o("div",Dl,[(t(!0),o(z,null,Q(a(W).options,(x,G)=>(t(),o("div",{class:"form-group flex items-center mb-2",key:G},[A(Vt,{labeled:!0,label:"Title for option "+(G+1),name:"options["+G+"].title",placeholder:"Enter title",class:"flex-grow",type:"text"},null,8,["label","name"]),e("a",{href:"#",class:"ml-2 text-red-600 font-bold mt-8",onClick:B(Y=>T(x.id),["prevent"])}," ✕ ",8,Fl)]))),128))])):_("",!0)]),e("div",Il,[e("div",Bl,[A(je,{labeled:!0,name:"assigneetype",label:"Select Assignee Type",placeholder:"Select Assignee Type",options:n.value,onSelectedItem:d},null,8,["options"])]),e("div",Al,[$.value==="all_members"?(t(),o("div",El,Rl)):_("",!0)])]),$.value==="individuals"?(t(),o("div",Ll,[Vl,e("div",{class:H(["multiselect-container",{error:!!a(P)}])},[A(a(He),{id:"pollassignees",modelValue:M.value,"onUpdate:modelValue":I[0]||(I[0]=x=>M.value=x),mode:"tags",required:"",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:at.value,valueProp:"member_id",trackBy:"member_id",label:"full_name",class:H(["col-span-3",["multiselect-container",{error:!!a(P)}]]),object:!0,onSelect:I[1]||(I[1]=x=>pe()),onDeselect:I[2]||(I[2]=x=>se())},null,8,["modelValue","options","class"]),a(P)?(t(),o("div",jl,c(a(P)),1)):_("",!0)],2)])):_("",!0),M.value&&M.value.length||$.value==="all_members"?(t(),o("div",Ol,[e("button",Nl,c(D.value=="create"?"Create Poll":"Edit Poll"),1)])):_("",!0)],32)])])])])],512)])])):(t(),o("div",Hl,zl))}});const ie=r(U=>(Oe("data-v-1356323c"),U=U(),Ne(),U),"_withScopeId"),Ql={key:0},Yl={class:"card h-full"},Wl={class:"card-header flex items-center"},Zl=ie(()=>e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"},"Meeting Tasks")],-1)),Xl={key:0,class:"flex items-center space-x-2"},Jl=ie(()=>e("i",{class:"far fa fa-plus mr-2"},null,-1)),ei=ie(()=>e("span",{class:"sr-only"},"Add task",-1)),ti={class:"card-container"},si={key:0},oi={key:1},ai={class:"row overflow-auto p-4",style:{"max-height":"100vh"}},ni={class:"card card-outline card-primary h-100"},li={class:"card-header"},ii={class:"card-tools"},di=["onClick"],ri=ie(()=>e("i",{class:"fas fa-edit"},null,-1)),ci=[ri],ui={class:"card-body"},_i={class:"text-primary text-bold uppercase"},mi={class:"d-flex justify-content-between"},pi=ie(()=>e("strong",null,"Due Date:",-1)),hi=ie(()=>e("strong",null,"Status:",-1)),vi={key:0,class:"badge bg-warning"},bi={key:1,class:"badge bg-info"},fi={key:2,class:"badge bg-primary"},gi={key:3,class:"badge bg-success"},yi={class:""},xi=ie(()=>e("strong",null,"Assignees:",-1)),$i={class:"row"},wi={class:"col-6"},ki={class:"list-unstyled"},Mi={class:"col-6"},Si={class:"list-unstyled"},Ci=ie(()=>e("strong",null,"Description:",-1)),Pi=["innerHTML"],Ti={class:"flex justify-center col-md-6"},qi={method:"dialog",class:"modal-box rounded-xl"},Di={class:"font-bold text-lg justify-center flex"},Fi=ie(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),Ii={class:"overflow-auto p-4",style:{"max-height":"80vh"}},Bi={class:"grid grid-cols-3 md:grid-cols-3 gap-2 p-2"},Ai={class:"col-span-3"},Ei={class:"flex flex-wrap -mx-2 mt-2"},Ui={class:"w-full md:w-1/2 px-1 md:px-2"},Ri={class:"w-full md:w-1/2 px-1 md:px-2"},Li={class:"flex flex-wrap -mx-2 mt-2"},Vi={class:"w-full md:w-1/2 px-1 md:px-2"},ji={class:"w-full md:w-1/2 px-1 md:px-2"},Oi={key:0},Ni=ie(()=>e("h2",{class:"font-bold text-primary text-sm text-center"},"All Members Will be assigned this Task",-1)),Hi=[Ni],Ki={key:0,class:"form-group col-span-3"},zi=ie(()=>e("label",{class:"text-bold font-medium tracking-wide"},"People to Assign",-1)),Gi={key:0,class:"message"},Qi={key:1},Yi={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},Wi={key:1},Zi=ie(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),Xi=[Zi],Ji=ge({__name:"Taskp",setup(U){const f=ke(),E=qe(),k=v(!1),D=v("create"),h=E.params.boardId,R=v(null),M=v([]),F=v(null),C=v(null),$=v("individuals"),L=v(""),ae=Ee();Ce("duedate");const{errorMessage:N}=Ce("taskassignees"),b=r(s=>{const T=new Date,g=new Date(s);return T>g},"hasDueDatePassed"),P=me({id:m().nullable(),full_name:m().nullable()}),de=me({id:m().nullable(),task_id:m().nullable(),member_id:m().nullable(),user:P}),ee=me({board_id:m().nullable(),title:m().required(),duedate:m().required(),description:m().required(),status:m().required(),assigneetype:m().required(),assigneestatus:m().required(),taskassignees:Ie().of(de).nullable()}),{handleSubmit:re,setErrors:he,setFieldValue:q,values:ce}=Ue({validationSchema:ee,initialValues:{board_id:h,title:"",duedate:"",description:"",status:"pending",assigneetype:"",assigneestatus:"",taskassignees:[]}}),y=r(()=>{var s;se(),D.value="create",k.value=!0,(s=C.value)==null||s.showModal()},"openCreateTaskModal"),W=r(s=>{var T;se(),F.value=s,R.value=s.id,q("title",s.title),q("duedate",s.duedate),q("description",s.description),q("status",s.status),q("assigneetype",s.assigneetype),q("assigneestatus",s.assigneestatus),$.value=s.assigneestatus,ve(s.taskassignees),D.value="edit",k.value=!0,(T=C.value)==null||T.showModal()},"openEditTaskModal");function ve(s){M.value=s.map(T=>({id:T.id,full_name:T.user.full_name,task_id:T.task_id,member_id:T.member_id,user:T.user})),q("taskassignees",M.value)}r(ve,"maptaskassigneesToReactiveRef");const ue=r(()=>{q("taskassignees",M.value)},"selectedMembers"),te=r(()=>{q("taskassignees",M.value)},"removeselectedUsers"),pe=re(async(s,{resetForm:T})=>{var g;try{const J={board_id:s.board_id,title:s.title,duedate:s.duedate,description:s.description,status:s.status,assigneetype:s.assigneetype,assigneestatus:s.assigneestatus,taskassignees:s.taskassignees};if(D.value==="create")await Gt(J,h);else{const K=R.value;await Qt(J,K)}(g=C.value)==null||g.close(),await d(),se()}catch(J){J instanceof Be?he(J.messages):ae(J)}}),se=r(()=>{D.value="create",k.value=!1,R.value=null,$.value="all_members",M.value=[],q("board_id",h),q("title",""),q("duedate",""),q("description","description ................"),q("status","pending"),q("assigneetype","all_members"),q("assigneestatus","all_members"),q("taskassignees",[])},"reset"),be=r(s=>{M.value=[],L.value=s,$.value=s,q("assigneetype",s),q("assigneestatus",s),q("taskassignees",[])},"handleAssigneeTypeChange"),ne=[{name:"Individuals",value:"individuals"},{name:"Assign All Meeting Members",value:"all_members"}],_e=Z(()=>ne),p=r(()=>we({queryKey:["getBoardMembersKey"],queryFn:async()=>(await Ke(h,{paginate:"false"})).data.map(le())}),"getMembers"),{isLoading:V,data:w,refetch:j}=p(),le=r(()=>s=>({id:s.id,full_name:s.user.full_name,member_id:s.id,user:s.user}),"formatEvent"),u=Z(()=>{var s;return!w.value||((s=w.value)==null?void 0:s.length)===0?[]:w.value}),S=r(()=>we({queryKey:["getBoardTasksKey",h],queryFn:async()=>(await Yt(h,{paginate:"false"})).data}),"getBoardTasks"),{isLoading:n,data:l,refetch:d}=S();return $e(async()=>{d(),j()}),(s,T)=>a(f).hasPermission(["view task"])?(t(),o("div",Ql,[e("div",Yl,[e("div",Wl,[Zl,a(f).hasPermission(["create task"])?(t(),o("div",Xl,[e("button",{type:"button",onClick:B(y,["prevent"]),class:"btn btn-tool"},[Jl,O(),ei])])):_("",!0)]),e("div",ti,[a(n)?(t(),o("div",si,"Loading Meeting Tasks...")):(t(),o("div",oi,[e("div",ai,[(t(!0),o(z,null,Q(a(l),(g,J)=>(t(),o("div",{class:"col-lg-12 col-md-12 col-sm-12 mb-2",key:J},[e("div",ni,[e("div",li,[e("div",ii,[a(f).hasPermission(["edit task"])?(t(),o("button",{key:0,class:"btn btn-tool",onClick:B(K=>W(g),["prevent"])},ci,8,di)):_("",!0)])]),e("div",ui,[e("div",_i,c(g.title),1),e("div",mi,[e("div",null,[pi,e("p",{class:H({"text-danger":b(g.duedate)&&g.status!=="completed","text-success":!b(g.duedate)||g.status==="completed"})},c(a(Ve)(g.duedate)),3)]),e("div",null,[hi,e("p",null,[g.status==="backlog"?(t(),o("span",vi,"Backlog")):g.status==="pending"?(t(),o("span",bi,"Pending")):g.status==="onprogress"?(t(),o("span",fi,"On Progress")):g.status==="completed"?(t(),o("span",gi,"Completed")):_("",!0)])])]),e("div",yi,[xi,e("div",$i,[e("div",wi,[e("ul",ki,[(t(!0),o(z,null,Q(g.taskassignees.slice(0,Math.ceil(g.taskassignees.length/2)),(K,oe)=>(t(),o("li",{key:K.id},c(oe+1)+". "+c(K.user.full_name),1))),128))])]),e("div",Mi,[e("ul",Si,[(t(!0),o(z,null,Q(g.taskassignees.slice(Math.ceil(g.taskassignees.length/2)),(K,oe)=>(t(),o("li",{key:K.id},c(oe+1+Math.ceil(g.taskassignees.length/2))+". "+c(K.user.full_name),1))),128))])])])]),e("div",null,[Ci,e("p",{innerHTML:g.description,class:"mt-2"},null,8,Pi)])])])]))),128))])]))])]),e("div",Ti,[e("dialog",{id:"taskmodal",class:"modal",ref_key:"TaskModal",ref:C},[e("form",qi,[e("h3",Di,c(D.value=="create"?"Create Meeting Task":"Edit Meeting Task"),1),Fi,e("div",Ii,[e("div",Bi,[e("div",Ai,[e("form",{novalidate:"",onSubmit:T[3]||(T[3]=B((...g)=>a(pe)&&a(pe)(...g),["prevent"])),class:""},[e("div",Ei,[e("div",Ui,[A(Te,{labeled:!0,label:"Task Title",name:"title",placeholder:"Enter Task Title",type:"text"})]),e("div",Ri,[A(Fe,{label:"Task Due Date",name:"duedate",flow:["month"],placeholder:"Task Due Date"})])]),A(ze,{label:"Task Description",name:"description",theme:"snow",placeholder:"Enter Task Description",toolbar:"full",contentType:"html",class:"col-span-3"}),e("div",Li,[e("div",Vi,[A(je,{labeled:!0,name:"assigneetype",label:"Select Assignee Type",placeholder:"Select Assignee Type",options:_e.value,onSelectedItem:be},null,8,["options"])]),e("div",ji,[$.value==="all_members"?(t(),o("div",Oi,Hi)):_("",!0)])]),$.value==="individuals"?(t(),o("div",Ki,[zi,e("div",{class:H(["multiselect-container",{error:!!a(N)}])},[A(a(He),{id:"taskassignees",modelValue:M.value,"onUpdate:modelValue":T[0]||(T[0]=g=>M.value=g),mode:"tags",required:"",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:u.value,valueProp:"member_id",trackBy:"member_id",label:"full_name",class:H(["col-span-3",["multiselect-container",{error:!!a(N)}]]),object:!0,onSelect:T[1]||(T[1]=g=>ue()),onDeselect:T[2]||(T[2]=g=>te())},null,8,["modelValue","options","class"]),a(N)?(t(),o("div",Gi,c(a(N)),1)):_("",!0)],2)])):_("",!0),M.value&&M.value.length||$.value==="all_members"?(t(),o("div",Qi,[e("button",Yi,c(D.value=="create"?"Create Task":"Edit Task"),1)])):_("",!0)],32)])])])])],512)])])):(t(),o("div",Wi,Xi))}});const ed=Ae(Ji,[["__scopeId","data-v-1356323c"]]),td={key:0},sd={class:"row"},od={class:"col-md-6"},ad={class:"col-md-6"},nd={key:1},ld=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),id=[ld],dd=ge({__name:"TaskPolls",setup(U){const f=ke();return(E,k)=>a(f).hasPermission(["view task","view poll"])?(t(),o("div",td,[e("div",sd,[e("div",od,[A(ed)]),e("div",ad,[A(Gl)])])])):(t(),o("div",nd,id))}});const rd={class:"col-md-12"},cd={key:0,class:"card card-widget widget-user shadow-lg"},ud=e("div",{style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",background:"rgba(0, 0, 0, 0.5)"}},null,-1),_d=[ud],md={class:"card-footer"},pd={class:""},hd={class:"widget-user-image",style:{left:"4%","margin-left":"-45px",position:"absolute",top:"190px"}},vd=["src"],bd={class:"ml-3 flex-1",style:{"margin-top":"-28px"}},fd=e("i",{class:"fas fa-chevron-left fa-xs"},null,-1),gd={class:"h2 mb-2 lg:mb-0",style:{"margin-left":"150px"}},yd={class:"card-outline card-outline-tabs"},xd={class:"card-header p-0 border-bottom-0"},$d={class:"nav nav-tabs",id:"custom-tabs-four-tab",role:"tablist"},wd=e("li",{class:"nav-item"},[e("a",{class:"nav-link active",id:"custom-tabs-four-home-tab","data-toggle":"pill",href:"#custom-tabs-four-home",role:"tab","aria-controls":"custom-tabs-four-home","aria-selected":"true"},"Meetings")],-1),kd={key:0,class:"nav-item"},Md=e("a",{class:"nav-link",id:"custom-tabs-four-documents-tab","data-toggle":"pill",href:"#custom-tabs-four-documents",role:"tab","aria-controls":"custom-tabs-four-documents","aria-selected":"false"}," Documents ",-1),Sd=[Md],Cd=e("li",{class:"nav-item"},[e("a",{class:"nav-link",id:"custom-tabs-four-discussions-tab","data-toggle":"pill",href:"#custom-tabs-four-discussions",role:"tab","aria-controls":"custom-tabs-four-discussions","aria-selected":"false"}," Discussions ")],-1),Pd=e("li",{class:"nav-item"},[e("a",{class:"nav-link",id:"custom-tabs-four-tasks-tab","data-toggle":"pill",href:"#custom-tabs-four-tasks",role:"tab","aria-controls":"custom-tabs-four-tasks","aria-selected":"false"}," Task & Polls ")],-1),Td=e("li",{class:"nav-item"},[e("a",{class:"nav-link",id:"custom-tabs-four-members-tab","data-toggle":"pill",href:"#custom-tabs-four-members",role:"tab","aria-controls":"custom-tabs-four-members","aria-selected":"false"}," Members ")],-1),qd={class:"card-body"},Dd={class:"tab-content",id:"custom-tabs-four-tabContent"},Fd={class:"tab-pane fade active show",id:"custom-tabs-four-home",role:"tabpanel","aria-labelledby":"custom-tabs-four-home-tab"},Id={class:"tab-pane fade",id:"custom-tabs-four-documents",role:"tabpanel","aria-labelledby":"custom-tabs-four-documents-tab"},Bd=e("div",{class:"tab-pane fade",id:"custom-tabs-four-discussions",role:"tabpanel","aria-labelledby":"custom-tabs-four-discussions-tab"},null,-1),Ad={class:"tab-pane fade",id:"custom-tabs-four-tasks",role:"tabpanel","aria-labelledby":"custom-tabs-four-tasks-tab"},Ed=e("div",{class:"tab-pane fade",id:"custom-tabs-four-goals",role:"tabpanel","aria-labelledby":"custom-tabs-four-goals-tab"},null,-1),Ud={class:"tab-pane fade",id:"custom-tabs-four-members",role:"tabpanel","aria-labelledby":"custom-tabs-four-members-tab"},or=ge({__name:"BoardDetails",setup(U){const f=ke(),E=v(),k=qe(),D=tt();function h(){D.push({name:_t})}r(h,"goBack");const R=k.params.boardId;return $e(async()=>{try{const F=(await mt(R)).data;E.value=F,window.dispatchEvent(new CustomEvent("updateTitle",{detail:F.name}))}catch(M){console.error("Error fetching board data:",M)}}),(M,F)=>(t(),o("div",rd,[E.value?(t(),o("div",cd,[e("div",{class:"widget-user-header text-white",style:et([{backgroundImage:`url(${a(Mt)(E.value.cover)})`,backgroundPosition:"center center",backgroundSize:"cover",backgroundRepeat:"no-repeat"},{height:"250px",width:"100%",position:"relative"}])},_d,4),e("div",md,[e("div",pd,[e("div",hd,[e("img",{class:"img-circle elevation-2",src:a(St)(E.value.icon),alt:"User Avatar",style:{width:"128px",height:"128px"}},null,8,vd)]),e("div",bd,[e("a",{href:"",onClick:F[0]||(F[0]=B(C=>h(),["prevent"])),class:"mb-2 lg:mb-0 text-blue-primary",style:{"margin-left":"140px","margin-top":"-44px"}},[fd,O(" Boards ")]),e("h3",gd,c(E.value.name),1),e("div",yd,[e("div",xd,[e("ul",$d,[wd,a(f).hasPermission(["view folders"])?(t(),o("li",kd,Sd)):_("",!0),Cd,Pd,Td])]),e("div",qd,[e("div",Dd,[e("div",Fd,[A(La)]),e("div",Id,[A(Io)]),Bd,e("div",Ad,[A(dd)]),Ed,e("div",Ud,[A(Cn)])])])])])])])])):_("",!0)]))}});export{or as default};
