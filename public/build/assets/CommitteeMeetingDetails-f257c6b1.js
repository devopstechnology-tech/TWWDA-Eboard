var kt=Object.defineProperty;var d=(R,M)=>kt(R,"name",{value:M,configurable:!0});import{d as $e,i as xe,r as p,j as Ie,V as Pe,C as ie,P as Ce,o as t,c as s,e,a1 as D,h as v,u as a,F as B,T as W,g as K,t as i,f as X,R as ue,a6 as at,a5 as Mt,$ as Ne,a0 as He,_ as Ue,k as Je,n as Ct,H as rt,a9 as St,b as ct,a2 as At,a3 as It,l as Qe,w as Ye,a7 as Tt,a8 as qt}from"./main-d97516e2.js";import{u as De,e as Oe,c as ye,d as We,a as b,g as Pt,f as ze,b as Fe}from"./useUnexpectedErrorHandler-01ee037e.js";import{u as nt,a as gt,b as bt,c as ft,d as Dt,e as Ft,f as Et,g as Rt,h as Ut,i as Lt,j as Vt,k as jt}from"./useConflictRequest-f5101978.js";import{g as yt}from"./useMeetingRequest-eac1459b.js";import{z as Xe,A as et,p as xt,B as Ot,f as ut,C as pt,D as lt,l as Nt,e as $t,g as Ht,h as Kt,j as ht,k as tt,m as Bt,n as Yt,o as Be,q as zt,t as Gt,v as Qt,w as Wt}from"./Breadcrumb-62de853f.js";import{u as Jt,a as Zt,b as Xt,c as es,d as ts,e as ss,f as as,g as ns,h as wt,i as os,j as is,k as ls,l as ds,r as rs,n as cs}from"./useMinuteRequest-40fb106c.js";import{F as qe}from"./FormInput-19d746f6.js";import{F as mt}from"./FormQuillEditor-3e5c8bfd.js";import{F as st,k as us,l as ms,m as _s,n as ps,o as hs,B as vs,p as gs,v as dt,j as bs}from"./FormDynamicInput-2daa5165.js";import{u as Se}from"./useQuery-f8736dfe.js";import{_ as _t}from"./FormDateTimeInput.vue_vue_type_style_index_0_lang-6e3ff0f9.js";import{F as vt}from"./FormTextBox-a4c4e2ba.js";import{F as fs}from"./FormUpload-a6d2fc77.js";import{d as ys,e as xs,f as $s}from"./usePollRequest-97611322.js";import{d as ws,e as ks,f as Ms}from"./useTaskRequest-3c5f3f5d.js";import"./index-a4206e89.js";import"./attendance_routes-7f73de2b.js";import"./folder_routes-575ae698.js";import"./useQueryClient-99479e2d.js";const he=d(R=>(Ne("data-v-d0452794"),R=R(),He(),R),"_withScopeId$6"),Cs={key:0,class:"card-header flex items-center"},Ss=he(()=>e("div",{class:"flex items-center flex-1 w-full"},null,-1)),As={class:"flex items-center space-x-2"},Is=he(()=>e("span",{class:"text-danger"},"Reset Agenda Start Choice",-1)),Ts=[Is],qs={key:1,class:"flex gap-5"},Ps={class:"flex-1"},Ds={class:"card card-outline card-danger",style:{"min-height":"384px"}},Fs={class:"card-body"},Es={class:"flex w-full"},Rs={class:"flex-1"},Us=he(()=>e("div",{class:"relative h-8"},[e("div",{class:"absolute border -right-16 text-[10px] bottom-2 rounded text-center px-2 py-0.5 text-gray-700 z-10 border-gray-200 bg-gray-200"},[e("div",{class:"absolute left-0 right-0 text-green text-xxs bold -top-2.5"}," Start ")])],-1)),Ls={"data-list_format":"num_la_lr",class:"agenda-list mb-0 border-l border-blue"},Vs={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},js=he(()=>e("div",{class:"absolute border -right-16 top-4 text-[10px] rounded text-center py-0.5 text-gray-700 z-10 border-gray-200 bg-gray-200 px-2"},null,-1)),Os=["onClick"],Ns={class:"font-medium flex-1"},Hs=["innerHTML"],Ks={class:"flex items-center gap-2 mt-1 h-6"},Bs={class:"text-xs text-gray-600"},Ys={key:0,class:"list-none assignees-list"},zs={key:1,class:"flex gap-2 items-start"},Gs={class:"font-medium flex-1"},Qs=["innerHTML"],Ws={class:"flex items-center gap-2 mt-1 h-6"},Js={class:"text-xs text-gray-600"},Zs={key:0,class:"list-none assignees-list"},Xs={class:"ml-4 mt-2"},ea={class:"flex gap-x-2"},ta=he(()=>e("button",{type:"submit",class:"btn btn-primary h-10"}," Save ",-1)),sa=["onClick"],aa={class:"min-h-6 border-l border-blue"},na={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},oa=he(()=>e("div",{class:"absolute border -right-16 top-4 text-[10px] rounded text-center py-0.5 text-gray-700 z-10 border-gray-200 bg-white px-1"}," 10:30pm ",-1)),ia=["onClick"],la={class:"font-medium flex-1"},da=["innerHTML"],ra={class:"flex items-center gap-2 mt-1 h-6"},ca={class:"text-xs text-gray-600"},ua={key:0,class:"list-none assignees-list"},ma={key:1,class:"flex gap-2 items-start"},_a={class:"font-medium flex-1"},pa=["innerHTML"],ha={class:"flex items-center gap-2 mt-1 h-6"},va={class:"text-xs text-gray-600"},ga={key:0,class:"list-none assignees-list"},ba={class:"mt-4"},fa={key:0,class:"mt-4"},ya={class:"flex gap-x-2"},xa=he(()=>e("button",{type:"submit",class:"btn btn-primary h-10"}," Save ",-1)),$a={class:"relative h-8"},wa={class:"absolute border -right-16 text-[10px] bottom-2 rounded text-center px-2 py-0.5 text-gray-700 z-10 border-gray-200 bg-gray-200"},ka=he(()=>e("div",{class:"absolute left-0 right-0 text-green text-xxs bold -top-2.5"}," END ",-1)),Ma=he(()=>e("div",null,[e("div",{class:"w-16 flex h-full justify-center py-4"},[e("div",{class:"bg-gray-200 h-full relative left-1.5",style:{width:"1px"}},"   ")])],-1)),Ca={class:"w-[350px] relative"},Sa={class:"w-[350px]"},Aa={class:"card card-outline card-danger mb-0"},Ia={class:"card-body"},Ta={class:"form-group"},qa=he(()=>e("label",{class:"text-xs uppercase font-medium text-gray-700 tracking-wide"}," People Responsible ",-1)),Pa={key:0,class:"message"},Da={class:"flex justify-between"},Fa=he(()=>e("button",{type:"submit",class:"btn btn-sm btn-primary ml-1 mr-1"}," Save ",-1)),Ea=he(()=>e("div",{class:"w-[350px] relative"},[e("div",{class:"w-[350px] card card-outline card-danger"},[e("div",{class:"bg-gray-200 rounded-lg h-96 flex items-center justify-center"},[e("div",{class:"text-center text-gray-700"},[K(" Select an agenda item to edit "),e("br",{role:"presentation","data-uw-rm-sr":""}),e("div",{class:"text-xl mt-1"},[e("svg",{class:"svg-inline--fa fa-turn-down-left","aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"turn-down-left",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":""},[e("path",{fill:"currentColor",d:"M6.5 271.6c-8.7 9.2-8.7 23.7 0 32.9l121.4 129c8.8 9.3 21 14.6 33.7 14.6c25.6 0 46.3-20.7 46.3-46.3l0-41.7 144 0c88.4 0 160-71.6 160-160l0-112c0-30.9-25.1-56-56-56l-32 0c-30.9 0-56 25.1-56 56l0 120c0 4.4-3.6 8-8 8l-152 0 0-41.7c0-25.6-20.7-46.3-46.3-46.3c-12.8 0-25 5.3-33.7 14.6L6.5 271.6zm153.5-93l0 61.5c0 13.3 10.7 24 24 24l176 0c30.9 0 56-25.1 56-56l0-120c0-4.4 3.6-8 8-8l32 0c4.4 0 8 3.6 8 8l0 112c0 61.9-50.1 112-112 112l-168 0c-13.3 0-24 10.7-24 24l0 61.5L57 288 160 178.5z"})])])])])])],-1)),Ra=[Ea],Ua={key:2,class:"card card-outline card-danger"},La=he(()=>e("div",{class:"card-header text-center justify-center bg-gradient-info"},[e("h3",{class:"text-center font-bold text-lg"}," Choose Your Starting Point ")],-1)),Va={class:"card-body"},ja={class:"flex justify-center space-x-4 py-6"},Oa=he(()=>e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-gradient-success rounded-full shadow w-11 h-11"},[e("i",{class:"fa fa-list text-white"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From Scratch")],-1)),Na=[Oa],Ha=he(()=>e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-gradient-warning rounded-full shadow w-11 h-11"},[e("i",{class:"far fa-file text-white"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From the Agenda")],-1)),Ka=[Ha],Ba={class:"flex justify-center col-md-6"},Ya={method:"dialog",class:"modal-box rounded-xl"},za=he(()=>e("h3",{class:"font-bold text-lg justify-center flex text-white"}," save the Imported AGendas from Previous Meeting ",-1)),Ga=he(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),Qa={class:"w-full mt-6 p-2"},Wa={class:"font-thin text-sm flex flex-col items-center gap-6"},Ja={class:"w-full rounded-xl mx-auto p-1 custom-modal"},Za=he(()=>e("h3",{class:"text-center text-base font-bold text-primary"}," Make use of the imported Agendas ",-1)),Xa={class:"flex justify-center mt-4"},en=$e({__name:"Agenda",emits:["change-tab"],setup(R,{emit:M}){const Y=xe(),E=M,I=p("default"),w=De(),T=Ie(),C=p("create"),f=p(""),j=p("");T.params.committeeId;const x=T.params.meetingId,m=T.params.scheduleId,S=p(""),k=p(null),q=p([]),z=p([]),te=p(null),Z=p(null),se=p(null),ae=p([]),de=p(!1),P=p(!1),F=p(!1),r=p(null),g=p(-1),ce=p(-1),{errorMessage:U}=Oe("assignees"),le=ye({schedule_id:We().required(),title:b().required(),duration:Pt().nullable(),description:b().nullable(),agenda_id:b().nullable(),assignees:ze().of(b()).nullable(),children:ze().of(b()).nullable()}),{handleSubmit:H,setErrors:u,setFieldValue:L,values:pe}=Fe({validationSchema:le,initialValues:{schedule_id:m,title:"",duration:null,description:null,agenda_id:null,assignees:[],children:[]}}),ne=d(()=>{P.value=!0,de.value=!1,F.value=!1,g.value=-1,ce.value=-1,C.value="create",L("title",""),console.log("we are here",P.value,F.value,ae)},"enableAddingNewParent"),ee=d((O,N)=>{F.value=!0,r.value=N,g.value=O,ce.value=-1,L("title",""),de.value=!1,C.value="create"},"enableAddingChild"),ge=d((O,N,l,c)=>{if(Z.value=l,k.value=l.id,de.value=!0,P.value=!1,F.value=!1,g.value=O,ce.value=N,C.value="edit",j.value=c,L("title",l.title),L("schedule_id",m),L("duration",l.duration),L("description",l.description),l.assignees){const h=l.assignees.map(A=>A.id);q.value=h,L("assignees",h)}else L("assignees",[])},"enableEditing"),me=H(async(O,{resetForm:N})=>{try{if(C.value==="create"){const l={title:O.title,schedule_id:O.schedule_id,duration:null,description:null,agenda_id:null,assignees:[],children:[]};if(F.value){const c=r.value?r.value.toString():null;l.agenda_id=c,await Jt(l,m)}else P.value&&await Zt(l,m)}else{const l={title:O.title,schedule_id:O.schedule_id,duration:O.duration,description:O.description,agenda_id:null,assignees:[],children:[]};if(ce.value!==-1){l.assignees=O.assignees;const c=k.value?k.value.toString():null;l.agenda_id=c,await Xt(l,m)}else if(g.value!==-1){l.assignees=O.assignees;const c=k.value?k.value.toString():null;l.agenda_id=c,await es(l,m)}}await Ae(),N(),V()}catch(l){l instanceof Pe?u(l.messages):w(l)}}),V=d(()=>{C.value="create",I.value="default",f.value="",j.value="",de.value=!1,P.value=!1,F.value=!1,g.value=-1,ce.value=-1,Z.value=null,k.value=null,q.value=[],L("title",""),L("duration",null),L("description",null),L("agenda_id",null),L("assignees",[]),L("children",[])},"cancelEditing"),oe=[{name:"- none -",value:"0"},{name:"5 minutes",value:"5"},{name:"10 minutes",value:"10"},{name:"15 minutes",value:"15"},{name:"20 minutes",value:"20"},{name:"25 minutes",value:"25"},{name:"30 minutes",value:"30"},{name:"35 minutes",value:"35"},{name:"40 minutes",value:"40"},{name:"45 minutes",value:"45"},{name:"50 minutes",value:"50"},{name:"55 minutes",value:"55"},{name:"60 minutes",value:"60"}],Q=ie(()=>oe),re=d(()=>{L("assignees",q.value)},"selectedUsers"),o=d(()=>{L("assignees",q.value)},"removeselectedUsers"),y=ie(()=>{var N;const O=[];return z.value&&((N=z.value)==null?void 0:N.length)>0&&z.value.reduce((l,c)=>(l.push({id:c.id,name:`${c.user.full_name}`}),l),O),O}),_=d(async()=>{var N;const O=(N=Z.value)==null?void 0:N.id;j.value==="agenda"?await ts(O):await ss(O),await Ae(),V()},"deleteAgenda"),n=d(async O=>{O==="scratch"?f.value=O:O==="previous"&&(I.value="custom",f.value=O,await Ae())},"startAgenda"),$=d(async()=>{f.value==="previous"&&(I.value="default",await Ae()),f.value=""},"resetAgendaStartChoice"),G=d(async()=>{var N;const O=S.value;$(),await as(O,m),(N=se.value)==null||N.close(),S.value="",I.value="default",f.value="",await Ae()},"SaveImportedAgendas"),ve=d(()=>Se({queryKey:["getMeetingScheduleAgendasKey",m],queryFn:async()=>{var N;let O;return I.value==="custom"?(O=await ns({paginate:"false"}),O.data&&O.data.length>0?(S.value=O.data[0].schedule_id,(N=se.value)==null||N.showModal()):(Mt({title:"Notice",text:"No agendas found in the database. Please create an agenda from scratch.",type:"warning"}),I.value="default")):I.value==="default"&&(O=await wt(m,{paginate:"false"})),(O==null?void 0:O.data)||[]}}),"getMeetingScheduleAgendas"),{isLoading:be,data:we,refetch:Ae}=ve(),Ve=ie(()=>te.value),je=d(async()=>{const O=await nt(x,{paginate:"false"});z.value=O.data},"getmemberships"),Ke=d(()=>{E("change-tab","members")},"handleManageMembersClick");return Ce(()=>{je(),window.addEventListener("refetchMemberships",je)}),(O,N)=>{var l;return t(),s(B,null,[f.value==="scratch"||f.value==="previous"?(t(),s("div",Cs,[Ss,e("div",As,[e("button",{type:"submit",onClick:D($,["prevent"]),class:"btn btn-tool"},Ts)])])):v("",!0),f.value==="scratch"||f.value==="previous"||a(we)&&a(we).length?(t(),s("div",qs,[e("div",Ps,[e("div",Ds,[e("div",Fs,[e("div",Es,[e("div",Rs,[Us,e("ol",Ls,[(t(!0),s(B,null,W(a(we),(c,h)=>(t(),s("li",{class:"mb-2 hover:border-gray-400",key:h},[e("div",Vs,[js,a(Y).hasPermission(["edit agenda"])?(t(),s("div",{key:0,class:"flex gap-2 items-start",onClick:A=>ge(h,-1,c,"agenda")},[e("div",Ns,[K(i(a(Xe)(h))+"."+i(c.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:c.description},null,8,Hs)]),e("div",Ks,[e("div",Bs,i(a(et)(c.duration)),1)]),e("div",null,[c.assignees?(t(),s("ul",Ys,[(t(!0),s(B,null,W(c.assignees,(A,J)=>{var _e;return t(),s("li",{class:"text-sm text-primary",key:J},i(J+1)+". "+i((_e=A.user)==null?void 0:_e.full_name),1)}),128))])):v("",!0)])],8,Os)):(t(),s("div",zs,[e("div",Gs,[K(i(a(Xe)(h))+"."+i(c.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:c.description},null,8,Qs)]),e("div",Ws,[e("div",Js,i(a(et)(c.duration)),1)]),e("div",null,[c.assignees?(t(),s("ul",Zs,[(t(!0),s(B,null,W(c.assignees,(A,J)=>{var _e;return t(),s("li",{class:"text-sm text-primary",key:J},i(J+1)+". "+i((_e=A.user)==null?void 0:_e.full_name),1)}),128))])):v("",!0)])])),e("div",Xs,[F.value&&r.value===c.id?(t(),s("form",{key:0,novalidate:"",onSubmit:N[0]||(N[0]=D((...A)=>a(me)&&a(me)(...A),["prevent"]))},[e("div",ea,[X(qe,{labeled:!1,label:"Agenda",name:"title",class:"form-control form-control-sm p-0",placeholder:"Enter Meeting Agenda",type:"text"}),ta]),e("a",{onClick:D(V,["prevent"]),class:"text-xs cursor-pointer"}," Cancel ")],32)):v("",!0)]),g.value!==h&&!F.value&&a(Y).hasPermission(["create agenda"])?(t(),s("button",{key:2,onClick:A=>ee(h,c.id),class:"ml-4 mt-2"}," + Add sub Agenda ",8,sa)):v("",!0)]),e("ol",aa,[(t(!0),s(B,null,W(c.children,(A,J)=>(t(),s("li",{class:"mb-2 hover:border-gray-400",draggable:"false",key:J},[e("div",na,[oa,a(Y).hasPermission(["edit agenda"])?(t(),s("div",{key:0,class:"flex gap-2 items-start",onClick:_e=>ge(h,J,A,"subagenda")},[e("div",la,[K(i(a(Xe)(h,J))+". "+i(A.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:A.description},null,8,da)]),e("div",ra,[e("div",ca,i(a(et)(A.duration)),1)]),e("div",null,[A.assignees?(t(),s("ul",ua,[(t(!0),s(B,null,W(A.assignees,(_e,Te)=>(t(),s("li",{class:"text-sm text-primary",key:Te},i(Te+1)+". "+i(_e.user.full_name),1))),128))])):v("",!0)])],8,ia)):(t(),s("div",ma,[e("div",_a,[K(i(a(Xe)(h,J))+". "+i(A.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:A.description},null,8,pa)]),e("div",ha,[e("div",va,i(a(et)(A.duration)),1)]),e("div",null,[A.assignees?(t(),s("ul",ga,[(t(!0),s(B,null,W(A.assignees,(_e,Te)=>(t(),s("li",{class:"text-sm text-primary",key:Te},i(Te+1)+". "+i(_e.user.full_name),1))),128))])):v("",!0)])]))])]))),128))])]))),128))]),e("div",ba,[e("div",null,[P.value?(t(),s("div",fa,[e("form",{novalidate:"",onSubmit:N[1]||(N[1]=D((...c)=>a(me)&&a(me)(...c),["prevent"])),class:"mt-4"},[e("div",ya,[X(qe,{labeled:!1,label:"Agenda",name:"title",class:"form-control form-control-sm p-0",placeholder:"Enter Meeting Agenda",type:"text"}),xa])],32),e("a",{onClick:D(V,["prevent"]),class:"text-xs cursor-pointer"}," Cancel ")])):v("",!0),a(Y).hasPermission(["create agenda"])?(t(),s("button",{key:1,onClick:ne,class:"btn btn-secondary block w-full mb-4"}," Add Agenda ")):v("",!0)])]),e("div",$a,[e("div",wa,[ka,K(" "+i((l=Ve.value)!=null&&l.end_time?a(xt)(Ve.value.end_time):""),1)])])]),Ma])])])]),e("div",{class:ue({hidden:!de.value,"md:block":!0,"w-[350px]":!0})},[e("div",Ca,[e("div",Sa,[e("div",Aa,[e("form",{novalidate:"",onSubmit:N[6]||(N[6]=D((...c)=>a(me)&&a(me)(...c),["prevent"]))},[e("div",Ia,[X(qe,{label:"Agenda",name:"title",class:"w-full text-sm tracking-wide",placeholder:"Enter Meeting Agenda",t:"",ype:"text"}),X(mt,{label:"Agenda Description",name:"description",theme:"snow",placeholder:"Enter Agenda  Description",toolbar:"minimal",contentType:"html"}),X(st,{name:"duration",label:"Duration",placeholder:"Select Duration",options:Q.value},null,8,["options"]),e("div",Ta,[qa,e("div",{class:ue(["multiselect-container",{error:!!a(U)}])},[X(a(at),{id:"assignees",modelValue:q.value,"onUpdate:modelValue":N[2]||(N[2]=c=>q.value=c),mode:"tags",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:y.value,valueProp:"id",trackBy:"id",label:"name",class:ue(["multiselect-container",{error:!!a(U)}]),onSelect:N[3]||(N[3]=c=>re()),onDeselect:N[4]||(N[4]=c=>o())},null,8,["modelValue","options","class"]),a(U)?(t(),s("div",Pa,i(a(U)),1)):v("",!0)],2),e("button",{onClick:D(Ke,["prevent"]),class:"btn btn-info mt-2"}," Manage Members ")]),e("div",Da,[e("button",{onClick:N[5]||(N[5]=D(c=>_(),["prevent"])),class:"btn btn-link btn-sm text-danger h-7"}," Delete "),e("div",null,[e("button",{onClick:D(V,["prevent"]),class:"btn btn-secondary btn-sm ml-1 mr-1"}," Cancel "),Fa])])])],32)])])])],2),e("div",{class:ue({hidden:de.value,"md:block":!0,"w-[350px]":!0})},Ra,2)])):f.value===""?(t(),s("div",Ua,[La,e("div",Va,[e("div",ja,[e("a",{onClick:N[7]||(N[7]=D(c=>n("scratch"),["prevent"])),class:"btn btn-primary h-auto !p-0 p-0 mb-0 card flex-1"},Na),e("a",{onClick:N[8]||(N[8]=D(c=>n("previous"),["prevent"])),class:"btn btn-primary h-auto !p-0 p-0 mb-0 card flex-1"},Ka)])])])):v("",!0),e("div",Ba,[e("dialog",{id:"saveagendasModal",class:"modal modal-primary",ref_key:"saveagendasModal",ref:se},[e("form",Ya,[za,Ga,e("div",Qa,[e("div",Wa,[e("form",Ja,[Za,e("div",Xa,[e("button",{type:"submit",onClick:D(G,["prevent"]),class:"btn btn-lg btn-success"}," Save Imported Agendas ")])])])])])],512)])],64)}}});const tn=Ue(en,[["__scopeId","data-v-d0452794"]]),Ee=d(R=>(Ne("data-v-df6bfbcb"),R=R(),He(),R),"_withScopeId$5"),sn={key:0},an={key:0,class:"card card-widget shadow-lg"},nn={class:"card-header"},on={class:"d-flex align-items-center"},ln={class:"ml-3 flex-1"},dn=Ee(()=>e("i",{class:"fas fa-chevron-left"},null,-1)),rn={key:0,class:"ml-auto flex self-end"},cn={key:0,type:"button",class:"btn btn-sm mr-1 btn-success btn-lg"},un=Ee(()=>e("i",{class:"fas fa-door-closed mr-1"},null,-1)),mn={key:1,type:"button",class:"btn btn-sm mr-1 btn-success btn-lg"},_n=Ee(()=>e("i",{class:"fa fa-check mr-1"},null,-1)),pn=Ee(()=>e("i",{class:"fa fa-check mr-1"},null,-1)),hn={class:"card-body"},vn=Ee(()=>e("span",{class:"info-box-icon",style:{left:"4%","margin-left":"-45px",position:"absolute",top:"88px"}},[e("div",{class:"h3 text-bold font-bold uppercase text-primary"}," Confidential")],-1)),gn={class:"text-center logo-container"},bn=["src"],fn={class:"h3 text-center text-primary text-bold font-bold uppercase"},yn=Ee(()=>e("hr",{class:"thick-line"},null,-1)),xn={class:"text-center text-primary text-bold uppercase h4"},$n={class:"text-center text-primary text-bold uppercase h4"},wn={key:0,class:"mt-2 text-primary text-bold uppercase"},kn={key:1,class:"table table-borderless"},Mn={class:"p-0"},Cn={class:"p-0 text-primary text-bold uppercase"},Sn={key:2,class:"mt-2 text-primary text-bold uppercase"},An={key:3,class:"table table-borderless"},In={class:"p-0"},Tn={class:"p-0 text-primary text-bold uppercase"},qn={key:4,class:"mt-2 text-primary text-bold uppercase"},Pn={key:5,class:"table table-borderless"},Dn={class:"p-0"},Fn={class:"p-0 text-primary text-bold uppercase"},En={key:6,class:"mt-2 text-primary text-bold uppercase"},Rn={key:7,class:"table table-borderless"},Un={class:"p-0"},Ln={class:"p-0 text-primary text-bold uppercase"},Vn=Ee(()=>e("h5",{class:"mt-2 text-primary text-bold uppercase"},"Agenda",-1)),jn={class:"list-unstyled"},On={class:"list-unstyled ml-4"},Nn={id:"MinutesEditor",class:"container"},Hn={class:"codex-editor"},Kn={class:"codex-editor__redactor",style:{"padding-bottom":"300px"}},Bn={class:"ce-block"},Yn={class:"flex w-full"},zn={class:"flex-1"},Gn={key:0,"data-list_format":"num_la_lr",class:"agenda-list mb-0"},Qn={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},Wn={class:"flex gap-2 items-start"},Jn={class:"font-medium flex-1"},Zn=["onClick"],Xn={class:"font-bold text-primary"},eo=["innerHTML"],to={key:0,class:"min-h-6"},so={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},ao={class:"flex gap-2 items-start"},no={class:"font-medium flex-1"},oo={class:"font-bold text-primary"},io=["innerHTML"],lo={key:1,class:"card card-widget shadow-lg"},ro=Ee(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, The Minutes have not been Aprroved")],-1)),co=[ro],uo={key:1},mo=Ee(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),_o=[mo],po=$e({__name:"ApprovedMinutes",setup(R){const M=Je();function Y(){M.back()}d(Y,"goBack");const E=Ie(),I=xe(),w=Ct(),T=E.params.committeeId;E.params.meetingId;const C=E.params.scheduleId;E.params.minutesId;const f=p(null),j=p("create"),x=p(!1),m=p([]),S=p(null),k=p(null),q=p(-1),z=p(-1),te=p(!1),Z=p(!1),se=p([{text:""}]),ae=De(),de=ye({schedule_id:We().required(),committee_id:b().nullable(),membership_id:b().nullable(),minute_id:b().nullable(),agenda_id:b().required(),detail_minute_id:b().nullable(),subdetailminute_id:b().nullable(),subagenda_id:b().nullable(),description:b().required(),status:b().required()}),{handleSubmit:P,setErrors:F,setFieldValue:r,values:g}=Fe({validationSchema:de,initialValues:{schedule_id:C,committee_id:T,membership_id:null,minute_id:f.value,agenda_id:"",detail_minute_id:null,subdetailminute_id:null,subagenda_id:null,description:"",status:"unpublished"}});P(async(o,{resetForm:y})=>{try{const _={schedule_id:o.schedule_id,committee_id:null,membership_id:null,minute_id:f.value?f.value.toString():null,agenda_id:o.agenda_id.toString(),detail_minute_id:o.detail_minute_id?o.detail_minute_id.toString():null,subdetailminute_id:o.subdetailminute_id?o.subdetailminute_id.toString():null,subagenda_id:o.subagenda_id?o.subagenda_id.toString():null,description:o.description,status:o.status};j.value==="create"?x.value?await os(_,C):Z.value&&await is(_,C):q.value!==-1?(await ls(_,C),console.log("payload",_)):z.value!==-1&&await ds(_,C),await L(),ce()}catch(_){_ instanceof Pe?F(_.messages):ae(_)}});const ce=d(()=>{j.value="create",x.value=!1,S.value=null,k.value=null,q.value=-1,z.value=-1,te.value=!1,Z.value=!1,r("schedule_id",C),r("committee_id",T),r("membership_id",null),r("minute_id",f.value),r("agenda_id",""),r("detail_minute_id",null),r("subdetailminute_id",null),r("subagenda_id",null),r("description",""),r("status","unpublished")},"reset");ie(()=>{const o=x.value&&S.value===agenda.id&&z.value===pIndex&&q.value===cIndex&&j.value==="create";return console.log("isAddingChild computed:",o),o}),ie(()=>{const o=te.value&&!Z.value&&!x.value&&j.value==="edit";return console.log("isEditing computed:",o),o});const U=d((o,y,_,n,$)=>{ce(),te.value=!0,Z.value=!1,x.value=!1,z.value=o,q.value=y,j.value="edit",console.log("pIndex: number, cIndex:",o,y),console.log("States after enabling adding child:",{is_editing:te.value,isAddingNewParent:Z.value,addingChild:x.value,editingParentIndex:z.value,editingChildIndex:q.value,action:j.value}),r("agenda_id",_.id),q.value!==-1?(r("subdetailminute_id",$.id),r("detail_minute_id",$.detail_minute_id),r("subagenda_id",$.subagenda_id),r("description",$.description)):z.value!==-1&&(r("detail_minute_id",n.id),r("description",n.description))},"enableEditing"),le=d(()=>Se({queryKey:["getMinutesKey",C],queryFn:async()=>{const o=await rs(C,{paginate:"false"});return f.value=o.data.id,o.data},onSuccess:o=>{},onError:o=>{console.error("Failed to fetch minutes:",o)}}),"getMinutes"),{isLoading:H,data:u,refetch:L}=le(),pe=ie(()=>{var o,y,_,n;return(o=u==null?void 0:u.value)!=null&&o.attendances&&((_=(y=u==null?void 0:u.value)==null?void 0:y.attendances)==null?void 0:_.length)>0?((n=u==null?void 0:u.value)==null?void 0:n.attendances.filter($=>$.rsvp_status==="Yes"&&$.attendance_status==="Attended"))||[]:[]}),ne=ie(()=>{var o,y,_,n;return(o=u==null?void 0:u.value)!=null&&o.attendances&&((_=(y=u==null?void 0:u.value)==null?void 0:y.attendances)==null?void 0:_.length)>0?((n=u==null?void 0:u.value)==null?void 0:n.attendances.filter($=>$.rsvp_status==="Online"&&$.attendance_status==="Attended"))||[]:[]}),ee=ie(()=>{var o,y,_,n;return(o=u==null?void 0:u.value)!=null&&o.attendances&&((_=(y=u==null?void 0:u.value)==null?void 0:y.attendances)==null?void 0:_.length)>0?((n=u==null?void 0:u.value)==null?void 0:n.attendances.filter($=>["Yes","No","Maybe"].includes($.rsvp_status)&&$.attendance_status==="Absent"))||[]:[]}),ge=ie(()=>{var o,y,_,n;return(o=u==null?void 0:u.value)!=null&&o.attendances&&((_=(y=u==null?void 0:u.value)==null?void 0:y.attendances)==null?void 0:_.length)>0?((n=u==null?void 0:u.value)==null?void 0:n.attendances.filter($=>$.rsvp_status==="Pending"&&$.attendance_status==="Absent"))||[]:[]}),me=d(async()=>{const o=await wt(C,{paginate:"false"});m.value=o.data},"getmeetingagendas"),V=ie(()=>m.value);Ce(async()=>{await L(),me()}),rt(()=>se==null?void 0:se.value,o=>{o&&(f.value=o)},{deep:!0});const oe=ie(()=>{var y;const o={};return u!=null&&u.value&&(u!=null&&u.value.detailminutes)&&((y=u==null?void 0:u.value.detailminutes)==null||y.forEach(_=>{var n;o[_.agenda_id]||(o[_.agenda_id]=[]),o[_.agenda_id].push(_),(n=_.subdetailminutes)==null||n.forEach($=>{o[$.subagenda_id]||(o[$.subagenda_id]=[]),o[$.subagenda_id].push($)})})),o}),Q=ie(()=>w.getSettings()),re=d(async o=>{await cs(o),await L()},"onAcceptCEOApproval");return(o,y)=>{var _,n,$,G,ve,be,we,Ae,Ve,je,Ke,O,N,l;return a(I).hasPermission(["view minutes"])?(t(),s("div",sn,[a(u)&&((_=a(u))==null?void 0:_.approvalstatus)==="approved"?(t(),s("div",an,[e("div",nn,[e("div",on,[e("div",ln,[e("a",{href:"",onClick:D(Y,["prevent"]),class:"text-blue-primary"},[dn,K(" Go back To Meeting ")])]),a(u)?(t(),s("div",rn,[(($=(n=a(u))==null?void 0:n.schedule)==null?void 0:$.closestatus)==="closed"?(t(),s("button",cn,[un,K(" Meeting Closed ")])):v("",!0),((G=a(u))==null?void 0:G.approvalstatus)==="approved"?(t(),s("button",mn,[_n,K(" This Minutes Have been Approved ")])):(t(),s("button",{key:2,type:"button",class:"btn btn-sm mr-1 btn-warning btn-lg",onClick:y[0]||(y[0]=D(c=>{var h;return re((h=a(u))==null?void 0:h.id)},["prevent"]))},[pn,K(" Sorry, The Minutes have not been Aprroved ")]))])):v("",!0)])]),e("div",hn,[vn,e("div",gn,[e("img",{src:a(Ot)((ve=Q.value)==null?void 0:ve.logo),alt:"Organization Logo",class:"img-fluid logo"},null,8,bn)]),e("div",fn,i((be=Q.value)==null?void 0:be.name),1),yn,e("h4",xn,"MINUTES OF THE "+i((Ae=(we=a(u))==null?void 0:we.meeting)==null?void 0:Ae.title),1),e("p",$n," HELD AT "+i((je=(Ve=a(u))==null?void 0:Ve.meeting)==null?void 0:je.location)+" ON "+i(a(ut)((O=(Ke=a(u))==null?void 0:Ke.schedule)==null?void 0:O.date))+" STARTING AT "+i((l=(N=a(u))==null?void 0:N.schedule)==null?void 0:l.start_time),1),pe.value.length?(t(),s("h5",wn,"Present")):v("",!0),pe.value.length?(t(),s("table",kn,[e("tbody",null,[(t(!0),s(B,null,W(pe.value,(c,h)=>(t(),s("tr",{key:c.id},[e("td",Mn,i(h+1)+". "+i(c.membership.user.full_name),1),e("td",Cn," - "+i(c.membership.position.name),1)]))),128))])])):v("",!0),ne.value.length?(t(),s("h5",Sn,"Present on E-platform ")):v("",!0),ne.value.length?(t(),s("table",An,[e("tbody",null,[(t(!0),s(B,null,W(ne.value,(c,h)=>(t(),s("tr",{key:c.id},[e("td",In,i(h+1)+". "+i(c.membership.user.full_name),1),e("td",Tn," - "+i(c.membership.position.name),1)]))),128))])])):v("",!0),ee.value.length?(t(),s("h5",qn,"Absent With Apology ")):v("",!0),ee.value.length?(t(),s("table",Pn,[e("tbody",null,[(t(!0),s(B,null,W(ee.value,(c,h)=>(t(),s("tr",{key:c.id},[e("td",Dn,i(h+1)+". "+i(c.membership.user.full_name),1),e("td",Fn," - "+i(c.membership.position.name),1)]))),128))])])):v("",!0),ge.value.length?(t(),s("h5",En," Absent ")):v("",!0),ge.value.length?(t(),s("table",Rn,[e("tbody",null,[(t(!0),s(B,null,W(ge.value,(c,h)=>(t(),s("tr",{key:c.id},[e("td",Un,i(h+1)+". "+i(c.membership.user.full_name),1),e("td",Ln," - "+i(c.membership.position.name),1)]))),128))])])):v("",!0),Vn,e("ul",jn,[(t(!0),s(B,null,W(V.value,(c,h)=>(t(),s(B,{key:c.id},[e("li",null,i(h+1)+". "+i(c.title),1),e("ul",On,[(t(!0),s(B,null,W(c.children,(A,J)=>(t(),s("li",{key:A.id},i(h+1)+"."+i(J+1)+" "+i(A.title),1))),128))])],64))),128))]),e("div",Nn,[e("div",Hn,[e("div",Kn,[e("div",Bn,[e("div",Yn,[e("div",zn,[V.value?(t(),s("ol",Gn,[(t(!0),s(B,null,W(V.value,(c,h)=>(t(),s("li",{class:"hover:border-gray-400",key:h},[e("div",Qn,[e("div",Wn,[e("div",Jn,[(t(!0),s(B,null,W(oe.value[c.id],(A,J)=>(t(),s("div",{key:J,onClick:_e=>U(h,-1,c,A,void 0)},[e("div",Xn,i(a(pt)(a(lt)(h),c.title)),1),e("div",{innerHTML:A.description},null,8,eo)],8,Zn))),128))])])]),c.children?(t(),s("ol",to,[(t(!0),s(B,null,W(c.children,(A,J)=>(t(),s("li",{class:"mb-2 hover:border-gray-400",draggable:"false",key:J},[e("div",so,[e("div",ao,[e("div",no,[e("div",oo,i(a(pt)(a(lt)(h),A.title,void 0,void 0,void 0,a(lt)(J))),1),(t(!0),s(B,null,W(oe.value[c.id],(_e,Te)=>(t(),s("div",{key:Te},[(t(!0),s(B,null,W(oe.value[A.id],ot=>(t(),s("div",{key:ot.id},[e("div",{innerHTML:ot.description},null,8,io)]))),128))]))),128))])])])]))),128))])):v("",!0)]))),128))])):v("",!0)])])])])])])])])):(t(),s("div",lo,co))])):(t(),s("div",uo,_o))}}});const ho=Ue(po,[["__scopeId","data-v-df6bfbcb"]]),Ze=d(R=>(Ne("data-v-ba216f77"),R=R(),He(),R),"_withScopeId$4"),vo={class:"rsvp-container"},go={key:0},bo={class:"dropdown"},fo=["aria-expanded"],yo={key:0,class:"dropdown-menu show","aria-labelledby":"rsvp-status"},xo=Ze(()=>e("i",{class:"far fa-check-circle bg-success"},null,-1)),$o=Ze(()=>e("i",{class:"far fa-check-circle bg-warning"},null,-1)),wo=Ze(()=>e("i",{class:"far fa-check-circle bg-danger"},null,-1)),ko=Ze(()=>e("i",{class:"far fa-check-circle bg-info"},null,-1)),Mo=Ze(()=>e("i",{class:"far fa-check-circle bg-info"},null,-1)),Co={key:1},So=$e({__name:"MeetingRsvp",props:{attendee:{},disableRemoteRsvp:{}},emits:["rsvp-updated"],setup(R,{emit:M}){const Y=xe(),E=R,I=M,w=p(!1),T=d(()=>{w.value=!w.value},"toggleDropdown"),C=d(m=>{var S;I("rsvp-updated",{attendeeId:(S=E.attendee)==null?void 0:S.id,status:m}),w.value=!1},"updateRsvp"),f=ie(()=>{var m;return((m=E.attendee)==null?void 0:m.rsvp_status)||"RSVP"}),j=ie(()=>{var m;switch((m=E.attendee)==null?void 0:m.rsvp_status){case"Yes":return"bg-success text-white";case"No":return"bg-warning text-white";case"Maybe":return"bg-danger text-white";case"Online":return"bg-info text-white";case"Pending":return"bg-info text-white";default:return"bg-secondary text-white"}}),x=ie(()=>{var m;switch((m=E.attendee)==null?void 0:m.rsvp_status){case"Yes":return"far fa-check-circle";case"No":return"far fa-check-circle";case"Maybe":return"far fa-check-circle";case"Online":return"far fa-check-circle";case"Pending":return"far fa-check-circle";default:return"far fa-check-circle"}});return(m,S)=>{var k;return t(),s("div",vo,[((k=m.attendee.membership)==null?void 0:k.user.id)===a(Y).user.id?(t(),s("div",go,[e("div",bo,[e("button",{class:ue(["btn btn-icon dropdown-toggle",j.value]),type:"button",onClick:T,"aria-haspopup":"true","aria-expanded":w.value},[e("i",{class:ue([x.value,"mr-2"])},null,2),K(" "+i(f.value),1)],10,fo),w.value?(t(),s("ul",yo,[e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:S[0]||(S[0]=D(q=>C("Yes"),["prevent"]))},[xo,K(" Yes ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:S[1]||(S[1]=D(q=>C("No"),["prevent"]))},[$o,K("No ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:S[2]||(S[2]=D(q=>C("Maybe"),["prevent"]))},[wo,K(" Maybe ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:S[3]||(S[3]=D(q=>C("Online"),["prevent"]))},[ko,K(" Online ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:S[4]||(S[4]=D(q=>C("Pending"),["prevent"]))},[Mo,K(" Pending ")])])])):v("",!0)])])):(t(),s("div",Co,[e("button",null,[e("i",{class:ue([x.value,"mr-2"])},null,2),K(" "+i(f.value),1)])]))])}}});const Ao=Ue(So,[["__scopeId","data-v-ba216f77"]]),Io={key:0,class:"container-fluid"},To=e("div",{class:"card-header flex items-center"},[e("h2",{class:"card-header-title h3"},"Attendance")],-1),qo={class:"container-fluid"},Po={class:"row"},Do={class:"card card-outline card-primary h-100"},Fo={class:"card-body box-profile"},Eo={class:"text-center"},Ro={class:"avatar avatar-md mb-3"},Uo=["src"],Lo={class:"profile-username text-center text-primary"},Vo={class:"mt-3"},jo={class:"d-flex justify-content-between mb-2"},Oo=e("strong",null,"Invited:",-1),No={class:"cell-label"},Ho={class:"d-flex justify-content-between mb-2"},Ko=e("strong",null,"RSVP:",-1),Bo={class:"d-flex justify-content-between mb-2"},Yo=e("strong",null,"Attendance:",-1),zo={key:0},Go={key:0},Qo=["onClick"],Wo=e("i",{class:"far fa-eye"},null,-1),Jo={key:1},Zo=["onClick"],Xo={key:0},ei=["onClick"],ti={key:1,class:"container-fluid"},si=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),ai=[si],ni=$e({__name:"Attendance",setup(R){const M=xe(),Y=De(),E=Ie(),I=Je(),w=p("create");E.params.meetingId;const T=E.params.scheduleId,C=ye({id:b().required(),rsvp_status:b().nullable(),attendance_status:b().nullable(),signatureupload:b().nullable()}),{handleSubmit:f,setErrors:j,setFieldValue:x,values:m}=Fe({validationSchema:C,initialValues:{id:"",rsvp_status:"",attendance_status:"",signatureupload:""}}),S=d(()=>{w.value="create",x("id",""),x("rsvp_status",""),x("attendance_status",""),x("signatureupload","")},"reset"),k=d(F=>{S(),w.value="rsvp",x("id",F.attendeeId),x("rsvp_status",F.status),q()},"handleRsvpUpdated"),q=f(async(F,{resetForm:r})=>{try{const g={id:F.id,rsvp_status:F.rsvp_status,location:F.location,attendance_status:F.attendance_status,meeting_id:F.meeting_id,membership_id:F.membership_id,membership:F.membership,meeting:F.meeting,invite_status:null,signatureupload:null};w.value==="create"?await gt(g,T):w.value==="rsvp"?await bt(g,g.id):w.value==="attendance"&&await ft(g,g.id),await se(),S()}catch(g){g instanceof Pe?j(g.messages):Y(g)}}),z=d(()=>Se({queryKey:["getMeetingAttendancesKey",T],queryFn:async()=>(await Dt(T,{paginate:"false"})).data}),"getMeetingAttendances"),{isLoading:te,data:Z,refetch:se}=z();Ce(async()=>{se()}),Ce(()=>{window.addEventListener("meetingUpdated",ae)}),St(()=>{window.removeEventListener("meetingUpdated",ae)});function ae(F){F.detail.scheduleId===T&&se()}d(ae,"handleMeetingUpdated");const de=d(F=>{var r;I.push({name:"CommitteeSignatureAttendance",params:{committeeId:E.params.committeeId,meetingId:E.params.meetingId,scheduleId:E.params.scheduleId,attendeeId:F.id,mediaId:(r=F.media[0])==null?void 0:r.uuid}})},"navigateToSignaturePage"),P=d(async F=>{await Ft(F),await se()},"sendReminder");return(F,r)=>a(M).hasPermission(["view attendances"])?(t(),s("div",Io,[To,e("div",qo,[e("div",Po,[(t(!0),s(B,null,W(a(Z),(g,ce)=>{var U,le,H,u;return t(),s("div",{class:"col-lg-3 col-md-4 col-sm-6 mb-3",key:ce},[e("div",Do,[e("div",Fo,[e("div",Eo,[e("div",Ro,[e("img",{src:a(Nt)(g.membership.user.profile.avatar),class:"profile-user-img img-fluid img-circle",role:"img","data-uw-rm-alt":"ALT"},null,8,Uo)]),e("h3",Lo,i((le=(U=g.membership)==null?void 0:U.user)==null?void 0:le.full_name),1)]),e("div",Vo,[e("div",jo,[Oo,e("span",No,i(g.invite_status),1)]),e("div",Ho,[Ko,e("div",null,[X(Ao,{attendee:g,disableRemoteRsvp:0,onRsvpUpdated:k},null,8,["attendee"])])]),e("div",Bo,[Yo,e("div",null,[((H=g.membership)==null?void 0:H.user.id)===a(M).user.id?(t(),s("div",zo,[g.attendance_status==="Attended"?(t(),s("div",Go,[e("a",{href:"",onClick:D(L=>de(g),["prevent"]),class:"text-blue-500 hover:text-blue-700 transition duration-150 ease-in-out"},[Wo,K(" "+i(g.attendance_status),1)],8,Qo)])):(t(),s("div",Jo,[e("button",{type:"submit",class:"btn btn-link btn-primary btn-sm text-white",onClick:D(L=>de(g),["prevent"])}," Sign ",8,Zo)]))])):v("",!0)]),a(M).hasRole(["Super Admin","Admin","Company Secretary"])&&((u=g.membership)==null?void 0:u.user.id)!==a(M).user.id?(t(),s("div",Xo,[e("button",{type:"submit",class:"btn btn-link btn-primary btn-sm text-white",onClick:D(L=>P(g.id),["prevent"])}," Send Reminder ",8,ei)])):v("",!0)])])])])])}),128))])])])):(t(),s("div",ti,ai))}}),Re=d(R=>(Ne("data-v-e4b60687"),R=R(),He(),R),"_withScopeId$3"),oi={key:0},ii={class:"card"},li={class:"card-header"},di={class:"card-header flex items-center"},ri=Re(()=>e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"}," Conflicts of Interest ")],-1)),ci={key:0,class:"flex items-center space-x-2"},ui=Re(()=>e("i",{class:"far fa fa-plus mr-2"},null,-1)),mi={class:"container-fluid"},_i={key:0,class:"row"},pi={class:"card card-outline card-primary h-100"},hi={class:"card-body box-profile"},vi={class:"text-center mb-3"},gi={class:"profile-username text-primary"},bi={class:"text-muted"},fi={class:"info-section"},yi=Re(()=>e("span",{class:"text-bold text-danger"},"Nature Of Interest: ",-1)),xi={class:"text-primary"},$i={class:"info-section"},wi=Re(()=>e("span",{class:"text-bold text-danger"},"Amount: ",-1)),ki={class:"info-section"},Mi=Re(()=>e("span",{class:"text-bold text-danger"},"Due Date: ",-1)),Ci={class:"info-section"},Si=Re(()=>e("span",{class:"text-bold text-danger"},"Remarks: ",-1)),Ai={class:"text-primary"},Ii={class:"info-section"},Ti=Re(()=>e("span",{class:"text-bold text-danger"},"Signed: ",-1)),qi={key:0,class:"text-center mt-3"},Pi=["onClick"],Di={class:"flex justify-center col-md-6"},Fi={method:"dialog",class:"modal-box rounded-xl"},Ei={class:"font-bold text-lg justify-center flex"},Ri=Re(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),Ui={class:"w-full mt-6 p-2"},Li={class:"font-thin text-sm flex flex-col items-center gap-6"},Vi={class:"row"},ji={type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},Oi={key:1},Ni=Re(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),Hi=[Ni],Ki=$e({__name:"ConflictofInterest",setup(R){var g,ce;const M=xe(),Y=De(),E=xe(),w=Ie().params.meetingId,T=p(null),C=p("create"),f=p(null),j=((g=E.user)==null?void 0:g.first)+" "+((ce=E.user)==null?void 0:ce.last),x=ye({name:b().required(),address:b().required(),nature:b().required(),amount:b().required(),ceased_date:b().required(),remarks:b().required(),conflict_id:b().nullable()}),{handleSubmit:m,setErrors:S,setFieldValue:k,values:q}=Fe({validationSchema:x,initialValues:{name:j,address:"",nature:"",amount:"",ceased_date:"",remarks:"",conflict_id:null}}),z=d(()=>{var U;Z(),C.value="create",(U=f.value)==null||U.showModal()},"openCreateConflictModal"),te=d(U=>{var le;Z(),T.value=U.id.toString(),C.value="edit",k("address",U.address),k("nature",U.nature),k("amount",U.amount),k("ceased_date",U.ceased_date),k("remarks",U.remarks),(le=f.value)==null||le.showModal()},"openEditConflictModal"),Z=d(()=>{k("address",""),k("nature",""),k("amount",""),k("ceased_date",""),k("remarks",""),k("conflict_id",null),C.value="create",T.value=null,$t()},"resetConflict"),se=m(async(U,{resetForm:le})=>{var H;try{const u={address:U.address,nature:U.nature,amount:U.amount,ceased_date:U.ceased_date,remarks:U.remarks,conflict_id:null};if(C.value==="create")await Et(u,w);else{const L=T.value?T.value.toString():null;u.conflict_id=L,await Rt(u,w)}await F(),Z(),(H=f.value)==null||H.close()}catch(u){u instanceof Pe?S(u.messages):Y(u)}}),ae=d(()=>Se({queryKey:["getMeetingConflictsKey",w],queryFn:async()=>(await Ut(w,{paginate:"false"})).data}),"getMeetingConflicts"),{isLoading:de,data:P,refetch:F}=ae();Ce(async()=>{await F()});const r=ie(()=>{var U;return(U=P==null?void 0:P.value)==null?void 0:U.some(le=>{var H,u,L;return((u=(H=le==null?void 0:le.membership)==null?void 0:H.user)==null?void 0:u.id)===((L=M==null?void 0:M.user)==null?void 0:L.id)})});return(U,le)=>a(M).hasPermission(["view conflicts of interest"])?(t(),s("div",oi,[e("div",ii,[e("div",li,[e("div",di,[ri,a(M).hasPermission(["create conflict of interest"])?(t(),s("div",ci,[r.value?v("",!0):(t(),s("button",{key:0,type:"button",onClick:D(z,["prevent"]),class:"btn btn-primary"},[ui,K(" Add Your Conflict of Interest ")]))])):v("",!0)])]),e("div",mi,[a(P)?(t(),s("div",_i,[(t(!0),s(B,null,W(a(P),(H,u)=>{var L,pe,ne,ee,ge,me;return t(),s("div",{class:"col-lg-4 col-md-6 col-sm-12 mb-3",key:u},[e("div",pi,[e("div",hi,[e("div",vi,[e("h3",gi,i((pe=(L=H==null?void 0:H.membership)==null?void 0:L.user)==null?void 0:pe.full_name),1),e("p",bi,i(H.address),1)]),e("div",fi,[yi,e("span",xi,i(H.nature),1)]),e("div",$i,[wi,e("span",null,"Kshs. "+i(H.amount),1)]),e("div",ki,[Mi,e("span",null,i(a(ut)(H.ceased_date)),1)]),e("div",Ci,[Si,e("span",Ai,i(H.remarks),1)]),e("div",Ii,[Ti,e("span",null,i(H.status),1)]),a(M).hasPermission(["edit conflict of interest"])?(t(),s("div",qi,[((ee=(ne=H==null?void 0:H.membership)==null?void 0:ne.user)==null?void 0:ee.id)===((me=(ge=a(M))==null?void 0:ge.user)==null?void 0:me.id)?(t(),s("button",{key:0,class:"btn btn-success btn-sm",onClick:D(V=>te(H),["prevent"])}," Edit ",8,Pi)):v("",!0)])):v("",!0)])])])}),128))])):v("",!0)])]),e("div",Di,[e("dialog",{id:"conflictmodal",class:"modal",ref_key:"ConflictModal",ref:f},[e("form",Fi,[e("h3",Ei,i(C.value==="create"?"Create Conflict of Interest":"Update Conflict of Interest"),1),Ri,e("div",Ui,[e("div",Li,[e("form",{novalidate:"",onSubmit:le[0]||(le[0]=D((...H)=>a(se)&&a(se)(...H),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",Vi,[X(qe,{labeled:!0,label:"Meeting Member",name:"name",class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Meeting Member",type:"text",disabled:!0}),X(qe,{labeled:!0,label:"Address",name:"address",class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Input Your Address",type:"text"}),X(vt,{labeled:!0,label:"Nature of the Interest",name:"nature",class:"col-md-12 w-full text-sm text-white tracking-wide",placeholder:"Enter Nature of the Interest",rows:2}),X(qe,{labeled:!0,label:"Estimated Value Of The Interest (KSHS.)",name:"amount",class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Estimated Value Of The Interest (KSHS.)",type:"number"}),X(_t,{label:"Due Date",name:"ceased_date",flow:["day"],class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Select Due Date"}),X(vt,{labeled:!0,label:"Remarks",name:"remarks",class:"col-md-12 w-full text-sm text-white tracking-wide",placeholder:"Enter Remarks",rows:2})]),e("button",ji,i(C.value==="create"?"Create Conflict of Interest":"Update Conflict of Interest"),1)],32)])])])],512)])])):(t(),s("div",Oi,Hi))}});const Bi=Ue(Ki,[["__scopeId","data-v-e4b60687"]]),fe=d(R=>(Ne("data-v-8e88d20b"),R=R(),He(),R),"_withScopeId$2"),Yi={key:0},zi={class:"card"},Gi={class:"card-header p-3"},Qi={class:"row"},Wi={class:"col-12"},Ji={class:"row"},Zi={class:"col-lg-9 col-md-8 col-12 mt-2"},Xi={"aria-label":"Breadcrumbs",class:"text-sm overflow-hidden"},el={class:"breadcrumb mb-0 bg-warning"},tl=["onClick"],sl={class:"col-lg-3 col-md-4 col-12"},al={class:"row"},nl={class:"col-md-6 col-12 mt-2"},ol={class:"dropdown"},il={class:"nav-link dropdown-toggle btn btn-secondary btn-block",href:"#",id:"navbarDropdown",type:"button",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},ll=fe(()=>e("span",{class:"text-warning mr-1"},"sort by:",-1)),dl={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},rl=["onClick"],cl={class:"col-md-6 col-12 mt-2"},ul={class:"dropdown"},ml={key:0,class:"nav-link dropdown-toggle btn btn-primary btn-block",href:"#",id:"navbarDropdown",type:"button",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},_l=fe(()=>e("i",{class:"fas fa-plus mr-2"},null,-1)),pl={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},hl=fe(()=>e("i",{class:"fas fa-plus"},null,-1)),vl=fe(()=>e("i",{class:"fas fa-file-upload"},null,-1)),gl={key:0,class:"col-12 mt-3"},bl={class:"input-group input-group-lg"},fl=fe(()=>e("div",{class:"input-group-append"},[e("button",{type:"submit",class:"btn btn-lg btn-default"},[e("i",{class:"fa fa-search"})])],-1)),yl={class:"card-body py-0 px-4 min-h-[300px] relative -top-px z-10"},xl={class:"table-responsive"},$l={class:"table mb-0"},wl={class:"w-28"},kl=["onClick"],Ml=["src"],Cl={key:1},Sl=["src"],Al={key:0},Il={class:"font-weight-bold text-primary text-truncate"},Tl={class:"text-sm font-weight-bold text-primary"},ql=fe(()=>e("span",{class:"text-black"},"Folders",-1)),Pl={class:"text-sm font-weight-bold text-primary"},Dl=fe(()=>e("span",{class:"text-black"},"Files",-1)),Fl={key:1},El={key:0},Rl={class:"font-weight-bold text-primary text-truncate"},Ul={class:"text-sm font-weight-bold text-primary"},Ll={class:"text-black"},Vl={class:"w-28"},jl={key:0},Ol={class:"text-xs text-primary text-truncate"},Nl={key:1},Hl={key:0},Kl={class:"text-xs text-primary text-truncate"},Bl={class:"w-20 text-center"},Yl={class:"flex justify-end space-x-2"},zl={key:0},Gl=["onClick"],Ql=fe(()=>e("i",{class:"far fa-edit"},null,-1)),Wl=[Ql],Jl={key:1},Zl=["onClick"],Xl=fe(()=>e("i",{class:"far fa-edit"},null,-1)),ed=[Xl],td=fe(()=>e("i",{class:"far fa-eye"},null,-1)),sd={class:"flex justify-center col-md-6"},ad={method:"dialog",class:"modal-box rounded-xl"},nd={class:"font-bold text-lg justify-center flex"},od=fe(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),id={class:"w-full mt-6 p-2"},ld={class:"font-thin text-sm flex flex-col items-center gap-6"},dd={class:"row"},rd={key:0,class:"row mt-2 ml-2"},cd={key:0,class:"row mt-2 ml-2"},ud={class:"col-md-6"},md=["src"],_d={class:"col-md-6"},pd=fe(()=>e("strong",null,"File Name:",-1)),hd={class:"text-bold text-primary"},vd=fe(()=>e("strong",null,"File Size:",-1)),gd={class:"text-bold text-primary"},bd=fe(()=>e("strong",null,"Type:",-1)),fd={class:"text-bold text-primary"},yd=fe(()=>e("strong",null,"Last Modified: ",-1)),xd={class:"text-bold text-primary"},$d={type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},wd={key:1},kd=fe(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),Md=[kd],Cd=$e({__name:"Documents",setup(R){const M=xe(),Y=De(),E=Ie(),I=p("create"),w=p("folder"),T=E.params.committeeId,C=p("name-asc"),f=p(""),j=p([]),x=E.params.meetingId,m=p([{id:"1",name:"Folders"}]),S=p(null),k=p(!1),q=p(null),z=p(null),te=[{id:"name-asc",name:"Name (A-Z)"},{id:"name-desc",name:"Name (Z-A)"},{id:"date-newest",name:"Newest to oldest"},{id:"date-oldest",name:"Oldest to newest"}];function Z(o){C.value=o}d(Z,"applySort");const se=ie(()=>{const o=te.find(y=>y.id===C.value);return o?o.name:"Unknown"});function ae(o){m.value.push({id:o.id,name:o.name})}d(ae,"addToNavigationPath");function de(o){const y=m.value.slice(0,o+1);if(y.length!==m.value.length){m.value=y;const _=P(m.value.at(-1).id,U.value);j.value=_?_.children||[]:[]}}d(de,"navigateTo");function P(o,y){if(!Array.isArray(y))return null;for(const _ of y){if(_.id===o)return _;if(_.children&&Array.isArray(_.children)){const n=P(o,_.children);if(n)return n}}return null}d(P,"findFolderById");function F(o){m.value.at(-1).id!==o.id&&(ae(o),console.log("folder",o.children),j.value=o.children||[])}d(F,"openFolder");function r(o){let y=0,_=0;return o.children&&o.children.length>0&&o.children.forEach(n=>{n.type==="folder"?y++:n.type==="file"&&_++}),{folderCount:y,fileCount:_}}d(r,"countChildrenTypes");const g=d(()=>Se({queryKey:["getMeetingFoldersKey",x],queryFn:async()=>(await hs(x,{paginate:"false"})).data[0].children}),"getMeetingFolders"),{isLoading:ce,data:U,refetch:le}=g();Ce(async()=>{await le()}),rt(U,o=>{var y;if(o&&o.length>0){if(m.value.length===1){const _=o[0];m.value[0].id=_.folderable_id.toString(),m.value[0].name=" Documents"}if(m.value.length===1)j.value=o;else{const _=P((y=m.value.at(-1))==null?void 0:y.id,o);j.value=_?_.children||[]:[]}}},{immediate:!0});const H=ie(()=>f.value?u.value.filter(o=>o.name.toLowerCase().includes(f.value.toLowerCase())):u.value),u=ie(()=>{const o=m.value.length>1?j.value:U.value;return Array.isArray(o)?[...o].sort((y,_)=>{switch(C.value){case"name-asc":return y.name.localeCompare(_.name);case"name-desc":return _.name.localeCompare(y.name);case"date-newest":return new Date(_.created_at).getTime()-new Date(y.created_at).getTime();case"date-oldest":return new Date(y.created_at).getTime()-new Date(_.created_at).getTime();default:return 0}}):[]}),L=ye({name:b().required(),meeting_id:b().required(),folder_id:b().nullable(),parent_id:b(),type:b().oneOf(["folder","file"]).required(),fileupload:We().nullable()}),{handleSubmit:pe,setErrors:ne,setFieldValue:ee,values:ge}=Fe({validationSchema:L,initialValues:{name:"",meeting_id:x,folder_id:null,parent_id:"",type:"",fileupload:null}}),me=d(o=>{var n;const y=o.target;if(!((n=y.files)!=null&&n.length))return;const _=y.files[0];ee("name",_.name),ee("type","file")},"updateName"),V=d(o=>{var _;re(),I.value="create",w.value=o,k.value=!0,(_=z.value)==null||_.showModal(),ee("type",o);const y=m.value.at(-1);ee("parent_id",y.id),console.log("parent",y)},"openCreateFolderModal"),oe=pe(async(o,{resetForm:y})=>{var _;try{if(I.value==="create")if(w.value==="folder"){const n={children:[],created_at:null,icon:null,id:null,meeting_id:o.meeting_id,folder_id:null,name:o.name,parent_id:o.parent_id.toString(),type:o.type,fileupload:null,media:[]};await us(n,x)}else{const n={children:[],created_at:null,icon:null,id:null,meeting_id:o.meeting_id,folder_id:null,name:o.name,parent_id:o.parent_id.toString(),type:o.type,fileupload:o.fileupload,media:[]};await ms(n,x)}else if(w.value==="folder"){const n={children:[],created_at:null,folder_id:null,icon:null,id:null,meeting_id:o.meeting_id.toString(),name:o.name,parent_id:o.parent_id.toString(),type:o.type,fileupload:null,media:[]},$=q.value?q.value.toString():null;n.folder_id=$,await _s(n,x)}else{const n={children:[],created_at:null,folder_id:null,icon:null,id:null,meeting_id:o.meeting_id.toString(),name:o.name,parent_id:o.parent_id.toString(),type:o.type,fileupload:o.fileupload,media:[]},$=q.value?q.value.toString():null;n.folder_id=$,await ps(n,x)}await le(),re(),(_=z.value)==null||_.close()}catch(n){n instanceof Pe?ne(n.messages):Y(n)}}),Q=d((o,y)=>{var _;re(),S.value=o,q.value=o.id.toString(),I.value="edit",w.value=y,k.value=!0,ee("name",o.name),ee("folder_id",o.id),ee("type",y),y==="file"&&(ee("fileupload",o.name),zt(o.media[0])),ee("parent_id",o.id),console.log("folder.media",o.name),(_=z.value)==null||_.showModal()},"openEditFolderModal"),re=d(()=>{ee("name",""),ee("folder_id",null),ee("fileupload",""),ee("parent_id",""),ee("type",""),w.value="folder",I.value="create",k.value=!1,S.value=null,q.value=null,$t()},"resetFolder");return(o,y)=>{const _=ct("router-link");return a(M).hasPermission(["view folders"])?(t(),s("div",Yi,[e("div",zi,[e("div",Gi,[e("div",Qi,[e("div",Wi,[e("div",Ji,[e("div",Zi,[e("nav",Xi,[e("ol",el,[(t(!0),s(B,null,W(m.value,(n,$)=>(t(),s("li",{key:n.id,class:"breadcrumb-item"},[e("a",{href:"#",class:"text-gray-800 font-medium",onClick:D(G=>de($),["prevent"])},i(n.name),9,tl)]))),128))])])]),e("div",sl,[e("div",al,[e("div",nl,[e("div",ol,[e("button",il,[ll,K(i(se.value),1)]),e("div",dl,[(t(),s(B,null,W(te,n=>e("a",{key:n.id,href:"#",class:"dropdown-item",onClick:D($=>Z(n.id),["prevent"])},i(n.name),9,rl)),64))])])]),e("div",cl,[e("div",ul,[a(M).hasPermission(["create folders","upload documents","create dropzone"])?(t(),s("button",ml,[_l,K(" New ")])):v("",!0),e("div",pl,[a(M).hasPermission(["create folders","create dropzone"])?(t(),s("a",{key:0,href:"#",onClick:y[0]||(y[0]=D(n=>V("folder"),["prevent"])),class:"dropdown-item"},[hl,K(" New folder ")])):v("",!0),a(M).hasPermission(["upload documents"])?(t(),s("a",{key:1,href:"#",onClick:y[1]||(y[1]=D(n=>V("file"),["prevent"])),class:"dropdown-item"},[vl,K(" Upload a file ")])):v("",!0)])])])])])])]),a(M).hasPermission(["search documents"])?(t(),s("div",gl,[e("div",bl,[At(e("input",{type:"search",class:"form-control form-control-lg",placeholder:"Type your keywords here","onUpdate:modelValue":y[2]||(y[2]=n=>f.value=n)},null,512),[[It,f.value]]),fl])])):v("",!0)])]),e("div",yl,[e("div",xl,[e("table",$l,[e("tbody",null,[(t(!0),s(B,null,W(H.value,n=>{var $,G;return t(),s("tr",{key:n.id,class:"group bg-white hover:bg-gray-100 cursor-pointer"},[e("td",wl,[n.type==="folder"?(t(),s("div",{key:0,onClick:D(ve=>F(n),["prevent"])},[n.type==="folder"?(t(),s("img",{key:0,src:a(Ht)(n.icon),class:"img-fluid",alt:"Folder Icon"},null,8,Ml)):v("",!0)],8,kl)):(t(),s("div",Cl,[a(M).hasPermission(["view documents"])?(t(),Qe(_,{key:0,to:{name:"CommitteeMediaDetails",params:{committeeId:a(T),meetingId:n.meetingId,folderId:n.id,mediaId:n==null?void 0:n.media[0].uuid}},class:"d-block text-success hover:text-green-700 transition ease-in-out"},{default:Ye(()=>[e("img",{src:a(Kt)(n.media[0].mime_type),class:"img-fluid",alt:"File Icon"},null,8,Sl)]),_:2},1032,["to"])):v("",!0)]))]),e("td",null,[n.type==="folder"?(t(),s("div",Al,[e("p",Il,i(n.name),1),e("p",Tl,[K(i(r(n).folderCount)+": ",1),ql]),e("p",Pl,[K(i(r(n).fileCount)+": ",1),Dl])])):(t(),s("div",Fl,[a(M).hasPermission(["view documents"])?(t(),s("div",El,[e("p",Rl,i(($=n==null?void 0:n.media[0])==null?void 0:$.file_name),1),e("p",Ul,[K(" Size: "),e("span",Ll,i(a(ht)((G=n==null?void 0:n.media[0])==null?void 0:G.size)),1)])])):v("",!0)]))]),e("td",Vl,[n.type==="folder"?(t(),s("div",jl,[e("p",Ol,i(a(tt)(n.created_at,"")),1)])):(t(),s("div",Nl,[a(M).hasPermission(["view documents"])?(t(),s("div",Hl,[e("p",Kl,i(a(tt)(n.created_at,"")),1)])):v("",!0)]))]),e("td",Bl,[e("div",Yl,[n.type==="folder"?(t(),s("div",zl,[a(M).hasPermission(["edit folders"])?(t(),s("a",{key:0,href:"#",onClick:D(ve=>Q(n,"folder"),["prevent"]),class:"text-warning hover:text-blue-700 transition ease-in-out"},Wl,8,Gl)):v("",!0)])):(t(),s("div",Jl,[a(M).hasPermission(["edit documents"])?(t(),s("a",{key:0,href:"#",onClick:D(ve=>Q(n,"file"),["prevent"]),class:"text-warning hover:text-blue-700 transition ease-in-out"},ed,8,Zl)):v("",!0),a(M).hasPermission(["view documents"])&&n.type==="file"?(t(),Qe(_,{key:1,to:{name:"CommitteeMediaDetails",params:{committeeId:a(T),meetingId:n.meetingId,folderId:n.id,mediaId:n==null?void 0:n.media[0].uuid}},class:"text-success :text-green-700 transition ease-in-out"},{default:Ye(()=>[td]),_:2},1032,["to"])):v("",!0)]))])])])}),128))])])])])]),e("div",sd,[e("dialog",{id:"foldermodal",class:"modal",ref_key:"FolderModal",ref:z},[e("form",ad,[e("h3",nd,i(I.value==="create"?w.value==="folder"?"Create Folder":"Upload File":w.value==="folder"?"Update Folder":"Update File"),1),od,e("div",id,[e("div",ld,[e("form",{novalidate:"",onSubmit:y[4]||(y[4]=D((...n)=>a(oe)&&a(oe)(...n),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",dd,[X(qe,{labeled:!0,label:w.value==="folder"?"Folder name":"Upload File name",name:"name",class:"col-md-12 w-full text-sm text-white tracking-wide",placeholder:w.value==="folder"?"Folder name":"Upload File name",type:"text"},null,8,["label","placeholder"]),w.value==="file"?(t(),s("div",rd,[X(fs,{labeled:!0,label:"Upload Cover Image for the Committee",name:"fileupload",class:"w-full text-sm text-white tracking-wide col-md-12",placeholder:"Enter Cover Image of the Committee",type:"file",accept:a(Bt).join(", "),onChange:y[3]||(y[3]=n=>{a(Yt)(n),me(n)})},null,8,["accept"]),a(ge).fileupload?(t(),s("div",cd,[e("div",ud,[a(Be).previewUrl?(t(),s("img",{key:0,src:a(Be).previewUrl,alt:"File Preview",class:"file_attachment"},null,8,md)):v("",!0)]),e("div",_d,[e("p",null,[pd,e("span",hd,i(a(Be).name),1)]),e("p",null,[vd,e("span",gd,i(a(ht)(a(Be).size)),1)]),e("p",null,[bd,e("span",fd,i(a(Be).type),1)]),e("p",null,[yd,e("span",xd,i(a(xt)(a(Be).lastModifiedDate)),1)])])])):v("",!0)])):v("",!0)]),e("button",$d,i(I.value==="create"?w.value==="folder"?"Create Folder":"Upload File":w.value==="folder"?"Update Folder":"Update File"),1)],32)])])])],512)])])):(t(),s("div",wd,Md))}}});const Sd=Ue(Cd,[["__scopeId","data-v-8e88d20b"]]),Ad={key:0,class:"card"},Id=e("div",{class:"card-header flex items-center"},[e("h2",{class:"card-header-title h3"},"Details")],-1),Td={class:"card-body"},qd={class:"space-y-6"},Pd={class:"flex items-start"},Dd=e("div",{class:"mr-4 w-6 text-muted"},[e("i",{class:"fas fa-calendar-day"})],-1),Fd={class:"h3 mb-0"},Ed={class:"m-0"},Rd={class:"text-primary"},Ud={key:0},Ld={key:0,class:"m-0 text-black"},Vd={class:"text-primary"},jd={class:"m-0 text-black"},Od={class:"text-primary"},Nd={class:"text-primary"},Hd={class:"flex"},Kd={key:0,class:"w-6 mr-4 mt-2 text-muted"},Bd=e("i",{class:"fas fa-video h-6 w-6 fa-video mx-auto"},null,-1),Yd=[Bd],zd={key:0,class:"flex mb-2 flex-wrap"},Gd=["href"],Qd=e("i",{class:"fas fa-link"},null,-1),Wd=[Qd],Jd=["href"],Zd=e("button",{type:"button",class:"text-primary hover:bg-primary-100 bg-transparent py-2 px-3 rounded-md text-base flex gap-1 items-center justify-center min-w-fit"}," Run a Video Test ",-1),Xd=[Zd],er={key:1},tr={class:"m-0 text-black"},sr={class:"text-primary"},ar={class:"flex items-center"},nr={class:"m-0 text-sm"},or=["innerHTML"],ir=$e({__name:"HomeDashBoard",setup(R){const M=xe(),Y=Ie();Je();const E=Y.params.committeeId,I=Y.params.meetingId,w=Y.params.scheduleId,T=d(S=>{const k=document.createElement("textarea");k.value=S,k.style.top="0",k.style.left="0",k.style.position="fixed",document.body.appendChild(k),k.focus(),k.select();try{const z=document.execCommand("copy")?"successful":"unsuccessful"}catch(q){console.error("Fallback: Oops, unable to copy",q)}document.body.removeChild(k)},"fallbackCopyTextToClipcommittee"),C=d(async S=>{if(!navigator.clipcommittee){T(S),alert("Link copied to clipcommittee, paste it on your browser or share it to your platform");return}try{await navigator.clipcommittee.writeText(S),alert("Link copied to clipcommittee!")}catch(k){console.error("Failed to copy: ",k)}},"copyLinkToClipcommittee"),f=d(()=>Se({queryKey:["getMeetingKey",E,I],queryFn:async()=>{const S=await yt(I);return window.dispatchEvent(new CustomEvent("updateTitle",{detail:S.data.title+" Meeting"})),S.data}}),"getMeeting"),{isLoading:j,data:x,refetch:m}=f();return(S,k)=>{var z,te,Z,se,ae,de,P,F;const q=ct("router-link");return a(x)?(t(),s("div",Ad,[Id,e("div",Td,[e("div",qd,[e("div",Pd,[Dd,e("div",null,[e("div",Fd,[e("p",Ed,[K(" Title: "),e("span",Rd,i((z=a(x))==null?void 0:z.title),1)]),(t(!0),s(B,null,W((te=a(x))==null?void 0:te.schedules,r=>(t(),s("div",{key:r.id},[r.id===a(w)?(t(),s("div",Ud,[r.id===a(w)?(t(),s("p",Ld,[K(" Date: "),e("span",Vd,i(a(ut)(r.date)),1)])):v("",!0),e("p",jd,[K(" Start: "),e("span",Od,i(r.start_time),1),K(" End: "),e("span",Nd,i(r.end_time),1)])])):v("",!0)]))),128))])])]),e("div",Hd,[(Z=a(x))!=null&&Z.link?(t(),s("div",Kd,Yd)):v("",!0),e("div",null,[(se=a(x))!=null&&se.link?(t(),s("div",zd,[e("a",{target:"_blank",href:(ae=a(x))==null?void 0:ae.link,class:"btn btn-primary whitespace-nowrap mr-2","aria-label":"Join Web Conference - open in a new tab"}," Join Web Conference ",8,Gd),e("button",{type:"button",onClick:k[0]||(k[0]=r=>{var g;return C((g=a(x))==null?void 0:g.link)}),title:"Copy web conference link","aria-label":"Copy web conference link",class:"btn btn-primary mr-2"},Wd),e("a",{href:(de=a(x))==null?void 0:de.link,target:"_blank","aria-label":"Run a Video Test - open in a new tab"},Xd,8,Jd)])):(t(),s("div",er,[e("p",tr,[K(" Physical Meeting at:"),e("span",sr,i((P=a(x))==null?void 0:P.location),1)])]))])]),e("div",ar,[e("p",nr,[K(" Meeting Description: "),e("span",{class:"text-primary",innerHTML:(F=a(x))==null?void 0:F.description},null,8,or)])]),e("div",null,[a(M).hasPermission(["view committee"])?(t(),Qe(q,{key:0,to:{name:"CommitteeDetails",params:{committeeId:a(E)}},class:"badge badge-soft"},{default:Ye(()=>[K(i(a(x).meetingable.name),1)]),_:1},8,["to"])):v("",!0),a(M).hasPermission(["view meeting"])?(t(),Qe(q,{key:1,to:{name:"CommitteeMeetingDetails",params:{committeeId:a(E),meetingId:a(I),scheduleId:a(w)}},class:"badge badge-soft"},{default:Ye(()=>[K(i(a(x).title),1)]),_:1},8,["to"])):v("",!0)])])])])):v("",!0)}}}),lr={class:"role-container w-100 d-flex justify-content-center"},dr=["aria-expanded"],rr={key:0,class:"dropdown-menu show justify-content","aria-labelledby":"role-status"},cr=["onClick"],ur={key:1,class:"text-center"},mr=$e({__name:"MemberShipPosition",props:{membership:{},positions:{},disableRemotePosition:{}},emits:["position-updated"],setup(R,{emit:M}){const Y=R,E=M,I=p(null),w=p(!1),T=d(m=>{m.stopPropagation(),w.value=!w.value},"toggleDropdown"),C=d(m=>{E("position-updated",{membershipId:Y.membership.id,positionId:m.id}),w.value=!1},"updateRole"),f=ie(()=>{var m;return`bg-${(m=Y.membership)==null?void 0:m.position.name.toLowerCase()} text-white`}),j=ie(()=>{var m;return(m=Y.membership)==null?void 0:m.position.name}),x=ie(()=>Y.positions);return(m,S)=>{var k,q,z,te;return t(),s("div",lr,[j.value?(t(),s("div",{key:0,class:"dropdown",ref_key:"dropdownRef",ref:I},[e("button",{class:ue(["btn btn-primary dropdown-toggle text-truncate w-100",f.value]),type:"button",onClick:T,"aria-haspopup":"true","aria-expanded":w.value},[e("i",{class:ue(["mr-2 fa "+((k=Y.membership)==null?void 0:k.position.icon),"mr-2"])},null,2),K(" "+i((q=Y.membership)==null?void 0:q.position.name),1)],10,dr),w.value?(t(),s("ul",rr,[(t(!0),s(B,null,W(x.value,Z=>(t(),s("li",{key:Z.name},[e("a",{href:"#",class:"dropdown-item",onClick:D(se=>C(Z),["prevent"])},[e("i",{class:ue(["mr-2 fa "+Z.icon,"mr-2"])},null,2),K(" "+i(Z.name),1)],8,cr)]))),128))])):v("",!0)],512)):(t(),s("div",ur,[e("i",{class:ue(["mr-2 fa "+((z=Y.membership)==null?void 0:z.position.icon),"mr-2"])},null,2),K(" "+i((te=Y.membership)==null?void 0:te.position.name),1)]))])}}});const _r=Ue(mr,[["__scopeId","data-v-32dbf3a7"]]),Le=d(R=>(Ne("data-v-16fbb69a"),R=R(),He(),R),"_withScopeId$1"),pr={class:"card"},hr={class:"card-header flex items-center"},vr=Le(()=>e("h2",{class:"card-header-title h3"},"Committee Meeting Members",-1)),gr={class:"ml-auto flex items-center space-x-2"},br={class:"container-fluid"},fr={key:0,class:"row"},yr={key:0,class:"card card-outline card-primary h-100"},xr={class:"card-body box-profile"},$r={class:"text-center"},wr={class:"profile-username text-center text-primary"},kr=["onClick"],Mr=["onClick"],Cr=Le(()=>e("i",{class:"far fa-eye"},null,-1)),Sr=[Cr],Ar={class:"text-muted text-center text-bold"},Ir={key:0,class:"mt-3"},Tr=Le(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Position ",-1)),qr={class:"text-center"},Pr={key:1,class:"mt-3"},Dr=Le(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Position ",-1)),Fr={class:"text-center"},Er={class:"mt-3"},Rr=Le(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Last Updated ",-1)),Ur={class:"text-center text-primary text-small"},Lr={class:"flex justify-center col-md-6"},Vr={method:"dialog",class:"modal-box rounded-xl"},jr=Le(()=>e("h3",{class:"font-bold text-lg justify-center flex"},i("Add Members"),-1)),Or=Le(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),Nr={class:"w-full mt-6 p-2"},Hr={class:"font-thin text-sm flex flex-col items-center gap-6"},Kr={key:0,class:"message"},Br=Le(()=>e("button",{type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},i("Add Members"),-1)),Yr=$e({__name:"Members",emits:["memberships-updated"],setup(R,{emit:M}){const Y=xe(),E=De(),I=Ie(),w=Je(),T=p("create"),C=I.params.committeeId,f=I.params.meetingId,j=I.params.scheduleId,x=p(!1),m=p(null),S=p([]),k=p([]),q=M,{errorMessage:z}=Oe("assignees"),te=ye({id:b().nullable(),position_id:b().nullable(),committee_id:We().required(),meeting_id:We().required(),memberships:ze().of(b()).required("Members selection is required.")}),{handleSubmit:Z,setErrors:se,setFieldValue:ae,values:de}=Fe({validationSchema:te,initialValues:{committee_id:C,meeting_id:f,id:"",position_id:"",memberships:[]}}),P=d(()=>{ae("memberships",S.value)},"selectedMembers"),F=d(()=>{ae("memberships",S.value)},"removeselectedMembers"),r=d(V=>{var Q;console.log(V.memberships);const oe=V.memberships.map(re=>re.member.id.toString());S.value=oe,ae("memberships",S.value),T.value="edit",x.value=!0,(Q=m.value)==null||Q.showModal()},"openEditMembershipsModal"),g=Z(async(V,{resetForm:oe})=>{var Q;try{ae("memberships",S.value);const re={committee_id:V.committee_id,memberships:V.memberships};if(T.value==="create")await Lt(re,f,j);else if(T.value==="edit")await Vt(re,f,j);else if(T.value==="position"){const o={id:V.id,position_id:V.position_id};await jt(o,f,j)}await u(),q("memberships-updated"),ce(),(Q=m.value)==null||Q.close()}catch(re){re instanceof Pe?se(re.messages):E(re)}}),ce=d(()=>{T.value="create",x.value=!1,S.value=[],ae("memberships",[]),ae("id",""),ae("position_id","")},"reset"),U=d(()=>Se({queryKey:["getMembershipsKey",f,j],queryFn:async()=>{const V=await nt(f,{paginate:"false"});return console.log("response.data",V.data),V.data}}),"getMemberships"),{isLoading:le,data:H,refetch:u}=U(),L=ie(()=>{var oe;const V=[];return k.value&&((oe=k.value)==null?void 0:oe.length)>0&&k.value.reduce((Q,re)=>(Q.push({id:re.id,name:`${re.user.full_name}`}),Q),V),console.log("resul",V),V}),pe=d(async()=>{const V=await vs(C,{paginate:"false"});k.value=V.data},"getMembers");Ce(async()=>{pe()});const ne=p([]),ee=d(async()=>{const V=await gs({paginate:"false"});ne.value=V.data},"getPositions");Ce(async()=>{await ee()});const ge=d(V=>{ce(),T.value="position",ae("id",V.membershipId),ae("position_id",V.positionId),g()},"handlePositionUpdated"),me=d(V=>{w.push({name:"ProfileDetails",params:{userId:V.id,profileId:V.profile.id}})},"openUserProfile");return(V,oe)=>(t(),s(B,null,[e("div",pr,[e("div",hr,[vr,e("div",gr,[e("button",{class:"btn btn-secondary btn-sm",onClick:oe[0]||(oe[0]=D(Q=>r({memberships:a(H)}),["prevent"]))}," Update Members ")])]),e("div",br,[a(H)?(t(),s("div",fr,[(t(!0),s(B,null,W(a(H),(Q,re)=>(t(),s("div",{class:"col-lg-3 col-md-4 col-sm-6 mb-3",key:re},[Q.user?(t(),s("div",yr,[e("div",xr,[e("div",$r,[e("h3",wr,[e("a",{href:"",onClick:D(o=>me(Q.user),["prevent"])},i(Q.user.full_name),9,kr),e("button",{type:"button",onClick:D(o=>me(Q.user),["prevent"]),title:"",class:"mx-2 btn btn-sm btn-primary"},Sr,8,Mr)]),e("p",Ar,i(Q.position.name),1)]),a(Y).hasPermission(["assign meeting position"])?(t(),s("div",Ir,[Tr,e("div",qr,[X(_r,{membership:Q,positions:ne.value,disableRemotePosition:0,onPositionUpdated:ge},null,8,["membership","positions"])])])):(t(),s("div",Pr,[Dr,e("div",Fr,[e("i",{class:ue(["mr-2 fa "+Q.position.icon,"mr-2"])},null,2),K(" "+i(Q.position.name),1)])])),e("div",Er,[Rr,e("p",Ur,i(a(tt)(Q.updated_at,null)),1)])])])):v("",!0)]))),128))])):v("",!0)])]),e("div",Lr,[e("dialog",{id:"membershipsmodal",class:"modal",ref_key:"membershipsmodal",ref:m},[e("form",Vr,[jr,Or,e("div",Nr,[e("div",Hr,[e("form",{novalidate:"",onSubmit:oe[4]||(oe[4]=D((...Q)=>a(g)&&a(g)(...Q),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",{class:ue(["multiselect-container",{error:!!a(z)}])},[X(a(at),{id:"members",modelValue:S.value,"onUpdate:modelValue":oe[1]||(oe[1]=Q=>S.value=Q),mode:"tags",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:L.value,valueProp:"id",trackBy:"id",label:"name",class:ue(["multiselect-container",{error:!!a(z)}]),onSelect:oe[2]||(oe[2]=Q=>P()),onDeselect:oe[3]||(oe[3]=Q=>F())},null,8,["modelValue","options","class"]),a(z)?(t(),s("div",Kr,i(a(z)),1)):v("",!0)],2),Br],32)])])])],512)])],64))}});const zr=Ue(Yr,[["__scopeId","data-v-16fbb69a"]]),Gr={key:0},Qr={class:"card h-full"},Wr={class:"card-header flex items-center"},Jr=e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"}," Meeting Polls ")],-1),Zr={key:0,class:"flex items-center space-x-2"},Xr=e("i",{class:"far fa fa-plus mr-2"},null,-1),ec=e("span",{class:"sr-only"},"Add poll",-1),tc={class:"card-container"},sc={key:0},ac={key:1},nc={class:"row overflow-auto p-4",style:{"max-height":"100vh"}},oc={class:"card card-outline card-primary h-100"},ic={class:"card-header"},lc={class:"card-tools"},dc=["onClick"],rc=e("i",{class:"fas fa-edit"},null,-1),cc=[rc],uc={class:"card-body"},mc={class:"text-primary tex-bold uppercase"},_c=e("strong",{class:"text-primary"},"Question:",-1),pc={class:"mt-2 text-primary text-bold"},hc={class:""},vc=e("strong",null,"Answer Options:",-1),gc={class:"row"},bc={class:"col-6"},fc={class:"list-unstyled text-success"},yc={class:"col-6"},xc={class:"list-unstyled text-success"},$c={class:"d-flex justify-content-between"},wc=e("strong",null,"Due Date:",-1),kc=e("strong",null,"Status:",-1),Mc=e("strong",null,"Vote:",-1),Cc=["innerHTML"],Sc={class:""},Ac=e("strong",null,"Assignees:",-1),Ic={class:"row"},Tc={class:"col-6"},qc={class:"list-unstyled"},Pc={class:"col-6"},Dc={class:"list-unstyled"},Fc=e("strong",null,"Description:",-1),Ec=["innerHTML"],Rc={class:"flex justify-center items-center min-h-screen"},Uc={method:"dialog",class:"modal-box rounded-xl relative bg-white shadow-xl"},Lc={class:"font-bold text-lg text-center"},Vc=e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1),jc={class:"overflow-auto p-4",style:{"max-height":"80vh"}},Oc={class:"grid grid-cols-2 md:grid-cols-2 gap-4 p-2"},Nc={class:"col-span-2"},Hc={class:"flex flex-wrap -mx-2 mt-2"},Kc={class:"w-full md:w-1/2 px-1 md:px-2"},Bc={class:"w-full md:w-1/2 px-1 md:px-2"},Yc={class:"flex flex-wrap -mx-2 mt-2"},zc={class:"w-full md:w-1/3 px-1 md:px-2 text-center"},Gc=e("h2",{class:"font-bold text-sm text-center"},"Click to Add Options",-1),Qc=e("h4",{class:"text-info font-semibold"},"Your Options",-1),Wc={key:0},Jc={key:0,class:"w-full md:w-2/3 px-1 md:px-2 flex flex-col"},Zc=["onClick"],Xc={class:"flex flex-wrap -mx-2 mt-2"},eu={class:"w-full md:w-1/2 px-1 md:px-2"},tu={class:"w-full md:w-1/2 px-1 md:px-2"},su={key:0},au=e("h2",{class:"font-bold text-primary text-sm text-center"}," All Members Will be assiged this Poll ",-1),nu=[au],ou={key:0,class:"form-group col-span-3"},iu=e("label",{class:"text-bold font-medium tracking-wide"}," People To Vote ",-1),lu={key:0,class:"message"},du={key:1},ru={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},cu={key:1},uu=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),mu=[uu],_u=$e({__name:"Pollp",setup(R){const M=xe(),Y=Ie(),E=p(!1),I=p("create"),w=Y.params.committeeId,T=Y.params.meetingId,C=p(null),f=p([]),j=p(null),x=p("single"),m=p("individuals"),S=p([]),k=p([]),q=p(""),z=De();Oe("duedate");const{errorMessage:te}=Oe("pollassignees"),Z=ye({id:b().required(),title:b().required(),poll_id:b().nullable(),deleted_at:b().nullable(),created_at:b().nullable(),updated_at:b().nullable()}),se=ye({id:b().required(),full_name:b().required()}),ae=ye({id:b().required(),poll_id:b().nullable(),membership_id:b().required(),user:se}),de=ye({meeting_id:b().nullable(),committee_id:b().nullable(),question:b().required(),description:b().required(),questionoptiontype:b().required(),optionstatus:b().required(),options:ze().of(Z).required(),duedate:b().required(),assigneetype:b().required(),assigneestatus:b().required(),pollassignees:ze().of(ae).nullable(),status:b().required()}),{handleSubmit:P,setErrors:F,setFieldValue:r,values:g}=Fe({validationSchema:de,initialValues:{meeting_id:T,committee_id:w,question:"",description:"",questionoptiontype:"",optionstatus:"",options:[{id:dt(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null}],duedate:"",assigneetype:"",assigneestatus:"",pollassignees:[],status:"inactive"}});Oe("options");const ce=d(()=>{var l;pe(),I.value="create",E.value=!0,(l=j.value)==null||l.showModal()},"openCreatePollModal"),U=d(l=>{var c;pe(),C.value=l.id,r("question",l.question),r("description",l.description),r("questionoptiontype",l.questionoptiontype),r("optionstatus",l.optionstatus),r("duedate",l.duedate),r("assigneetype",l.assigneetype),r("assigneestatus",l.assigneestatus),r("status",l.status),r("options",l.options),m.value=l.assigneestatus,le(l.pollassignees),I.value="edit",E.value=!0,(c=j.value)==null||c.showModal()},"openEditPollModal");function le(l){f.value=l.map(c=>({id:c.id,full_name:c.user.full_name,poll_id:c.poll_id,membership_id:c.membership_id,user:c.user})),r("pollassignees",f.value)}d(le,"mappollassigneesToReactiveRef");const H=d(()=>{r("pollassignees",f.value)},"selectedMembers"),u=d(()=>{r("pollassignees",f.value)},"removeselectedUsers"),L=P(async(l,{resetForm:c})=>{var h;try{console.log("dddd");const A={meeting_id:l.meeting_id,committee_id:l.committee_id,question:l.question,description:l.description,questionoptiontype:l.questionoptiontype,optionstatus:l.optionstatus,options:l.options,duedate:l.duedate,assigneetype:l.assigneetype,assigneestatus:l.assigneestatus,pollassignees:l.pollassignees,status:l.status};if(I.value==="create")await ys(A,T);else{const J=C.value;await xs(A,T,J)}(h=j.value)==null||h.close(),await N(),pe()}catch(A){A instanceof Pe?F(A.messages):z(A)}}),pe=d(()=>{I.value="create",E.value=!1,C.value=null,x.value="single",m.value="all_members",f.value=[],r("meeting_id",T),r("committee_id",w),r("question",""),r("description",""),r("questionoptiontype","single"),r("optionstatus","single"),r("options",[{id:dt(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null}]),r("duedate",""),r("assigneetype","all_members"),r("assigneestatus","all_members"),r("pollassignees",[]),r("status","inactive")},"reset"),ne=d(l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),"formattedDateTime"),ee=d(l=>ge(l)?"bg-danger":"bg-success","dateBadgeClass"),ge=d(l=>{const c=new Date,h=new Date(l);return c>h},"hasDueDatePassed"),me=d(l=>{if(!l.votes||l.votes.length===0)return"No votes yet";const c=l.votes.length,h=l.pollassignees.length;if(c>h)return console.error("Total votes exceed total members, which is unexpected."),"Voting data error";const A=l.votes.reduce((Me,Ge)=>{const it=JSON.parse(Ge.option_id).id;return Me[it]=(Me[it]||0)+1,Me},{}),J=Object.keys(A).reduce((Me,Ge)=>A[Me]>A[Ge]?Me:Ge);if(!l.options.find(Me=>Me.id===J))return console.error("Most voted option not found in poll options."),"Voting data error";const Te=h-c;return(A[J]/c*100).toFixed(1),`${l.options.map(Me=>`${((A[Me.id]||0)/c*100).toFixed(1)}% voted for ${Me.title}`).join("<br>")}<br>Total votes: ${c} / ${Te} not yet`},"calculateVoteStats"),V=d(l=>{switch(l){case"Backlog":return"badge bg-warning";case"Pending":return"badge bg-info";case"On Progress":return"badge bg-primary";case"Completed":return"badge bg-success";default:return"badge"}},"statusClass"),oe=[{name:"Single Answer",value:"single"},{name:"Multiple Answers: More than one",value:"multiple"}],Q=[{name:"Individuals",value:"individuals"},{name:"Assign All Meeting Members",value:"all_members"}],re=ie(()=>oe),o=ie(()=>Q),y=d(l=>{k.value=[],S.value=[],n(),x.value=l,r("questionoptiontype",l),r("optionstatus",l)},"handleQuestionOptionTypeChange"),_=d(l=>{f.value=[],q.value=l,m.value=l,r("assigneetype",l),r("assigneestatus",l),r("pollassignees",[])},"handleAssigneeTypeChange"),n=d(()=>{Array.isArray(g.options)||(console.error("Invalid state: values.options is not an array."),r("options",[]));const l={id:dt(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null};r("options",[...g.options,l])},"addEmptyOption");rt(()=>g.options,l=>{});const $=d(l=>{const c=g.options.filter(h=>h.id!==l);console.log("vv",c),r("options",c)},"removeOption"),G=d(()=>Se({queryKey:["getPollMembershisKey"],queryFn:async()=>(await nt(T,{paginate:"false"})).data.map(Ae())}),"getMemberships"),{isLoading:ve,data:be,refetch:we}=G(),Ae=d(()=>l=>({id:l.id,full_name:l.user.full_name,membership_id:l.id,user:l.user}),"formatEvent"),Ve=ie(()=>{var l;return!be.value||((l=be.value)==null?void 0:l.length)===0?[]:be.value}),je=d(()=>Se({queryKey:["getMeetingPollsKey",T],queryFn:async()=>(await $s(T,{paginate:"false"})).data}),"getMeetingPolls"),{isLoading:Ke,data:O,refetch:N}=je();return Ce(async()=>{we(),N()}),(l,c)=>a(M).hasPermission(["view poll"])?(t(),s("div",Gr,[e("div",Qr,[e("div",Wr,[Jr,a(M).hasPermission(["create poll"])?(t(),s("div",Zr,[e("button",{type:"button",onClick:D(ce,["prevent"]),class:"btn btn-tool"},[Xr,K(),ec])])):v("",!0)]),e("div",tc,[a(Ke)?(t(),s("div",sc,"Loading Meeting Polls...")):(t(),s("div",ac,[e("div",nc,[(t(!0),s(B,null,W(a(O),(h,A)=>(t(),s("div",{class:"col-lg-12 col-md-12 col-sm-12 mb-2",key:A},[e("div",oc,[e("div",ic,[e("div",lc,[a(M).hasPermission(["edit poll"])?(t(),s("button",{key:0,class:"btn btn-tool",onClick:D(J=>U(h),["prevent"])},cc,8,dc)):v("",!0)])]),e("div",uc,[e("div",mc,[_c,e("p",pc,i(h.question),1),e("div",hc,[vc,e("div",gc,[e("div",bc,[e("ul",fc,[(t(!0),s(B,null,W(h.options.slice(0,Math.ceil(h.options.length/2)),(J,_e)=>(t(),s("li",{key:J.id},i(_e+1)+". "+i(J.title),1))),128))])]),e("div",yc,[e("ul",xc,[(t(!0),s(B,null,W(h.options.slice(Math.ceil(h.options.length/2)),(J,_e)=>(t(),s("li",{key:J.id},i(_e+1+Math.ceil(h.options.length/2))+". "+i(J.title),1))),128))])])])])]),e("div",$c,[e("div",null,[wc,e("p",{class:ue(ee(h.duedate))},i(ne(h.duedate)),3)]),e("div",null,[kc,e("p",null,[e("span",{class:ue(V(h.status))},i(h.status),3)])]),e("div",null,[Mc,e("p",null,[e("span",{innerHTML:me(h)},null,8,Cc)])])]),e("div",Sc,[Ac,e("div",Ic,[e("div",Tc,[e("ul",qc,[(t(!0),s(B,null,W(h.pollassignees.slice(0,Math.ceil(h.pollassignees.length/2)),(J,_e)=>(t(),s("li",{key:J.id},i(_e+1)+". "+i(J.user.full_name),1))),128))])]),e("div",Pc,[e("ul",Dc,[(t(!0),s(B,null,W(h.pollassignees.slice(Math.ceil(h.pollassignees.length/2)),(J,_e)=>(t(),s("li",{key:J.id},i(_e+1+Math.ceil(h.pollassignees.length/2))+". "+i(J.user.full_name),1))),128))])])])]),e("div",null,[Fc,e("p",{innerHTML:h.description,class:"mt-2"},null,8,Ec)])])])]))),128))])]))])]),e("div",Rc,[e("dialog",{id:"pollmodal",class:"modal w-full max-w-4xl mx-auto p-0",ref_key:"PollModal",ref:j},[e("form",Uc,[e("h3",Lc,i(I.value=="create"?"Create Poll":"Edit Poll"),1),Vc,e("div",jc,[e("div",Oc,[e("div",Nc,[e("form",{novalidate:"",onSubmit:c[3]||(c[3]=D((...h)=>a(L)&&a(L)(...h),["prevent"])),class:""},[X(qe,{labeled:!0,label:"Poll Question",name:"question",placeholder:"Enter Poll Question",type:"text"}),X(mt,{label:"Poll description",name:"description",theme:"snow",placeholder:"Enter Poll Description",toolbar:"full",contentType:"html",class:"col-span-2"}),e("div",Hc,[e("div",Kc,[X(st,{labeled:!0,name:"questionoptiontype",label:"Select Allowed Answers On the Question",placeholder:"Select Allowed Answers On the Question",options:re.value,onSelectedItem:y},null,8,["options"])]),e("div",Bc,[X(_t,{label:"Poll Due Date",name:"duedate",flow:["month"],placeholder:"Enter Poll Due Date & Time"})])]),e("div",Yc,[e("div",zc,[e("div",null,[Gc,e("button",{onClick:D(n,["prevent"]),class:"btn btn-primary h-10 mt-2"}," Add Option ")]),Qc,a(g).options?(t(),s("ul",Wc,[(t(!0),s(B,null,W(a(g).options,(h,A)=>(t(),s("li",{class:"text-primary font-bold text-justify",key:A},i(A+1)+"."+i(h==null?void 0:h.title),1))),128))])):v("",!0)]),a(g).options?(t(),s("div",Jc,[(t(!0),s(B,null,W(a(g).options,(h,A)=>(t(),s("div",{class:"form-group flex items-center mb-2",key:A},[X(bs,{labeled:!0,label:"Title for option "+(A+1),name:"options["+A+"].title",placeholder:"Enter title",class:"flex-grow",type:"text"},null,8,["label","name"]),e("a",{href:"#",class:"ml-2 text-red-600 font-bold mt-8",onClick:D(J=>$(h.id),["prevent"])}," ✕ ",8,Zc)]))),128))])):v("",!0)]),e("div",Xc,[e("div",eu,[X(st,{labeled:!0,name:"assigneetype",label:"Select Assignee Type",placeholder:"Select Assignee Type",options:o.value,onSelectedItem:_},null,8,["options"])]),e("div",tu,[m.value==="all_members"?(t(),s("div",su,nu)):v("",!0)])]),m.value==="individuals"?(t(),s("div",ou,[iu,e("div",{class:ue(["multiselect-container",{error:!!a(te)}])},[X(a(at),{id:"pollassignees",modelValue:f.value,"onUpdate:modelValue":c[0]||(c[0]=h=>f.value=h),mode:"tags",required:"",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:Ve.value,valueProp:"membership_id",trackBy:"membership_id",label:"full_name",class:ue(["col-span-3",["multiselect-container",{error:!!a(te)}]]),object:!0,onSelect:c[1]||(c[1]=h=>H()),onDeselect:c[2]||(c[2]=h=>u())},null,8,["modelValue","options","class"]),a(te)?(t(),s("div",lu,i(a(te)),1)):v("",!0)],2)])):v("",!0),f.value&&f.value.length||m.value==="all_members"?(t(),s("div",du,[e("button",ru,i(I.value=="create"?"Create Poll":"Edit Poll"),1)])):v("",!0)],32)])])])])],512)])])):(t(),s("div",cu,mu))}});const ke=d(R=>(Ne("data-v-774bd73e"),R=R(),He(),R),"_withScopeId"),pu={key:0},hu={class:"card h-full"},vu={class:"card-header flex items-center"},gu=ke(()=>e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"},"Meeting Tasks")],-1)),bu={key:0,class:"flex items-center space-x-2"},fu=ke(()=>e("i",{class:"far fa fa-plus mr-2"},null,-1)),yu=ke(()=>e("span",{class:"sr-only"},"Add task",-1)),xu={class:"card-container"},$u={key:0},wu={key:1},ku={class:"row overflow-auto p-4",style:{"max-height":"100vh"}},Mu={class:"card card-outline card-primary h-100"},Cu={class:"card-header"},Su={class:"card-tools"},Au=["onClick"],Iu=ke(()=>e("i",{class:"fas fa-edit"},null,-1)),Tu=[Iu],qu={class:"card-body"},Pu={class:"text-primary text-bold uppercase"},Du={class:"d-flex justify-content-between"},Fu=ke(()=>e("strong",null,"Due Date:",-1)),Eu=ke(()=>e("strong",null,"Status:",-1)),Ru={key:0,class:"badge bg-warning"},Uu={key:1,class:"badge bg-info"},Lu={key:2,class:"badge bg-primary"},Vu={key:3,class:"badge bg-success"},ju={class:""},Ou=ke(()=>e("strong",null,"Assignees:",-1)),Nu={class:"row"},Hu={class:"col-6"},Ku={class:"list-unstyled"},Bu={class:"col-6"},Yu={class:"list-unstyled"},zu=ke(()=>e("strong",null,"Description:",-1)),Gu=["innerHTML"],Qu={class:"flex justify-center col-md-6"},Wu={method:"dialog",class:"modal-box rounded-xl"},Ju={class:"font-bold text-lg justify-center flex"},Zu=ke(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),Xu={class:"overflow-auto p-4",style:{"max-height":"80vh"}},em={class:"grid grid-cols-3 md:grid-cols-3 gap-2 p-2"},tm={class:"col-span-3"},sm={class:"flex flex-wrap -mx-2 mt-2"},am={class:"w-full md:w-1/2 px-1 md:px-2"},nm={class:"w-full md:w-1/2 px-1 md:px-2"},om={class:"flex flex-wrap -mx-2 mt-2"},im={class:"w-full md:w-1/2 px-1 md:px-2"},lm={class:"w-full md:w-1/2 px-1 md:px-2"},dm={key:0},rm=ke(()=>e("h2",{class:"font-bold text-primary text-sm text-center"},"All Members Will be assigned this Task",-1)),cm=[rm],um={key:0,class:"form-group col-span-3"},mm=ke(()=>e("label",{class:"text-bold font-medium tracking-wide"},"People to Assign",-1)),_m={key:0,class:"message"},pm={key:1},hm={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},vm={key:1},gm=ke(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),bm=[gm],fm=$e({__name:"Taskp",setup(R){const M=xe(),Y=Ie(),E=p(!1),I=p("create"),w=Y.params.committeeId,T=Y.params.meetingId,C=p(null),f=p([]),j=p(null),x=p(null),m=p("individuals"),S=p(""),k=De();Oe("duedate");const{errorMessage:q}=Oe("taskassignees"),z=d(n=>{const $=new Date,G=new Date(n);return $>G},"hasDueDatePassed"),te=ye({id:b().nullable(),full_name:b().nullable()}),Z=ye({id:b().nullable(),task_id:b().nullable(),membership_id:b().nullable(),user:te}),se=ye({meeting_id:b().nullable(),committee_id:b().nullable(),title:b().required(),duedate:b().required(),description:b().required(),status:b().required(),assigneetype:b().required(),assigneestatus:b().required(),taskassignees:ze().of(Z).nullable()}),{handleSubmit:ae,setErrors:de,setFieldValue:P,values:F}=Fe({validationSchema:se,initialValues:{meeting_id:T,committee_id:w,title:"",duedate:"",description:"",status:"pending",assigneetype:"",assigneestatus:"",taskassignees:[]}}),r=d(()=>{var n;u(),I.value="create",E.value=!0,(n=x.value)==null||n.showModal()},"openCreateTaskModal"),g=d(n=>{var $;u(),j.value=n,C.value=n.id,P("title",n.title),P("duedate",n.duedate),P("description",n.description),P("status",n.status),P("assigneetype",n.assigneetype),P("assigneestatus",n.assigneestatus),m.value=n.assigneestatus,ce(n.taskassignees),I.value="edit",E.value=!0,($=x.value)==null||$.showModal()},"openEditTaskModal");function ce(n){f.value=n.map($=>({id:$.id,full_name:$.user.full_name,task_id:$.task_id,membership_id:$.membership_id,user:$.user})),P("taskassignees",f.value)}d(ce,"maptaskassigneesToReactiveRef");const U=d(()=>{P("taskassignees",f.value)},"selectedMembers"),le=d(()=>{P("taskassignees",f.value)},"removeselectedUsers"),H=ae(async(n,{resetForm:$})=>{var G;try{const ve={meeting_id:n.meeting_id,committee_id:n.committee_id,title:n.title,duedate:n.duedate,description:n.description,status:n.status,assigneetype:n.assigneetype,assigneestatus:n.assigneestatus,taskassignees:n.taskassignees};if(I.value==="create")await ws(ve,T);else{const be=C.value;await ks(ve,T,be)}(G=x.value)==null||G.close(),await _(),u()}catch(ve){ve instanceof Pe?de(ve.messages):k(ve)}}),u=d(()=>{I.value="create",E.value=!1,C.value=null,m.value="all_members",f.value=[],P("meeting_id",T),P("committee_id",w),P("title",""),P("duedate",""),P("description","description ................"),P("status","pending"),P("assigneetype","all_members"),P("assigneestatus","all_members"),P("taskassignees",[])},"reset"),L=d(n=>{f.value=[],S.value=n,m.value=n,P("assigneetype",n),P("assigneestatus",n)},"handleAssigneeTypeChange"),pe=[{name:"Individuals",value:"individuals"},{name:"Assign All Meeting Members",value:"all_members"}],ne=ie(()=>pe),ee=d(()=>Se({queryKey:["getPollMembershisKey"],queryFn:async()=>(await nt(T,{paginate:"false"})).data.map(oe())}),"getMemberships"),{isLoading:ge,data:me,refetch:V}=ee(),oe=d(()=>n=>({id:n.id,full_name:n.user.full_name,membership_id:n.id,user:n.user}),"formatEvent"),Q=ie(()=>{var n;return!me.value||((n=me.value)==null?void 0:n.length)===0?[]:me.value}),re=d(()=>Se({queryKey:["getMeetingTasksKey",T],queryFn:async()=>(await Ms(T,{paginate:"false"})).data}),"getMeetingTasks"),{isLoading:o,data:y,refetch:_}=re();return Ce(async()=>{_(),V()}),(n,$)=>a(M).hasPermission(["view task"])?(t(),s("div",pu,[e("div",hu,[e("div",vu,[gu,a(M).hasPermission(["create task"])?(t(),s("div",bu,[e("button",{type:"button",onClick:D(r,["prevent"]),class:"btn btn-tool"},[fu,K(),yu])])):v("",!0)]),e("div",xu,[a(o)?(t(),s("div",$u,"Loading Meeting Tasks...")):(t(),s("div",wu,[e("div",ku,[(t(!0),s(B,null,W(a(y),(G,ve)=>(t(),s("div",{class:"col-lg-12 col-md-12 col-sm-12 mb-2",key:ve},[e("div",Mu,[e("div",Cu,[e("div",Su,[a(M).hasPermission(["edit task"])?(t(),s("button",{key:0,class:"btn btn-tool",onClick:D(be=>g(G),["prevent"])},Tu,8,Au)):v("",!0)])]),e("div",qu,[e("div",Pu,i(G.title),1),e("div",Du,[e("div",null,[Fu,e("p",{class:ue({"text-danger":z(G.duedate)&&G.status!=="completed","text-success":!z(G.duedate)||G.status==="completed"})},i(a(tt)(G.duedate)),3)]),e("div",null,[Eu,e("p",null,[G.status==="backlog"?(t(),s("span",Ru,"Backlog")):G.status==="pending"?(t(),s("span",Uu,"Pending")):G.status==="onprogress"?(t(),s("span",Lu,"On Progress")):G.status==="completed"?(t(),s("span",Vu,"Completed")):v("",!0)])])]),e("div",ju,[Ou,e("div",Nu,[e("div",Hu,[e("ul",Ku,[(t(!0),s(B,null,W(G.taskassignees.slice(0,Math.ceil(G.taskassignees.length/2)),(be,we)=>(t(),s("li",{key:be.id},i(we+1)+". "+i(be.user.full_name),1))),128))])]),e("div",Bu,[e("ul",Yu,[(t(!0),s(B,null,W(G.taskassignees.slice(Math.ceil(G.taskassignees.length/2)),(be,we)=>(t(),s("li",{key:be.id},i(we+1+Math.ceil(G.taskassignees.length/2))+". "+i(be.user.full_name),1))),128))])])])]),e("div",null,[zu,e("p",{innerHTML:G.description,class:"mt-2"},null,8,Gu)])])])]))),128))])]))])]),e("div",Qu,[e("dialog",{id:"taskmodal",class:"modal",ref_key:"TaskModal",ref:x},[e("form",Wu,[e("h3",Ju,i(I.value=="create"?"Create Meeting Task":"Edit Meeting Task"),1),Zu,e("div",Xu,[e("div",em,[e("div",tm,[e("form",{novalidate:"",onSubmit:$[3]||($[3]=D((...G)=>a(H)&&a(H)(...G),["prevent"])),class:""},[e("div",sm,[e("div",am,[X(qe,{labeled:!0,label:"Task Title",name:"title",placeholder:"Enter Task Title",type:"text"})]),e("div",nm,[X(_t,{label:"Task Due Date",name:"duedate",flow:["month"],placeholder:"Task Due Date"})])]),X(mt,{label:"Task Description",name:"description",theme:"snow",placeholder:"Enter Task Description",toolbar:"full",contentType:"html",class:"col-span-3"}),e("div",om,[e("div",im,[X(st,{labeled:!0,name:"assigneetype",label:"Select Assignee Type",placeholder:"Select Assignee Type",options:ne.value,onSelectedItem:L},null,8,["options"])]),e("div",lm,[m.value==="all_members"?(t(),s("div",dm,cm)):v("",!0)])]),m.value==="individuals"?(t(),s("div",um,[mm,e("div",{class:ue(["multiselect-container",{error:!!a(q)}])},[X(a(at),{id:"taskassignees",modelValue:f.value,"onUpdate:modelValue":$[0]||($[0]=G=>f.value=G),mode:"tags",required:"",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:Q.value,valueProp:"membership_id",trackBy:"membership_id",label:"full_name",class:ue(["col-span-3",["multiselect-container",{error:!!a(q)}]]),object:!0,onSelect:$[1]||($[1]=G=>U()),onDeselect:$[2]||($[2]=G=>le())},null,8,["modelValue","options","class"]),a(q)?(t(),s("div",_m,i(a(q)),1)):v("",!0)],2)])):v("",!0),f.value&&f.value.length||m.value==="all_members"?(t(),s("div",pm,[e("button",hm,i(I.value=="create"?"Create Task":"Edit Task"),1)])):v("",!0)],32)])])])])],512)])])):(t(),s("div",vm,bm))}});const ym=Ue(fm,[["__scopeId","data-v-774bd73e"]]),xm={key:0},$m={class:"row"},wm={class:"col-md-6"},km={class:"col-md-6"},Mm={key:1},Cm=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),Sm=[Cm],Am=$e({__name:"TaskPolls",setup(R){const M=xe();return(Y,E)=>a(M).hasPermission(["view task","view poll"])?(t(),s("div",xm,[e("div",$m,[e("div",wm,[X(ym)]),e("div",km,[X(_u)])])])):(t(),s("div",Mm,Sm))}});const Im={key:0,class:"container-fluid"},Tm={key:0,class:"container-fluid"},qm={class:"py-6"},Pm={class:"flex items-center"},Dm={class:"lg:inline-flex p-3 mr-4rounded-lg custom-size"},Fm={class:"calendar-icon w-full flex flex-col items-center justify-center mt-1 calendaheight"},Em={class:"month customonth"},Rm={class:"day font-medium customday"},Um={class:"year font-medium customyear"},Lm={class:""},Vm={class:"header-pretitle text-xs mb-1"},jm=e("i",{class:"fas fa-chevron-left fa-xs"},null,-1),Om={class:"flex items-center space-x-4"},Nm={class:"header-title leading-10 mb-2 h6 lg:mb-0 text-blue-primary font-bold"},Hm={class:"ml-auto flex self-end"},Km=e("div",{class:"dropdown"},[e("a",{class:"nav-link",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[e("i",{class:"fas fa-ellipsis-v"})]),e("div",{class:"dropdown-menu --73","aria-labelledby":"navbarDropdown",style:{left:"-73px !important"}},[e("a",{class:"dropdown-item",href:"#"},"Re-send meeting invite"),e("a",{class:"dropdown-item",href:"#"},"Create Follow Up Meeting"),e("div",{class:"dropdown-divider"}),e("a",{class:"dropdown-item",href:"#"},"Delete Meeting")])],-1),Bm={class:"lg:flex mr-2"},Ym=e("div",{class:"flex justify-center btn-sm"},null,-1),zm={class:"card-outline card-outline-tabs"},Gm={class:"card-header p-0 border-bottom-0"},Qm={class:"nav nav-tabs",id:"custom-tabs-four-tab",role:"tablist"},Wm=["onClick"],Jm={class:"card-body"},Zm={class:"tab-content",id:"custom-tabs-four-tabContent"},Xm=["id"],e_={class:"flex justify-center col-md-6"},t_={id:"minutetemplateselectionmodal",class:"modal",ref:"MinuteTemplateSelectionmodal"},s_={method:"dialog",class:"modal-box rounded-xl"},a_=e("h3",{class:"font-bold text-lg justify-center flex"}," Take Minutes ",-1),n_=e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1),o_={class:"w-full mt-6 p-2"},i_={class:"font-thin text-sm flex flex-col items-center gap-6"},l_={class:"w-full rounded-xl mx-auto p-1 custom-modal"},d_=e("h3",{class:"text-center text-base font-bold text-primary"}," How would you like to start? ",-1),r_={class:"flex justify-center space-x-4 py-6"},c_=e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-white rounded-full shadow w-11 h-11"},[e("i",{class:"fa fa-list"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From Scratch")],-1),u_=e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-white rounded-full shadow w-11 h-11"},[e("i",{class:"far fa-file"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From the Agenda")],-1),m_={key:1,class:"container-fluid"},__=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),p_=[__],E_=$e({__name:"CommitteeMeetingDetails",setup(R){const M=Ie(),Y=Je(),E=xe(),I=M.params.committeeId,w=M.params.meetingId,T=M.params.scheduleId,C=p(),f=De(),j=p("create"),x=p("home"),m=p(""),S=[{id:"home",name:"Meeting Details",component:ir,permissions:["view meeting"]},{id:"agenda",name:"Agenda",component:tn,permissions:["view agenda"]},{id:"minutes",name:"Minutes",component:ho,permissions:["view minutes"]},{id:"documents",name:"Documents",component:Sd,permissions:["view documents"]},{id:"tasks",name:"Task & Polls",component:Am,permissions:["view task","view poll"]},{id:"members",name:"Members",component:zr,permissions:["view meeting memberships"]},{id:"conflict-of-interest",name:"Conflict of Interest",component:Bi,permissions:["view conflicts of interest"]},{id:"attendance",name:"Attendance",component:ni,permissions:["view attendances"]}],k=ie(()=>S.filter(r=>r.permissions?r.permissions.every(g=>E.hasPermission([g])):!0)),q=d(r=>{m.value=x.value,x.value=r},"setActiveTab"),z=d(()=>{m.value==="agenda"&&(q("agenda"),window.dispatchEvent(new CustomEvent("refetchMemberships")))},"handleMembershipsUpdated");Tt(()=>{M.query.previousTab&&(m.value=M.query.previousTab),M.query.currentTab&&(x.value=M.query.currentTab)});function te(){Y.push({name:"CommitteeDetails",params:{committeeId:I}})}d(te,"goBack");const Z=ye({id:b().required(),rsvp_status:b().nullable(),attendance_status:b().nullable()}),{handleSubmit:se,setErrors:ae,setFieldValue:de}=Fe({validationSchema:Z,initialValues:{id:"",rsvp_status:"",attendance_status:""}});se(async r=>{try{const g={id:r.id,rsvp_status:r.rsvp_status,location:r.location,attendance_status:r.attendance_status,meeting_id:r.meeting_id,membership_id:r.membership_id,membership:r.membership,meeting:r.meeting};j.value==="create"?await gt(g,w):j.value==="rsvp"?await bt(g,g.id):j.value==="attendance"&&await ft(g,g.id),await E.updateProfile(),window.dispatchEvent(new CustomEvent("meetingUpdated",{detail:{meetingId:w}})),P()}catch(g){g instanceof Pe?ae(g.messages):f(g)}});const P=d(()=>{j.value="create",de("id",""),de("rsvp_status",""),de("attendance_status","")},"reset"),F=d(()=>{Y.push({name:"CommitteeMeetingMinutes",params:{committeeId:I,meetingId:w,scheduleId:T},query:{defaultMinutes:"true"}})},"openMinuteTemplateSelectionModal");return Ce(async()=>{try{const g=(await yt(w)).data;C.value=g}catch(r){console.error("Error fetching meeting data:",r)}}),(r,g)=>{var U,le,H,u,L,pe;const ce=ct("router-link");return a(E).hasPermission(["view meeting"])?(t(),s("div",Im,[C.value?(t(),s("div",Tm,[e("div",qm,[e("div",Pm,[e("div",Dm,[e("div",Fm,[e("div",Em,i(a(Gt)((le=(U=C.value)==null?void 0:U.schedules[0])==null?void 0:le.date)),1),e("div",Rm,[e("span",null,i(a(Qt)((u=(H=C.value)==null?void 0:H.schedules[0])==null?void 0:u.date)),1)]),e("div",Um,[e("span",null,i(a(Wt)((pe=(L=C.value)==null?void 0:L.schedules[0])==null?void 0:pe.date)),1)])])]),e("div",Lm,[e("p",Vm,[e("a",{href:"",onClick:g[0]||(g[0]=D(ne=>te(),["prevent"])),class:"mb-2 h6 lg:mb-0 text-blue-primary font-bold"},[jm,K(" Meetings ")])]),e("div",Om,[e("h1",Nm,i(C.value.title),1)])]),e("div",Hm,[Km,e("div",Bm,[a(E).hasPermission(["create minutes","edit minutes"])?(t(),s("button",{key:0,class:"btn btn-secondary",onClick:g[1]||(g[1]=D(ne=>F(),["prevent"]))}," Minutes ")):v("",!0)]),Ym])]),e("div",zm,[e("div",Gm,[e("ul",Qm,[(t(!0),s(B,null,W(k.value,ne=>(t(),s("li",{class:"nav-item",key:ne.id},[e("a",{class:ue(["nav-link",{active:x.value===ne.id}]),onClick:ee=>q(ne.id)},i(ne.name),11,Wm)]))),128))])]),e("div",Jm,[e("div",Zm,[(t(!0),s(B,null,W(k.value,ne=>(t(),s("div",{key:ne.id,class:ue(["tab-pane fade",{"show active":x.value===ne.id}]),id:ne.id,role:"tabpanel"},[(t(),Qe(qt(ne.component),{onChangeTab:q,onMembershipsUpdated:z},null,32))],10,Xm))),128))])])])]),e("div",e_,[e("dialog",t_,[e("form",s_,[a_,n_,e("div",o_,[e("div",i_,[e("form",l_,[d_,e("div",r_,[X(ce,{to:{name:"CommitteeMeetingMinutes",params:{committeeId:a(I),meetingId:a(w)},query:{defaultMinutes:"false"}},class:"btn btn-secondary h-auto !p-0 p-0 mb-0 card flex-1"},{default:Ye(()=>[c_]),_:1},8,["to"]),X(ce,{to:{name:"CommitteeMeetingMinutes",params:{committeeId:a(I),meetingId:a(w)},query:{defaultMinutes:"true"}},class:"btn btn-secondary h-auto !p-0 p-0 mb-0 card flex-1"},{default:Ye(()=>[u_]),_:1},8,["to"])])])])])])],512)])])):v("",!0)])):(t(),s("div",m_,p_))}}});export{E_ as default};
