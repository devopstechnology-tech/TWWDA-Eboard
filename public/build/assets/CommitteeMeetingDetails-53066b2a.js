var $t=Object.defineProperty;var d=(R,M)=>$t(R,"name",{value:M,configurable:!0});import{d as $e,i as xe,r as p,j as Ie,V as qe,C as ie,P as Me,o as t,c as s,e,T as D,h as v,u as a,F as B,R as W,g as K,t as i,f as X,U as ue,a1 as at,a0 as wt,W as Ne,X as He,_ as Re,k as We,n as kt,H as lt,a3 as Mt,b as dt,Y as Ct,Z as St,l as Ge,w as Ye,a5 as At,a6 as It}from"./main-451c20d4.js";import{u as Pe,e as Oe,c as ye,d as Qe,a as b,g as Tt,f as ze,b as De}from"./useUnexpectedErrorHandler-2f1b2730.js";import{u as ht,a as vt,b as gt,c as qt,d as Pt,e as Dt,f as Ft,g as Et}from"./useConflictRequest-46181bf0.js";import{F as tt,o as Rt,p as Ut,q as Lt,r as Vt,s as jt,J as bt,I as Ot,w as Nt,v as ot,n as Ht}from"./FormDynamicInput-57fd3f34.js";import{y as Xe,z as et,n as ft,A as Kt,v as rt,B as mt,C as it,D as Bt,d as yt,e as Yt,g as zt,f as _t,h as st,j as Gt,k as Qt,m as Be,o as Wt,p as Jt,q as Zt,t as Xt}from"./Breadcrumb-ecf3abcd.js";import{u as es,a as ts,b as ss,c as as,d as ns,e as os,f as is,g as ls,h as xt,i as ds,j as rs,k as cs,l as us,r as ms,n as _s}from"./useMinuteRequest-25870890.js";import{u as nt,a as ps,b as hs,c as vs}from"./useMembershipRequest-ae7237bb.js";import{F as Te}from"./FormInput-4bdc1ca0.js";import{F as ct}from"./FormQuillEditor-e4b30354.js";import{u as Ce}from"./useQuery-64b3e593.js";import{_ as ut}from"./FormDateTimeInput.vue_vue_type_style_index_0_lang-abff0e84.js";import{F as pt}from"./FormTextBox-4a2981cb.js";import{F as gs}from"./FormUpload-637793d3.js";import{c as bs,d as fs,e as ys}from"./usePollRequest-ac4b87eb.js";import{c as xs,d as $s,e as ws}from"./useTaskRequest-e083a7cb.js";import"./index-053adef9.js";import"./attendance_routes-07e71fee.js";import"./folder_routes-48149054.js";import"./membership_routes-2da0f288.js";import"./useQueryClient-78663db9.js";const he=d(R=>(Ne("data-v-f976f93f"),R=R(),He(),R),"_withScopeId$6"),ks={key:0,class:"card-header flex items-center"},Ms=he(()=>e("div",{class:"flex items-center flex-1 w-full"},null,-1)),Cs={class:"flex items-center space-x-2"},Ss=he(()=>e("span",{class:"text-danger"},"Reset Agenda Start Choice",-1)),As=[Ss],Is={key:1,class:"flex gap-5"},Ts={class:"flex-1"},qs={class:"card card-outline card-danger",style:{"min-height":"384px"}},Ps={class:"card-body"},Ds={class:"flex w-full"},Fs={class:"flex-1"},Es=he(()=>e("div",{class:"relative h-8"},[e("div",{class:"absolute border -right-16 text-[10px] bottom-2 rounded text-center px-2 py-0.5 text-gray-700 z-10 border-gray-200 bg-gray-200"},[e("div",{class:"absolute left-0 right-0 text-green text-xxs bold -top-2.5"}," Start ")])],-1)),Rs={"data-list_format":"num_la_lr",class:"agenda-list mb-0 border-l border-blue"},Us={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},Ls=he(()=>e("div",{class:"absolute border -right-16 top-4 text-[10px] rounded text-center py-0.5 text-gray-700 z-10 border-gray-200 bg-gray-200 px-2"},null,-1)),Vs=["onClick"],js={class:"font-medium flex-1"},Os=["innerHTML"],Ns={class:"flex items-center gap-2 mt-1 h-6"},Hs={class:"text-xs text-gray-600"},Ks={key:0,class:"list-none assignees-list"},Bs={key:1,class:"flex gap-2 items-start"},Ys={class:"font-medium flex-1"},zs=["innerHTML"],Gs={class:"flex items-center gap-2 mt-1 h-6"},Qs={class:"text-xs text-gray-600"},Ws={key:0,class:"list-none assignees-list"},Js={class:"ml-4 mt-2"},Zs={class:"flex gap-x-2"},Xs=he(()=>e("button",{type:"submit",class:"btn btn-primary h-10"}," Save ",-1)),ea=["onClick"],ta={class:"min-h-6 border-l border-blue"},sa={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},aa=he(()=>e("div",{class:"absolute border -right-16 top-4 text-[10px] rounded text-center py-0.5 text-gray-700 z-10 border-gray-200 bg-white px-1"}," 10:30pm ",-1)),na=["onClick"],oa={class:"font-medium flex-1"},ia=["innerHTML"],la={class:"flex items-center gap-2 mt-1 h-6"},da={class:"text-xs text-gray-600"},ra={key:0,class:"list-none assignees-list"},ca={key:1,class:"flex gap-2 items-start"},ua={class:"font-medium flex-1"},ma=["innerHTML"],_a={class:"flex items-center gap-2 mt-1 h-6"},pa={class:"text-xs text-gray-600"},ha={key:0,class:"list-none assignees-list"},va={class:"mt-4"},ga={key:0,class:"mt-4"},ba={class:"flex gap-x-2"},fa=he(()=>e("button",{type:"submit",class:"btn btn-primary h-10"}," Save ",-1)),ya={class:"relative h-8"},xa={class:"absolute border -right-16 text-[10px] bottom-2 rounded text-center px-2 py-0.5 text-gray-700 z-10 border-gray-200 bg-gray-200"},$a=he(()=>e("div",{class:"absolute left-0 right-0 text-green text-xxs bold -top-2.5"}," END ",-1)),wa=he(()=>e("div",null,[e("div",{class:"w-16 flex h-full justify-center py-4"},[e("div",{class:"bg-gray-200 h-full relative left-1.5",style:{width:"1px"}},"   ")])],-1)),ka={class:"w-[350px] relative"},Ma={class:"w-[350px]"},Ca={class:"card card-outline card-danger mb-0"},Sa={class:"card-body"},Aa={class:"form-group"},Ia=he(()=>e("label",{class:"text-xs uppercase font-medium text-gray-700 tracking-wide"}," People Responsible ",-1)),Ta={key:0,class:"message"},qa={class:"flex justify-between"},Pa=he(()=>e("button",{type:"submit",class:"btn btn-sm btn-primary ml-1 mr-1"}," Save ",-1)),Da=he(()=>e("div",{class:"w-[350px] relative"},[e("div",{class:"w-[350px] card card-outline card-danger"},[e("div",{class:"bg-gray-200 rounded-lg h-96 flex items-center justify-center"},[e("div",{class:"text-center text-gray-700"},[K(" Select an agenda item to edit "),e("br",{role:"presentation","data-uw-rm-sr":""}),e("div",{class:"text-xl mt-1"},[e("svg",{class:"svg-inline--fa fa-turn-down-left","aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"turn-down-left",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":""},[e("path",{fill:"currentColor",d:"M6.5 271.6c-8.7 9.2-8.7 23.7 0 32.9l121.4 129c8.8 9.3 21 14.6 33.7 14.6c25.6 0 46.3-20.7 46.3-46.3l0-41.7 144 0c88.4 0 160-71.6 160-160l0-112c0-30.9-25.1-56-56-56l-32 0c-30.9 0-56 25.1-56 56l0 120c0 4.4-3.6 8-8 8l-152 0 0-41.7c0-25.6-20.7-46.3-46.3-46.3c-12.8 0-25 5.3-33.7 14.6L6.5 271.6zm153.5-93l0 61.5c0 13.3 10.7 24 24 24l176 0c30.9 0 56-25.1 56-56l0-120c0-4.4 3.6-8 8-8l32 0c4.4 0 8 3.6 8 8l0 112c0 61.9-50.1 112-112 112l-168 0c-13.3 0-24 10.7-24 24l0 61.5L57 288 160 178.5z"})])])])])])],-1)),Fa=[Da],Ea={key:2,class:"card card-outline card-danger"},Ra=he(()=>e("div",{class:"card-header text-center justify-center bg-gradient-info"},[e("h3",{class:"text-center font-bold text-lg"}," Choose Your Starting Point ")],-1)),Ua={class:"card-body"},La={class:"flex justify-center space-x-4 py-6"},Va=he(()=>e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-gradient-success rounded-full shadow w-11 h-11"},[e("i",{class:"fa fa-list text-white"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From Scratch")],-1)),ja=[Va],Oa=he(()=>e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-gradient-warning rounded-full shadow w-11 h-11"},[e("i",{class:"far fa-file text-white"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From the Agenda")],-1)),Na=[Oa],Ha={class:"flex justify-center col-md-6"},Ka={method:"dialog",class:"modal-box rounded-xl"},Ba=he(()=>e("h3",{class:"font-bold text-lg justify-center flex text-white"}," save the Imported AGendas from Previous Meeting ",-1)),Ya=he(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),za={class:"w-full mt-6 p-2"},Ga={class:"font-thin text-sm flex flex-col items-center gap-6"},Qa={class:"w-full rounded-xl mx-auto p-1 custom-modal"},Wa=he(()=>e("h3",{class:"text-center text-base font-bold text-primary"}," Make use of the imported Agendas ",-1)),Ja={class:"flex justify-center mt-4"},Za=$e({__name:"Agenda",emits:["change-tab"],setup(R,{emit:M}){const Y=xe(),E=M,A=p("default"),w=Pe(),I=Ie(),C=p("create"),f=p(""),j=p("");I.params.committeeId;const x=I.params.meetingId,m=I.params.scheduleId,S=p(""),k=p(null),T=p([]),z=p([]),te=p(null),Z=p(null),se=p(null),ae=p([]),de=p(!1),q=p(!1),F=p(!1),r=p(null),g=p(-1),ce=p(-1),{errorMessage:U}=Oe("assignees"),le=ye({schedule_id:Qe().required(),title:b().required(),duration:Tt().nullable(),description:b().nullable(),agenda_id:b().nullable(),assignees:ze().of(b()).nullable(),children:ze().of(b()).nullable()}),{handleSubmit:H,setErrors:u,setFieldValue:L,values:pe}=De({validationSchema:le,initialValues:{schedule_id:m,title:"",duration:null,description:null,agenda_id:null,assignees:[],children:[]}}),ne=d(()=>{q.value=!0,de.value=!1,F.value=!1,g.value=-1,ce.value=-1,C.value="create",L("title",""),console.log("we are here",q.value,F.value,ae)},"enableAddingNewParent"),ee=d((O,N)=>{F.value=!0,r.value=N,g.value=O,ce.value=-1,L("title",""),de.value=!1,C.value="create"},"enableAddingChild"),ge=d((O,N,l,c)=>{if(Z.value=l,k.value=l.id,de.value=!0,q.value=!1,F.value=!1,g.value=O,ce.value=N,C.value="edit",j.value=c,L("title",l.title),L("schedule_id",m),L("duration",l.duration),L("description",l.description),l.assignees){const h=l.assignees.map(P=>P.id);T.value=h,L("assignees",h)}else L("assignees",[])},"enableEditing"),me=H(async(O,{resetForm:N})=>{try{if(C.value==="create"){const l={title:O.title,schedule_id:O.schedule_id,duration:null,description:null,agenda_id:null,assignees:[],children:[]};if(F.value){const c=r.value?r.value.toString():null;l.agenda_id=c,await es(l,m)}else q.value&&await ts(l,m)}else{const l={title:O.title,schedule_id:O.schedule_id,duration:O.duration,description:O.description,agenda_id:null,assignees:[],children:[]};if(ce.value!==-1){l.assignees=O.assignees;const c=k.value?k.value.toString():null;l.agenda_id=c,await ss(l,m)}else if(g.value!==-1){l.assignees=O.assignees;const c=k.value?k.value.toString():null;l.agenda_id=c,await as(l,m)}}await Se(),N(),V()}catch(l){l instanceof qe?u(l.messages):w(l)}}),V=d(()=>{C.value="create",A.value="default",f.value="",j.value="",de.value=!1,q.value=!1,F.value=!1,g.value=-1,ce.value=-1,Z.value=null,k.value=null,T.value=[],L("title",""),L("duration",null),L("description",null),L("agenda_id",null),L("assignees",[]),L("children",[])},"cancelEditing"),oe=[{name:"- none -",value:"0"},{name:"5 minutes",value:"5"},{name:"10 minutes",value:"10"},{name:"15 minutes",value:"15"},{name:"20 minutes",value:"20"},{name:"25 minutes",value:"25"},{name:"30 minutes",value:"30"},{name:"35 minutes",value:"35"},{name:"40 minutes",value:"40"},{name:"45 minutes",value:"45"},{name:"50 minutes",value:"50"},{name:"55 minutes",value:"55"},{name:"60 minutes",value:"60"}],Q=ie(()=>oe),re=d(()=>{L("assignees",T.value)},"selectedUsers"),o=d(()=>{L("assignees",T.value)},"removeselectedUsers"),y=ie(()=>{var N;const O=[];return z.value&&((N=z.value)==null?void 0:N.length)>0&&z.value.reduce((l,c)=>(l.push({id:c.id,name:`${c.user.full_name}`}),l),O),O}),_=d(async()=>{var N;const O=(N=Z.value)==null?void 0:N.id;j.value==="agenda"?await ns(O):await os(O),await Se(),V()},"deleteAgenda"),n=d(async O=>{O==="scratch"?f.value=O:O==="previous"&&(A.value="custom",f.value=O,await Se())},"startAgenda"),$=d(async()=>{f.value==="previous"&&(A.value="default",await Se()),f.value=""},"resetAgendaStartChoice"),G=d(async()=>{var N;const O=S.value;$(),await is(O,m),(N=se.value)==null||N.close(),S.value="",A.value="default",f.value="",await Se()},"SaveImportedAgendas"),ve=d(()=>Ce({queryKey:["getMeetingScheduleAgendasKey",m],queryFn:async()=>{var N;let O;return A.value==="custom"?(O=await ls({paginate:"false"}),O.data&&O.data.length>0?(S.value=O.data[0].schedule_id,(N=se.value)==null||N.showModal()):(wt({title:"Notice",text:"No agendas found in the database. Please create an agenda from scratch.",type:"warning"}),A.value="default")):A.value==="default"&&(O=await xt(m,{paginate:"false"})),(O==null?void 0:O.data)||[]}}),"getMeetingScheduleAgendas"),{isLoading:be,data:we,refetch:Se}=ve(),Le=ie(()=>te.value),Ve=d(async()=>{const O=await nt(x,{paginate:"false"});z.value=O.data},"getmemberships"),Ke=d(()=>{E("change-tab","members")},"handleManageMembersClick");return Me(()=>{Ve(),window.addEventListener("refetchMemberships",Ve)}),(O,N)=>{var l;return t(),s(B,null,[f.value==="scratch"||f.value==="previous"?(t(),s("div",ks,[Ms,e("div",Cs,[e("button",{type:"submit",onClick:D($,["prevent"]),class:"btn btn-tool"},As)])])):v("",!0),f.value==="scratch"||f.value==="previous"||a(we)&&a(we).length?(t(),s("div",Is,[e("div",Ts,[e("div",qs,[e("div",Ps,[e("div",Ds,[e("div",Fs,[Es,e("ol",Rs,[(t(!0),s(B,null,W(a(we),(c,h)=>(t(),s("li",{class:"mb-2 hover:border-gray-400",key:h},[e("div",Us,[Ls,a(Y).hasPermission(["edit agenda"])?(t(),s("div",{key:0,class:"flex gap-2 items-start",onClick:P=>ge(h,-1,c,"agenda")},[e("div",js,[K(i(a(Xe)(h))+"."+i(c.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:c.description},null,8,Os)]),e("div",Ns,[e("div",Hs,i(a(et)(c.duration)),1)]),e("div",null,[c.assignees?(t(),s("ul",Ks,[(t(!0),s(B,null,W(c.assignees,(P,J)=>{var _e;return t(),s("li",{class:"text-sm text-primary",key:J},i(J+1)+". "+i((_e=P.user)==null?void 0:_e.full_name),1)}),128))])):v("",!0)])],8,Vs)):(t(),s("div",Bs,[e("div",Ys,[K(i(a(Xe)(h))+"."+i(c.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:c.description},null,8,zs)]),e("div",Gs,[e("div",Qs,i(a(et)(c.duration)),1)]),e("div",null,[c.assignees?(t(),s("ul",Ws,[(t(!0),s(B,null,W(c.assignees,(P,J)=>{var _e;return t(),s("li",{class:"text-sm text-primary",key:J},i(J+1)+". "+i((_e=P.user)==null?void 0:_e.full_name),1)}),128))])):v("",!0)])])),e("div",Js,[F.value&&r.value===c.id?(t(),s("form",{key:0,novalidate:"",onSubmit:N[0]||(N[0]=D((...P)=>a(me)&&a(me)(...P),["prevent"]))},[e("div",Zs,[X(Te,{labeled:!1,label:"Agenda",name:"title",class:"form-control form-control-sm p-0",placeholder:"Enter Meeting Agenda",type:"text"}),Xs]),e("a",{onClick:D(V,["prevent"]),class:"text-xs cursor-pointer"}," Cancel ")],32)):v("",!0)]),g.value!==h&&!F.value&&a(Y).hasPermission(["create agenda"])?(t(),s("button",{key:2,onClick:P=>ee(h,c.id),class:"ml-4 mt-2"}," + Add sub Agenda ",8,ea)):v("",!0)]),e("ol",ta,[(t(!0),s(B,null,W(c.children,(P,J)=>(t(),s("li",{class:"mb-2 hover:border-gray-400",draggable:"false",key:J},[e("div",sa,[aa,a(Y).hasPermission(["edit agenda"])?(t(),s("div",{key:0,class:"flex gap-2 items-start",onClick:_e=>ge(h,J,P,"subagenda")},[e("div",oa,[K(i(a(Xe)(h,J))+". "+i(P.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:P.description},null,8,ia)]),e("div",la,[e("div",da,i(a(et)(P.duration)),1)]),e("div",null,[P.assignees?(t(),s("ul",ra,[(t(!0),s(B,null,W(P.assignees,(_e,Ae)=>(t(),s("li",{class:"text-sm text-primary",key:Ae},i(Ae+1)+". "+i(_e.user.full_name),1))),128))])):v("",!0)])],8,na)):(t(),s("div",ca,[e("div",ua,[K(i(a(Xe)(h,J))+". "+i(P.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:P.description},null,8,ma)]),e("div",_a,[e("div",pa,i(a(et)(P.duration)),1)]),e("div",null,[P.assignees?(t(),s("ul",ha,[(t(!0),s(B,null,W(P.assignees,(_e,Ae)=>(t(),s("li",{class:"text-sm text-primary",key:Ae},i(Ae+1)+". "+i(_e.user.full_name),1))),128))])):v("",!0)])]))])]))),128))])]))),128))]),e("div",va,[e("div",null,[q.value?(t(),s("div",ga,[e("form",{novalidate:"",onSubmit:N[1]||(N[1]=D((...c)=>a(me)&&a(me)(...c),["prevent"])),class:"mt-4"},[e("div",ba,[X(Te,{labeled:!1,label:"Agenda",name:"title",class:"form-control form-control-sm p-0",placeholder:"Enter Meeting Agenda",type:"text"}),fa])],32),e("a",{onClick:D(V,["prevent"]),class:"text-xs cursor-pointer"}," Cancel ")])):v("",!0),a(Y).hasPermission(["create agenda"])?(t(),s("button",{key:1,onClick:ne,class:"btn btn-secondary block w-full mb-4"}," Add Agenda ")):v("",!0)])]),e("div",ya,[e("div",xa,[$a,K(" "+i((l=Le.value)!=null&&l.end_time?a(ft)(Le.value.end_time):""),1)])])]),wa])])])]),e("div",{class:ue({hidden:!de.value,"md:block":!0,"w-[350px]":!0})},[e("div",ka,[e("div",Ma,[e("div",Ca,[e("form",{novalidate:"",onSubmit:N[6]||(N[6]=D((...c)=>a(me)&&a(me)(...c),["prevent"]))},[e("div",Sa,[X(Te,{label:"Agenda",name:"title",class:"w-full text-sm tracking-wide",placeholder:"Enter Meeting Agenda",t:"",ype:"text"}),X(ct,{label:"Agenda Description",name:"description",theme:"snow",placeholder:"Enter Agenda  Description",toolbar:"minimal",contentType:"html"}),X(tt,{name:"duration",label:"Duration",placeholder:"Select Duration",options:Q.value},null,8,["options"]),e("div",Aa,[Ia,e("div",{class:ue(["multiselect-container",{error:!!a(U)}])},[X(a(at),{id:"assignees",modelValue:T.value,"onUpdate:modelValue":N[2]||(N[2]=c=>T.value=c),mode:"tags",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:y.value,valueProp:"id",trackBy:"id",label:"name",class:ue(["multiselect-container",{error:!!a(U)}]),onSelect:N[3]||(N[3]=c=>re()),onDeselect:N[4]||(N[4]=c=>o())},null,8,["modelValue","options","class"]),a(U)?(t(),s("div",Ta,i(a(U)),1)):v("",!0)],2),e("button",{onClick:D(Ke,["prevent"]),class:"btn btn-info mt-2"}," Manage Members ")]),e("div",qa,[e("button",{onClick:N[5]||(N[5]=D(c=>_(),["prevent"])),class:"btn btn-link btn-sm text-danger h-7"}," Delete "),e("div",null,[e("button",{onClick:D(V,["prevent"]),class:"btn btn-secondary btn-sm ml-1 mr-1"}," Cancel "),Pa])])])],32)])])])],2),e("div",{class:ue({hidden:de.value,"md:block":!0,"w-[350px]":!0})},Fa,2)])):f.value===""?(t(),s("div",Ea,[Ra,e("div",Ua,[e("div",La,[e("a",{onClick:N[7]||(N[7]=D(c=>n("scratch"),["prevent"])),class:"btn btn-primary h-auto !p-0 p-0 mb-0 card flex-1"},ja),e("a",{onClick:N[8]||(N[8]=D(c=>n("previous"),["prevent"])),class:"btn btn-primary h-auto !p-0 p-0 mb-0 card flex-1"},Na)])])])):v("",!0),e("div",Ha,[e("dialog",{id:"saveagendasModal",class:"modal modal-primary",ref_key:"saveagendasModal",ref:se},[e("form",Ka,[Ba,Ya,e("div",za,[e("div",Ga,[e("form",Qa,[Wa,e("div",Ja,[e("button",{type:"submit",onClick:D(G,["prevent"]),class:"btn btn-lg btn-success"}," Save Imported Agendas ")])])])])])],512)])],64)}}});const Xa=Re(Za,[["__scopeId","data-v-f976f93f"]]),Fe=d(R=>(Ne("data-v-df6bfbcb"),R=R(),He(),R),"_withScopeId$5"),en={key:0},tn={key:0,class:"card card-widget shadow-lg"},sn={class:"card-header"},an={class:"d-flex align-items-center"},nn={class:"ml-3 flex-1"},on=Fe(()=>e("i",{class:"fas fa-chevron-left"},null,-1)),ln={key:0,class:"ml-auto flex self-end"},dn={key:0,type:"button",class:"btn btn-sm mr-1 btn-success btn-lg"},rn=Fe(()=>e("i",{class:"fas fa-door-closed mr-1"},null,-1)),cn={key:1,type:"button",class:"btn btn-sm mr-1 btn-success btn-lg"},un=Fe(()=>e("i",{class:"fa fa-check mr-1"},null,-1)),mn=Fe(()=>e("i",{class:"fa fa-check mr-1"},null,-1)),_n={class:"card-body"},pn=Fe(()=>e("span",{class:"info-box-icon",style:{left:"4%","margin-left":"-45px",position:"absolute",top:"88px"}},[e("div",{class:"h3 text-bold font-bold uppercase text-primary"}," Confidential")],-1)),hn={class:"text-center logo-container"},vn=["src"],gn={class:"h3 text-center text-primary text-bold font-bold uppercase"},bn=Fe(()=>e("hr",{class:"thick-line"},null,-1)),fn={class:"text-center text-primary text-bold uppercase h4"},yn={class:"text-center text-primary text-bold uppercase h4"},xn={key:0,class:"mt-2 text-primary text-bold uppercase"},$n={key:1,class:"table table-borderless"},wn={class:"p-0"},kn={class:"p-0 text-primary text-bold uppercase"},Mn={key:2,class:"mt-2 text-primary text-bold uppercase"},Cn={key:3,class:"table table-borderless"},Sn={class:"p-0"},An={class:"p-0 text-primary text-bold uppercase"},In={key:4,class:"mt-2 text-primary text-bold uppercase"},Tn={key:5,class:"table table-borderless"},qn={class:"p-0"},Pn={class:"p-0 text-primary text-bold uppercase"},Dn={key:6,class:"mt-2 text-primary text-bold uppercase"},Fn={key:7,class:"table table-borderless"},En={class:"p-0"},Rn={class:"p-0 text-primary text-bold uppercase"},Un=Fe(()=>e("h5",{class:"mt-2 text-primary text-bold uppercase"},"Agenda",-1)),Ln={class:"list-unstyled"},Vn={class:"list-unstyled ml-4"},jn={id:"MinutesEditor",class:"container"},On={class:"codex-editor"},Nn={class:"codex-editor__redactor",style:{"padding-bottom":"300px"}},Hn={class:"ce-block"},Kn={class:"flex w-full"},Bn={class:"flex-1"},Yn={key:0,"data-list_format":"num_la_lr",class:"agenda-list mb-0"},zn={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},Gn={class:"flex gap-2 items-start"},Qn={class:"font-medium flex-1"},Wn=["onClick"],Jn={class:"font-bold text-primary"},Zn=["innerHTML"],Xn={key:0,class:"min-h-6"},eo={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},to={class:"flex gap-2 items-start"},so={class:"font-medium flex-1"},ao={class:"font-bold text-primary"},no=["innerHTML"],oo={key:1,class:"card card-widget shadow-lg"},io=Fe(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, The Minutes have not been Aprroved")],-1)),lo=[io],ro={key:1},co=Fe(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),uo=[co],mo=$e({__name:"ApprovedMinutes",setup(R){const M=We();function Y(){M.back()}d(Y,"goBack");const E=Ie(),A=xe(),w=kt(),I=E.params.committeeId;E.params.meetingId;const C=E.params.scheduleId;E.params.minutesId;const f=p(null),j=p("create"),x=p(!1),m=p([]),S=p(null),k=p(null),T=p(-1),z=p(-1),te=p(!1),Z=p(!1),se=p([{text:""}]),ae=Pe(),de=ye({schedule_id:Qe().required(),committee_id:b().nullable(),membership_id:b().nullable(),minute_id:b().nullable(),agenda_id:b().required(),detail_minute_id:b().nullable(),subdetailminute_id:b().nullable(),subagenda_id:b().nullable(),description:b().required(),status:b().required()}),{handleSubmit:q,setErrors:F,setFieldValue:r,values:g}=De({validationSchema:de,initialValues:{schedule_id:C,committee_id:I,membership_id:null,minute_id:f.value,agenda_id:"",detail_minute_id:null,subdetailminute_id:null,subagenda_id:null,description:"",status:"unpublished"}});q(async(o,{resetForm:y})=>{try{const _={schedule_id:o.schedule_id,committee_id:null,membership_id:null,minute_id:f.value?f.value.toString():null,agenda_id:o.agenda_id.toString(),detail_minute_id:o.detail_minute_id?o.detail_minute_id.toString():null,subdetailminute_id:o.subdetailminute_id?o.subdetailminute_id.toString():null,subagenda_id:o.subagenda_id?o.subagenda_id.toString():null,description:o.description,status:o.status};j.value==="create"?x.value?await ds(_,C):Z.value&&await rs(_,C):T.value!==-1?(await cs(_,C),console.log("payload",_)):z.value!==-1&&await us(_,C),await L(),ce()}catch(_){_ instanceof qe?F(_.messages):ae(_)}});const ce=d(()=>{j.value="create",x.value=!1,S.value=null,k.value=null,T.value=-1,z.value=-1,te.value=!1,Z.value=!1,r("schedule_id",C),r("committee_id",I),r("membership_id",null),r("minute_id",f.value),r("agenda_id",""),r("detail_minute_id",null),r("subdetailminute_id",null),r("subagenda_id",null),r("description",""),r("status","unpublished")},"reset");ie(()=>{const o=x.value&&S.value===agenda.id&&z.value===pIndex&&T.value===cIndex&&j.value==="create";return console.log("isAddingChild computed:",o),o}),ie(()=>{const o=te.value&&!Z.value&&!x.value&&j.value==="edit";return console.log("isEditing computed:",o),o});const U=d((o,y,_,n,$)=>{ce(),te.value=!0,Z.value=!1,x.value=!1,z.value=o,T.value=y,j.value="edit",console.log("pIndex: number, cIndex:",o,y),console.log("States after enabling adding child:",{is_editing:te.value,isAddingNewParent:Z.value,addingChild:x.value,editingParentIndex:z.value,editingChildIndex:T.value,action:j.value}),r("agenda_id",_.id),T.value!==-1?(r("subdetailminute_id",$.id),r("detail_minute_id",$.detail_minute_id),r("subagenda_id",$.subagenda_id),r("description",$.description)):z.value!==-1&&(r("detail_minute_id",n.id),r("description",n.description))},"enableEditing"),le=d(()=>Ce({queryKey:["getMinutesKey",C],queryFn:async()=>{const o=await ms(C,{paginate:"false"});return f.value=o.data.id,o.data},onSuccess:o=>{},onError:o=>{console.error("Failed to fetch minutes:",o)}}),"getMinutes"),{isLoading:H,data:u,refetch:L}=le(),pe=ie(()=>{var o,y,_,n;return(o=u==null?void 0:u.value)!=null&&o.attendances&&((_=(y=u==null?void 0:u.value)==null?void 0:y.attendances)==null?void 0:_.length)>0?((n=u==null?void 0:u.value)==null?void 0:n.attendances.filter($=>$.rsvp_status==="Yes"&&$.attendance_status==="Attended"))||[]:[]}),ne=ie(()=>{var o,y,_,n;return(o=u==null?void 0:u.value)!=null&&o.attendances&&((_=(y=u==null?void 0:u.value)==null?void 0:y.attendances)==null?void 0:_.length)>0?((n=u==null?void 0:u.value)==null?void 0:n.attendances.filter($=>$.rsvp_status==="Online"&&$.attendance_status==="Attended"))||[]:[]}),ee=ie(()=>{var o,y,_,n;return(o=u==null?void 0:u.value)!=null&&o.attendances&&((_=(y=u==null?void 0:u.value)==null?void 0:y.attendances)==null?void 0:_.length)>0?((n=u==null?void 0:u.value)==null?void 0:n.attendances.filter($=>["Yes","No","Maybe"].includes($.rsvp_status)&&$.attendance_status==="Absent"))||[]:[]}),ge=ie(()=>{var o,y,_,n;return(o=u==null?void 0:u.value)!=null&&o.attendances&&((_=(y=u==null?void 0:u.value)==null?void 0:y.attendances)==null?void 0:_.length)>0?((n=u==null?void 0:u.value)==null?void 0:n.attendances.filter($=>$.rsvp_status==="Pending"&&$.attendance_status==="Absent"))||[]:[]}),me=d(async()=>{const o=await xt(C,{paginate:"false"});m.value=o.data},"getmeetingagendas"),V=ie(()=>m.value);Me(async()=>{await L(),me()}),lt(()=>se==null?void 0:se.value,o=>{o&&(f.value=o)},{deep:!0});const oe=ie(()=>{var y;const o={};return u!=null&&u.value&&(u!=null&&u.value.detailminutes)&&((y=u==null?void 0:u.value.detailminutes)==null||y.forEach(_=>{var n;o[_.agenda_id]||(o[_.agenda_id]=[]),o[_.agenda_id].push(_),(n=_.subdetailminutes)==null||n.forEach($=>{o[$.subagenda_id]||(o[$.subagenda_id]=[]),o[$.subagenda_id].push($)})})),o}),Q=ie(()=>w.getSettings()),re=d(async o=>{await _s(o),await L()},"onAcceptCEOApproval");return(o,y)=>{var _,n,$,G,ve,be,we,Se,Le,Ve,Ke,O,N,l;return a(A).hasPermission(["view minutes"])?(t(),s("div",en,[a(u)&&((_=a(u))==null?void 0:_.approvalstatus)==="approved"?(t(),s("div",tn,[e("div",sn,[e("div",an,[e("div",nn,[e("a",{href:"",onClick:D(Y,["prevent"]),class:"text-blue-primary"},[on,K(" Go back To Meeting ")])]),a(u)?(t(),s("div",ln,[(($=(n=a(u))==null?void 0:n.schedule)==null?void 0:$.closestatus)==="closed"?(t(),s("button",dn,[rn,K(" Meeting Closed ")])):v("",!0),((G=a(u))==null?void 0:G.approvalstatus)==="approved"?(t(),s("button",cn,[un,K(" This Minutes Have been Approved ")])):(t(),s("button",{key:2,type:"button",class:"btn btn-sm mr-1 btn-warning btn-lg",onClick:y[0]||(y[0]=D(c=>{var h;return re((h=a(u))==null?void 0:h.id)},["prevent"]))},[mn,K(" Sorry, The Minutes have not been Aprroved ")]))])):v("",!0)])]),e("div",_n,[pn,e("div",hn,[e("img",{src:a(Kt)((ve=Q.value)==null?void 0:ve.logo),alt:"Organization Logo",class:"img-fluid logo"},null,8,vn)]),e("div",gn,i((be=Q.value)==null?void 0:be.name),1),bn,e("h4",fn,"MINUTES OF THE "+i((Se=(we=a(u))==null?void 0:we.meeting)==null?void 0:Se.title),1),e("p",yn," HELD AT "+i((Ve=(Le=a(u))==null?void 0:Le.meeting)==null?void 0:Ve.location)+" ON "+i(a(rt)((O=(Ke=a(u))==null?void 0:Ke.schedule)==null?void 0:O.date))+" STARTING AT "+i((l=(N=a(u))==null?void 0:N.schedule)==null?void 0:l.start_time),1),pe.value.length?(t(),s("h5",xn,"Present")):v("",!0),pe.value.length?(t(),s("table",$n,[e("tbody",null,[(t(!0),s(B,null,W(pe.value,(c,h)=>(t(),s("tr",{key:c.id},[e("td",wn,i(h+1)+". "+i(c.membership.user.full_name),1),e("td",kn," - "+i(c.membership.position.name),1)]))),128))])])):v("",!0),ne.value.length?(t(),s("h5",Mn,"Present on E-platform ")):v("",!0),ne.value.length?(t(),s("table",Cn,[e("tbody",null,[(t(!0),s(B,null,W(ne.value,(c,h)=>(t(),s("tr",{key:c.id},[e("td",Sn,i(h+1)+". "+i(c.membership.user.full_name),1),e("td",An," - "+i(c.membership.position.name),1)]))),128))])])):v("",!0),ee.value.length?(t(),s("h5",In,"Absent With Apology ")):v("",!0),ee.value.length?(t(),s("table",Tn,[e("tbody",null,[(t(!0),s(B,null,W(ee.value,(c,h)=>(t(),s("tr",{key:c.id},[e("td",qn,i(h+1)+". "+i(c.membership.user.full_name),1),e("td",Pn," - "+i(c.membership.position.name),1)]))),128))])])):v("",!0),ge.value.length?(t(),s("h5",Dn," Absent ")):v("",!0),ge.value.length?(t(),s("table",Fn,[e("tbody",null,[(t(!0),s(B,null,W(ge.value,(c,h)=>(t(),s("tr",{key:c.id},[e("td",En,i(h+1)+". "+i(c.membership.user.full_name),1),e("td",Rn," - "+i(c.membership.position.name),1)]))),128))])])):v("",!0),Un,e("ul",Ln,[(t(!0),s(B,null,W(V.value,(c,h)=>(t(),s(B,{key:c.id},[e("li",null,i(h+1)+". "+i(c.title),1),e("ul",Vn,[(t(!0),s(B,null,W(c.children,(P,J)=>(t(),s("li",{key:P.id},i(h+1)+"."+i(J+1)+" "+i(P.title),1))),128))])],64))),128))]),e("div",jn,[e("div",On,[e("div",Nn,[e("div",Hn,[e("div",Kn,[e("div",Bn,[V.value?(t(),s("ol",Yn,[(t(!0),s(B,null,W(V.value,(c,h)=>(t(),s("li",{class:"hover:border-gray-400",key:h},[e("div",zn,[e("div",Gn,[e("div",Qn,[(t(!0),s(B,null,W(oe.value[c.id],(P,J)=>(t(),s("div",{key:J,onClick:_e=>U(h,-1,c,P,void 0)},[e("div",Jn,i(a(mt)(a(it)(h),c.title)),1),e("div",{innerHTML:P.description},null,8,Zn)],8,Wn))),128))])])]),c.children?(t(),s("ol",Xn,[(t(!0),s(B,null,W(c.children,(P,J)=>(t(),s("li",{class:"mb-2 hover:border-gray-400",draggable:"false",key:J},[e("div",eo,[e("div",to,[e("div",so,[e("div",ao,i(a(mt)(a(it)(h),P.title,void 0,void 0,void 0,a(it)(J))),1),(t(!0),s(B,null,W(oe.value[c.id],(_e,Ae)=>(t(),s("div",{key:Ae},[(t(!0),s(B,null,W(oe.value[P.id],je=>(t(),s("div",{key:je.id},[e("div",{innerHTML:je.description},null,8,no)]))),128))]))),128))])])])]))),128))])):v("",!0)]))),128))])):v("",!0)])])])])])])])])):(t(),s("div",oo,lo))])):(t(),s("div",ro,uo))}}});const _o=Re(mo,[["__scopeId","data-v-df6bfbcb"]]),Je=d(R=>(Ne("data-v-ba216f77"),R=R(),He(),R),"_withScopeId$4"),po={class:"rsvp-container"},ho={key:0},vo={class:"dropdown"},go=["aria-expanded"],bo={key:0,class:"dropdown-menu show","aria-labelledby":"rsvp-status"},fo=Je(()=>e("i",{class:"far fa-check-circle bg-success"},null,-1)),yo=Je(()=>e("i",{class:"far fa-check-circle bg-warning"},null,-1)),xo=Je(()=>e("i",{class:"far fa-check-circle bg-danger"},null,-1)),$o=Je(()=>e("i",{class:"far fa-check-circle bg-info"},null,-1)),wo=Je(()=>e("i",{class:"far fa-check-circle bg-info"},null,-1)),ko={key:1},Mo=$e({__name:"MeetingRsvp",props:{attendee:{},disableRemoteRsvp:{}},emits:["rsvp-updated"],setup(R,{emit:M}){const Y=xe(),E=R,A=M,w=p(!1),I=d(()=>{w.value=!w.value},"toggleDropdown"),C=d(m=>{var S;A("rsvp-updated",{attendeeId:(S=E.attendee)==null?void 0:S.id,status:m}),w.value=!1},"updateRsvp"),f=ie(()=>{var m;return((m=E.attendee)==null?void 0:m.rsvp_status)||"RSVP"}),j=ie(()=>{var m;switch((m=E.attendee)==null?void 0:m.rsvp_status){case"Yes":return"bg-success text-white";case"No":return"bg-warning text-white";case"Maybe":return"bg-danger text-white";case"Online":return"bg-info text-white";case"Pending":return"bg-info text-white";default:return"bg-secondary text-white"}}),x=ie(()=>{var m;switch((m=E.attendee)==null?void 0:m.rsvp_status){case"Yes":return"far fa-check-circle";case"No":return"far fa-check-circle";case"Maybe":return"far fa-check-circle";case"Online":return"far fa-check-circle";case"Pending":return"far fa-check-circle";default:return"far fa-check-circle"}});return(m,S)=>{var k;return t(),s("div",po,[((k=m.attendee.membership)==null?void 0:k.user.id)===a(Y).user.id?(t(),s("div",ho,[e("div",vo,[e("button",{class:ue(["btn btn-icon dropdown-toggle",j.value]),type:"button",onClick:I,"aria-haspopup":"true","aria-expanded":w.value},[e("i",{class:ue([x.value,"mr-2"])},null,2),K(" "+i(f.value),1)],10,go),w.value?(t(),s("ul",bo,[e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:S[0]||(S[0]=D(T=>C("Yes"),["prevent"]))},[fo,K(" Yes ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:S[1]||(S[1]=D(T=>C("No"),["prevent"]))},[yo,K("No ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:S[2]||(S[2]=D(T=>C("Maybe"),["prevent"]))},[xo,K(" Maybe ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:S[3]||(S[3]=D(T=>C("Online"),["prevent"]))},[$o,K(" Online ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:S[4]||(S[4]=D(T=>C("Pending"),["prevent"]))},[wo,K(" Pending ")])])])):v("",!0)])])):(t(),s("div",ko,[e("button",null,[e("i",{class:ue([x.value,"mr-2"])},null,2),K(" "+i(f.value),1)])]))])}}});const Co=Re(Mo,[["__scopeId","data-v-ba216f77"]]),So={key:0,class:"container-fluid"},Ao=e("div",{class:"card-header flex items-center"},[e("h2",{class:"card-header-title h3"},"Attendance")],-1),Io={class:"container-fluid"},To={class:"row"},qo={class:"card card-outline card-primary h-100"},Po={class:"card-body box-profile"},Do={class:"text-center"},Fo={class:"avatar avatar-md mb-3"},Eo=["src"],Ro={class:"profile-username text-center text-primary"},Uo={class:"mt-3"},Lo={class:"d-flex justify-content-between mb-2"},Vo=e("strong",null,"Invited:",-1),jo={class:"cell-label"},Oo={class:"d-flex justify-content-between mb-2"},No=e("strong",null,"RSVP:",-1),Ho={class:"d-flex justify-content-between mb-2"},Ko=e("strong",null,"Attendance:",-1),Bo={key:0},Yo={key:0},zo=["onClick"],Go=e("i",{class:"far fa-eye"},null,-1),Qo={key:1},Wo=["onClick"],Jo={key:0},Zo=["onClick"],Xo={key:1,class:"container-fluid"},ei=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),ti=[ei],si=$e({__name:"Attendance",setup(R){const M=xe(),Y=Pe(),E=Ie(),A=We(),w=p("create");E.params.meetingId;const I=E.params.scheduleId,C=ye({id:b().required(),rsvp_status:b().nullable(),attendance_status:b().nullable(),signatureupload:b().nullable()}),{handleSubmit:f,setErrors:j,setFieldValue:x,values:m}=De({validationSchema:C,initialValues:{id:"",rsvp_status:"",attendance_status:"",signatureupload:""}}),S=d(()=>{w.value="create",x("id",""),x("rsvp_status",""),x("attendance_status",""),x("signatureupload","")},"reset"),k=d(F=>{S(),w.value="rsvp",x("id",F.attendeeId),x("rsvp_status",F.status),T()},"handleRsvpUpdated"),T=f(async(F,{resetForm:r})=>{try{const g={id:F.id,rsvp_status:F.rsvp_status,location:F.location,attendance_status:F.attendance_status,meeting_id:F.meeting_id,membership_id:F.membership_id,membership:F.membership,meeting:F.meeting,invite_status:null,signatureupload:null};w.value==="create"?await ht(g,I):w.value==="rsvp"?await vt(g,g.id):w.value==="attendance"&&await gt(g,g.id),await se(),S()}catch(g){g instanceof qe?j(g.messages):Y(g)}}),z=d(()=>Ce({queryKey:["getMeetingAttendancesKey",I],queryFn:async()=>(await qt(I,{paginate:"false"})).data}),"getMeetingAttendances"),{isLoading:te,data:Z,refetch:se}=z();Me(async()=>{se()}),Me(()=>{window.addEventListener("meetingUpdated",ae)}),Mt(()=>{window.removeEventListener("meetingUpdated",ae)});function ae(F){F.detail.scheduleId===I&&se()}d(ae,"handleMeetingUpdated");const de=d(F=>{var r;A.push({name:"CommitteeSignatureAttendance",params:{committeeId:E.params.committeeId,meetingId:E.params.meetingId,scheduleId:E.params.scheduleId,attendeeId:F.id,mediaId:(r=F.media[0])==null?void 0:r.uuid}})},"navigateToSignaturePage"),q=d(async F=>{await Pt(F),await se()},"sendReminder");return(F,r)=>a(M).hasPermission(["view attendances"])?(t(),s("div",So,[Ao,e("div",Io,[e("div",To,[(t(!0),s(B,null,W(a(Z),(g,ce)=>{var U,le,H,u;return t(),s("div",{class:"col-lg-3 col-md-4 col-sm-6 mb-3",key:ce},[e("div",qo,[e("div",Po,[e("div",Do,[e("div",Fo,[e("img",{src:a(Bt)(g.membership.user.profile.avatar),class:"profile-user-img img-fluid img-circle",role:"img","data-uw-rm-alt":"ALT"},null,8,Eo)]),e("h3",Ro,i((le=(U=g.membership)==null?void 0:U.user)==null?void 0:le.full_name),1)]),e("div",Uo,[e("div",Lo,[Vo,e("span",jo,i(g.invite_status),1)]),e("div",Oo,[No,e("div",null,[X(Co,{attendee:g,disableRemoteRsvp:0,onRsvpUpdated:k},null,8,["attendee"])])]),e("div",Ho,[Ko,e("div",null,[((H=g.membership)==null?void 0:H.user.id)===a(M).user.id?(t(),s("div",Bo,[g.attendance_status==="Attended"?(t(),s("div",Yo,[e("a",{href:"",onClick:D(L=>de(g),["prevent"]),class:"text-blue-500 hover:text-blue-700 transition duration-150 ease-in-out"},[Go,K(" "+i(g.attendance_status),1)],8,zo)])):(t(),s("div",Qo,[e("button",{type:"submit",class:"btn btn-link btn-primary btn-sm text-white",onClick:D(L=>de(g),["prevent"])}," Sign ",8,Wo)]))])):v("",!0)]),a(M).hasRole(["Super Admin","Admin","Company Secretary"])&&((u=g.membership)==null?void 0:u.user.id)!==a(M).user.id?(t(),s("div",Jo,[e("button",{type:"submit",class:"btn btn-link btn-primary btn-sm text-white",onClick:D(L=>q(g.id),["prevent"])}," Send Reminder ",8,Zo)])):v("",!0)])])])])])}),128))])])])):(t(),s("div",Xo,ti))}}),Ee=d(R=>(Ne("data-v-e4b60687"),R=R(),He(),R),"_withScopeId$3"),ai={key:0},ni={class:"card"},oi={class:"card-header"},ii={class:"card-header flex items-center"},li=Ee(()=>e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"}," Conflicts of Interest ")],-1)),di={key:0,class:"flex items-center space-x-2"},ri=Ee(()=>e("i",{class:"far fa fa-plus mr-2"},null,-1)),ci={class:"container-fluid"},ui={key:0,class:"row"},mi={class:"card card-outline card-primary h-100"},_i={class:"card-body box-profile"},pi={class:"text-center mb-3"},hi={class:"profile-username text-primary"},vi={class:"text-muted"},gi={class:"info-section"},bi=Ee(()=>e("span",{class:"text-bold text-danger"},"Nature Of Interest: ",-1)),fi={class:"text-primary"},yi={class:"info-section"},xi=Ee(()=>e("span",{class:"text-bold text-danger"},"Amount: ",-1)),$i={class:"info-section"},wi=Ee(()=>e("span",{class:"text-bold text-danger"},"Due Date: ",-1)),ki={class:"info-section"},Mi=Ee(()=>e("span",{class:"text-bold text-danger"},"Remarks: ",-1)),Ci={class:"text-primary"},Si={class:"info-section"},Ai=Ee(()=>e("span",{class:"text-bold text-danger"},"Signed: ",-1)),Ii={key:0,class:"text-center mt-3"},Ti=["onClick"],qi={class:"flex justify-center col-md-6"},Pi={method:"dialog",class:"modal-box rounded-xl"},Di={class:"font-bold text-lg justify-center flex"},Fi=Ee(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),Ei={class:"w-full mt-6 p-2"},Ri={class:"font-thin text-sm flex flex-col items-center gap-6"},Ui={class:"row"},Li={type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},Vi={key:1},ji=Ee(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),Oi=[ji],Ni=$e({__name:"ConflictofInterest",setup(R){var g,ce;const M=xe(),Y=Pe(),E=xe(),w=Ie().params.meetingId,I=p(null),C=p("create"),f=p(null),j=((g=E.user)==null?void 0:g.first)+" "+((ce=E.user)==null?void 0:ce.last),x=ye({name:b().required(),address:b().required(),nature:b().required(),amount:b().required(),ceased_date:b().required(),remarks:b().required(),conflict_id:b().nullable()}),{handleSubmit:m,setErrors:S,setFieldValue:k,values:T}=De({validationSchema:x,initialValues:{name:j,address:"",nature:"",amount:"",ceased_date:"",remarks:"",conflict_id:null}}),z=d(()=>{var U;Z(),C.value="create",(U=f.value)==null||U.showModal()},"openCreateConflictModal"),te=d(U=>{var le;Z(),I.value=U.id.toString(),C.value="edit",k("address",U.address),k("nature",U.nature),k("amount",U.amount),k("ceased_date",U.ceased_date),k("remarks",U.remarks),(le=f.value)==null||le.showModal()},"openEditConflictModal"),Z=d(()=>{k("address",""),k("nature",""),k("amount",""),k("ceased_date",""),k("remarks",""),k("conflict_id",null),C.value="create",I.value=null,yt()},"resetConflict"),se=m(async(U,{resetForm:le})=>{var H;try{const u={address:U.address,nature:U.nature,amount:U.amount,ceased_date:U.ceased_date,remarks:U.remarks,conflict_id:null};if(C.value==="create")await Dt(u,w);else{const L=I.value?I.value.toString():null;u.conflict_id=L,await Ft(u,w)}await F(),Z(),(H=f.value)==null||H.close()}catch(u){u instanceof qe?S(u.messages):Y(u)}}),ae=d(()=>Ce({queryKey:["getMeetingConflictsKey",w],queryFn:async()=>(await Et(w,{paginate:"false"})).data}),"getMeetingConflicts"),{isLoading:de,data:q,refetch:F}=ae();Me(async()=>{await F()});const r=ie(()=>{var U;return(U=q==null?void 0:q.value)==null?void 0:U.some(le=>{var H,u,L;return((u=(H=le==null?void 0:le.membership)==null?void 0:H.user)==null?void 0:u.id)===((L=M==null?void 0:M.user)==null?void 0:L.id)})});return(U,le)=>a(M).hasPermission(["view conflicts of interest"])?(t(),s("div",ai,[e("div",ni,[e("div",oi,[e("div",ii,[li,a(M).hasPermission(["create conflict of interest"])?(t(),s("div",di,[r.value?v("",!0):(t(),s("button",{key:0,type:"button",onClick:D(z,["prevent"]),class:"btn btn-primary"},[ri,K(" Add Your Conflict of Interest ")]))])):v("",!0)])]),e("div",ci,[a(q)?(t(),s("div",ui,[(t(!0),s(B,null,W(a(q),(H,u)=>{var L,pe,ne,ee,ge,me;return t(),s("div",{class:"col-lg-4 col-md-6 col-sm-12 mb-3",key:u},[e("div",mi,[e("div",_i,[e("div",pi,[e("h3",hi,i((pe=(L=H==null?void 0:H.membership)==null?void 0:L.user)==null?void 0:pe.full_name),1),e("p",vi,i(H.address),1)]),e("div",gi,[bi,e("span",fi,i(H.nature),1)]),e("div",yi,[xi,e("span",null,"Kshs. "+i(H.amount),1)]),e("div",$i,[wi,e("span",null,i(a(rt)(H.ceased_date)),1)]),e("div",ki,[Mi,e("span",Ci,i(H.remarks),1)]),e("div",Si,[Ai,e("span",null,i(H.status),1)]),a(M).hasPermission(["edit conflict of interest"])?(t(),s("div",Ii,[((ee=(ne=H==null?void 0:H.membership)==null?void 0:ne.user)==null?void 0:ee.id)===((me=(ge=a(M))==null?void 0:ge.user)==null?void 0:me.id)?(t(),s("button",{key:0,class:"btn btn-success btn-sm",onClick:D(V=>te(H),["prevent"])}," Edit ",8,Ti)):v("",!0)])):v("",!0)])])])}),128))])):v("",!0)])]),e("div",qi,[e("dialog",{id:"conflictmodal",class:"modal",ref_key:"ConflictModal",ref:f},[e("form",Pi,[e("h3",Di,i(C.value==="create"?"Create Conflict of Interest":"Update Conflict of Interest"),1),Fi,e("div",Ei,[e("div",Ri,[e("form",{novalidate:"",onSubmit:le[0]||(le[0]=D((...H)=>a(se)&&a(se)(...H),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",Ui,[X(Te,{labeled:!0,label:"Meeting Member",name:"name",class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Meeting Member",type:"text",disabled:!0}),X(Te,{labeled:!0,label:"Address",name:"address",class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Input Your Address",type:"text"}),X(pt,{labeled:!0,label:"Nature of the Interest",name:"nature",class:"col-md-12 w-full text-sm text-white tracking-wide",placeholder:"Enter Nature of the Interest",rows:2}),X(Te,{labeled:!0,label:"Estimated Value Of The Interest (KSHS.)",name:"amount",class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Estimated Value Of The Interest (KSHS.)",type:"number"}),X(ut,{label:"Due Date",name:"ceased_date",flow:["day"],class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Select Due Date"}),X(pt,{labeled:!0,label:"Remarks",name:"remarks",class:"col-md-12 w-full text-sm text-white tracking-wide",placeholder:"Enter Remarks",rows:2})]),e("button",Li,i(C.value==="create"?"Create Conflict of Interest":"Update Conflict of Interest"),1)],32)])])])],512)])])):(t(),s("div",Vi,Oi))}});const Hi=Re(Ni,[["__scopeId","data-v-e4b60687"]]),fe=d(R=>(Ne("data-v-8e88d20b"),R=R(),He(),R),"_withScopeId$2"),Ki={key:0},Bi={class:"card"},Yi={class:"card-header p-3"},zi={class:"row"},Gi={class:"col-12"},Qi={class:"row"},Wi={class:"col-lg-9 col-md-8 col-12 mt-2"},Ji={"aria-label":"Breadcrumbs",class:"text-sm overflow-hidden"},Zi={class:"breadcrumb mb-0 bg-warning"},Xi=["onClick"],el={class:"col-lg-3 col-md-4 col-12"},tl={class:"row"},sl={class:"col-md-6 col-12 mt-2"},al={class:"dropdown"},nl={class:"nav-link dropdown-toggle btn btn-secondary btn-block",href:"#",id:"navbarDropdown",type:"button",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},ol=fe(()=>e("span",{class:"text-warning mr-1"},"sort by:",-1)),il={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},ll=["onClick"],dl={class:"col-md-6 col-12 mt-2"},rl={class:"dropdown"},cl={key:0,class:"nav-link dropdown-toggle btn btn-primary btn-block",href:"#",id:"navbarDropdown",type:"button",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},ul=fe(()=>e("i",{class:"fas fa-plus mr-2"},null,-1)),ml={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},_l=fe(()=>e("i",{class:"fas fa-plus"},null,-1)),pl=fe(()=>e("i",{class:"fas fa-file-upload"},null,-1)),hl={key:0,class:"col-12 mt-3"},vl={class:"input-group input-group-lg"},gl=fe(()=>e("div",{class:"input-group-append"},[e("button",{type:"submit",class:"btn btn-lg btn-default"},[e("i",{class:"fa fa-search"})])],-1)),bl={class:"card-body py-0 px-4 min-h-[300px] relative -top-px z-10"},fl={class:"table-responsive"},yl={class:"table mb-0"},xl={class:"w-28"},$l=["onClick"],wl=["src"],kl={key:1},Ml=["src"],Cl={key:0},Sl={class:"font-weight-bold text-primary text-truncate"},Al={class:"text-sm font-weight-bold text-primary"},Il=fe(()=>e("span",{class:"text-black"},"Folders",-1)),Tl={class:"text-sm font-weight-bold text-primary"},ql=fe(()=>e("span",{class:"text-black"},"Files",-1)),Pl={key:1},Dl={key:0},Fl={class:"font-weight-bold text-primary text-truncate"},El={class:"text-sm font-weight-bold text-primary"},Rl={class:"text-black"},Ul={class:"w-28"},Ll={key:0},Vl={class:"text-xs text-primary text-truncate"},jl={key:1},Ol={key:0},Nl={class:"text-xs text-primary text-truncate"},Hl={class:"w-20 text-center"},Kl={class:"flex justify-end space-x-2"},Bl={key:0},Yl=["onClick"],zl=fe(()=>e("i",{class:"far fa-edit"},null,-1)),Gl=[zl],Ql={key:1},Wl=["onClick"],Jl=fe(()=>e("i",{class:"far fa-edit"},null,-1)),Zl=[Jl],Xl=fe(()=>e("i",{class:"far fa-eye"},null,-1)),ed={class:"flex justify-center col-md-6"},td={method:"dialog",class:"modal-box rounded-xl"},sd={class:"font-bold text-lg justify-center flex"},ad=fe(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),nd={class:"w-full mt-6 p-2"},od={class:"font-thin text-sm flex flex-col items-center gap-6"},id={class:"row"},ld={key:0,class:"row mt-2 ml-2"},dd={key:0,class:"row mt-2 ml-2"},rd={class:"col-md-6"},cd=["src"],ud={class:"col-md-6"},md=fe(()=>e("strong",null,"File Name:",-1)),_d={class:"text-bold text-primary"},pd=fe(()=>e("strong",null,"File Size:",-1)),hd={class:"text-bold text-primary"},vd=fe(()=>e("strong",null,"Type:",-1)),gd={class:"text-bold text-primary"},bd=fe(()=>e("strong",null,"Last Modified: ",-1)),fd={class:"text-bold text-primary"},yd={type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},xd={key:1},$d=fe(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),wd=[$d],kd=$e({__name:"Documents",setup(R){const M=xe(),Y=Pe(),E=Ie(),A=p("create"),w=p("folder"),I=E.params.committeeId,C=p("name-asc"),f=p(""),j=p([]),x=E.params.meetingId,m=p([{id:"1",name:"Folders"}]),S=p(null),k=p(!1),T=p(null),z=p(null),te=[{id:"name-asc",name:"Name (A-Z)"},{id:"name-desc",name:"Name (Z-A)"},{id:"date-newest",name:"Newest to oldest"},{id:"date-oldest",name:"Oldest to newest"}];function Z(o){C.value=o}d(Z,"applySort");const se=ie(()=>{const o=te.find(y=>y.id===C.value);return o?o.name:"Unknown"});function ae(o){m.value.push({id:o.id,name:o.name})}d(ae,"addToNavigationPath");function de(o){const y=m.value.slice(0,o+1);if(y.length!==m.value.length){m.value=y;const _=q(m.value.at(-1).id,U.value);j.value=_?_.children||[]:[]}}d(de,"navigateTo");function q(o,y){if(!Array.isArray(y))return null;for(const _ of y){if(_.id===o)return _;if(_.children&&Array.isArray(_.children)){const n=q(o,_.children);if(n)return n}}return null}d(q,"findFolderById");function F(o){m.value.at(-1).id!==o.id&&(ae(o),console.log("folder",o.children),j.value=o.children||[])}d(F,"openFolder");function r(o){let y=0,_=0;return o.children&&o.children.length>0&&o.children.forEach(n=>{n.type==="folder"?y++:n.type==="file"&&_++}),{folderCount:y,fileCount:_}}d(r,"countChildrenTypes");const g=d(()=>Ce({queryKey:["getMeetingFoldersKey",x],queryFn:async()=>(await jt(x,{paginate:"false"})).data[0].children}),"getMeetingFolders"),{isLoading:ce,data:U,refetch:le}=g();Me(async()=>{await le()}),lt(U,o=>{var y;if(o&&o.length>0){if(m.value.length===1){const _=o[0];m.value[0].id=_.folderable_id.toString(),m.value[0].name=" Documents"}if(m.value.length===1)j.value=o;else{const _=q((y=m.value.at(-1))==null?void 0:y.id,o);j.value=_?_.children||[]:[]}}},{immediate:!0});const H=ie(()=>f.value?u.value.filter(o=>o.name.toLowerCase().includes(f.value.toLowerCase())):u.value),u=ie(()=>{const o=m.value.length>1?j.value:U.value;return Array.isArray(o)?[...o].sort((y,_)=>{switch(C.value){case"name-asc":return y.name.localeCompare(_.name);case"name-desc":return _.name.localeCompare(y.name);case"date-newest":return new Date(_.created_at).getTime()-new Date(y.created_at).getTime();case"date-oldest":return new Date(y.created_at).getTime()-new Date(_.created_at).getTime();default:return 0}}):[]}),L=ye({name:b().required(),meeting_id:b().required(),folder_id:b().nullable(),parent_id:b(),type:b().oneOf(["folder","file"]).required(),fileupload:Qe().nullable()}),{handleSubmit:pe,setErrors:ne,setFieldValue:ee,values:ge}=De({validationSchema:L,initialValues:{name:"",meeting_id:x,folder_id:null,parent_id:"",type:"",fileupload:null}}),me=d(o=>{var n;const y=o.target;if(!((n=y.files)!=null&&n.length))return;const _=y.files[0];ee("name",_.name),ee("type","file")},"updateName"),V=d(o=>{var _;re(),A.value="create",w.value=o,k.value=!0,(_=z.value)==null||_.showModal(),ee("type",o);const y=m.value.at(-1);ee("parent_id",y.id),console.log("parent",y)},"openCreateFolderModal"),oe=pe(async(o,{resetForm:y})=>{var _;try{if(A.value==="create")if(w.value==="folder"){const n={children:[],created_at:null,icon:null,id:null,meeting_id:o.meeting_id,folder_id:null,name:o.name,parent_id:o.parent_id.toString(),type:o.type,fileupload:null,media:[]};await Rt(n,x)}else{const n={children:[],created_at:null,icon:null,id:null,meeting_id:o.meeting_id,folder_id:null,name:o.name,parent_id:o.parent_id.toString(),type:o.type,fileupload:o.fileupload,media:[]};await Ut(n,x)}else if(w.value==="folder"){const n={children:[],created_at:null,folder_id:null,icon:null,id:null,meeting_id:o.meeting_id.toString(),name:o.name,parent_id:o.parent_id.toString(),type:o.type,fileupload:null,media:[]},$=T.value?T.value.toString():null;n.folder_id=$,await Lt(n,x)}else{const n={children:[],created_at:null,folder_id:null,icon:null,id:null,meeting_id:o.meeting_id.toString(),name:o.name,parent_id:o.parent_id.toString(),type:o.type,fileupload:o.fileupload,media:[]},$=T.value?T.value.toString():null;n.folder_id=$,await Vt(n,x)}await le(),re(),(_=z.value)==null||_.close()}catch(n){n instanceof qe?ne(n.messages):Y(n)}}),Q=d((o,y)=>{var _;re(),S.value=o,T.value=o.id.toString(),A.value="edit",w.value=y,k.value=!0,ee("name",o.name),ee("folder_id",o.id),ee("type",y),y==="file"&&(ee("fileupload",o.name),Wt(o.media[0])),ee("parent_id",o.id),console.log("folder.media",o.name),(_=z.value)==null||_.showModal()},"openEditFolderModal"),re=d(()=>{ee("name",""),ee("folder_id",null),ee("fileupload",""),ee("parent_id",""),ee("type",""),w.value="folder",A.value="create",k.value=!1,S.value=null,T.value=null,yt()},"resetFolder");return(o,y)=>{const _=dt("router-link");return a(M).hasPermission(["view folders"])?(t(),s("div",Ki,[e("div",Bi,[e("div",Yi,[e("div",zi,[e("div",Gi,[e("div",Qi,[e("div",Wi,[e("nav",Ji,[e("ol",Zi,[(t(!0),s(B,null,W(m.value,(n,$)=>(t(),s("li",{key:n.id,class:"breadcrumb-item"},[e("a",{href:"#",class:"text-gray-800 font-medium",onClick:D(G=>de($),["prevent"])},i(n.name),9,Xi)]))),128))])])]),e("div",el,[e("div",tl,[e("div",sl,[e("div",al,[e("button",nl,[ol,K(i(se.value),1)]),e("div",il,[(t(),s(B,null,W(te,n=>e("a",{key:n.id,href:"#",class:"dropdown-item",onClick:D($=>Z(n.id),["prevent"])},i(n.name),9,ll)),64))])])]),e("div",dl,[e("div",rl,[a(M).hasPermission(["create folders","upload documents","create dropzone"])?(t(),s("button",cl,[ul,K(" New ")])):v("",!0),e("div",ml,[a(M).hasPermission(["create folders","create dropzone"])?(t(),s("a",{key:0,href:"#",onClick:y[0]||(y[0]=D(n=>V("folder"),["prevent"])),class:"dropdown-item"},[_l,K(" New folder ")])):v("",!0),a(M).hasPermission(["upload documents"])?(t(),s("a",{key:1,href:"#",onClick:y[1]||(y[1]=D(n=>V("file"),["prevent"])),class:"dropdown-item"},[pl,K(" Upload a file ")])):v("",!0)])])])])])])]),a(M).hasPermission(["search documents"])?(t(),s("div",hl,[e("div",vl,[Ct(e("input",{type:"search",class:"form-control form-control-lg",placeholder:"Type your keywords here","onUpdate:modelValue":y[2]||(y[2]=n=>f.value=n)},null,512),[[St,f.value]]),gl])])):v("",!0)])]),e("div",bl,[e("div",fl,[e("table",yl,[e("tbody",null,[(t(!0),s(B,null,W(H.value,n=>{var $,G;return t(),s("tr",{key:n.id,class:"group bg-white hover:bg-gray-100 cursor-pointer"},[e("td",xl,[n.type==="folder"?(t(),s("div",{key:0,onClick:D(ve=>F(n),["prevent"])},[n.type==="folder"?(t(),s("img",{key:0,src:a(Yt)(n.icon),class:"img-fluid",alt:"Folder Icon"},null,8,wl)):v("",!0)],8,$l)):(t(),s("div",kl,[a(M).hasPermission(["view documents"])?(t(),Ge(_,{key:0,to:{name:"CommitteeMediaDetails",params:{committeeId:a(I),meetingId:n.meetingId,folderId:n.id,mediaId:n==null?void 0:n.media[0].uuid}},class:"d-block text-success hover:text-green-700 transition ease-in-out"},{default:Ye(()=>[e("img",{src:a(zt)(n.media[0].mime_type),class:"img-fluid",alt:"File Icon"},null,8,Ml)]),_:2},1032,["to"])):v("",!0)]))]),e("td",null,[n.type==="folder"?(t(),s("div",Cl,[e("p",Sl,i(n.name),1),e("p",Al,[K(i(r(n).folderCount)+": ",1),Il]),e("p",Tl,[K(i(r(n).fileCount)+": ",1),ql])])):(t(),s("div",Pl,[a(M).hasPermission(["view documents"])?(t(),s("div",Dl,[e("p",Fl,i(($=n==null?void 0:n.media[0])==null?void 0:$.file_name),1),e("p",El,[K(" Size: "),e("span",Rl,i(a(_t)((G=n==null?void 0:n.media[0])==null?void 0:G.size)),1)])])):v("",!0)]))]),e("td",Ul,[n.type==="folder"?(t(),s("div",Ll,[e("p",Vl,i(a(st)(n.created_at,"")),1)])):(t(),s("div",jl,[a(M).hasPermission(["view documents"])?(t(),s("div",Ol,[e("p",Nl,i(a(st)(n.created_at,"")),1)])):v("",!0)]))]),e("td",Hl,[e("div",Kl,[n.type==="folder"?(t(),s("div",Bl,[a(M).hasPermission(["edit folders"])?(t(),s("a",{key:0,href:"#",onClick:D(ve=>Q(n,"folder"),["prevent"]),class:"text-warning hover:text-blue-700 transition ease-in-out"},Gl,8,Yl)):v("",!0)])):(t(),s("div",Ql,[a(M).hasPermission(["edit documents"])?(t(),s("a",{key:0,href:"#",onClick:D(ve=>Q(n,"file"),["prevent"]),class:"text-warning hover:text-blue-700 transition ease-in-out"},Zl,8,Wl)):v("",!0),a(M).hasPermission(["view documents"])&&n.type==="file"?(t(),Ge(_,{key:1,to:{name:"CommitteeMediaDetails",params:{committeeId:a(I),meetingId:n.meetingId,folderId:n.id,mediaId:n==null?void 0:n.media[0].uuid}},class:"text-success :text-green-700 transition ease-in-out"},{default:Ye(()=>[Xl]),_:2},1032,["to"])):v("",!0)]))])])])}),128))])])])])]),e("div",ed,[e("dialog",{id:"foldermodal",class:"modal",ref_key:"FolderModal",ref:z},[e("form",td,[e("h3",sd,i(A.value==="create"?w.value==="folder"?"Create Folder":"Upload File":w.value==="folder"?"Update Folder":"Update File"),1),ad,e("div",nd,[e("div",od,[e("form",{novalidate:"",onSubmit:y[4]||(y[4]=D((...n)=>a(oe)&&a(oe)(...n),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",id,[X(Te,{labeled:!0,label:w.value==="folder"?"Folder name":"Upload File name",name:"name",class:"col-md-12 w-full text-sm text-white tracking-wide",placeholder:w.value==="folder"?"Folder name":"Upload File name",type:"text"},null,8,["label","placeholder"]),w.value==="file"?(t(),s("div",ld,[X(gs,{labeled:!0,label:"Upload Cover Image for the Committee",name:"fileupload",class:"w-full text-sm text-white tracking-wide col-md-12",placeholder:"Enter Cover Image of the Committee",type:"file",accept:a(Gt).join(", "),onChange:y[3]||(y[3]=n=>{a(Qt)(n),me(n)})},null,8,["accept"]),a(ge).fileupload?(t(),s("div",dd,[e("div",rd,[a(Be).previewUrl?(t(),s("img",{key:0,src:a(Be).previewUrl,alt:"File Preview",class:"file_attachment"},null,8,cd)):v("",!0)]),e("div",ud,[e("p",null,[md,e("span",_d,i(a(Be).name),1)]),e("p",null,[pd,e("span",hd,i(a(_t)(a(Be).size)),1)]),e("p",null,[vd,e("span",gd,i(a(Be).type),1)]),e("p",null,[bd,e("span",fd,i(a(ft)(a(Be).lastModifiedDate)),1)])])])):v("",!0)])):v("",!0)]),e("button",yd,i(A.value==="create"?w.value==="folder"?"Create Folder":"Upload File":w.value==="folder"?"Update Folder":"Update File"),1)],32)])])])],512)])])):(t(),s("div",xd,wd))}}});const Md=Re(kd,[["__scopeId","data-v-8e88d20b"]]),Cd={key:0,class:"card"},Sd=e("div",{class:"card-header flex items-center"},[e("h2",{class:"card-header-title h3"},"Details")],-1),Ad={class:"card-body"},Id={class:"space-y-6"},Td={class:"flex items-start"},qd=e("div",{class:"mr-4 w-6 text-muted"},[e("i",{class:"fas fa-calendar-day"})],-1),Pd={class:"h3 mb-0"},Dd={class:"m-0"},Fd={class:"text-primary"},Ed={key:0},Rd={key:0,class:"m-0 text-black"},Ud={class:"text-primary"},Ld={class:"m-0 text-black"},Vd={class:"text-primary"},jd={class:"text-primary"},Od={class:"flex"},Nd={key:0,class:"w-6 mr-4 mt-2 text-muted"},Hd=e("i",{class:"fas fa-video h-6 w-6 fa-video mx-auto"},null,-1),Kd=[Hd],Bd={key:0,class:"flex mb-2 flex-wrap"},Yd=["href"],zd=e("i",{class:"fas fa-link"},null,-1),Gd=[zd],Qd=["href"],Wd=e("button",{type:"button",class:"text-primary hover:bg-primary-100 bg-transparent py-2 px-3 rounded-md text-base flex gap-1 items-center justify-center min-w-fit"}," Run a Video Test ",-1),Jd=[Wd],Zd={key:1},Xd={class:"m-0 text-black"},er={class:"text-primary"},tr={class:"flex items-center"},sr={class:"m-0 text-sm"},ar=["innerHTML"],nr=$e({__name:"HomeDashBoard",setup(R){const M=xe(),Y=Ie();We();const E=Y.params.committeeId,A=Y.params.meetingId,w=Y.params.scheduleId,I=d(S=>{const k=document.createElement("textarea");k.value=S,k.style.top="0",k.style.left="0",k.style.position="fixed",document.body.appendChild(k),k.focus(),k.select();try{const z=document.execCommand("copy")?"successful":"unsuccessful"}catch(T){console.error("Fallback: Oops, unable to copy",T)}document.body.removeChild(k)},"fallbackCopyTextToClipcommittee"),C=d(async S=>{if(!navigator.clipcommittee){I(S),alert("Link copied to clipcommittee, paste it on your browser or share it to your platform");return}try{await navigator.clipcommittee.writeText(S),alert("Link copied to clipcommittee!")}catch(k){console.error("Failed to copy: ",k)}},"copyLinkToClipcommittee"),f=d(()=>Ce({queryKey:["getMeetingKey",E,A],queryFn:async()=>{const S=await bt(A);return window.dispatchEvent(new CustomEvent("updateTitle",{detail:S.data.title+" Meeting"})),S.data}}),"getMeeting"),{isLoading:j,data:x,refetch:m}=f();return(S,k)=>{var z,te,Z,se,ae,de,q,F;const T=dt("router-link");return a(x)?(t(),s("div",Cd,[Sd,e("div",Ad,[e("div",Id,[e("div",Td,[qd,e("div",null,[e("div",Pd,[e("p",Dd,[K(" Title: "),e("span",Fd,i((z=a(x))==null?void 0:z.title),1)]),(t(!0),s(B,null,W((te=a(x))==null?void 0:te.schedules,r=>(t(),s("div",{key:r.id},[r.id===a(w)?(t(),s("div",Ed,[r.id===a(w)?(t(),s("p",Rd,[K(" Date: "),e("span",Ud,i(a(rt)(r.date)),1)])):v("",!0),e("p",Ld,[K(" Start: "),e("span",Vd,i(r.start_time),1),K(" End: "),e("span",jd,i(r.end_time),1)])])):v("",!0)]))),128))])])]),e("div",Od,[(Z=a(x))!=null&&Z.link?(t(),s("div",Nd,Kd)):v("",!0),e("div",null,[(se=a(x))!=null&&se.link?(t(),s("div",Bd,[e("a",{target:"_blank",href:(ae=a(x))==null?void 0:ae.link,class:"btn btn-primary whitespace-nowrap mr-2","aria-label":"Join Web Conference - open in a new tab"}," Join Web Conference ",8,Yd),e("button",{type:"button",onClick:k[0]||(k[0]=r=>{var g;return C((g=a(x))==null?void 0:g.link)}),title:"Copy web conference link","aria-label":"Copy web conference link",class:"btn btn-primary mr-2"},Gd),e("a",{href:(de=a(x))==null?void 0:de.link,target:"_blank","aria-label":"Run a Video Test - open in a new tab"},Jd,8,Qd)])):(t(),s("div",Zd,[e("p",Xd,[K(" Physical Meeting at:"),e("span",er,i((q=a(x))==null?void 0:q.location),1)])]))])]),e("div",tr,[e("p",sr,[K(" Meeting Description: "),e("span",{class:"text-primary",innerHTML:(F=a(x))==null?void 0:F.description},null,8,ar)])]),e("div",null,[a(M).hasPermission(["view committee"])?(t(),Ge(T,{key:0,to:{name:"CommitteeDetails",params:{committeeId:a(E)}},class:"badge badge-soft"},{default:Ye(()=>[K(i(a(x).meetingable.name),1)]),_:1},8,["to"])):v("",!0),a(M).hasPermission(["view meeting"])?(t(),Ge(T,{key:1,to:{name:"CommitteeMeetingDetails",params:{committeeId:a(E),meetingId:a(A),scheduleId:a(w)}},class:"badge badge-soft"},{default:Ye(()=>[K(i(a(x).title),1)]),_:1},8,["to"])):v("",!0)])])])])):v("",!0)}}}),or={class:"role-container w-100 d-flex justify-content-center"},ir=["aria-expanded"],lr={key:0,class:"dropdown-menu show justify-content","aria-labelledby":"role-status"},dr=["onClick"],rr={key:1,class:"text-center"},cr=$e({__name:"MemberShipPosition",props:{membership:{},positions:{},disableRemotePosition:{}},emits:["position-updated"],setup(R,{emit:M}){const Y=R,E=M,A=p(null),w=p(!1),I=d(m=>{m.stopPropagation(),w.value=!w.value},"toggleDropdown"),C=d(m=>{E("position-updated",{membershipId:Y.membership.id,positionId:m.id}),w.value=!1},"updateRole"),f=ie(()=>{var m;return`bg-${(m=Y.membership)==null?void 0:m.position.name.toLowerCase()} text-white`}),j=ie(()=>{var m;return(m=Y.membership)==null?void 0:m.position.name}),x=ie(()=>Y.positions);return(m,S)=>{var k,T,z,te;return t(),s("div",or,[j.value?(t(),s("div",{key:0,class:"dropdown",ref_key:"dropdownRef",ref:A},[e("button",{class:ue(["btn btn-primary dropdown-toggle text-truncate w-100",f.value]),type:"button",onClick:I,"aria-haspopup":"true","aria-expanded":w.value},[e("i",{class:ue(["mr-2 fa "+((k=Y.membership)==null?void 0:k.position.icon),"mr-2"])},null,2),K(" "+i((T=Y.membership)==null?void 0:T.position.name),1)],10,ir),w.value?(t(),s("ul",lr,[(t(!0),s(B,null,W(x.value,Z=>(t(),s("li",{key:Z.name},[e("a",{href:"#",class:"dropdown-item",onClick:D(se=>C(Z),["prevent"])},[e("i",{class:ue(["mr-2 fa "+Z.icon,"mr-2"])},null,2),K(" "+i(Z.name),1)],8,dr)]))),128))])):v("",!0)],512)):(t(),s("div",rr,[e("i",{class:ue(["mr-2 fa "+((z=Y.membership)==null?void 0:z.position.icon),"mr-2"])},null,2),K(" "+i((te=Y.membership)==null?void 0:te.position.name),1)]))])}}});const ur=Re(cr,[["__scopeId","data-v-32dbf3a7"]]),Ue=d(R=>(Ne("data-v-16fbb69a"),R=R(),He(),R),"_withScopeId$1"),mr={class:"card"},_r={class:"card-header flex items-center"},pr=Ue(()=>e("h2",{class:"card-header-title h3"},"Committee Meeting Members",-1)),hr={class:"ml-auto flex items-center space-x-2"},vr={class:"container-fluid"},gr={key:0,class:"row"},br={key:0,class:"card card-outline card-primary h-100"},fr={class:"card-body box-profile"},yr={class:"text-center"},xr={class:"profile-username text-center text-primary"},$r=["onClick"],wr=["onClick"],kr=Ue(()=>e("i",{class:"far fa-eye"},null,-1)),Mr=[kr],Cr={class:"text-muted text-center text-bold"},Sr={key:0,class:"mt-3"},Ar=Ue(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Position ",-1)),Ir={class:"text-center"},Tr={key:1,class:"mt-3"},qr=Ue(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Position ",-1)),Pr={class:"text-center"},Dr={class:"mt-3"},Fr=Ue(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Last Updated ",-1)),Er={class:"text-center text-primary text-small"},Rr={class:"flex justify-center col-md-6"},Ur={method:"dialog",class:"modal-box rounded-xl"},Lr=Ue(()=>e("h3",{class:"font-bold text-lg justify-center flex"},i("Add Members"),-1)),Vr=Ue(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),jr={class:"w-full mt-6 p-2"},Or={class:"font-thin text-sm flex flex-col items-center gap-6"},Nr={key:0,class:"message"},Hr=Ue(()=>e("button",{type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},i("Add Members"),-1)),Kr=$e({__name:"Members",emits:["memberships-updated"],setup(R,{emit:M}){const Y=xe(),E=Pe(),A=Ie(),w=We(),I=p("create"),C=A.params.committeeId,f=A.params.meetingId,j=A.params.scheduleId,x=p(!1),m=p(null),S=p([]),k=p([]),T=M,{errorMessage:z}=Oe("assignees"),te=ye({id:b().nullable(),position_id:b().nullable(),committee_id:Qe().required(),meeting_id:Qe().required(),memberships:ze().of(b()).required("Members selection is required.")}),{handleSubmit:Z,setErrors:se,setFieldValue:ae,values:de}=De({validationSchema:te,initialValues:{committee_id:C,meeting_id:f,id:"",position_id:"",memberships:[]}}),q=d(()=>{ae("memberships",S.value)},"selectedMembers"),F=d(()=>{ae("memberships",S.value)},"removeselectedMembers"),r=d(V=>{var Q;console.log(V.memberships);const oe=V.memberships.map(re=>re.member.id.toString());S.value=oe,ae("memberships",S.value),I.value="edit",x.value=!0,(Q=m.value)==null||Q.showModal()},"openEditMembershipsModal"),g=Z(async(V,{resetForm:oe})=>{var Q;try{ae("memberships",S.value);const re={committee_id:V.committee_id,memberships:V.memberships};if(I.value==="create")await ps(re,f,j);else if(I.value==="edit")await hs(re,f,j);else if(I.value==="position"){const o={id:V.id,position_id:V.position_id};await vs(o,f,j)}await u(),T("memberships-updated"),ce(),(Q=m.value)==null||Q.close()}catch(re){re instanceof qe?se(re.messages):E(re)}}),ce=d(()=>{I.value="create",x.value=!1,S.value=[],ae("memberships",[]),ae("id",""),ae("position_id","")},"reset"),U=d(()=>Ce({queryKey:["getMembershipsKey",f,j],queryFn:async()=>{const V=await nt(f,{paginate:"false"});return console.log("response.data",V.data),V.data}}),"getMemberships"),{isLoading:le,data:H,refetch:u}=U(),L=ie(()=>{var oe;const V=[];return k.value&&((oe=k.value)==null?void 0:oe.length)>0&&k.value.reduce((Q,re)=>(Q.push({id:re.id,name:`${re.user.full_name}`}),Q),V),console.log("resul",V),V}),pe=d(async()=>{const V=await Ot(C,{paginate:"false"});k.value=V.data},"getMembers");Me(async()=>{pe()});const ne=p([]),ee=d(async()=>{const V=await Nt({paginate:"false"});ne.value=V.data},"getPositions");Me(async()=>{await ee()});const ge=d(V=>{ce(),I.value="position",ae("id",V.membershipId),ae("position_id",V.positionId),g()},"handlePositionUpdated"),me=d(V=>{w.push({name:"ProfileDetails",params:{userId:V.id,profileId:V.profile.id}})},"openUserProfile");return(V,oe)=>(t(),s(B,null,[e("div",mr,[e("div",_r,[pr,e("div",hr,[e("button",{class:"btn btn-secondary btn-sm",onClick:oe[0]||(oe[0]=D(Q=>r({memberships:a(H)}),["prevent"]))}," Update Members ")])]),e("div",vr,[a(H)?(t(),s("div",gr,[(t(!0),s(B,null,W(a(H),(Q,re)=>(t(),s("div",{class:"col-lg-3 col-md-4 col-sm-6 mb-3",key:re},[Q.user?(t(),s("div",br,[e("div",fr,[e("div",yr,[e("h3",xr,[e("a",{href:"",onClick:D(o=>me(Q.user),["prevent"])},i(Q.user.full_name),9,$r),e("button",{type:"button",onClick:D(o=>me(Q.user),["prevent"]),title:"",class:"mx-2 btn btn-sm btn-primary"},Mr,8,wr)]),e("p",Cr,i(Q.position.name),1)]),a(Y).hasPermission(["assign meeting position"])?(t(),s("div",Sr,[Ar,e("div",Ir,[X(ur,{membership:Q,positions:ne.value,disableRemotePosition:0,onPositionUpdated:ge},null,8,["membership","positions"])])])):(t(),s("div",Tr,[qr,e("div",Pr,[e("i",{class:ue(["mr-2 fa "+Q.position.icon,"mr-2"])},null,2),K(" "+i(Q.position.name),1)])])),e("div",Dr,[Fr,e("p",Er,i(a(st)(Q.updated_at,null)),1)])])])):v("",!0)]))),128))])):v("",!0)])]),e("div",Rr,[e("dialog",{id:"membershipsmodal",class:"modal",ref_key:"membershipsmodal",ref:m},[e("form",Ur,[Lr,Vr,e("div",jr,[e("div",Or,[e("form",{novalidate:"",onSubmit:oe[4]||(oe[4]=D((...Q)=>a(g)&&a(g)(...Q),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",{class:ue(["multiselect-container",{error:!!a(z)}])},[X(a(at),{id:"members",modelValue:S.value,"onUpdate:modelValue":oe[1]||(oe[1]=Q=>S.value=Q),mode:"tags",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:L.value,valueProp:"id",trackBy:"id",label:"name",class:ue(["multiselect-container",{error:!!a(z)}]),onSelect:oe[2]||(oe[2]=Q=>q()),onDeselect:oe[3]||(oe[3]=Q=>F())},null,8,["modelValue","options","class"]),a(z)?(t(),s("div",Nr,i(a(z)),1)):v("",!0)],2),Hr],32)])])])],512)])],64))}});const Br=Re(Kr,[["__scopeId","data-v-16fbb69a"]]),Yr={key:0},zr={class:"card h-full"},Gr={class:"card-header flex items-center"},Qr=e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"}," Meeting Polls ")],-1),Wr={key:0,class:"flex items-center space-x-2"},Jr=e("i",{class:"far fa fa-plus mr-2"},null,-1),Zr=e("span",{class:"sr-only"},"Add poll",-1),Xr={class:"card-container"},ec={key:0},tc={key:1},sc={class:"row overflow-auto p-4",style:{"max-height":"100vh"}},ac={class:"card card-outline card-primary h-100"},nc={class:"card-header"},oc={class:"card-tools"},ic=["onClick"],lc=e("i",{class:"fas fa-edit"},null,-1),dc=[lc],rc={class:"card-body"},cc={class:"text-primary tex-bold uppercase"},uc=e("strong",{class:"text-primary"},"Question:",-1),mc={class:"mt-2 text-primary text-bold"},_c={class:""},pc=e("strong",null,"Answer Options:",-1),hc={class:"row"},vc={class:"col-6"},gc={class:"list-unstyled text-success"},bc={class:"col-6"},fc={class:"list-unstyled text-success"},yc={class:"d-flex justify-content-between"},xc=e("strong",null,"Due Date:",-1),$c=e("strong",null,"Status:",-1),wc=e("strong",null,"Vote:",-1),kc=["innerHTML"],Mc={class:""},Cc=e("strong",null,"Assignees:",-1),Sc={class:"row"},Ac={class:"col-6"},Ic={class:"list-unstyled"},Tc={class:"col-6"},qc={class:"list-unstyled"},Pc=e("strong",null,"Description:",-1),Dc=["innerHTML"],Fc={class:"flex justify-center items-center min-h-screen"},Ec={method:"dialog",class:"modal-box rounded-xl relative bg-white shadow-xl"},Rc={class:"font-bold text-lg text-center"},Uc=e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1),Lc={class:"overflow-auto p-4",style:{"max-height":"80vh"}},Vc={class:"grid grid-cols-2 md:grid-cols-2 gap-4 p-2"},jc={class:"col-span-2"},Oc={class:"flex flex-wrap -mx-2 mt-2"},Nc={class:"w-full md:w-1/2 px-1 md:px-2"},Hc={class:"w-full md:w-1/2 px-1 md:px-2"},Kc={class:"flex flex-wrap -mx-2 mt-2"},Bc={class:"w-full md:w-1/3 px-1 md:px-2 text-center"},Yc=e("h2",{class:"font-bold text-sm text-center"},"Click to Add Options",-1),zc=e("h4",{class:"text-info font-semibold"},"Your Options",-1),Gc={key:0},Qc={key:0,class:"w-full md:w-2/3 px-1 md:px-2 flex flex-col"},Wc=["onClick"],Jc={class:"flex flex-wrap -mx-2 mt-2"},Zc={class:"w-full md:w-1/2 px-1 md:px-2"},Xc={class:"w-full md:w-1/2 px-1 md:px-2"},eu={key:0},tu=e("h2",{class:"font-bold text-primary text-sm text-center"}," All Members Will be assiged this Poll ",-1),su=[tu],au={key:0,class:"form-group col-span-3"},nu=e("label",{class:"text-bold font-medium tracking-wide"}," People To Vote ",-1),ou={key:0,class:"message"},iu={key:1},lu={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},du={key:1},ru=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),cu=[ru],uu=$e({__name:"Pollp",setup(R){const M=xe(),Y=Ie(),E=p(!1),A=p("create"),w=Y.params.committeeId,I=Y.params.meetingId,C=p(null),f=p([]),j=p(null),x=p("single"),m=p("individuals"),S=p([]),k=p([]),T=p(""),z=Pe();Oe("duedate");const{errorMessage:te}=Oe("pollassignees"),Z=ye({id:b().required(),title:b().required(),poll_id:b().nullable(),deleted_at:b().nullable(),created_at:b().nullable(),updated_at:b().nullable()}),se=ye({id:b().required(),full_name:b().required()}),ae=ye({id:b().required(),poll_id:b().nullable(),membership_id:b().required(),user:se}),de=ye({meeting_id:b().nullable(),committee_id:b().nullable(),question:b().required(),description:b().required(),questionoptiontype:b().required(),optionstatus:b().required(),options:ze().of(Z).required(),duedate:b().required(),assigneetype:b().required(),assigneestatus:b().required(),pollassignees:ze().of(ae).nullable(),status:b().required()}),{handleSubmit:q,setErrors:F,setFieldValue:r,values:g}=De({validationSchema:de,initialValues:{meeting_id:I,committee_id:w,question:"",description:"",questionoptiontype:"",optionstatus:"",options:[{id:ot(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null}],duedate:"",assigneetype:"",assigneestatus:"",pollassignees:[],status:"inactive"}});Oe("options");const ce=d(()=>{var l;pe(),A.value="create",E.value=!0,(l=j.value)==null||l.showModal()},"openCreatePollModal"),U=d(l=>{var c;pe(),C.value=l.id,r("question",l.question),r("description",l.description),r("questionoptiontype",l.questionoptiontype),r("optionstatus",l.optionstatus),r("duedate",l.duedate),r("assigneetype",l.assigneetype),r("assigneestatus",l.assigneestatus),r("status",l.status),r("options",l.options),m.value=l.assigneestatus,le(l.pollassignees),A.value="edit",E.value=!0,(c=j.value)==null||c.showModal()},"openEditPollModal");function le(l){f.value=l.map(c=>({id:c.id,full_name:c.user.full_name,poll_id:c.poll_id,membership_id:c.membership_id,user:c.user})),r("pollassignees",f.value)}d(le,"mappollassigneesToReactiveRef");const H=d(()=>{r("pollassignees",f.value)},"selectedMembers"),u=d(()=>{r("pollassignees",f.value)},"removeselectedUsers"),L=q(async(l,{resetForm:c})=>{var h;try{console.log("dddd");const P={meeting_id:l.meeting_id,committee_id:l.committee_id,question:l.question,description:l.description,questionoptiontype:l.questionoptiontype,optionstatus:l.optionstatus,options:l.options,duedate:l.duedate,assigneetype:l.assigneetype,assigneestatus:l.assigneestatus,pollassignees:l.pollassignees,status:l.status};if(A.value==="create")await bs(P,I);else{const J=C.value;await fs(P,I,J)}(h=j.value)==null||h.close(),await N(),pe()}catch(P){P instanceof qe?F(P.messages):z(P)}}),pe=d(()=>{A.value="create",E.value=!1,C.value=null,x.value="single",m.value="all_members",f.value=[],r("meeting_id",I),r("committee_id",w),r("question",""),r("description",""),r("questionoptiontype","single"),r("optionstatus","single"),r("options",[{id:ot(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null}]),r("duedate",""),r("assigneetype","all_members"),r("assigneestatus","all_members"),r("pollassignees",[]),r("status","inactive")},"reset"),ne=d(l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),"formattedDateTime"),ee=d(l=>ge(l)?"bg-danger":"bg-success","dateBadgeClass"),ge=d(l=>{const c=new Date,h=new Date(l);return c>h},"hasDueDatePassed"),me=d(l=>{var Ae;if(!l.votes||((Ae=l.votes)==null?void 0:Ae.length)===0)return"No votes yet";const c=l.votes.reduce((je,Ze)=>je+Ze.voteCount,0),h=l.totalMembers;if(c>h)return console.error("Total votes exceed total members, which is unexpected."),"Voting data error";if(c===0)return"No votes yet";const P=l==null?void 0:l.votes.reduce((je,Ze)=>je.voteCount>Ze.voteCount?je:Ze),J=h-c;return`${(P.voteCount/c*100).toFixed(1)}% voted for ${P.title}<br>${c} voted / ${J} not yet`},"calculateVoteStats"),V=d(l=>{switch(l){case"Backlog":return"badge bg-warning";case"Pending":return"badge bg-info";case"On Progress":return"badge bg-primary";case"Completed":return"badge bg-success";default:return"badge"}},"statusClass"),oe=[{name:"Single Answer",value:"single"},{name:"Multiple Answers: More than one",value:"multiple"}],Q=[{name:"Individuals",value:"individuals"},{name:"Assign All Meeting Members",value:"all_members"}],re=ie(()=>oe),o=ie(()=>Q),y=d(l=>{k.value=[],S.value=[],n(),x.value=l,r("questionoptiontype",l),r("optionstatus",l)},"handleQuestionOptionTypeChange"),_=d(l=>{f.value=[],T.value=l,m.value=l,r("assigneetype",l),r("assigneestatus",l),r("pollassignees",[])},"handleAssigneeTypeChange"),n=d(()=>{Array.isArray(g.options)||(console.error("Invalid state: values.options is not an array."),r("options",[]));const l={id:ot(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null};r("options",[...g.options,l])},"addEmptyOption");lt(()=>g.options,l=>{});const $=d(l=>{const c=g.options.filter(h=>h.id!==l);console.log("vv",c),r("options",c)},"removeOption"),G=d(()=>Ce({queryKey:["getPollMembershisKey"],queryFn:async()=>(await nt(I,{paginate:"false"})).data.map(Se())}),"getMemberships"),{isLoading:ve,data:be,refetch:we}=G(),Se=d(()=>l=>({id:l.id,full_name:l.user.full_name,membership_id:l.id,user:l.user}),"formatEvent"),Le=ie(()=>{var l;return!be.value||((l=be.value)==null?void 0:l.length)===0?[]:be.value}),Ve=d(()=>Ce({queryKey:["getMeetingPollsKey",I],queryFn:async()=>(await ys(I,{paginate:"false"})).data}),"getMeetingPolls"),{isLoading:Ke,data:O,refetch:N}=Ve();return Me(async()=>{we(),N()}),(l,c)=>a(M).hasPermission(["view poll"])?(t(),s("div",Yr,[e("div",zr,[e("div",Gr,[Qr,a(M).hasPermission(["create poll"])?(t(),s("div",Wr,[e("button",{type:"button",onClick:D(ce,["prevent"]),class:"btn btn-tool"},[Jr,K(),Zr])])):v("",!0)]),e("div",Xr,[a(Ke)?(t(),s("div",ec,"Loading Meeting Polls...")):(t(),s("div",tc,[e("div",sc,[(t(!0),s(B,null,W(a(O),(h,P)=>(t(),s("div",{class:"col-lg-12 col-md-12 col-sm-12 mb-2",key:P},[e("div",ac,[e("div",nc,[e("div",oc,[a(M).hasPermission(["edit poll"])?(t(),s("button",{key:0,class:"btn btn-tool",onClick:D(J=>U(h),["prevent"])},dc,8,ic)):v("",!0)])]),e("div",rc,[e("div",cc,[uc,e("p",mc,i(h.question),1),e("div",_c,[pc,e("div",hc,[e("div",vc,[e("ul",gc,[(t(!0),s(B,null,W(h.options.slice(0,Math.ceil(h.options.length/2)),(J,_e)=>(t(),s("li",{key:J.id},i(_e+1)+". "+i(J.title),1))),128))])]),e("div",bc,[e("ul",fc,[(t(!0),s(B,null,W(h.options.slice(Math.ceil(h.options.length/2)),(J,_e)=>(t(),s("li",{key:J.id},i(_e+1+Math.ceil(h.options.length/2))+". "+i(J.title),1))),128))])])])])]),e("div",yc,[e("div",null,[xc,e("p",{class:ue(ee(h.duedate))},i(ne(h.duedate)),3)]),e("div",null,[$c,e("p",null,[e("span",{class:ue(V(h.status))},i(h.status),3)])]),e("div",null,[wc,e("p",null,[e("span",{innerHTML:me(h)},null,8,kc)])])]),e("div",Mc,[Cc,e("div",Sc,[e("div",Ac,[e("ul",Ic,[(t(!0),s(B,null,W(h.pollassignees.slice(0,Math.ceil(h.pollassignees.length/2)),(J,_e)=>(t(),s("li",{key:J.id},i(_e+1)+". "+i(J.user.full_name),1))),128))])]),e("div",Tc,[e("ul",qc,[(t(!0),s(B,null,W(h.pollassignees.slice(Math.ceil(h.pollassignees.length/2)),(J,_e)=>(t(),s("li",{key:J.id},i(_e+1+Math.ceil(h.pollassignees.length/2))+". "+i(J.user.full_name),1))),128))])])])]),e("div",null,[Pc,e("p",{innerHTML:h.description,class:"mt-2"},null,8,Dc)])])])]))),128))])]))])]),e("div",Fc,[e("dialog",{id:"pollmodal",class:"modal w-full max-w-4xl mx-auto p-0",ref_key:"PollModal",ref:j},[e("form",Ec,[e("h3",Rc,i(A.value=="create"?"Create Poll":"Edit Poll"),1),Uc,e("div",Lc,[e("div",Vc,[e("div",jc,[e("form",{novalidate:"",onSubmit:c[3]||(c[3]=D((...h)=>a(L)&&a(L)(...h),["prevent"])),class:""},[X(Te,{labeled:!0,label:"Poll Question",name:"question",placeholder:"Enter Poll Question",type:"text"}),X(ct,{label:"Poll description",name:"description",theme:"snow",placeholder:"Enter Poll Description",toolbar:"full",contentType:"html",class:"col-span-2"}),e("div",Oc,[e("div",Nc,[X(tt,{labeled:!0,name:"questionoptiontype",label:"Select Allowed Answers On the Question",placeholder:"Select Allowed Answers On the Question",options:re.value,onSelectedItem:y},null,8,["options"])]),e("div",Hc,[X(ut,{label:"Poll Due Date",name:"duedate",flow:["month"],placeholder:"Enter Poll Due Date & Time"})])]),e("div",Kc,[e("div",Bc,[e("div",null,[Yc,e("button",{onClick:D(n,["prevent"]),class:"btn btn-primary h-10 mt-2"}," Add Option ")]),zc,a(g).options?(t(),s("ul",Gc,[(t(!0),s(B,null,W(a(g).options,(h,P)=>(t(),s("li",{class:"text-primary font-bold text-justify",key:P},i(P+1)+"."+i(h==null?void 0:h.title),1))),128))])):v("",!0)]),a(g).options?(t(),s("div",Qc,[(t(!0),s(B,null,W(a(g).options,(h,P)=>(t(),s("div",{class:"form-group flex items-center mb-2",key:P},[X(Ht,{labeled:!0,label:"Title for option "+(P+1),name:"options["+P+"].title",placeholder:"Enter title",class:"flex-grow",type:"text"},null,8,["label","name"]),e("a",{href:"#",class:"ml-2 text-red-600 font-bold mt-8",onClick:D(J=>$(h.id),["prevent"])}," ✕ ",8,Wc)]))),128))])):v("",!0)]),e("div",Jc,[e("div",Zc,[X(tt,{labeled:!0,name:"assigneetype",label:"Select Assignee Type",placeholder:"Select Assignee Type",options:o.value,onSelectedItem:_},null,8,["options"])]),e("div",Xc,[m.value==="all_members"?(t(),s("div",eu,su)):v("",!0)])]),m.value==="individuals"?(t(),s("div",au,[nu,e("div",{class:ue(["multiselect-container",{error:!!a(te)}])},[X(a(at),{id:"pollassignees",modelValue:f.value,"onUpdate:modelValue":c[0]||(c[0]=h=>f.value=h),mode:"tags",required:"",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:Le.value,valueProp:"membership_id",trackBy:"membership_id",label:"full_name",class:ue(["col-span-3",["multiselect-container",{error:!!a(te)}]]),object:!0,onSelect:c[1]||(c[1]=h=>H()),onDeselect:c[2]||(c[2]=h=>u())},null,8,["modelValue","options","class"]),a(te)?(t(),s("div",ou,i(a(te)),1)):v("",!0)],2)])):v("",!0),f.value&&f.value.length||m.value==="all_members"?(t(),s("div",iu,[e("button",lu,i(A.value=="create"?"Create Poll":"Edit Poll"),1)])):v("",!0)],32)])])])])],512)])])):(t(),s("div",du,cu))}});const ke=d(R=>(Ne("data-v-774bd73e"),R=R(),He(),R),"_withScopeId"),mu={key:0},_u={class:"card h-full"},pu={class:"card-header flex items-center"},hu=ke(()=>e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"},"Meeting Tasks")],-1)),vu={key:0,class:"flex items-center space-x-2"},gu=ke(()=>e("i",{class:"far fa fa-plus mr-2"},null,-1)),bu=ke(()=>e("span",{class:"sr-only"},"Add task",-1)),fu={class:"card-container"},yu={key:0},xu={key:1},$u={class:"row overflow-auto p-4",style:{"max-height":"100vh"}},wu={class:"card card-outline card-primary h-100"},ku={class:"card-header"},Mu={class:"card-tools"},Cu=["onClick"],Su=ke(()=>e("i",{class:"fas fa-edit"},null,-1)),Au=[Su],Iu={class:"card-body"},Tu={class:"text-primary text-bold uppercase"},qu={class:"d-flex justify-content-between"},Pu=ke(()=>e("strong",null,"Due Date:",-1)),Du=ke(()=>e("strong",null,"Status:",-1)),Fu={key:0,class:"badge bg-warning"},Eu={key:1,class:"badge bg-info"},Ru={key:2,class:"badge bg-primary"},Uu={key:3,class:"badge bg-success"},Lu={class:""},Vu=ke(()=>e("strong",null,"Assignees:",-1)),ju={class:"row"},Ou={class:"col-6"},Nu={class:"list-unstyled"},Hu={class:"col-6"},Ku={class:"list-unstyled"},Bu=ke(()=>e("strong",null,"Description:",-1)),Yu=["innerHTML"],zu={class:"flex justify-center col-md-6"},Gu={method:"dialog",class:"modal-box rounded-xl"},Qu={class:"font-bold text-lg justify-center flex"},Wu=ke(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),Ju={class:"overflow-auto p-4",style:{"max-height":"80vh"}},Zu={class:"grid grid-cols-3 md:grid-cols-3 gap-2 p-2"},Xu={class:"col-span-3"},em={class:"flex flex-wrap -mx-2 mt-2"},tm={class:"w-full md:w-1/2 px-1 md:px-2"},sm={class:"w-full md:w-1/2 px-1 md:px-2"},am={class:"flex flex-wrap -mx-2 mt-2"},nm={class:"w-full md:w-1/2 px-1 md:px-2"},om={class:"w-full md:w-1/2 px-1 md:px-2"},im={key:0},lm=ke(()=>e("h2",{class:"font-bold text-primary text-sm text-center"},"All Members Will be assigned this Task",-1)),dm=[lm],rm={key:0,class:"form-group col-span-3"},cm=ke(()=>e("label",{class:"text-bold font-medium tracking-wide"},"People to Assign",-1)),um={key:0,class:"message"},mm={key:1},_m={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},pm={key:1},hm=ke(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),vm=[hm],gm=$e({__name:"Taskp",setup(R){const M=xe(),Y=Ie(),E=p(!1),A=p("create"),w=Y.params.committeeId,I=Y.params.meetingId,C=p(null),f=p([]),j=p(null),x=p(null),m=p("individuals"),S=p(""),k=Pe();Oe("duedate");const{errorMessage:T}=Oe("taskassignees"),z=d(n=>{const $=new Date,G=new Date(n);return $>G},"hasDueDatePassed"),te=ye({id:b().nullable(),full_name:b().nullable()}),Z=ye({id:b().nullable(),task_id:b().nullable(),membership_id:b().nullable(),user:te}),se=ye({meeting_id:b().nullable(),committee_id:b().nullable(),title:b().required(),duedate:b().required(),description:b().required(),status:b().required(),assigneetype:b().required(),assigneestatus:b().required(),taskassignees:ze().of(Z).nullable()}),{handleSubmit:ae,setErrors:de,setFieldValue:q,values:F}=De({validationSchema:se,initialValues:{meeting_id:I,committee_id:w,title:"",duedate:"",description:"",status:"pending",assigneetype:"",assigneestatus:"",taskassignees:[]}}),r=d(()=>{var n;u(),A.value="create",E.value=!0,(n=x.value)==null||n.showModal()},"openCreateTaskModal"),g=d(n=>{var $;u(),j.value=n,C.value=n.id,q("title",n.title),q("duedate",n.duedate),q("description",n.description),q("status",n.status),q("assigneetype",n.assigneetype),q("assigneestatus",n.assigneestatus),m.value=n.assigneestatus,ce(n.taskassignees),A.value="edit",E.value=!0,($=x.value)==null||$.showModal()},"openEditTaskModal");function ce(n){f.value=n.map($=>({id:$.id,full_name:$.user.full_name,task_id:$.task_id,membership_id:$.membership_id,user:$.user})),q("taskassignees",f.value)}d(ce,"maptaskassigneesToReactiveRef");const U=d(()=>{q("taskassignees",f.value)},"selectedMembers"),le=d(()=>{q("taskassignees",f.value)},"removeselectedUsers"),H=ae(async(n,{resetForm:$})=>{var G;try{const ve={meeting_id:n.meeting_id,committee_id:n.committee_id,title:n.title,duedate:n.duedate,description:n.description,status:n.status,assigneetype:n.assigneetype,assigneestatus:n.assigneestatus,taskassignees:n.taskassignees};if(A.value==="create")await xs(ve,I);else{const be=C.value;await $s(ve,I,be)}(G=x.value)==null||G.close(),await _(),u()}catch(ve){ve instanceof qe?de(ve.messages):k(ve)}}),u=d(()=>{A.value="create",E.value=!1,C.value=null,m.value="all_members",f.value=[],q("meeting_id",I),q("committee_id",w),q("title",""),q("duedate",""),q("description","description ................"),q("status","pending"),q("assigneetype","all_members"),q("assigneestatus","all_members"),q("taskassignees",[])},"reset"),L=d(n=>{f.value=[],S.value=n,m.value=n,q("assigneetype",n),q("assigneestatus",n)},"handleAssigneeTypeChange"),pe=[{name:"Individuals",value:"individuals"},{name:"Assign All Meeting Members",value:"all_members"}],ne=ie(()=>pe),ee=d(()=>Ce({queryKey:["getPollMembershisKey"],queryFn:async()=>(await nt(I,{paginate:"false"})).data.map(oe())}),"getMemberships"),{isLoading:ge,data:me,refetch:V}=ee(),oe=d(()=>n=>({id:n.id,full_name:n.user.full_name,membership_id:n.id,user:n.user}),"formatEvent"),Q=ie(()=>{var n;return!me.value||((n=me.value)==null?void 0:n.length)===0?[]:me.value}),re=d(()=>Ce({queryKey:["getMeetingTasksKey",I],queryFn:async()=>(await ws(I,{paginate:"false"})).data}),"getMeetingTasks"),{isLoading:o,data:y,refetch:_}=re();return Me(async()=>{_(),V()}),(n,$)=>a(M).hasPermission(["view task"])?(t(),s("div",mu,[e("div",_u,[e("div",pu,[hu,a(M).hasPermission(["create task"])?(t(),s("div",vu,[e("button",{type:"button",onClick:D(r,["prevent"]),class:"btn btn-tool"},[gu,K(),bu])])):v("",!0)]),e("div",fu,[a(o)?(t(),s("div",yu,"Loading Meeting Tasks...")):(t(),s("div",xu,[e("div",$u,[(t(!0),s(B,null,W(a(y),(G,ve)=>(t(),s("div",{class:"col-lg-12 col-md-12 col-sm-12 mb-2",key:ve},[e("div",wu,[e("div",ku,[e("div",Mu,[a(M).hasPermission(["edit task"])?(t(),s("button",{key:0,class:"btn btn-tool",onClick:D(be=>g(G),["prevent"])},Au,8,Cu)):v("",!0)])]),e("div",Iu,[e("div",Tu,i(G.title),1),e("div",qu,[e("div",null,[Pu,e("p",{class:ue({"text-danger":z(G.duedate)&&G.status!=="completed","text-success":!z(G.duedate)||G.status==="completed"})},i(a(st)(G.duedate)),3)]),e("div",null,[Du,e("p",null,[G.status==="backlog"?(t(),s("span",Fu,"Backlog")):G.status==="pending"?(t(),s("span",Eu,"Pending")):G.status==="onprogress"?(t(),s("span",Ru,"On Progress")):G.status==="completed"?(t(),s("span",Uu,"Completed")):v("",!0)])])]),e("div",Lu,[Vu,e("div",ju,[e("div",Ou,[e("ul",Nu,[(t(!0),s(B,null,W(G.taskassignees.slice(0,Math.ceil(G.taskassignees.length/2)),(be,we)=>(t(),s("li",{key:be.id},i(we+1)+". "+i(be.user.full_name),1))),128))])]),e("div",Hu,[e("ul",Ku,[(t(!0),s(B,null,W(G.taskassignees.slice(Math.ceil(G.taskassignees.length/2)),(be,we)=>(t(),s("li",{key:be.id},i(we+1+Math.ceil(G.taskassignees.length/2))+". "+i(be.user.full_name),1))),128))])])])]),e("div",null,[Bu,e("p",{innerHTML:G.description,class:"mt-2"},null,8,Yu)])])])]))),128))])]))])]),e("div",zu,[e("dialog",{id:"taskmodal",class:"modal",ref_key:"TaskModal",ref:x},[e("form",Gu,[e("h3",Qu,i(A.value=="create"?"Create Meeting Task":"Edit Meeting Task"),1),Wu,e("div",Ju,[e("div",Zu,[e("div",Xu,[e("form",{novalidate:"",onSubmit:$[3]||($[3]=D((...G)=>a(H)&&a(H)(...G),["prevent"])),class:""},[e("div",em,[e("div",tm,[X(Te,{labeled:!0,label:"Task Title",name:"title",placeholder:"Enter Task Title",type:"text"})]),e("div",sm,[X(ut,{label:"Task Due Date",name:"duedate",flow:["month"],placeholder:"Task Due Date"})])]),X(ct,{label:"Task Description",name:"description",theme:"snow",placeholder:"Enter Task Description",toolbar:"full",contentType:"html",class:"col-span-3"}),e("div",am,[e("div",nm,[X(tt,{labeled:!0,name:"assigneetype",label:"Select Assignee Type",placeholder:"Select Assignee Type",options:ne.value,onSelectedItem:L},null,8,["options"])]),e("div",om,[m.value==="all_members"?(t(),s("div",im,dm)):v("",!0)])]),m.value==="individuals"?(t(),s("div",rm,[cm,e("div",{class:ue(["multiselect-container",{error:!!a(T)}])},[X(a(at),{id:"taskassignees",modelValue:f.value,"onUpdate:modelValue":$[0]||($[0]=G=>f.value=G),mode:"tags",required:"",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:Q.value,valueProp:"membership_id",trackBy:"membership_id",label:"full_name",class:ue(["col-span-3",["multiselect-container",{error:!!a(T)}]]),object:!0,onSelect:$[1]||($[1]=G=>U()),onDeselect:$[2]||($[2]=G=>le())},null,8,["modelValue","options","class"]),a(T)?(t(),s("div",um,i(a(T)),1)):v("",!0)],2)])):v("",!0),f.value&&f.value.length||m.value==="all_members"?(t(),s("div",mm,[e("button",_m,i(A.value=="create"?"Create Task":"Edit Task"),1)])):v("",!0)],32)])])])])],512)])])):(t(),s("div",pm,vm))}});const bm=Re(gm,[["__scopeId","data-v-774bd73e"]]),fm={key:0},ym={class:"row"},xm={class:"col-md-6"},$m={class:"col-md-6"},wm={key:1},km=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),Mm=[km],Cm=$e({__name:"TaskPolls",setup(R){const M=xe();return(Y,E)=>a(M).hasPermission(["view task","view poll"])?(t(),s("div",fm,[e("div",ym,[e("div",xm,[X(bm)]),e("div",$m,[X(uu)])])])):(t(),s("div",wm,Mm))}});const Sm={key:0,class:"container-fluid"},Am={key:0,class:"container-fluid"},Im={class:"py-6"},Tm={class:"flex items-center"},qm={class:"lg:inline-flex p-3 mr-4rounded-lg custom-size"},Pm={class:"calendar-icon w-full flex flex-col items-center justify-center mt-1 calendaheight"},Dm={class:"month customonth"},Fm={class:"day font-medium customday"},Em={class:"year font-medium customyear"},Rm={class:""},Um={class:"header-pretitle text-xs mb-1"},Lm=e("i",{class:"fas fa-chevron-left fa-xs"},null,-1),Vm={class:"flex items-center space-x-4"},jm={class:"header-title leading-10 mb-2 h6 lg:mb-0 text-blue-primary font-bold"},Om={class:"ml-auto flex self-end"},Nm=e("div",{class:"dropdown"},[e("a",{class:"nav-link",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[e("i",{class:"fas fa-ellipsis-v"})]),e("div",{class:"dropdown-menu --73","aria-labelledby":"navbarDropdown",style:{left:"-73px !important"}},[e("a",{class:"dropdown-item",href:"#"},"Re-send meeting invite"),e("a",{class:"dropdown-item",href:"#"},"Create Follow Up Meeting"),e("div",{class:"dropdown-divider"}),e("a",{class:"dropdown-item",href:"#"},"Delete Meeting")])],-1),Hm={class:"lg:flex mr-2"},Km=e("div",{class:"flex justify-center btn-sm"},null,-1),Bm={class:"card-outline card-outline-tabs"},Ym={class:"card-header p-0 border-bottom-0"},zm={class:"nav nav-tabs",id:"custom-tabs-four-tab",role:"tablist"},Gm=["onClick"],Qm={class:"card-body"},Wm={class:"tab-content",id:"custom-tabs-four-tabContent"},Jm=["id"],Zm={class:"flex justify-center col-md-6"},Xm={id:"minutetemplateselectionmodal",class:"modal",ref:"MinuteTemplateSelectionmodal"},e_={method:"dialog",class:"modal-box rounded-xl"},t_=e("h3",{class:"font-bold text-lg justify-center flex"}," Take Minutes ",-1),s_=e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1),a_={class:"w-full mt-6 p-2"},n_={class:"font-thin text-sm flex flex-col items-center gap-6"},o_={class:"w-full rounded-xl mx-auto p-1 custom-modal"},i_=e("h3",{class:"text-center text-base font-bold text-primary"}," How would you like to start? ",-1),l_={class:"flex justify-center space-x-4 py-6"},d_=e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-white rounded-full shadow w-11 h-11"},[e("i",{class:"fa fa-list"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From Scratch")],-1),r_=e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-white rounded-full shadow w-11 h-11"},[e("i",{class:"far fa-file"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From the Agenda")],-1),c_={key:1,class:"container-fluid"},u_=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),m_=[u_],F_=$e({__name:"CommitteeMeetingDetails",setup(R){const M=Ie(),Y=We(),E=xe(),A=M.params.committeeId,w=M.params.meetingId,I=M.params.scheduleId,C=p(),f=Pe(),j=p("create"),x=p("home"),m=p(""),S=[{id:"home",name:"Meeting Details",component:nr,permissions:["view meeting"]},{id:"agenda",name:"Agenda",component:Xa,permissions:["view agenda"]},{id:"minutes",name:"Minutes",component:_o,permissions:["view minutes"]},{id:"documents",name:"Documents",component:Md,permissions:["view documents"]},{id:"tasks",name:"Task & Polls",component:Cm,permissions:["view task","view poll"]},{id:"members",name:"Members",component:Br,permissions:["view meeting memberships"]},{id:"conflict-of-interest",name:"Conflict of Interest",component:Hi,permissions:["view conflicts of interest"]},{id:"attendance",name:"Attendance",component:si,permissions:["view attendances"]}],k=ie(()=>S.filter(r=>r.permissions?r.permissions.every(g=>E.hasPermission([g])):!0)),T=d(r=>{m.value=x.value,x.value=r},"setActiveTab"),z=d(()=>{m.value==="agenda"&&(T("agenda"),window.dispatchEvent(new CustomEvent("refetchMemberships")))},"handleMembershipsUpdated");At(()=>{M.query.previousTab&&(m.value=M.query.previousTab),M.query.currentTab&&(x.value=M.query.currentTab)});function te(){Y.push({name:"CommitteeDetails",params:{committeeId:A}})}d(te,"goBack");const Z=ye({id:b().required(),rsvp_status:b().nullable(),attendance_status:b().nullable()}),{handleSubmit:se,setErrors:ae,setFieldValue:de}=De({validationSchema:Z,initialValues:{id:"",rsvp_status:"",attendance_status:""}});se(async r=>{try{const g={id:r.id,rsvp_status:r.rsvp_status,location:r.location,attendance_status:r.attendance_status,meeting_id:r.meeting_id,membership_id:r.membership_id,membership:r.membership,meeting:r.meeting};j.value==="create"?await ht(g,w):j.value==="rsvp"?await vt(g,g.id):j.value==="attendance"&&await gt(g,g.id),await E.updateProfile(),window.dispatchEvent(new CustomEvent("meetingUpdated",{detail:{meetingId:w}})),q()}catch(g){g instanceof qe?ae(g.messages):f(g)}});const q=d(()=>{j.value="create",de("id",""),de("rsvp_status",""),de("attendance_status","")},"reset"),F=d(()=>{Y.push({name:"CommitteeMeetingMinutes",params:{committeeId:A,meetingId:w,scheduleId:I},query:{defaultMinutes:"true"}})},"openMinuteTemplateSelectionModal");return Me(async()=>{try{const g=(await bt(w)).data;C.value=g}catch(r){console.error("Error fetching meeting data:",r)}}),(r,g)=>{var U,le,H,u,L,pe;const ce=dt("router-link");return a(E).hasPermission(["view meeting"])?(t(),s("div",Sm,[C.value?(t(),s("div",Am,[e("div",Im,[e("div",Tm,[e("div",qm,[e("div",Pm,[e("div",Dm,i(a(Jt)((le=(U=C.value)==null?void 0:U.schedules[0])==null?void 0:le.date)),1),e("div",Fm,[e("span",null,i(a(Zt)((u=(H=C.value)==null?void 0:H.schedules[0])==null?void 0:u.date)),1)]),e("div",Em,[e("span",null,i(a(Xt)((pe=(L=C.value)==null?void 0:L.schedules[0])==null?void 0:pe.date)),1)])])]),e("div",Rm,[e("p",Um,[e("a",{href:"",onClick:g[0]||(g[0]=D(ne=>te(),["prevent"])),class:"mb-2 h6 lg:mb-0 text-blue-primary font-bold"},[Lm,K(" Meetings ")])]),e("div",Vm,[e("h1",jm,i(C.value.title),1)])]),e("div",Om,[Nm,e("div",Hm,[a(E).hasPermission(["create minutes","edit minutes"])?(t(),s("button",{key:0,class:"btn btn-secondary",onClick:g[1]||(g[1]=D(ne=>F(),["prevent"]))}," Minutes ")):v("",!0)]),Km])]),e("div",Bm,[e("div",Ym,[e("ul",zm,[(t(!0),s(B,null,W(k.value,ne=>(t(),s("li",{class:"nav-item",key:ne.id},[e("a",{class:ue(["nav-link",{active:x.value===ne.id}]),onClick:ee=>T(ne.id)},i(ne.name),11,Gm)]))),128))])]),e("div",Qm,[e("div",Wm,[(t(!0),s(B,null,W(k.value,ne=>(t(),s("div",{key:ne.id,class:ue(["tab-pane fade",{"show active":x.value===ne.id}]),id:ne.id,role:"tabpanel"},[(t(),Ge(It(ne.component),{onChangeTab:T,onMembershipsUpdated:z},null,32))],10,Jm))),128))])])])]),e("div",Zm,[e("dialog",Xm,[e("form",e_,[t_,s_,e("div",a_,[e("div",n_,[e("form",o_,[i_,e("div",l_,[X(ce,{to:{name:"CommitteeMeetingMinutes",params:{committeeId:a(A),meetingId:a(w)},query:{defaultMinutes:"false"}},class:"btn btn-secondary h-auto !p-0 p-0 mb-0 card flex-1"},{default:Ye(()=>[d_]),_:1},8,["to"]),X(ce,{to:{name:"CommitteeMeetingMinutes",params:{committeeId:a(A),meetingId:a(w)},query:{defaultMinutes:"true"}},class:"btn btn-secondary h-auto !p-0 p-0 mb-0 card flex-1"},{default:Ye(()=>[r_]),_:1},8,["to"])])])])])])],512)])])):v("",!0)])):(t(),s("div",c_,m_))}}});export{F_ as default};
