var wt=Object.defineProperty;var d=(R,$)=>wt(R,"name",{value:$,configurable:!0});import{d as we,i as $e,r as m,j as Ae,V as qe,C as ie,P as Me,o as t,c as s,e,T as D,h as v,u as a,F as z,R as W,g as N,t as i,f as se,U as ce,a1 as at,a0 as kt,W as Be,X as Ne,_ as Ue,k as We,n as Mt,H as lt,a3 as Ct,b as dt,Y as St,Z as At,l as Ge,w as Ye,a5 as It,a6 as Tt}from"./main-451c20d4.js";import{u as Pe,e as Oe,c as ye,d as Qe,a as h,g as ht,f as ze,b as De}from"./useUnexpectedErrorHandler-2f1b2730.js";import{u as vt,a as bt,b as gt,c as qt,d as Pt,e as Dt,f as Ft,g as Et}from"./useConflictRequest-46181bf0.js";import{F as tt,o as Rt,p as Ut,q as Lt,r as Vt,s as jt,t as ft,m as Ot,w as Bt,v as ot,n as Nt}from"./FormDynamicInput-57fd3f34.js";import{y as Xe,z as et,n as yt,A as Ht,v as rt,B as _t,C as it,D as Kt,d as xt,e as Yt,g as zt,f as mt,h as st,j as Gt,k as Qt,m as Ke,o as Wt,p as Zt,q as Jt,t as Xt}from"./Breadcrumb-ecf3abcd.js";import{u as es,a as ts,b as ss,c as as,d as ns,e as os,f as is,g as ls,h as $t,i as ds,j as rs,k as cs,l as us,m as _s,n as ms}from"./useMinuteRequest-25870890.js";import{u as nt,a as ps,b as hs,c as vs}from"./useMembershipRequest-ae7237bb.js";import{F as Te}from"./FormInput-4bdc1ca0.js";import{F as ct}from"./FormQuillEditor-e4b30354.js";import{u as Ce}from"./useQuery-64b3e593.js";import{_ as ut}from"./FormDateTimeInput.vue_vue_type_style_index_0_lang-abff0e84.js";import{F as pt}from"./FormTextBox-4a2981cb.js";import{F as bs}from"./FormUpload-637793d3.js";import{c as gs,d as fs,e as ys}from"./usePollRequest-ac4b87eb.js";import{c as xs,d as $s,e as ws}from"./useTaskRequest-e083a7cb.js";import"./index-053adef9.js";import"./attendance_routes-07e71fee.js";import"./folder_routes-48149054.js";import"./membership_routes-2da0f288.js";import"./useQueryClient-78663db9.js";const he=d(R=>(Be("data-v-c4b842a5"),R=R(),Ne(),R),"_withScopeId$6"),ks={key:0,class:"card-header flex items-center"},Ms=he(()=>e("div",{class:"flex items-center flex-1 w-full"},null,-1)),Cs={class:"flex items-center space-x-2"},Ss=he(()=>e("span",{class:"text-danger"},"Reset Agenda Start Choice",-1)),As=[Ss],Is={key:1,class:"flex gap-5"},Ts={class:"flex-1"},qs={class:"card card-outline card-danger",style:{"min-height":"384px"}},Ps={class:"card-body"},Ds={class:"flex w-full"},Fs={class:"flex-1"},Es=he(()=>e("div",{class:"relative h-8"},[e("div",{class:"absolute border -right-16 text-[10px] bottom-2 rounded text-center px-2 py-0.5 text-gray-700 z-10 border-gray-200 bg-gray-200"},[e("div",{class:"absolute left-0 right-0 text-green text-xxs bold -top-2.5"}," Start ")])],-1)),Rs={"data-list_format":"num_la_lr",class:"agenda-list mb-0 border-l border-blue"},Us={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},Ls=he(()=>e("div",{class:"absolute border -right-16 top-4 text-[10px] rounded text-center py-0.5 text-gray-700 z-10 border-gray-200 bg-gray-200 px-2"},null,-1)),Vs=["onClick"],js={class:"font-medium flex-1"},Os=["innerHTML"],Bs={class:"flex items-center gap-2 mt-1 h-6"},Ns={class:"text-xs text-gray-600"},Hs={key:0,class:"list-none assignees-list"},Ks={key:1,class:"flex gap-2 items-start"},Ys={class:"font-medium flex-1"},zs=["innerHTML"],Gs={class:"flex items-center gap-2 mt-1 h-6"},Qs={class:"text-xs text-gray-600"},Ws={key:0,class:"list-none assignees-list"},Zs={class:"ml-4 mt-2"},Js={class:"flex gap-x-2"},Xs=he(()=>e("button",{type:"submit",class:"btn btn-primary h-10"}," Save ",-1)),ea=["onClick"],ta={class:"min-h-6 border-l border-blue"},sa={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},aa=he(()=>e("div",{class:"absolute border -right-16 top-4 text-[10px] rounded text-center py-0.5 text-gray-700 z-10 border-gray-200 bg-white px-1"}," 10:30pm ",-1)),na=["onClick"],oa={class:"font-medium flex-1"},ia=["innerHTML"],la={class:"flex items-center gap-2 mt-1 h-6"},da={class:"text-xs text-gray-600"},ra={key:0,class:"list-none assignees-list"},ca={key:1,class:"flex gap-2 items-start"},ua={class:"font-medium flex-1"},_a=["innerHTML"],ma={class:"flex items-center gap-2 mt-1 h-6"},pa={class:"text-xs text-gray-600"},ha={key:0,class:"list-none assignees-list"},va={class:"mt-4"},ba={key:0,class:"mt-4"},ga={class:"flex gap-x-2"},fa=he(()=>e("button",{type:"submit",class:"btn btn-primary h-10"}," Save ",-1)),ya={class:"relative h-8"},xa={class:"absolute border -right-16 text-[10px] bottom-2 rounded text-center px-2 py-0.5 text-gray-700 z-10 border-gray-200 bg-gray-200"},$a=he(()=>e("div",{class:"absolute left-0 right-0 text-green text-xxs bold -top-2.5"}," END ",-1)),wa=he(()=>e("div",null,[e("div",{class:"w-16 flex h-full justify-center py-4"},[e("div",{class:"bg-gray-200 h-full relative left-1.5",style:{width:"1px"}},"   ")])],-1)),ka={class:"w-[350px] relative"},Ma={class:"w-[350px]"},Ca={class:"card card-outline card-danger mb-0"},Sa={class:"card-body"},Aa={class:"form-group"},Ia=he(()=>e("label",{class:"text-xs uppercase font-medium text-gray-700 tracking-wide"}," People Responsible ",-1)),Ta={key:0,class:"message"},qa={class:"flex justify-between"},Pa=he(()=>e("button",{type:"submit",class:"btn btn-sm btn-primary ml-1 mr-1"}," Save ",-1)),Da=he(()=>e("div",{class:"w-[350px] relative"},[e("div",{class:"w-[350px] card card-outline card-danger"},[e("div",{class:"bg-gray-200 rounded-lg h-96 flex items-center justify-center"},[e("div",{class:"text-center text-gray-700"},[N(" Select an agenda item to edit "),e("br",{role:"presentation","data-uw-rm-sr":""}),e("div",{class:"text-xl mt-1"},[e("svg",{class:"svg-inline--fa fa-turn-down-left","aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"turn-down-left",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":""},[e("path",{fill:"currentColor",d:"M6.5 271.6c-8.7 9.2-8.7 23.7 0 32.9l121.4 129c8.8 9.3 21 14.6 33.7 14.6c25.6 0 46.3-20.7 46.3-46.3l0-41.7 144 0c88.4 0 160-71.6 160-160l0-112c0-30.9-25.1-56-56-56l-32 0c-30.9 0-56 25.1-56 56l0 120c0 4.4-3.6 8-8 8l-152 0 0-41.7c0-25.6-20.7-46.3-46.3-46.3c-12.8 0-25 5.3-33.7 14.6L6.5 271.6zm153.5-93l0 61.5c0 13.3 10.7 24 24 24l176 0c30.9 0 56-25.1 56-56l0-120c0-4.4 3.6-8 8-8l32 0c4.4 0 8 3.6 8 8l0 112c0 61.9-50.1 112-112 112l-168 0c-13.3 0-24 10.7-24 24l0 61.5L57 288 160 178.5z"})])])])])])],-1)),Fa=[Da],Ea={key:2,class:"card card-outline card-danger"},Ra=he(()=>e("div",{class:"card-header text-center justify-center bg-gradient-info"},[e("h3",{class:"text-center font-bold text-lg"}," Choose Your Starting Point ")],-1)),Ua={class:"card-body"},La={class:"flex justify-center space-x-4 py-6"},Va=he(()=>e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-gradient-success rounded-full shadow w-11 h-11"},[e("i",{class:"fa fa-list text-white"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From Scratch")],-1)),ja=[Va],Oa=he(()=>e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-gradient-warning rounded-full shadow w-11 h-11"},[e("i",{class:"far fa-file text-white"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From the Agenda")],-1)),Ba=[Oa],Na={class:"flex justify-center col-md-6"},Ha={method:"dialog",class:"modal-box rounded-xl"},Ka=he(()=>e("h3",{class:"font-bold text-lg justify-center flex text-white"}," save the Imported AGendas from Previous Meeting ",-1)),Ya=he(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),za={class:"w-full mt-6 p-2"},Ga={class:"font-thin text-sm flex flex-col items-center gap-6"},Qa={class:"w-full rounded-xl mx-auto p-1 custom-modal"},Wa=he(()=>e("h3",{class:"text-center text-base font-bold text-primary"}," Make use of the imported Agendas ",-1)),Za={class:"flex justify-center mt-4"},Ja=we({__name:"Agenda",emits:["change-tab"],setup(R,{emit:$}){const G=$e(),E=$,T=m("default"),k=Pe(),P=Ae(),A=m("create"),b=m(""),Q=m(""),w=P.params.boardId,g=P.params.meetingId,y=P.params.scheduleId,M=m(""),S=m(null),j=m([]),ae=m([]),X=m(null),oe=m(null),ne=m(null),_e=m([]),C=m(!1),U=m(!1),_=m(!1),I=m(null),H=m(-1),q=m(-1),{errorMessage:O}=Oe("assignees"),B=ye({schedule_id:Qe().required(),title:h().required(),duration:ht().nullable(),description:h().nullable(),agenda_id:h().nullable(),assignees:ze().of(h()).nullable(),children:ze().of(h()).nullable()}),{handleSubmit:c,setErrors:le,setFieldValue:Z,values:me}=De({validationSchema:B,initialValues:{schedule_id:y,title:"",duration:null,description:null,agenda_id:null,assignees:[],children:[]}}),ee=d(()=>{U.value=!0,C.value=!1,_.value=!1,H.value=-1,q.value=-1,A.value="create",Z("title",""),console.log("we are here",U.value,_.value,_e)},"enableAddingNewParent"),de=d((V,l)=>{_.value=!0,I.value=l,H.value=V,q.value=-1,Z("title",""),C.value=!1,A.value="create"},"enableAddingChild"),pe=d((V,l,u,r)=>{if(oe.value=u,S.value=u.id,C.value=!0,U.value=!1,_.value=!1,H.value=V,q.value=l,A.value="edit",Q.value=r,Z("title",u.title),Z("schedule_id",y),Z("duration",u.duration),Z("description",u.description),u.assignees){const Y=u.assignees.map(F=>F.id);j.value=Y,Z("assignees",Y)}else Z("assignees",[])},"enableEditing"),L=c(async(V,{resetForm:l})=>{try{if(A.value==="create"){const u={title:V.title,schedule_id:V.schedule_id,duration:null,description:null,agenda_id:null,assignees:[],children:[]};if(_.value){const r=I.value?I.value.toString():null;u.agenda_id=r,await es(u,y)}else U.value&&await ts(u,y)}else{const u={title:V.title,schedule_id:V.schedule_id,duration:V.duration,description:V.description,agenda_id:null,assignees:[],children:[]};if(q.value!==-1){u.assignees=V.assignees;const r=S.value?S.value.toString():null;u.agenda_id=r,await ss(u,y)}else if(H.value!==-1){u.assignees=V.assignees;const r=S.value?S.value.toString():null;u.agenda_id=r,await as(u,y)}}await Se(),l(),te()}catch(u){u instanceof qe?le(u.messages):k(u)}}),te=d(()=>{A.value="create",T.value="default",b.value="",Q.value="",C.value=!1,U.value=!1,_.value=!1,H.value=-1,q.value=-1,oe.value=null,S.value=null,j.value=[],Z("title",""),Z("duration",null),Z("description",null),Z("agenda_id",null),Z("assignees",[]),Z("children",[])},"cancelEditing"),J=[{name:"- none -",value:"0"},{name:"5 minutes",value:"5"},{name:"10 minutes",value:"10"},{name:"15 minutes",value:"15"},{name:"20 minutes",value:"20"},{name:"25 minutes",value:"25"},{name:"30 minutes",value:"30"},{name:"35 minutes",value:"35"},{name:"40 minutes",value:"40"},{name:"45 minutes",value:"45"},{name:"50 minutes",value:"50"},{name:"55 minutes",value:"55"},{name:"60 minutes",value:"60"}],re=ie(()=>J),o=d(()=>{Z("assignees",j.value)},"selectedUsers"),f=d(()=>{Z("assignees",j.value)},"removeselectedUsers"),p=ie(()=>{var l;const V=[];return ae.value&&((l=ae.value)==null?void 0:l.length)>0&&ae.value.reduce((u,r)=>(u.push({id:r.id,name:`${r.user.full_name}`}),u),V),V}),n=d(async()=>{var l;const V=(l=oe.value)==null?void 0:l.id;Q.value==="agenda"?await ns(V):await os(V),await Se(),te()},"deleteAgenda"),x=d(async V=>{V==="scratch"?b.value=V:V==="previous"&&(T.value="custom",b.value=V,await Se())},"startAgenda"),K=d(async()=>{b.value==="previous"&&(T.value="default",await Se()),b.value=""},"resetAgendaStartChoice"),ve=d(async()=>{var l;const V=M.value;K(),await is(V,y),(l=ne.value)==null||l.close(),M.value="",T.value="default",b.value="",await Se()},"SaveImportedAgendas"),be=d(()=>Ce({queryKey:["getMeetingScheduleAgendasKey",y],queryFn:async()=>{var l;let V;return T.value==="custom"?(V=await ls({paginate:"false"}),V.data&&V.data.length>0?(M.value=V.data[0].schedule_id,(l=ne.value)==null||l.showModal()):(kt({title:"Notice",text:"No agendas found in the database. Please create an agenda from scratch.",type:"warning"}),T.value="default")):T.value==="default"&&(V=await $t(y,{paginate:"false"})),(V==null?void 0:V.data)||[]}}),"getMeetingScheduleAgendas"),{isLoading:Ie,data:Re,refetch:Se}=be(),Ve=ie(()=>X.value),je=d(async()=>{const V=await nt(g,w);ae.value=V.data},"getmemberships"),He=d(()=>{E("change-tab","members")},"handleManageMembersClick");return Me(()=>{je(),window.addEventListener("refetchMemberships",je)}),(V,l)=>{var u;return t(),s(z,null,[b.value==="scratch"||b.value==="previous"?(t(),s("div",ks,[Ms,e("div",Cs,[e("button",{type:"submit",onClick:D(K,["prevent"]),class:"btn btn-tool"},As)])])):v("",!0),b.value==="scratch"||b.value==="previous"||a(Re)&&a(Re).length?(t(),s("div",Is,[e("div",Ts,[e("div",qs,[e("div",Ps,[e("div",Ds,[e("div",Fs,[Es,e("ol",Rs,[(t(!0),s(z,null,W(a(Re),(r,Y)=>(t(),s("li",{class:"mb-2 hover:border-gray-400",key:Y},[e("div",Us,[Ls,a(G).hasPermission(["edit agenda"])?(t(),s("div",{key:0,class:"flex gap-2 items-start",onClick:F=>pe(Y,-1,r,"agenda")},[e("div",js,[N(i(a(Xe)(Y))+"."+i(r.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:r.description},null,8,Os)]),e("div",Bs,[e("div",Ns,i(a(et)(r.duration)),1)]),e("div",null,[r.assignees?(t(),s("ul",Hs,[(t(!0),s(z,null,W(r.assignees,(F,ue)=>{var fe;return t(),s("li",{class:"text-sm text-primary",key:ue},i(ue+1)+". "+i((fe=F.user)==null?void 0:fe.full_name),1)}),128))])):v("",!0)])],8,Vs)):(t(),s("div",Ks,[e("div",Ys,[N(i(a(Xe)(Y))+"."+i(r.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:r.description},null,8,zs)]),e("div",Gs,[e("div",Qs,i(a(et)(r.duration)),1)]),e("div",null,[r.assignees?(t(),s("ul",Ws,[(t(!0),s(z,null,W(r.assignees,(F,ue)=>{var fe;return t(),s("li",{class:"text-sm text-primary",key:ue},i(ue+1)+". "+i((fe=F.user)==null?void 0:fe.full_name),1)}),128))])):v("",!0)])])),e("div",Zs,[_.value&&I.value===r.id?(t(),s("form",{key:0,novalidate:"",onSubmit:l[0]||(l[0]=D((...F)=>a(L)&&a(L)(...F),["prevent"]))},[e("div",Js,[se(Te,{labeled:!1,label:"Agenda",name:"title",class:"form-control form-control-sm p-0",placeholder:"Enter Meeting Agenda",type:"text"}),Xs]),e("a",{onClick:D(te,["prevent"]),class:"text-xs cursor-pointer"}," Cancel ")],32)):v("",!0)]),H.value!==Y&&!_.value&&a(G).hasPermission(["create agenda"])?(t(),s("button",{key:2,onClick:F=>de(Y,r.id),class:"ml-4 mt-2"}," + Add sub Agenda ",8,ea)):v("",!0)]),e("ol",ta,[(t(!0),s(z,null,W(r.children,(F,ue)=>(t(),s("li",{class:"mb-2 hover:border-gray-400",draggable:"false",key:ue},[e("div",sa,[aa,a(G).hasPermission(["edit agenda"])?(t(),s("div",{key:0,class:"flex gap-2 items-start",onClick:fe=>pe(Y,ue,F,"subagenda")},[e("div",oa,[N(i(a(Xe)(Y,ue))+". "+i(F.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:F.description},null,8,ia)]),e("div",la,[e("div",da,i(a(et)(F.duration)),1)]),e("div",null,[F.assignees?(t(),s("ul",ra,[(t(!0),s(z,null,W(F.assignees,(fe,xe)=>(t(),s("li",{class:"text-sm text-primary",key:xe},i(xe+1)+". "+i(fe.user.full_name),1))),128))])):v("",!0)])],8,na)):(t(),s("div",ca,[e("div",ua,[N(i(a(Xe)(Y,ue))+". "+i(F.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:F.description},null,8,_a)]),e("div",ma,[e("div",pa,i(a(et)(F.duration)),1)]),e("div",null,[F.assignees?(t(),s("ul",ha,[(t(!0),s(z,null,W(F.assignees,(fe,xe)=>(t(),s("li",{class:"text-sm text-primary",key:xe},i(xe+1)+". "+i(fe.user.full_name),1))),128))])):v("",!0)])]))])]))),128))])]))),128))]),e("div",va,[e("div",null,[U.value?(t(),s("div",ba,[e("form",{novalidate:"",onSubmit:l[1]||(l[1]=D((...r)=>a(L)&&a(L)(...r),["prevent"])),class:"mt-4"},[e("div",ga,[se(Te,{labeled:!1,label:"Agenda",name:"title",class:"form-control form-control-sm p-0",placeholder:"Enter Meeting Agenda",type:"text"}),fa])],32),e("a",{onClick:D(te,["prevent"]),class:"text-xs cursor-pointer"}," Cancel ")])):v("",!0),a(G).hasPermission(["create agenda"])?(t(),s("button",{key:1,onClick:ee,class:"btn btn-secondary block w-full mb-4"}," Add Agenda ")):v("",!0)])]),e("div",ya,[e("div",xa,[$a,N(" "+i((u=Ve.value)!=null&&u.end_time?a(yt)(Ve.value.end_time):""),1)])])]),wa])])])]),e("div",{class:ce({hidden:!C.value,"md:block":!0,"w-[350px]":!0})},[e("div",ka,[e("div",Ma,[e("div",Ca,[e("form",{novalidate:"",onSubmit:l[6]||(l[6]=D((...r)=>a(L)&&a(L)(...r),["prevent"]))},[e("div",Sa,[se(Te,{label:"Agenda",name:"title",class:"w-full text-sm tracking-wide",placeholder:"Enter Meeting Agenda",t:"",ype:"text"}),se(ct,{label:"Agenda Description",name:"description",theme:"snow",placeholder:"Enter Agenda  Description",toolbar:"minimal",contentType:"html"}),se(tt,{name:"duration",label:"Duration",placeholder:"Select Duration",options:re.value},null,8,["options"]),e("div",Aa,[Ia,e("div",{class:ce(["multiselect-container",{error:!!a(O)}])},[se(a(at),{id:"assignees",modelValue:j.value,"onUpdate:modelValue":l[2]||(l[2]=r=>j.value=r),mode:"tags",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:p.value,valueProp:"id",trackBy:"id",label:"name",class:ce(["multiselect-container",{error:!!a(O)}]),onSelect:l[3]||(l[3]=r=>o()),onDeselect:l[4]||(l[4]=r=>f())},null,8,["modelValue","options","class"]),a(O)?(t(),s("div",Ta,i(a(O)),1)):v("",!0)],2),e("button",{onClick:D(He,["prevent"]),class:"btn btn-info mt-2"}," Manage Members ")]),e("div",qa,[e("button",{onClick:l[5]||(l[5]=D(r=>n(),["prevent"])),class:"btn btn-link btn-sm text-danger h-7"}," Delete "),e("div",null,[e("button",{onClick:D(te,["prevent"]),class:"btn btn-secondary btn-sm ml-1 mr-1"}," Cancel "),Pa])])])],32)])])])],2),e("div",{class:ce({hidden:C.value,"md:block":!0,"w-[350px]":!0})},Fa,2)])):b.value===""?(t(),s("div",Ea,[Ra,e("div",Ua,[e("div",La,[e("a",{onClick:l[7]||(l[7]=D(r=>x("scratch"),["prevent"])),class:"btn btn-primary h-auto !p-0 p-0 mb-0 card flex-1"},ja),e("a",{onClick:l[8]||(l[8]=D(r=>x("previous"),["prevent"])),class:"btn btn-primary h-auto !p-0 p-0 mb-0 card flex-1"},Ba)])])])):v("",!0),e("div",Na,[e("dialog",{id:"saveagendasModal",class:"modal modal-primary",ref_key:"saveagendasModal",ref:ne},[e("form",Ha,[Ka,Ya,e("div",za,[e("div",Ga,[e("form",Qa,[Wa,e("div",Za,[e("button",{type:"submit",onClick:D(ve,["prevent"]),class:"btn btn-lg btn-success"}," Save Imported Agendas ")])])])])])],512)])],64)}}});const Xa=Ue(Ja,[["__scopeId","data-v-c4b842a5"]]),Fe=d(R=>(Be("data-v-e6a3651f"),R=R(),Ne(),R),"_withScopeId$5"),en={key:0},tn={key:0,class:"card card-widget shadow-lg"},sn={class:"card-header"},an={class:"d-flex align-items-center"},nn={class:"ml-3 flex-1"},on=Fe(()=>e("i",{class:"fas fa-chevron-left"},null,-1)),ln={key:0,class:"ml-auto flex self-end"},dn={key:0,type:"button",class:"btn btn-sm mr-1 btn-success btn-lg"},rn=Fe(()=>e("i",{class:"fas fa-door-closed mr-1"},null,-1)),cn={key:1,type:"button",class:"btn btn-sm mr-1 btn-success btn-lg"},un=Fe(()=>e("i",{class:"fa fa-check mr-1"},null,-1)),_n=Fe(()=>e("i",{class:"fa fa-check mr-1"},null,-1)),mn={class:"card-body"},pn=Fe(()=>e("span",{class:"info-box-icon",style:{left:"4%","margin-left":"-45px",position:"absolute",top:"88px"}},[e("div",{class:"h3 text-bold font-bold uppercase text-primary"}," Confidential")],-1)),hn={class:"text-center logo-container"},vn=["src"],bn={class:"h3 text-center text-primary text-bold font-bold uppercase"},gn=Fe(()=>e("hr",{class:"thick-line"},null,-1)),fn={class:"text-center text-primary text-bold uppercase h4"},yn={class:"text-center text-primary text-bold uppercase h4"},xn={key:0,class:"mt-2 text-primary text-bold uppercase"},$n={key:1,class:"table table-borderless"},wn={class:"p-0"},kn={class:"p-0 text-primary text-bold uppercase"},Mn={key:2,class:"mt-2 text-primary text-bold uppercase"},Cn={key:3,class:"table table-borderless"},Sn={class:"p-0"},An={class:"p-0 text-primary text-bold uppercase"},In={key:4,class:"mt-2 text-primary text-bold uppercase"},Tn={key:5,class:"table table-borderless"},qn={class:"p-0"},Pn={class:"p-0 text-primary text-bold uppercase"},Dn={key:6,class:"mt-2 text-primary text-bold uppercase"},Fn={key:7,class:"table table-borderless"},En={class:"p-0"},Rn={class:"p-0 text-primary text-bold uppercase"},Un=Fe(()=>e("h5",{class:"mt-2 text-primary text-bold uppercase"},"Agenda",-1)),Ln={class:"list-unstyled"},Vn={class:"list-unstyled ml-4"},jn={id:"MinutesEditor",class:"container"},On={class:"codex-editor"},Bn={class:"codex-editor__redactor",style:{"padding-bottom":"300px"}},Nn={class:"ce-block"},Hn={class:"flex w-full"},Kn={class:"flex-1"},Yn={key:0,"data-list_format":"num_la_lr",class:"agenda-list mb-0"},zn={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},Gn={class:"flex gap-2 items-start"},Qn={class:"font-medium flex-1"},Wn=["onClick"],Zn={class:"font-bold text-primary"},Jn=["innerHTML"],Xn={key:0,class:"min-h-6"},eo={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},to={class:"flex gap-2 items-start"},so={class:"font-medium flex-1"},ao={class:"font-bold text-primary"},no=["innerHTML"],oo={key:1,class:"card card-widget shadow-lg"},io=Fe(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, The Minutes have not been Aprroved")],-1)),lo=[io],ro={key:1},co=Fe(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),uo=[co],_o=we({__name:"ApprovedMinutes",setup(R){const $=We();function G(){$.back()}d(G,"goBack");const E=Ae(),T=$e(),k=Mt(),P=E.params.boardId;E.params.meetingId;const A=E.params.scheduleId;E.params.minutesId;const b=m(null),Q=m("create"),w=m(!1),g=m([]),y=m(null),M=m(null),S=m(-1),j=m(-1),ae=m(!1),X=m(!1),oe=m([{text:""}]),ne=Pe(),_e=ye({schedule_id:Qe().required(),board_id:h().nullable(),committee_id:ht().nullable(),membership_id:h().nullable(),minute_id:h().nullable(),agenda_id:h().required(),detail_minute_id:h().nullable(),subdetailminute_id:h().nullable(),subagenda_id:h().nullable(),description:h().required(),status:h().required()}),{handleSubmit:C,setErrors:U,setFieldValue:_,values:I}=De({validationSchema:_e,initialValues:{schedule_id:A,board_id:P,committee_id:null,membership_id:null,minute_id:b.value,agenda_id:"",detail_minute_id:null,subdetailminute_id:null,subagenda_id:null,description:"",status:"unpublished"}});C(async(o,{resetForm:f})=>{try{const p={schedule_id:o.schedule_id,committee_id:null,membership_id:null,minute_id:b.value?b.value.toString():null,agenda_id:o.agenda_id.toString(),detail_minute_id:o.detail_minute_id?o.detail_minute_id.toString():null,subdetailminute_id:o.subdetailminute_id?o.subdetailminute_id.toString():null,subagenda_id:o.subagenda_id?o.subagenda_id.toString():null,description:o.description,status:o.status};Q.value==="create"?w.value?await ds(p,A):X.value&&await rs(p,A):S.value!==-1?(await cs(p,A),console.log("payload",p)):j.value!==-1&&await us(p,A),await le(),H()}catch(p){p instanceof qe?U(p.messages):ne(p)}});const H=d(()=>{Q.value="create",w.value=!1,y.value=null,M.value=null,S.value=-1,j.value=-1,ae.value=!1,X.value=!1,_("schedule_id",A),_("board_id",P),_("committee_id",null),_("membership_id",null),_("minute_id",b.value),_("agenda_id",""),_("detail_minute_id",null),_("subdetailminute_id",null),_("subagenda_id",null),_("description",""),_("status","unpublished")},"reset");ie(()=>{const o=w.value&&y.value===agenda.id&&j.value===pIndex&&S.value===cIndex&&Q.value==="create";return console.log("isAddingChild computed:",o),o}),ie(()=>{const o=ae.value&&!X.value&&!w.value&&Q.value==="edit";return console.log("isEditing computed:",o),o});const q=d((o,f,p,n,x)=>{H(),ae.value=!0,X.value=!1,w.value=!1,j.value=o,S.value=f,Q.value="edit",console.log("pIndex: number, cIndex:",o,f),console.log("States after enabling adding child:",{is_editing:ae.value,isAddingNewParent:X.value,addingChild:w.value,editingParentIndex:j.value,editingChildIndex:S.value,action:Q.value}),_("agenda_id",p.id),S.value!==-1?(_("subdetailminute_id",x.id),_("detail_minute_id",x.detail_minute_id),_("subagenda_id",x.subagenda_id),_("description",x.description)):j.value!==-1&&(_("detail_minute_id",n.id),_("description",n.description))},"enableEditing"),O=d(()=>Ce({queryKey:["getMinutesKey",A],queryFn:async()=>{const o=await _s(A);return b.value=o.data.id,o.data},onSuccess:o=>{},onError:o=>{console.error("Failed to fetch minutes:",o)}}),"getMinutes"),{isLoading:B,data:c,refetch:le}=O(),Z=ie(()=>{var o,f,p,n;return(o=c==null?void 0:c.value)!=null&&o.attendances&&((p=(f=c==null?void 0:c.value)==null?void 0:f.attendances)==null?void 0:p.length)>0?((n=c==null?void 0:c.value)==null?void 0:n.attendances.filter(x=>x.rsvp_status==="Yes"&&x.attendance_status==="Attended"))||[]:[]}),me=ie(()=>{var o,f,p,n;return(o=c==null?void 0:c.value)!=null&&o.attendances&&((p=(f=c==null?void 0:c.value)==null?void 0:f.attendances)==null?void 0:p.length)>0?((n=c==null?void 0:c.value)==null?void 0:n.attendances.filter(x=>x.rsvp_status==="Online"&&x.attendance_status==="Attended"))||[]:[]}),ee=ie(()=>{var o,f,p,n;return(o=c==null?void 0:c.value)!=null&&o.attendances&&((p=(f=c==null?void 0:c.value)==null?void 0:f.attendances)==null?void 0:p.length)>0?((n=c==null?void 0:c.value)==null?void 0:n.attendances.filter(x=>["Yes","No","Maybe"].includes(x.rsvp_status)&&x.attendance_status==="Absent"))||[]:[]}),de=ie(()=>{var o,f,p,n;return(o=c==null?void 0:c.value)!=null&&o.attendances&&((p=(f=c==null?void 0:c.value)==null?void 0:f.attendances)==null?void 0:p.length)>0?((n=c==null?void 0:c.value)==null?void 0:n.attendances.filter(x=>x.rsvp_status==="Pending"&&x.attendance_status==="Absent"))||[]:[]}),pe=d(async()=>{const o=await $t(A,{paginate:"false"});g.value=o.data},"getmeetingagendas"),L=ie(()=>g.value);Me(async()=>{await le(),pe()}),lt(()=>oe==null?void 0:oe.value,o=>{o&&(b.value=o)},{deep:!0});const te=ie(()=>{var f;const o={};return c!=null&&c.value&&(c!=null&&c.value.detailminutes)&&((f=c==null?void 0:c.value.detailminutes)==null||f.forEach(p=>{var n;o[p.agenda_id]||(o[p.agenda_id]=[]),o[p.agenda_id].push(p),(n=p.subdetailminutes)==null||n.forEach(x=>{o[x.subagenda_id]||(o[x.subagenda_id]=[]),o[x.subagenda_id].push(x)})})),o}),J=ie(()=>k.getSettings()),re=d(async o=>{await ms(o),await le()},"onAcceptCEOApproval");return(o,f)=>{var p,n,x,K,ve,be,Ie,Re,Se,Ve,je,He,V,l;return a(T).hasPermission(["view minutes"])?(t(),s("div",en,[a(c)&&((p=a(c))==null?void 0:p.approvalstatus)==="approved"?(t(),s("div",tn,[e("div",sn,[e("div",an,[e("div",nn,[e("a",{href:"",onClick:D(G,["prevent"]),class:"text-blue-primary"},[on,N(" Go back To Meeting ")])]),a(c)?(t(),s("div",ln,[((x=(n=a(c))==null?void 0:n.schedule)==null?void 0:x.closestatus)==="closed"?(t(),s("button",dn,[rn,N(" Meeting Closed ")])):v("",!0),((K=a(c))==null?void 0:K.approvalstatus)==="approved"?(t(),s("button",cn,[un,N(" This Minutes Have been Approved ")])):(t(),s("button",{key:2,type:"button",class:"btn btn-sm mr-1 btn-warning btn-lg",onClick:f[0]||(f[0]=D(u=>{var r;return re((r=a(c))==null?void 0:r.id)},["prevent"]))},[_n,N(" Sorry, The Minutes have not been Aprroved ")]))])):v("",!0)])]),e("div",mn,[pn,e("div",hn,[e("img",{src:a(Ht)((ve=J.value)==null?void 0:ve.logo),alt:"Organization Logo",class:"img-fluid logo"},null,8,vn)]),e("div",bn,i((be=J.value)==null?void 0:be.name),1),gn,e("h4",fn,"MINUTES OF THE "+i((Re=(Ie=a(c))==null?void 0:Ie.meeting)==null?void 0:Re.title),1),e("p",yn," HELD AT "+i((Ve=(Se=a(c))==null?void 0:Se.meeting)==null?void 0:Ve.location)+" ON "+i(a(rt)((He=(je=a(c))==null?void 0:je.schedule)==null?void 0:He.date))+" STARTING AT "+i((l=(V=a(c))==null?void 0:V.schedule)==null?void 0:l.start_time),1),Z.value.length?(t(),s("h5",xn,"Present")):v("",!0),Z.value.length?(t(),s("table",$n,[e("tbody",null,[(t(!0),s(z,null,W(Z.value,(u,r)=>(t(),s("tr",{key:u.id},[e("td",wn,i(r+1)+". "+i(u.membership.user.full_name),1),e("td",kn," - "+i(u.membership.position.name),1)]))),128))])])):v("",!0),me.value.length?(t(),s("h5",Mn,"Present on E-platform ")):v("",!0),me.value.length?(t(),s("table",Cn,[e("tbody",null,[(t(!0),s(z,null,W(me.value,(u,r)=>(t(),s("tr",{key:u.id},[e("td",Sn,i(r+1)+". "+i(u.membership.user.full_name),1),e("td",An," - "+i(u.membership.position.name),1)]))),128))])])):v("",!0),ee.value.length?(t(),s("h5",In,"Absent With Apology ")):v("",!0),ee.value.length?(t(),s("table",Tn,[e("tbody",null,[(t(!0),s(z,null,W(ee.value,(u,r)=>(t(),s("tr",{key:u.id},[e("td",qn,i(r+1)+". "+i(u.membership.user.full_name),1),e("td",Pn," - "+i(u.membership.position.name),1)]))),128))])])):v("",!0),de.value.length?(t(),s("h5",Dn," Absent ")):v("",!0),de.value.length?(t(),s("table",Fn,[e("tbody",null,[(t(!0),s(z,null,W(de.value,(u,r)=>(t(),s("tr",{key:u.id},[e("td",En,i(r+1)+". "+i(u.membership.user.full_name),1),e("td",Rn," - "+i(u.membership.position.name),1)]))),128))])])):v("",!0),Un,e("ul",Ln,[(t(!0),s(z,null,W(L.value,(u,r)=>(t(),s(z,{key:u.id},[e("li",null,i(r+1)+". "+i(u.title),1),e("ul",Vn,[(t(!0),s(z,null,W(u.children,(Y,F)=>(t(),s("li",{key:Y.id},i(r+1)+"."+i(F+1)+" "+i(Y.title),1))),128))])],64))),128))]),e("div",jn,[e("div",On,[e("div",Bn,[e("div",Nn,[e("div",Hn,[e("div",Kn,[L.value?(t(),s("ol",Yn,[(t(!0),s(z,null,W(L.value,(u,r)=>(t(),s("li",{class:"hover:border-gray-400",key:r},[e("div",zn,[e("div",Gn,[e("div",Qn,[(t(!0),s(z,null,W(te.value[u.id],(Y,F)=>(t(),s("div",{key:F,onClick:ue=>q(r,-1,u,Y,void 0)},[e("div",Zn,i(a(_t)(a(it)(r),u.title)),1),e("div",{innerHTML:Y.description},null,8,Jn)],8,Wn))),128))])])]),u.children?(t(),s("ol",Xn,[(t(!0),s(z,null,W(u.children,(Y,F)=>(t(),s("li",{class:"mb-2 hover:border-gray-400",draggable:"false",key:F},[e("div",eo,[e("div",to,[e("div",so,[e("div",ao,i(a(_t)(a(it)(r),Y.title,void 0,void 0,void 0,a(it)(F))),1),(t(!0),s(z,null,W(te.value[u.id],(ue,fe)=>(t(),s("div",{key:fe},[(t(!0),s(z,null,W(te.value[Y.id],xe=>(t(),s("div",{key:xe.id},[e("div",{innerHTML:xe.description},null,8,no)]))),128))]))),128))])])])]))),128))])):v("",!0)]))),128))])):v("",!0)])])])])])])])])):(t(),s("div",oo,lo))])):(t(),s("div",ro,uo))}}});const mo=Ue(_o,[["__scopeId","data-v-e6a3651f"]]),Ze=d(R=>(Be("data-v-8f302fa1"),R=R(),Ne(),R),"_withScopeId$4"),po={class:"rsvp-container"},ho={key:0},vo={class:"dropdown"},bo=["aria-expanded"],go={key:0,class:"dropdown-menu show","aria-labelledby":"rsvp-status"},fo=Ze(()=>e("i",{class:"far fa-check-circle bg-success"},null,-1)),yo=Ze(()=>e("i",{class:"far fa-check-circle bg-warning"},null,-1)),xo=Ze(()=>e("i",{class:"far fa-check-circle bg-danger"},null,-1)),$o=Ze(()=>e("i",{class:"far fa-check-circle bg-info"},null,-1)),wo=Ze(()=>e("i",{class:"far fa-check-circle bg-info"},null,-1)),ko={key:1},Mo=we({__name:"MeetingRsvp",props:{attendee:{},disableRemoteRsvp:{}},emits:["rsvp-updated"],setup(R,{emit:$}){const G=$e(),E=R,T=$,k=m(!1),P=d(()=>{k.value=!k.value},"toggleDropdown"),A=d(g=>{var y;T("rsvp-updated",{attendeeId:(y=E.attendee)==null?void 0:y.id,status:g}),k.value=!1},"updateRsvp"),b=ie(()=>{var g;return((g=E.attendee)==null?void 0:g.rsvp_status)||"RSVP"}),Q=ie(()=>{var g;switch((g=E.attendee)==null?void 0:g.rsvp_status){case"Yes":return"bg-success text-white";case"No":return"bg-warning text-white";case"Maybe":return"bg-danger text-white";case"Online":return"bg-info text-white";case"Pending":return"bg-info text-white";default:return"bg-secondary text-white"}}),w=ie(()=>{var g;switch((g=E.attendee)==null?void 0:g.rsvp_status){case"Yes":return"far fa-check-circle";case"No":return"far fa-check-circle";case"Maybe":return"far fa-check-circle";case"Online":return"far fa-check-circle";case"Pending":return"far fa-check-circle";default:return"far fa-check-circle"}});return(g,y)=>{var M;return t(),s("div",po,[((M=g.attendee.membership)==null?void 0:M.user.id)===a(G).user.id?(t(),s("div",ho,[e("div",vo,[e("button",{class:ce(["btn btn-icon dropdown-toggle",Q.value]),type:"button",onClick:P,"aria-haspopup":"true","aria-expanded":k.value},[e("i",{class:ce([w.value,"mr-2"])},null,2),N(" "+i(b.value),1)],10,bo),k.value?(t(),s("ul",go,[e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:y[0]||(y[0]=D(S=>A("Yes"),["prevent"]))},[fo,N(" Yes ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:y[1]||(y[1]=D(S=>A("No"),["prevent"]))},[yo,N("No ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:y[2]||(y[2]=D(S=>A("Maybe"),["prevent"]))},[xo,N(" Maybe ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:y[3]||(y[3]=D(S=>A("Online"),["prevent"]))},[$o,N(" Online ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:y[4]||(y[4]=D(S=>A("Pending"),["prevent"]))},[wo,N(" Pending ")])])])):v("",!0)])])):(t(),s("div",ko,[e("button",null,[e("i",{class:ce([w.value,"mr-2"])},null,2),N(" "+i(b.value),1)])]))])}}});const Co=Ue(Mo,[["__scopeId","data-v-8f302fa1"]]),So={key:0,class:"container-fluid"},Ao=e("div",{class:"card-header flex items-center"},[e("h2",{class:"card-header-title h3"},"Attendance")],-1),Io={class:"container-fluid"},To={class:"row"},qo={class:"card card-outline card-primary h-100"},Po={class:"card-body box-profile"},Do={class:"text-center"},Fo={class:"avatar avatar-md mb-3"},Eo=["src"],Ro={class:"profile-username text-center text-primary"},Uo={class:"mt-3"},Lo={class:"d-flex justify-content-between mb-2"},Vo=e("strong",null,"Invited:",-1),jo={class:"cell-label"},Oo={class:"d-flex justify-content-between mb-2"},Bo=e("strong",null,"RSVP:",-1),No={class:"d-flex justify-content-between mb-2"},Ho=e("strong",null,"Attendance:",-1),Ko={key:0},Yo={key:0},zo=["onClick"],Go=e("i",{class:"far fa-eye"},null,-1),Qo={key:1},Wo=["onClick"],Zo={key:0},Jo=["onClick"],Xo={key:1,class:"container-fluid"},ei=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),ti=[ei],si=we({__name:"Attendance",setup(R){const $=$e(),G=Pe(),E=Ae(),T=We(),k=m("create");E.params.meetingId;const P=E.params.scheduleId,A=ye({id:h().required(),rsvp_status:h().nullable(),attendance_status:h().nullable(),signatureupload:h().nullable()}),{handleSubmit:b,setErrors:Q,setFieldValue:w,values:g}=De({validationSchema:A,initialValues:{id:"",rsvp_status:"",attendance_status:"",signatureupload:""}}),y=d(()=>{k.value="create",w("id",""),w("rsvp_status",""),w("attendance_status",""),w("signatureupload","")},"reset"),M=d(U=>{y(),k.value="rsvp",w("id",U.attendeeId),w("rsvp_status",U.status),S()},"handleRsvpUpdated"),S=b(async(U,{resetForm:_})=>{try{const I={id:U.id,rsvp_status:U.rsvp_status,location:U.location,attendance_status:U.attendance_status,meeting_id:U.meeting_id,membership_id:U.membership_id,membership:U.membership,meeting:U.meeting,invite_status:null,signatureupload:null};k.value==="create"?await vt(I,P):k.value==="rsvp"?await bt(I,I.id):k.value==="attendance"&&await gt(I,I.id),await oe(),y()}catch(I){I instanceof qe?Q(I.messages):G(I)}}),j=d(()=>Ce({queryKey:["getMeetingAttendancesKey",P],queryFn:async()=>(await qt(P,{paginate:"false"})).data}),"getMeetingAttendances"),{isLoading:ae,data:X,refetch:oe}=j();Me(async()=>{oe()}),Me(()=>{window.addEventListener("meetingUpdated",ne)}),Ct(()=>{window.removeEventListener("meetingUpdated",ne)});function ne(U){U.detail.scheduleId===P&&oe()}d(ne,"handleMeetingUpdated");const _e=d(U=>{var _;T.push({name:"BoardSignatureAttendance",params:{boardId:E.params.boardId,meetingId:E.params.meetingId,scheduleId:E.params.scheduleId,attendeeId:U.id,mediaId:(_=U.media[0])==null?void 0:_.uuid}})},"navigateToSignaturePage"),C=d(async U=>{await Pt(U),await oe()},"sendReminder");return(U,_)=>a($).hasPermission(["view attendances"])?(t(),s("div",So,[Ao,e("div",Io,[e("div",To,[(t(!0),s(z,null,W(a(X),(I,H)=>{var q,O,B,c;return t(),s("div",{class:"col-lg-3 col-md-4 col-sm-6 mb-3",key:H},[e("div",qo,[e("div",Po,[e("div",Do,[e("div",Fo,[e("img",{src:a(Kt)(I.membership.user.profile.avatar),class:"profile-user-img img-fluid img-circle",role:"img","data-uw-rm-alt":"ALT"},null,8,Eo)]),e("h3",Ro,i((O=(q=I.membership)==null?void 0:q.user)==null?void 0:O.full_name),1)]),e("div",Uo,[e("div",Lo,[Vo,e("span",jo,i(I.invite_status),1)]),e("div",Oo,[Bo,e("div",null,[se(Co,{attendee:I,disableRemoteRsvp:0,onRsvpUpdated:M},null,8,["attendee"])])]),e("div",No,[Ho,e("div",null,[((B=I.membership)==null?void 0:B.user.id)===a($).user.id?(t(),s("div",Ko,[I.attendance_status==="Attended"?(t(),s("div",Yo,[e("a",{href:"",onClick:D(le=>_e(I),["prevent"]),class:"text-blue-500 hover:text-blue-700 transition duration-150 ease-in-out"},[Go,N(" "+i(I.attendance_status),1)],8,zo)])):(t(),s("div",Qo,[e("button",{type:"submit",class:"btn btn-link btn-primary btn-sm text-white",onClick:D(le=>_e(I),["prevent"])}," Sign ",8,Wo)]))])):v("",!0)]),a($).hasRole(["Super Admin","Admin","Company Secretary"])&&((c=I.membership)==null?void 0:c.user.id)!==a($).user.id?(t(),s("div",Zo,[e("button",{type:"submit",class:"btn btn-link btn-primary btn-sm text-white",onClick:D(le=>C(I.id),["prevent"])}," Send Reminder ",8,Jo)])):v("",!0)])])])])])}),128))])])])):(t(),s("div",Xo,ti))}}),Ee=d(R=>(Be("data-v-35f3a7a2"),R=R(),Ne(),R),"_withScopeId$3"),ai={key:0},ni={class:"card"},oi={class:"card-header"},ii={class:"card-header flex items-center"},li=Ee(()=>e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"}," Conflicts of Interest ")],-1)),di={key:0,class:"flex items-center space-x-2"},ri=Ee(()=>e("i",{class:"far fa fa-plus mr-2"},null,-1)),ci={class:"container-fluid"},ui={key:0,class:"row"},_i={class:"card card-outline card-primary h-100"},mi={class:"card-body box-profile"},pi={class:"text-center mb-3"},hi={class:"profile-username text-primary"},vi={class:"text-muted"},bi={class:"info-section"},gi=Ee(()=>e("span",{class:"text-bold text-danger"},"Nature Of Interest: ",-1)),fi={class:"text-primary"},yi={class:"info-section"},xi=Ee(()=>e("span",{class:"text-bold text-danger"},"Amount: ",-1)),$i={class:"info-section"},wi=Ee(()=>e("span",{class:"text-bold text-danger"},"Due Date: ",-1)),ki={class:"info-section"},Mi=Ee(()=>e("span",{class:"text-bold text-danger"},"Remarks: ",-1)),Ci={class:"text-primary"},Si={class:"info-section"},Ai=Ee(()=>e("span",{class:"text-bold text-danger"},"Signed: ",-1)),Ii={key:0,class:"text-center mt-3"},Ti=["onClick"],qi={class:"flex justify-center col-md-6"},Pi={method:"dialog",class:"modal-box rounded-xl"},Di={class:"font-bold text-lg justify-center flex"},Fi=Ee(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),Ei={class:"w-full mt-6 p-2"},Ri={class:"font-thin text-sm flex flex-col items-center gap-6"},Ui={class:"row"},Li={type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},Vi={key:1},ji=Ee(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),Oi=[ji],Bi=we({__name:"ConflictofInterest",setup(R){var I,H;const $=$e(),G=Pe(),E=$e(),k=Ae().params.meetingId,P=m(null),A=m("create"),b=m(null),Q=((I=E.user)==null?void 0:I.first)+" "+((H=E.user)==null?void 0:H.last),w=ye({name:h().required(),address:h().required(),nature:h().required(),amount:h().required(),ceased_date:h().required(),remarks:h().required(),conflict_id:h().nullable()}),{handleSubmit:g,setErrors:y,setFieldValue:M,values:S}=De({validationSchema:w,initialValues:{name:Q,address:"",nature:"",amount:"",ceased_date:"",remarks:"",conflict_id:null}}),j=d(()=>{var q;X(),A.value="create",(q=b.value)==null||q.showModal()},"openCreateConflictModal"),ae=d(q=>{var O;X(),P.value=q.id.toString(),A.value="edit",M("address",q.address),M("nature",q.nature),M("amount",q.amount),M("ceased_date",q.ceased_date),M("remarks",q.remarks),(O=b.value)==null||O.showModal()},"openEditConflictModal"),X=d(()=>{M("address",""),M("nature",""),M("amount",""),M("ceased_date",""),M("remarks",""),M("conflict_id",null),A.value="create",P.value=null,xt()},"resetConflict"),oe=g(async(q,{resetForm:O})=>{var B;try{const c={address:q.address,nature:q.nature,amount:q.amount,ceased_date:q.ceased_date,remarks:q.remarks,conflict_id:null};if(A.value==="create")await Dt(c,k);else{const le=P.value?P.value.toString():null;c.conflict_id=le,await Ft(c,k)}await U(),X(),(B=b.value)==null||B.close()}catch(c){c instanceof qe?y(c.messages):G(c)}}),ne=d(()=>Ce({queryKey:["getMeetingConflictsKey",k],queryFn:async()=>(await Et(k,{paginate:"false"})).data}),"getMeetingConflicts"),{isLoading:_e,data:C,refetch:U}=ne();Me(async()=>{await U()});const _=ie(()=>{var q;return(q=C==null?void 0:C.value)==null?void 0:q.some(O=>{var B,c,le;return((c=(B=O==null?void 0:O.membership)==null?void 0:B.user)==null?void 0:c.id)===((le=$==null?void 0:$.user)==null?void 0:le.id)})});return(q,O)=>a($).hasPermission(["view conflicts of interest"])?(t(),s("div",ai,[e("div",ni,[e("div",oi,[e("div",ii,[li,a($).hasPermission(["create conflict of interest"])?(t(),s("div",di,[_.value?v("",!0):(t(),s("button",{key:0,type:"button",onClick:D(j,["prevent"]),class:"btn btn-primary"},[ri,N(" Add Your Conflict of Interest ")]))])):v("",!0)])]),e("div",ci,[a(C)?(t(),s("div",ui,[(t(!0),s(z,null,W(a(C),(B,c)=>{var le,Z,me,ee,de,pe;return t(),s("div",{class:"col-lg-4 col-md-6 col-sm-12 mb-3",key:c},[e("div",_i,[e("div",mi,[e("div",pi,[e("h3",hi,i((Z=(le=B==null?void 0:B.membership)==null?void 0:le.user)==null?void 0:Z.full_name),1),e("p",vi,i(B.address),1)]),e("div",bi,[gi,e("span",fi,i(B.nature),1)]),e("div",yi,[xi,e("span",null,"Kshs. "+i(B.amount),1)]),e("div",$i,[wi,e("span",null,i(a(rt)(B.ceased_date)),1)]),e("div",ki,[Mi,e("span",Ci,i(B.remarks),1)]),e("div",Si,[Ai,e("span",null,i(B.status),1)]),a($).hasPermission(["edit conflict of interest"])?(t(),s("div",Ii,[((ee=(me=B==null?void 0:B.membership)==null?void 0:me.user)==null?void 0:ee.id)===((pe=(de=a($))==null?void 0:de.user)==null?void 0:pe.id)?(t(),s("button",{key:0,class:"btn btn-success btn-sm",onClick:D(L=>ae(B),["prevent"])}," Edit ",8,Ti)):v("",!0)])):v("",!0)])])])}),128))])):v("",!0)])]),e("div",qi,[e("dialog",{id:"conflictmodal",class:"modal",ref_key:"ConflictModal",ref:b},[e("form",Pi,[e("h3",Di,i(A.value==="create"?"Create Conflict of Interest":"Update Conflict of Interest"),1),Fi,e("div",Ei,[e("div",Ri,[e("form",{novalidate:"",onSubmit:O[0]||(O[0]=D((...B)=>a(oe)&&a(oe)(...B),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",Ui,[se(Te,{labeled:!0,label:"Meeting Member",name:"name",class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Meeting Member",type:"text",disabled:!0}),se(Te,{labeled:!0,label:"Address",name:"address",class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Input Your Address",type:"text"}),se(pt,{labeled:!0,label:"Nature of the Interest",name:"nature",class:"col-md-12 w-full text-sm text-white tracking-wide",placeholder:"Enter Nature of the Interest",rows:2}),se(Te,{labeled:!0,label:"Estimated Value Of The Interest (KSHS.)",name:"amount",class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Estimated Value Of The Interest (KSHS.)",type:"number"}),se(ut,{label:"Due Date",name:"ceased_date",flow:["day"],class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Select Due Date"}),se(pt,{labeled:!0,label:"Remarks",name:"remarks",class:"col-md-12 w-full text-sm text-white tracking-wide",placeholder:"Enter Remarks",rows:2})]),e("button",Li,i(A.value==="create"?"Create Conflict of Interest":"Update Conflict of Interest"),1)],32)])])])],512)])])):(t(),s("div",Vi,Oi))}});const Ni=Ue(Bi,[["__scopeId","data-v-35f3a7a2"]]),ge=d(R=>(Be("data-v-536934e9"),R=R(),Ne(),R),"_withScopeId$2"),Hi={key:0},Ki={class:"card"},Yi={class:"card-header p-3"},zi={class:"row"},Gi={class:"col-12"},Qi={class:"row"},Wi={class:"col-lg-9 col-md-8 col-12 mt-2"},Zi={"aria-label":"Breadcrumbs",class:"text-sm overflow-hidden"},Ji={class:"breadcrumb mb-0 bg-warning"},Xi=["onClick"],el={class:"col-lg-3 col-md-4 col-12"},tl={class:"row"},sl={class:"col-md-6 col-12 mt-2"},al={class:"dropdown"},nl={class:"nav-link dropdown-toggle btn btn-secondary btn-block",href:"#",id:"navbarDropdown",type:"button",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},ol=ge(()=>e("span",{class:"text-warning mr-1"},"sort by:",-1)),il={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},ll=["onClick"],dl={class:"col-md-6 col-12 mt-2"},rl={class:"dropdown"},cl={key:0,class:"nav-link dropdown-toggle btn btn-primary btn-block",href:"#",id:"navbarDropdown",type:"button",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},ul=ge(()=>e("i",{class:"fas fa-plus mr-2"},null,-1)),_l={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},ml=ge(()=>e("i",{class:"fas fa-plus"},null,-1)),pl=ge(()=>e("i",{class:"fas fa-file-upload"},null,-1)),hl={key:0,class:"col-12 mt-3"},vl={class:"input-group input-group-lg"},bl=ge(()=>e("div",{class:"input-group-append"},[e("button",{type:"submit",class:"btn btn-lg btn-default"},[e("i",{class:"fa fa-search"})])],-1)),gl={class:"card-body py-0 px-4 min-h-[300px] relative -top-px z-10"},fl={class:"table-responsive"},yl={class:"table mb-0"},xl={class:"w-28"},$l=["onClick"],wl=["src"],kl={key:1},Ml=["src"],Cl={key:0},Sl={class:"font-weight-bold text-primary text-truncate"},Al={class:"text-sm font-weight-bold text-primary"},Il=ge(()=>e("span",{class:"text-black"},"Folders",-1)),Tl={class:"text-sm font-weight-bold text-primary"},ql=ge(()=>e("span",{class:"text-black"},"Files",-1)),Pl={key:1},Dl={key:0},Fl={class:"font-weight-bold text-primary text-truncate"},El={class:"text-sm font-weight-bold text-primary"},Rl={class:"text-black"},Ul={class:"w-28"},Ll={key:0},Vl={class:"text-xs text-primary text-truncate"},jl={key:1},Ol={key:0},Bl={class:"text-xs text-primary text-truncate"},Nl={class:"w-20 text-center"},Hl={class:"flex justify-end space-x-2"},Kl={key:0},Yl=["onClick"],zl=ge(()=>e("i",{class:"far fa-edit"},null,-1)),Gl=[zl],Ql={key:1},Wl=["onClick"],Zl=ge(()=>e("i",{class:"far fa-edit"},null,-1)),Jl=[Zl],Xl=ge(()=>e("i",{class:"far fa-eye"},null,-1)),ed={class:"flex justify-center col-md-6"},td={method:"dialog",class:"modal-box rounded-xl"},sd={class:"font-bold text-lg justify-center flex"},ad=ge(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),nd={class:"w-full mt-6 p-2"},od={class:"font-thin text-sm flex flex-col items-center gap-6"},id={class:"row"},ld={key:0,class:"row mt-2 ml-2"},dd={key:0,class:"row mt-2 ml-2"},rd={class:"col-md-6"},cd=["src"],ud={class:"col-md-6"},_d=ge(()=>e("strong",null,"File Name:",-1)),md={class:"text-bold text-primary"},pd=ge(()=>e("strong",null,"File Size:",-1)),hd={class:"text-bold text-primary"},vd=ge(()=>e("strong",null,"Type:",-1)),bd={class:"text-bold text-primary"},gd=ge(()=>e("strong",null,"Last Modified: ",-1)),fd={class:"text-bold text-primary"},yd={type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},xd={key:1},$d=ge(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),wd=[$d],kd=we({__name:"Documents",setup(R){const $=$e(),G=Pe(),E=Ae(),T=m("create"),k=m("folder"),P=E.params.boardId,A=m("name-asc"),b=m(""),Q=m([]),w=E.params.meetingId,g=m([{id:"1",name:"Folders"}]),y=m(null),M=m(!1),S=m(null),j=m(null),ae=[{id:"name-asc",name:"Name (A-Z)"},{id:"name-desc",name:"Name (Z-A)"},{id:"date-newest",name:"Newest to oldest"},{id:"date-oldest",name:"Oldest to newest"}];function X(o){A.value=o}d(X,"applySort");const oe=ie(()=>{const o=ae.find(f=>f.id===A.value);return o?o.name:"Unknown"});function ne(o){g.value.push({id:o.id,name:o.name})}d(ne,"addToNavigationPath");function _e(o){const f=g.value.slice(0,o+1);if(f.length!==g.value.length){g.value=f;const p=C(g.value.at(-1).id,q.value);Q.value=p?p.children||[]:[]}}d(_e,"navigateTo");function C(o,f){if(!Array.isArray(f))return null;for(const p of f){if(p.id===o)return p;if(p.children&&Array.isArray(p.children)){const n=C(o,p.children);if(n)return n}}return null}d(C,"findFolderById");function U(o){g.value.at(-1).id!==o.id&&(ne(o),console.log("folder",o.children),Q.value=o.children||[])}d(U,"openFolder");function _(o){let f=0,p=0;return o.children&&o.children.length>0&&o.children.forEach(n=>{n.type==="folder"?f++:n.type==="file"&&p++}),{folderCount:f,fileCount:p}}d(_,"countChildrenTypes");const I=d(()=>Ce({queryKey:["getMeetingFoldersKey",w],queryFn:async()=>(await jt(w,{paginate:"false"})).data[0].children}),"getMeetingFolders"),{isLoading:H,data:q,refetch:O}=I();Me(async()=>{await O()}),lt(q,o=>{var f;if(o&&o.length>0){if(g.value.length===1){const p=o[0];g.value[0].id=p.folderable_id.toString(),g.value[0].name=" Documents"}if(g.value.length===1)Q.value=o;else{const p=C((f=g.value.at(-1))==null?void 0:f.id,o);Q.value=p?p.children||[]:[]}}},{immediate:!0});const B=ie(()=>b.value?c.value.filter(o=>o.name.toLowerCase().includes(b.value.toLowerCase())):c.value),c=ie(()=>{const o=g.value.length>1?Q.value:q.value;return Array.isArray(o)?[...o].sort((f,p)=>{switch(A.value){case"name-asc":return f.name.localeCompare(p.name);case"name-desc":return p.name.localeCompare(f.name);case"date-newest":return new Date(p.created_at).getTime()-new Date(f.created_at).getTime();case"date-oldest":return new Date(f.created_at).getTime()-new Date(p.created_at).getTime();default:return 0}}):[]}),le=ye({name:h().required(),meeting_id:h().required(),folder_id:h().nullable(),parent_id:h(),type:h().oneOf(["folder","file"]).required(),fileupload:Qe().nullable()}),{handleSubmit:Z,setErrors:me,setFieldValue:ee,values:de}=De({validationSchema:le,initialValues:{name:"",meeting_id:w,folder_id:null,parent_id:"",type:"",fileupload:null}}),pe=d(o=>{var n;const f=o.target;if(!((n=f.files)!=null&&n.length))return;const p=f.files[0];ee("name",p.name),ee("type","file")},"updateName"),L=d(o=>{var p;re(),T.value="create",k.value=o,M.value=!0,(p=j.value)==null||p.showModal(),ee("type",o);const f=g.value.at(-1);ee("parent_id",f.id),console.log("parent",f)},"openCreateFolderModal"),te=Z(async(o,{resetForm:f})=>{var p;try{if(T.value==="create")if(k.value==="folder"){const n={children:[],created_at:null,icon:null,id:null,meeting_id:o.meeting_id,folder_id:null,name:o.name,parent_id:o.parent_id.toString(),type:o.type,fileupload:null,media:[]};await Rt(n,w)}else{const n={children:[],created_at:null,icon:null,id:null,meeting_id:o.meeting_id,folder_id:null,name:o.name,parent_id:o.parent_id.toString(),type:o.type,fileupload:o.fileupload,media:[]};await Ut(n,w)}else if(k.value==="folder"){const n={children:[],created_at:null,folder_id:null,icon:null,id:null,meeting_id:o.meeting_id.toString(),name:o.name,parent_id:o.parent_id.toString(),type:o.type,fileupload:null,media:[]},x=S.value?S.value.toString():null;n.folder_id=x,await Lt(n,w)}else{const n={children:[],created_at:null,folder_id:null,icon:null,id:null,meeting_id:o.meeting_id.toString(),name:o.name,parent_id:o.parent_id.toString(),type:o.type,fileupload:o.fileupload,media:[]},x=S.value?S.value.toString():null;n.folder_id=x,await Vt(n,w)}await O(),re(),(p=j.value)==null||p.close()}catch(n){n instanceof qe?me(n.messages):G(n)}}),J=d((o,f)=>{var p;re(),y.value=o,S.value=o.id.toString(),T.value="edit",k.value=f,M.value=!0,ee("name",o.name),ee("folder_id",o.id),ee("type",f),f==="file"&&(ee("fileupload",o.name),Wt(o.media[0])),ee("parent_id",o.id),console.log("folder.media",o.name),(p=j.value)==null||p.showModal()},"openEditFolderModal"),re=d(()=>{ee("name",""),ee("folder_id",null),ee("fileupload",""),ee("parent_id",""),ee("type",""),k.value="folder",T.value="create",M.value=!1,y.value=null,S.value=null,xt()},"resetFolder");return(o,f)=>{const p=dt("router-link");return a($).hasPermission(["view folders"])?(t(),s("div",Hi,[e("div",Ki,[e("div",Yi,[e("div",zi,[e("div",Gi,[e("div",Qi,[e("div",Wi,[e("nav",Zi,[e("ol",Ji,[(t(!0),s(z,null,W(g.value,(n,x)=>(t(),s("li",{key:n.id,class:"breadcrumb-item"},[e("a",{href:"#",class:"text-gray-800 font-medium",onClick:D(K=>_e(x),["prevent"])},i(n.name),9,Xi)]))),128))])])]),e("div",el,[e("div",tl,[e("div",sl,[e("div",al,[e("button",nl,[ol,N(i(oe.value),1)]),e("div",il,[(t(),s(z,null,W(ae,n=>e("a",{key:n.id,href:"#",class:"dropdown-item",onClick:D(x=>X(n.id),["prevent"])},i(n.name),9,ll)),64))])])]),e("div",dl,[e("div",rl,[a($).hasPermission(["create folders","upload documents","create dropzone"])?(t(),s("button",cl,[ul,N(" New ")])):v("",!0),e("div",_l,[a($).hasPermission(["create folders","create dropzone"])?(t(),s("a",{key:0,href:"#",onClick:f[0]||(f[0]=D(n=>L("folder"),["prevent"])),class:"dropdown-item"},[ml,N(" New folder ")])):v("",!0),a($).hasPermission(["upload documents"])?(t(),s("a",{key:1,href:"#",onClick:f[1]||(f[1]=D(n=>L("file"),["prevent"])),class:"dropdown-item"},[pl,N(" Upload a file ")])):v("",!0)])])])])])])]),a($).hasPermission(["search documents"])?(t(),s("div",hl,[e("div",vl,[St(e("input",{type:"search",class:"form-control form-control-lg",placeholder:"Type your keywords here","onUpdate:modelValue":f[2]||(f[2]=n=>b.value=n)},null,512),[[At,b.value]]),bl])])):v("",!0)])]),e("div",gl,[e("div",fl,[e("table",yl,[e("tbody",null,[(t(!0),s(z,null,W(B.value,n=>{var x,K;return t(),s("tr",{key:n.id,class:"group bg-white hover:bg-gray-100 cursor-pointer"},[e("td",xl,[n.type==="folder"?(t(),s("div",{key:0,onClick:D(ve=>U(n),["prevent"])},[n.type==="folder"?(t(),s("img",{key:0,src:a(Yt)(n.icon),class:"img-fluid",alt:"Folder Icon"},null,8,wl)):v("",!0)],8,$l)):(t(),s("div",kl,[a($).hasPermission(["view documents"])?(t(),Ge(p,{key:0,to:{name:"BoardMediaDetails",params:{boardId:a(P),meetingId:n.meetingId,folderId:n.id,mediaId:n==null?void 0:n.media[0].uuid}},class:"d-block text-success hover:text-green-700 transition ease-in-out"},{default:Ye(()=>[e("img",{src:a(zt)(n.media[0].mime_type),class:"img-fluid",alt:"File Icon"},null,8,Ml)]),_:2},1032,["to"])):v("",!0)]))]),e("td",null,[n.type==="folder"?(t(),s("div",Cl,[e("p",Sl,i(n.name),1),e("p",Al,[N(i(_(n).folderCount)+": ",1),Il]),e("p",Tl,[N(i(_(n).fileCount)+": ",1),ql])])):(t(),s("div",Pl,[a($).hasPermission(["view documents"])?(t(),s("div",Dl,[e("p",Fl,i((x=n==null?void 0:n.media[0])==null?void 0:x.file_name),1),e("p",El,[N(" Size: "),e("span",Rl,i(a(mt)((K=n==null?void 0:n.media[0])==null?void 0:K.size)),1)])])):v("",!0)]))]),e("td",Ul,[n.type==="folder"?(t(),s("div",Ll,[e("p",Vl,i(a(st)(n.created_at,"")),1)])):(t(),s("div",jl,[a($).hasPermission(["view documents"])?(t(),s("div",Ol,[e("p",Bl,i(a(st)(n.created_at,"")),1)])):v("",!0)]))]),e("td",Nl,[e("div",Hl,[n.type==="folder"?(t(),s("div",Kl,[a($).hasPermission(["edit folders"])?(t(),s("a",{key:0,href:"#",onClick:D(ve=>J(n,"folder"),["prevent"]),class:"text-warning hover:text-blue-700 transition ease-in-out"},Gl,8,Yl)):v("",!0)])):(t(),s("div",Ql,[a($).hasPermission(["edit documents"])?(t(),s("a",{key:0,href:"#",onClick:D(ve=>J(n,"file"),["prevent"]),class:"text-warning hover:text-blue-700 transition ease-in-out"},Jl,8,Wl)):v("",!0),a($).hasPermission(["view documents"])&&n.type==="file"?(t(),Ge(p,{key:1,to:{name:"BoardMediaDetails",params:{boardId:a(P),meetingId:n.meetingId,folderId:n.id,mediaId:n==null?void 0:n.media[0].uuid}},class:"text-success :text-green-700 transition ease-in-out"},{default:Ye(()=>[Xl]),_:2},1032,["to"])):v("",!0)]))])])])}),128))])])])])]),e("div",ed,[e("dialog",{id:"foldermodal",class:"modal",ref_key:"FolderModal",ref:j},[e("form",td,[e("h3",sd,i(T.value==="create"?k.value==="folder"?"Create Folder":"Upload File":k.value==="folder"?"Update Folder":"Update File"),1),ad,e("div",nd,[e("div",od,[e("form",{novalidate:"",onSubmit:f[4]||(f[4]=D((...n)=>a(te)&&a(te)(...n),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",id,[se(Te,{labeled:!0,label:k.value==="folder"?"Folder name":"Upload File name",name:"name",class:"col-md-12 w-full text-sm text-white tracking-wide",placeholder:k.value==="folder"?"Folder name":"Upload File name",type:"text"},null,8,["label","placeholder"]),k.value==="file"?(t(),s("div",ld,[se(bs,{labeled:!0,label:"Upload Cover Image for the Board",name:"fileupload",class:"w-full text-sm text-white tracking-wide col-md-12",placeholder:"Enter Cover Image of the Board",type:"file",accept:a(Gt).join(", "),onChange:f[3]||(f[3]=n=>{a(Qt)(n),pe(n)})},null,8,["accept"]),a(de).fileupload?(t(),s("div",dd,[e("div",rd,[a(Ke).previewUrl?(t(),s("img",{key:0,src:a(Ke).previewUrl,alt:"File Preview",class:"file_attachment"},null,8,cd)):v("",!0)]),e("div",ud,[e("p",null,[_d,e("span",md,i(a(Ke).name),1)]),e("p",null,[pd,e("span",hd,i(a(mt)(a(Ke).size)),1)]),e("p",null,[vd,e("span",bd,i(a(Ke).type),1)]),e("p",null,[gd,e("span",fd,i(a(yt)(a(Ke).lastModifiedDate)),1)])])])):v("",!0)])):v("",!0)]),e("button",yd,i(T.value==="create"?k.value==="folder"?"Create Folder":"Upload File":k.value==="folder"?"Update Folder":"Update File"),1)],32)])])])],512)])])):(t(),s("div",xd,wd))}}});const Md=Ue(kd,[["__scopeId","data-v-536934e9"]]),Cd={key:0,class:"card"},Sd=e("div",{class:"card-header flex items-center"},[e("h2",{class:"card-header-title h3"},"Details")],-1),Ad={class:"card-body"},Id={class:"space-y-6"},Td={class:"flex items-start"},qd=e("div",{class:"mr-4 w-6 text-muted"},[e("i",{class:"fas fa-calendar-day"})],-1),Pd={class:"h3 mb-0"},Dd={class:"m-0"},Fd={class:"text-primary"},Ed={key:0},Rd={key:0,class:"m-0 text-black"},Ud={class:"text-primary"},Ld={class:"m-0 text-black"},Vd={class:"text-primary"},jd={class:"text-primary"},Od={class:"flex"},Bd={key:0,class:"w-6 mr-4 mt-2 text-muted"},Nd=e("i",{class:"fas fa-video h-6 w-6 fa-video mx-auto"},null,-1),Hd=[Nd],Kd={key:0,class:"flex mb-2 flex-wrap"},Yd=["href"],zd=e("i",{class:"fas fa-link"},null,-1),Gd=[zd],Qd=["href"],Wd=e("button",{type:"button",class:"text-primary hover:bg-primary-100 bg-transparent py-2 px-3 rounded-md text-base flex gap-1 items-center justify-center min-w-fit"}," Run a Video Test ",-1),Zd=[Wd],Jd={key:1},Xd={class:"m-0 text-black"},er={class:"text-primary"},tr={class:"flex items-center"},sr={class:"m-0 text-sm"},ar=["innerHTML"],nr=we({__name:"HomeDashBoard",setup(R){const $=$e(),G=Ae();We();const E=G.params.boardId,T=G.params.meetingId,k=G.params.scheduleId,P=d(y=>{const M=document.createElement("textarea");M.value=y,M.style.top="0",M.style.left="0",M.style.position="fixed",document.body.appendChild(M),M.focus(),M.select();try{const j=document.execCommand("copy")?"successful":"unsuccessful"}catch(S){console.error("Fallback: Oops, unable to copy",S)}document.body.removeChild(M)},"fallbackCopyTextToClipboard"),A=d(async y=>{if(!navigator.clipboard){P(y),alert("Link copied to clipboard, paste it on your browser or share it to your platform");return}try{await navigator.clipboard.writeText(y),alert("Link copied to clipboard!")}catch(M){console.error("Failed to copy: ",M)}},"copyLinkToClipboard"),b=d(()=>Ce({queryKey:["getMeetingKey",E,T],queryFn:async()=>{const y=await ft(T);return window.dispatchEvent(new CustomEvent("updateTitle",{detail:y.data.title+" Meeting"})),y.data}}),"getMeeting"),{isLoading:Q,data:w,refetch:g}=b();return(y,M)=>{var j,ae,X,oe,ne,_e,C,U;const S=dt("router-link");return a(w)?(t(),s("div",Cd,[Sd,e("div",Ad,[e("div",Id,[e("div",Td,[qd,e("div",null,[e("div",Pd,[e("p",Dd,[N(" Title: "),e("span",Fd,i((j=a(w))==null?void 0:j.title),1)]),(t(!0),s(z,null,W((ae=a(w))==null?void 0:ae.schedules,_=>(t(),s("div",{key:_.id},[_.id===a(k)?(t(),s("div",Ed,[_.id===a(k)?(t(),s("p",Rd,[N(" Date: "),e("span",Ud,i(a(rt)(_.date)),1)])):v("",!0),e("p",Ld,[N(" Start: "),e("span",Vd,i(_.start_time),1),N(" End: "),e("span",jd,i(_.end_time),1)])])):v("",!0)]))),128))])])]),e("div",Od,[(X=a(w))!=null&&X.link?(t(),s("div",Bd,Hd)):v("",!0),e("div",null,[(oe=a(w))!=null&&oe.link?(t(),s("div",Kd,[e("a",{target:"_blank",href:(ne=a(w))==null?void 0:ne.link,class:"btn btn-primary whitespace-nowrap mr-2","aria-label":"Join Web Conference - open in a new tab"}," Join Web Conference ",8,Yd),e("button",{type:"button",onClick:M[0]||(M[0]=_=>{var I;return A((I=a(w))==null?void 0:I.link)}),title:"Copy web conference link","aria-label":"Copy web conference link",class:"btn btn-primary mr-2"},Gd),e("a",{href:(_e=a(w))==null?void 0:_e.link,target:"_blank","aria-label":"Run a Video Test - open in a new tab"},Zd,8,Qd)])):(t(),s("div",Jd,[e("p",Xd,[N(" Physical Meeting at:"),e("span",er,i((C=a(w))==null?void 0:C.location),1)])]))])]),e("div",tr,[e("p",sr,[N(" Meeting Description: "),e("span",{class:"text-primary",innerHTML:(U=a(w))==null?void 0:U.description},null,8,ar)])]),e("div",null,[a($).hasPermission(["view board"])?(t(),Ge(S,{key:0,to:{name:"BoardDetails",params:{boardId:a(E)}},class:"badge badge-soft"},{default:Ye(()=>[N(i(a(w).meetingable.name),1)]),_:1},8,["to"])):v("",!0),a($).hasPermission(["view meeting"])?(t(),Ge(S,{key:1,to:{name:"BoardMeetingDetails",params:{boardId:a(E),meetingId:a(T),scheduleId:a(k)}},class:"badge badge-soft"},{default:Ye(()=>[N(i(a(w).title),1)]),_:1},8,["to"])):v("",!0)])])])])):v("",!0)}}}),or={class:"role-container w-100 d-flex justify-content-center"},ir=["aria-expanded"],lr={key:0,class:"dropdown-menu show justify-content","aria-labelledby":"role-status"},dr=["onClick"],rr={key:1,class:"text-center"},cr=we({__name:"MemberShipPosition",props:{membership:{},positions:{},disableRemotePosition:{}},emits:["position-updated"],setup(R,{emit:$}){const G=R,E=$,T=m(null),k=m(!1),P=d(g=>{g.stopPropagation(),k.value=!k.value},"toggleDropdown"),A=d(g=>{E("position-updated",{membershipId:G.membership.id,positionId:g.id}),k.value=!1},"updateRole"),b=ie(()=>{var g;return`bg-${(g=G.membership)==null?void 0:g.position.name.toLowerCase()} text-white`}),Q=ie(()=>{var g;return(g=G.membership)==null?void 0:g.position.name}),w=ie(()=>G.positions);return(g,y)=>{var M,S,j,ae;return t(),s("div",or,[Q.value?(t(),s("div",{key:0,class:"dropdown",ref_key:"dropdownRef",ref:T},[e("button",{class:ce(["btn btn-primary dropdown-toggle text-truncate w-100",b.value]),type:"button",onClick:P,"aria-haspopup":"true","aria-expanded":k.value},[e("i",{class:ce(["mr-2 fa "+((M=G.membership)==null?void 0:M.position.icon),"mr-2"])},null,2),N(" "+i((S=G.membership)==null?void 0:S.position.name),1)],10,ir),k.value?(t(),s("ul",lr,[(t(!0),s(z,null,W(w.value,X=>(t(),s("li",{key:X.name},[e("a",{href:"#",class:"dropdown-item",onClick:D(oe=>A(X),["prevent"])},[e("i",{class:ce(["mr-2 fa "+X.icon,"mr-2"])},null,2),N(" "+i(X.name),1)],8,dr)]))),128))])):v("",!0)],512)):(t(),s("div",rr,[e("i",{class:ce(["mr-2 fa "+((j=G.membership)==null?void 0:j.position.icon),"mr-2"])},null,2),N(" "+i((ae=G.membership)==null?void 0:ae.position.name),1)]))])}}});const ur=Ue(cr,[["__scopeId","data-v-9eb14bfc"]]),Le=d(R=>(Be("data-v-cbbf653a"),R=R(),Ne(),R),"_withScopeId$1"),_r={class:"card"},mr={class:"card-header flex items-center"},pr=Le(()=>e("h2",{class:"card-header-title h3"},"Board Meeting Members",-1)),hr={class:"ml-auto flex items-center space-x-2"},vr={class:"container-fluid"},br={key:0,class:"row"},gr={class:"card card-outline card-primary h-100"},fr={class:"card-body box-profile"},yr={class:"text-center"},xr={class:"profile-username text-center text-primary"},$r=["onClick"],wr=["onClick"],kr=Le(()=>e("i",{class:"far fa-eye"},null,-1)),Mr=[kr],Cr={class:"text-muted text-center text-bold"},Sr={key:0,class:"mt-3"},Ar=Le(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Position ",-1)),Ir={class:"text-center"},Tr={key:1,class:"mt-3"},qr=Le(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Position ",-1)),Pr={class:"text-center"},Dr={class:"mt-3"},Fr=Le(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Last Updated ",-1)),Er={class:"text-center text-primary text-small"},Rr={class:"flex justify-center col-md-6"},Ur={method:"dialog",class:"modal-box rounded-xl"},Lr=Le(()=>e("h3",{class:"font-bold text-lg justify-center flex"},i("Add Members"),-1)),Vr=Le(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),jr={class:"w-full mt-6 p-2"},Or={class:"font-thin text-sm flex flex-col items-center gap-6"},Br={key:0,class:"message"},Nr=Le(()=>e("button",{type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},i("Add Members"),-1)),Hr=we({__name:"Members",emits:["memberships-updated"],setup(R,{emit:$}){const G=$e(),E=Pe(),T=Ae(),k=We(),P=m("create"),A=T.params.boardId,b=T.params.meetingId,Q=T.params.scheduleId,w=m(!1),g=m(null),y=m([]),M=m([]),S=$,{errorMessage:j}=Oe("assignees"),ae=ye({id:h().nullable(),position_id:h().nullable(),board_id:Qe().required(),meeting_id:Qe().required(),memberships:ze().of(h()).required("Members selection is required.")}),{handleSubmit:X,setErrors:oe,setFieldValue:ne,values:_e}=De({validationSchema:ae,initialValues:{board_id:A,meeting_id:b,id:"",position_id:"",memberships:[]}}),C=d(()=>{ne("memberships",y.value)},"selectedMembers"),U=d(()=>{ne("memberships",y.value)},"removeselectedMembers"),_=d(L=>{var J;console.log(L.memberships);const te=L.memberships.map(re=>re.member.id.toString());y.value=te,ne("memberships",y.value),P.value="edit",w.value=!0,(J=g.value)==null||J.showModal()},"openEditMembershipsModal"),I=X(async(L,{resetForm:te})=>{var J;try{ne("memberships",y.value);const re={board_id:L.board_id,memberships:L.memberships};if(P.value==="create")await ps(re,b,Q);else if(P.value==="edit")await hs(re,b,Q);else if(P.value==="position"){const o={id:L.id,position_id:L.position_id};await vs(o,b,Q)}await c(),S("memberships-updated"),H(),(J=g.value)==null||J.close()}catch(re){re instanceof qe?oe(re.messages):E(re)}}),H=d(()=>{P.value="create",w.value=!1,y.value=[],ne("memberships",[]),ne("id",""),ne("position_id","")},"reset"),q=d(()=>Ce({queryKey:["getMembershipsKey",b,Q],queryFn:async()=>{const L=await nt(b,{paginate:"false"});return console.log("response.data",L.data),L.data}}),"getMemberships"),{isLoading:O,data:B,refetch:c}=q(),le=ie(()=>{var te;const L=[];return M.value&&((te=M.value)==null?void 0:te.length)>0&&M.value.reduce((J,re)=>(J.push({id:re.id,name:`${re.user.full_name}`}),J),L),console.log("resul",L),L}),Z=d(async()=>{const L=await Ot(A,{paginate:"false"});M.value=L.data},"getMembers");Me(async()=>{Z()});const me=m([]),ee=d(async()=>{const L=await Bt({paginate:"false"});me.value=L.data},"getPositions");Me(async()=>{await ee()});const de=d(L=>{H(),P.value="position",ne("id",L.membershipId),ne("position_id",L.positionId),I()},"handlePositionUpdated"),pe=d(L=>{k.push({name:"ProfileDetails",params:{userId:L.id,profileId:L.profile.id}})},"openUserProfile");return(L,te)=>(t(),s(z,null,[e("div",_r,[e("div",mr,[pr,e("div",hr,[e("button",{class:"btn btn-secondary btn-sm",onClick:te[0]||(te[0]=D(J=>_({memberships:a(B)}),["prevent"]))}," Update Members ")])]),e("div",vr,[a(B)?(t(),s("div",br,[(t(!0),s(z,null,W(a(B),(J,re)=>(t(),s("div",{class:"col-lg-3 col-md-4 col-sm-6 mb-3",key:re},[e("div",gr,[e("div",fr,[e("div",yr,[e("h3",xr,[e("a",{href:"",onClick:D(o=>pe(J.user),["prevent"])},i(J.user.full_name),9,$r),e("button",{type:"button",onClick:D(o=>pe(J.user),["prevent"]),title:"",class:"mx-2 btn btn-sm btn-primary"},Mr,8,wr)]),e("p",Cr,i(J.position.name),1)]),a(G).hasPermission(["assign meeting position"])?(t(),s("div",Sr,[Ar,e("div",Ir,[se(ur,{membership:J,positions:me.value,disableRemotePosition:0,onPositionUpdated:de},null,8,["membership","positions"])])])):(t(),s("div",Tr,[qr,e("div",Pr,[e("i",{class:ce(["mr-2 fa "+J.position.icon,"mr-2"])},null,2),N(" "+i(J.position.name),1)])])),e("div",Dr,[Fr,e("p",Er,i(a(st)(J.updated_at,null)),1)])])])]))),128))])):v("",!0)])]),e("div",Rr,[e("dialog",{id:"membershipsmodal",class:"modal",ref_key:"membershipsmodal",ref:g},[e("form",Ur,[Lr,Vr,e("div",jr,[e("div",Or,[e("form",{novalidate:"",onSubmit:te[4]||(te[4]=D((...J)=>a(I)&&a(I)(...J),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",{class:ce(["multiselect-container",{error:!!a(j)}])},[se(a(at),{id:"members",modelValue:y.value,"onUpdate:modelValue":te[1]||(te[1]=J=>y.value=J),mode:"tags",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:le.value,valueProp:"id",trackBy:"id",label:"name",class:ce(["multiselect-container",{error:!!a(j)}]),onSelect:te[2]||(te[2]=J=>C()),onDeselect:te[3]||(te[3]=J=>U())},null,8,["modelValue","options","class"]),a(j)?(t(),s("div",Br,i(a(j)),1)):v("",!0)],2),Nr],32)])])])],512)])],64))}});const Kr=Ue(Hr,[["__scopeId","data-v-cbbf653a"]]),Yr={key:0},zr={class:"card h-full"},Gr={class:"card-header flex items-center"},Qr=e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"}," Meeting Polls ")],-1),Wr={key:0,class:"flex items-center space-x-2"},Zr=e("i",{class:"far fa fa-plus mr-2"},null,-1),Jr=e("span",{class:"sr-only"},"Add poll",-1),Xr={class:"card-container"},ec={key:0},tc={key:1},sc={class:"row overflow-auto p-4",style:{"max-height":"100vh"}},ac={class:"card card-outline card-primary h-100"},nc={class:"card-header"},oc={class:"card-tools"},ic=["onClick"],lc=e("i",{class:"fas fa-edit"},null,-1),dc=[lc],rc={class:"card-body"},cc={class:"text-primary tex-bold uppercase"},uc=e("strong",{class:"text-primary"},"Question:",-1),_c={class:"mt-2 text-primary text-bold"},mc={class:""},pc=e("strong",null,"Answer Options:",-1),hc={class:"row"},vc={class:"col-6"},bc={class:"list-unstyled text-success"},gc={class:"col-6"},fc={class:"list-unstyled text-success"},yc={class:"d-flex justify-content-between"},xc=e("strong",null,"Due Date:",-1),$c=e("strong",null,"Status:",-1),wc=e("strong",null,"Vote:",-1),kc=["innerHTML"],Mc={class:""},Cc=e("strong",null,"Assignees:",-1),Sc={class:"row"},Ac={class:"col-6"},Ic={class:"list-unstyled"},Tc={class:"col-6"},qc={class:"list-unstyled"},Pc=e("strong",null,"Description:",-1),Dc=["innerHTML"],Fc={class:"flex justify-center items-center min-h-screen"},Ec={method:"dialog",class:"modal-box rounded-xl relative bg-white shadow-xl"},Rc={class:"font-bold text-lg text-center"},Uc=e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1),Lc={class:"overflow-auto p-4",style:{"max-height":"80vh"}},Vc={class:"grid grid-cols-2 md:grid-cols-2 gap-4 p-2"},jc={class:"col-span-2"},Oc={class:"flex flex-wrap -mx-2 mt-2"},Bc={class:"w-full md:w-1/2 px-1 md:px-2"},Nc={class:"w-full md:w-1/2 px-1 md:px-2"},Hc={class:"flex flex-wrap -mx-2 mt-2"},Kc={class:"w-full md:w-1/3 px-1 md:px-2 text-center"},Yc=e("h2",{class:"font-bold text-sm text-center"},"Click to Add Options",-1),zc=e("h4",{class:"text-info font-semibold"},"Your Options",-1),Gc={key:0},Qc={key:0,class:"w-full md:w-2/3 px-1 md:px-2 flex flex-col"},Wc=["onClick"],Zc={class:"flex flex-wrap -mx-2 mt-2"},Jc={class:"w-full md:w-1/2 px-1 md:px-2"},Xc={class:"w-full md:w-1/2 px-1 md:px-2"},eu={key:0},tu=e("h2",{class:"font-bold text-primary text-sm text-center"}," All Members Will be assiged this Poll ",-1),su=[tu],au={key:0,class:"form-group col-span-3"},nu=e("label",{class:"text-bold font-medium tracking-wide"}," People To Vote ",-1),ou={key:0,class:"message"},iu={key:1},lu={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},du={key:1},ru=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),cu=[ru],uu=we({__name:"Pollp",setup(R){const $=$e(),G=Ae(),E=m(!1),T=m("create"),k=G.params.boardId,P=G.params.meetingId,A=m(null),b=m([]),Q=m(null),w=m("single"),g=m("individuals"),y=m([]),M=m([]),S=m(""),j=Pe();Oe("duedate");const{errorMessage:ae}=Oe("pollassignees"),X=ye({id:h().required(),title:h().required(),poll_id:h().nullable(),deleted_at:h().nullable(),created_at:h().nullable(),updated_at:h().nullable()}),oe=ye({id:h().required(),full_name:h().required()}),ne=ye({id:h().required(),poll_id:h().nullable(),membership_id:h().required(),user:oe}),_e=ye({meeting_id:h().nullable(),board_id:h().nullable(),committee_id:h().nullable(),question:h().required(),description:h().required(),questionoptiontype:h().required(),optionstatus:h().required(),options:ze().of(X).required(),duedate:h().required(),assigneetype:h().required(),assigneestatus:h().required(),pollassignees:ze().of(ne).nullable(),status:h().required()}),{handleSubmit:C,setErrors:U,setFieldValue:_,values:I}=De({validationSchema:_e,initialValues:{meeting_id:P,board_id:k,committee_id:null,question:"",description:"",questionoptiontype:"",optionstatus:"",options:[{id:ot(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null}],duedate:"",assigneetype:"",assigneestatus:"",pollassignees:[],status:"inactive"}});Oe("options");const H=d(()=>{var l;Z(),T.value="create",E.value=!0,(l=Q.value)==null||l.showModal()},"openCreatePollModal"),q=d(l=>{var u;Z(),A.value=l.id,_("question",l.question),_("description",l.description),_("questionoptiontype",l.questionoptiontype),_("optionstatus",l.optionstatus),_("duedate",l.duedate),_("assigneetype",l.assigneetype),_("assigneestatus",l.assigneestatus),_("status",l.status),_("options",l.options),g.value=l.assigneestatus,O(l.pollassignees),T.value="edit",E.value=!0,(u=Q.value)==null||u.showModal()},"openEditPollModal");function O(l){b.value=l.map(u=>({id:u.id,full_name:u.user.full_name,poll_id:u.poll_id,membership_id:u.membership_id,user:u.user})),_("pollassignees",b.value)}d(O,"mappollassigneesToReactiveRef");const B=d(()=>{_("pollassignees",b.value)},"selectedMembers"),c=d(()=>{_("pollassignees",b.value)},"removeselectedUsers"),le=C(async(l,{resetForm:u})=>{var r;try{console.log("dddd");const Y={meeting_id:l.meeting_id,board_id:l.board_id,committee_id:l.committee_id,question:l.question,description:l.description,questionoptiontype:l.questionoptiontype,optionstatus:l.optionstatus,options:l.options,duedate:l.duedate,assigneetype:l.assigneetype,assigneestatus:l.assigneestatus,pollassignees:l.pollassignees,status:l.status};if(T.value==="create")await gs(Y,P);else{const F=A.value;await fs(Y,P,F)}(r=Q.value)==null||r.close(),await V(),Z()}catch(Y){Y instanceof qe?U(Y.messages):j(Y)}}),Z=d(()=>{T.value="create",E.value=!1,A.value=null,w.value="single",g.value="all_members",b.value=[],_("meeting_id",P),_("board_id",k),_("committee_id",null),_("question",""),_("description",""),_("questionoptiontype","single"),_("optionstatus","single"),_("options",[{id:ot(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null}]),_("duedate",""),_("assigneetype","all_members"),_("assigneestatus","all_members"),_("pollassignees",[]),_("status","inactive")},"reset"),me=d(l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),"formattedDateTime"),ee=d(l=>de(l)?"bg-danger":"bg-success","dateBadgeClass"),de=d(l=>{const u=new Date,r=new Date(l);return u>r},"hasDueDatePassed"),pe=d(l=>{var fe;if(!l.votes||((fe=l.votes)==null?void 0:fe.length)===0)return"No votes yet";const u=l.votes.reduce((xe,Je)=>xe+Je.voteCount,0),r=l.totalMembers;if(u>r)return console.error("Total votes exceed total members, which is unexpected."),"Voting data error";if(u===0)return"No votes yet";const Y=l==null?void 0:l.votes.reduce((xe,Je)=>xe.voteCount>Je.voteCount?xe:Je),F=r-u;return`${(Y.voteCount/u*100).toFixed(1)}% voted for ${Y.title}<br>${u} voted / ${F} not yet`},"calculateVoteStats"),L=d(l=>{switch(l){case"Backlog":return"badge bg-warning";case"Pending":return"badge bg-info";case"On Progress":return"badge bg-primary";case"Completed":return"badge bg-success";default:return"badge"}},"statusClass"),te=[{name:"Single Answer",value:"single"},{name:"Multiple Answers: More than one",value:"multiple"}],J=[{name:"Individuals",value:"individuals"},{name:"Assign All Meeting Members",value:"all_members"}],re=ie(()=>te),o=ie(()=>J),f=d(l=>{M.value=[],y.value=[],n(),w.value=l,_("questionoptiontype",l),_("optionstatus",l)},"handleQuestionOptionTypeChange"),p=d(l=>{b.value=[],S.value=l,g.value=l,_("assigneetype",l),_("assigneestatus",l),_("pollassignees",[])},"handleAssigneeTypeChange"),n=d(()=>{Array.isArray(I.options)||(console.error("Invalid state: values.options is not an array."),_("options",[]));const l={id:ot(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null};_("options",[...I.options,l])},"addEmptyOption");lt(()=>I.options,l=>{});const x=d(l=>{const u=I.options.filter(r=>r.id!==l);console.log("vv",u),_("options",u)},"removeOption"),K=d(()=>Ce({queryKey:["getPollMembershisKey"],queryFn:async()=>(await nt(P,{paginate:"false"})).data.map(Re())}),"getMemberships"),{isLoading:ve,data:be,refetch:Ie}=K(),Re=d(()=>l=>({id:l.id,full_name:l.user.full_name,membership_id:l.id,user:l.user}),"formatEvent"),Se=ie(()=>{var l;return!be.value||((l=be.value)==null?void 0:l.length)===0?[]:be.value}),Ve=d(()=>Ce({queryKey:["getMeetingPollsKey",P],queryFn:async()=>(await ys(P,{paginate:"false"})).data}),"getMeetingPolls"),{isLoading:je,data:He,refetch:V}=Ve();return Me(async()=>{Ie(),V()}),(l,u)=>a($).hasPermission(["view poll"])?(t(),s("div",Yr,[e("div",zr,[e("div",Gr,[Qr,a($).hasPermission(["create poll"])?(t(),s("div",Wr,[e("button",{type:"button",onClick:D(H,["prevent"]),class:"btn btn-tool"},[Zr,N(),Jr])])):v("",!0)]),e("div",Xr,[a(je)?(t(),s("div",ec,"Loading Meeting Polls...")):(t(),s("div",tc,[e("div",sc,[(t(!0),s(z,null,W(a(He),(r,Y)=>(t(),s("div",{class:"col-lg-12 col-md-12 col-sm-12 mb-2",key:Y},[e("div",ac,[e("div",nc,[e("div",oc,[a($).hasPermission(["edit poll"])?(t(),s("button",{key:0,class:"btn btn-tool",onClick:D(F=>q(r),["prevent"])},dc,8,ic)):v("",!0)])]),e("div",rc,[e("div",cc,[uc,e("p",_c,i(r.question),1),e("div",mc,[pc,e("div",hc,[e("div",vc,[e("ul",bc,[(t(!0),s(z,null,W(r.options.slice(0,Math.ceil(r.options.length/2)),(F,ue)=>(t(),s("li",{key:F.id},i(ue+1)+". "+i(F.title),1))),128))])]),e("div",gc,[e("ul",fc,[(t(!0),s(z,null,W(r.options.slice(Math.ceil(r.options.length/2)),(F,ue)=>(t(),s("li",{key:F.id},i(ue+1+Math.ceil(r.options.length/2))+". "+i(F.title),1))),128))])])])])]),e("div",yc,[e("div",null,[xc,e("p",{class:ce(ee(r.duedate))},i(me(r.duedate)),3)]),e("div",null,[$c,e("p",null,[e("span",{class:ce(L(r.status))},i(r.status),3)])]),e("div",null,[wc,e("p",null,[e("span",{innerHTML:pe(r)},null,8,kc)])])]),e("div",Mc,[Cc,e("div",Sc,[e("div",Ac,[e("ul",Ic,[(t(!0),s(z,null,W(r.pollassignees.slice(0,Math.ceil(r.pollassignees.length/2)),(F,ue)=>(t(),s("li",{key:F.id},i(ue+1)+". "+i(F.user.full_name),1))),128))])]),e("div",Tc,[e("ul",qc,[(t(!0),s(z,null,W(r.pollassignees.slice(Math.ceil(r.pollassignees.length/2)),(F,ue)=>(t(),s("li",{key:F.id},i(ue+1+Math.ceil(r.pollassignees.length/2))+". "+i(F.user.full_name),1))),128))])])])]),e("div",null,[Pc,e("p",{innerHTML:r.description,class:"mt-2"},null,8,Dc)])])])]))),128))])]))])]),e("div",Fc,[e("dialog",{id:"pollmodal",class:"modal w-full max-w-4xl mx-auto p-0",ref_key:"PollModal",ref:Q},[e("form",Ec,[e("h3",Rc,i(T.value=="create"?"Create Poll":"Edit Poll"),1),Uc,e("div",Lc,[e("div",Vc,[e("div",jc,[e("form",{novalidate:"",onSubmit:u[3]||(u[3]=D((...r)=>a(le)&&a(le)(...r),["prevent"])),class:""},[se(Te,{labeled:!0,label:"Poll Question",name:"question",placeholder:"Enter Poll Question",type:"text"}),se(ct,{label:"Poll description",name:"description",theme:"snow",placeholder:"Enter Poll Description",toolbar:"full",contentType:"html",class:"col-span-2"}),e("div",Oc,[e("div",Bc,[se(tt,{labeled:!0,name:"questionoptiontype",label:"Select Allowed Answers On the Question",placeholder:"Select Allowed Answers On the Question",options:re.value,onSelectedItem:f},null,8,["options"])]),e("div",Nc,[se(ut,{label:"Poll Due Date",name:"duedate",flow:["month"],placeholder:"Enter Poll Due Date & Time"})])]),e("div",Hc,[e("div",Kc,[e("div",null,[Yc,e("button",{onClick:D(n,["prevent"]),class:"btn btn-primary h-10 mt-2"}," Add Option ")]),zc,a(I).options?(t(),s("ul",Gc,[(t(!0),s(z,null,W(a(I).options,(r,Y)=>(t(),s("li",{class:"text-primary font-bold text-justify",key:Y},i(Y+1)+"."+i(r==null?void 0:r.title),1))),128))])):v("",!0)]),a(I).options?(t(),s("div",Qc,[(t(!0),s(z,null,W(a(I).options,(r,Y)=>(t(),s("div",{class:"form-group flex items-center mb-2",key:Y},[se(Nt,{labeled:!0,label:"Title for option "+(Y+1),name:"options["+Y+"].title",placeholder:"Enter title",class:"flex-grow",type:"text"},null,8,["label","name"]),e("a",{href:"#",class:"ml-2 text-red-600 font-bold mt-8",onClick:D(F=>x(r.id),["prevent"])}," ✕ ",8,Wc)]))),128))])):v("",!0)]),e("div",Zc,[e("div",Jc,[se(tt,{labeled:!0,name:"assigneetype",label:"Select Assignee Type",placeholder:"Select Assignee Type",options:o.value,onSelectedItem:p},null,8,["options"])]),e("div",Xc,[g.value==="all_members"?(t(),s("div",eu,su)):v("",!0)])]),g.value==="individuals"?(t(),s("div",au,[nu,e("div",{class:ce(["multiselect-container",{error:!!a(ae)}])},[se(a(at),{id:"pollassignees",modelValue:b.value,"onUpdate:modelValue":u[0]||(u[0]=r=>b.value=r),mode:"tags",required:"",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:Se.value,valueProp:"membership_id",trackBy:"membership_id",label:"full_name",class:ce(["col-span-3",["multiselect-container",{error:!!a(ae)}]]),object:!0,onSelect:u[1]||(u[1]=r=>B()),onDeselect:u[2]||(u[2]=r=>c())},null,8,["modelValue","options","class"]),a(ae)?(t(),s("div",ou,i(a(ae)),1)):v("",!0)],2)])):v("",!0),b.value&&b.value.length||g.value==="all_members"?(t(),s("div",iu,[e("button",lu,i(T.value=="create"?"Create Poll":"Edit Poll"),1)])):v("",!0)],32)])])])])],512)])])):(t(),s("div",du,cu))}});const ke=d(R=>(Be("data-v-1ead2693"),R=R(),Ne(),R),"_withScopeId"),_u={key:0},mu={class:"card h-full"},pu={class:"card-header flex items-center"},hu=ke(()=>e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"},"Meeting Tasks")],-1)),vu={key:0,class:"flex items-center space-x-2"},bu=ke(()=>e("i",{class:"far fa fa-plus mr-2"},null,-1)),gu=ke(()=>e("span",{class:"sr-only"},"Add task",-1)),fu={class:"card-container"},yu={key:0},xu={key:1},$u={class:"row overflow-auto p-4",style:{"max-height":"100vh"}},wu={class:"card card-outline card-primary h-100"},ku={class:"card-header"},Mu={class:"card-tools"},Cu=["onClick"],Su=ke(()=>e("i",{class:"fas fa-edit"},null,-1)),Au=[Su],Iu={class:"card-body"},Tu={class:"text-primary text-bold uppercase"},qu={class:"d-flex justify-content-between"},Pu=ke(()=>e("strong",null,"Due Date:",-1)),Du=ke(()=>e("strong",null,"Status:",-1)),Fu={key:0,class:"badge bg-warning"},Eu={key:1,class:"badge bg-info"},Ru={key:2,class:"badge bg-primary"},Uu={key:3,class:"badge bg-success"},Lu={class:""},Vu=ke(()=>e("strong",null,"Assignees:",-1)),ju={class:"row"},Ou={class:"col-6"},Bu={class:"list-unstyled"},Nu={class:"col-6"},Hu={class:"list-unstyled"},Ku=ke(()=>e("strong",null,"Description:",-1)),Yu=["innerHTML"],zu={class:"flex justify-center col-md-6"},Gu={method:"dialog",class:"modal-box rounded-xl"},Qu={class:"font-bold text-lg justify-center flex"},Wu=ke(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),Zu={class:"overflow-auto p-4",style:{"max-height":"80vh"}},Ju={class:"grid grid-cols-3 md:grid-cols-3 gap-2 p-2"},Xu={class:"col-span-3"},e_={class:"flex flex-wrap -mx-2 mt-2"},t_={class:"w-full md:w-1/2 px-1 md:px-2"},s_={class:"w-full md:w-1/2 px-1 md:px-2"},a_={class:"flex flex-wrap -mx-2 mt-2"},n_={class:"w-full md:w-1/2 px-1 md:px-2"},o_={class:"w-full md:w-1/2 px-1 md:px-2"},i_={key:0},l_=ke(()=>e("h2",{class:"font-bold text-primary text-sm text-center"},"All Members Will be assigned this Task",-1)),d_=[l_],r_={key:0,class:"form-group col-span-3"},c_=ke(()=>e("label",{class:"text-bold font-medium tracking-wide"},"People to Assign",-1)),u_={key:0,class:"message"},__={key:1},m_={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},p_={key:1},h_=ke(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),v_=[h_],b_=we({__name:"Taskp",setup(R){const $=$e(),G=Ae(),E=m(!1),T=m("create"),k=G.params.boardId,P=G.params.meetingId,A=m(null),b=m([]),Q=m(null),w=m(null),g=m("individuals"),y=m(""),M=Pe();Oe("duedate");const{errorMessage:S}=Oe("taskassignees"),j=d(n=>{const x=new Date,K=new Date(n);return x>K},"hasDueDatePassed"),ae=ye({id:h().nullable(),full_name:h().nullable()}),X=ye({id:h().nullable(),task_id:h().nullable(),membership_id:h().nullable(),user:ae}),oe=ye({meeting_id:h().nullable(),board_id:h().nullable(),committee_id:h().nullable(),title:h().required(),duedate:h().required(),description:h().required(),status:h().required(),assigneetype:h().required(),assigneestatus:h().required(),taskassignees:ze().of(X).nullable()}),{handleSubmit:ne,setErrors:_e,setFieldValue:C,values:U}=De({validationSchema:oe,initialValues:{meeting_id:P,board_id:k,committee_id:null,title:"",duedate:"",description:"",status:"pending",assigneetype:"",assigneestatus:"",taskassignees:[]}}),_=d(()=>{var n;c(),T.value="create",E.value=!0,(n=w.value)==null||n.showModal()},"openCreateTaskModal"),I=d(n=>{var x;c(),Q.value=n,A.value=n.id,C("title",n.title),C("duedate",n.duedate),C("description",n.description),C("status",n.status),C("assigneetype",n.assigneetype),C("assigneestatus",n.assigneestatus),g.value=n.assigneestatus,H(n.taskassignees),T.value="edit",E.value=!0,(x=w.value)==null||x.showModal(),console.log(n)},"openEditTaskModal");function H(n){b.value=n.map(x=>({id:x.id,full_name:x.user.full_name,task_id:x.task_id,membership_id:x.membership_id,user:x.user})),C("taskassignees",b.value),console.log(U)}d(H,"maptaskassigneesToReactiveRef");const q=d(()=>{C("taskassignees",b.value)},"selectedMembers"),O=d(()=>{C("taskassignees",b.value)},"removeselectedUsers"),B=ne(async(n,{resetForm:x})=>{var K;try{const ve={meeting_id:n.meeting_id,board_id:n.board_id,committee_id:n.committee_id,title:n.title,duedate:n.duedate,description:n.description,status:n.status,assigneetype:n.assigneetype,assigneestatus:n.assigneestatus,taskassignees:n.taskassignees};if(T.value==="create")await xs(ve,P);else{const be=A.value;await $s(ve,P,be)}(K=w.value)==null||K.close(),await p(),c()}catch(ve){ve instanceof qe?_e(ve.messages):M(ve)}}),c=d(()=>{T.value="create",E.value=!1,A.value=null,g.value="all_members",b.value=[],C("meeting_id",P),C("board_id",k),C("committee_id",null),C("title",""),C("duedate",""),C("description","description ................"),C("status","pending"),C("assigneetype","all_members"),C("assigneestatus","all_members"),C("taskassignees",[])},"reset"),le=d(n=>{b.value=[],y.value=n,g.value=n,C("assigneetype",n),C("assigneestatus",n),C("taskassignees",[])},"handleAssigneeTypeChange"),Z=[{name:"Individuals",value:"individuals"},{name:"Assign All Meeting Members",value:"all_members"}],me=ie(()=>Z),ee=d(()=>Ce({queryKey:["getPollMembershisKey"],queryFn:async()=>(await nt(P,{paginate:"false"})).data.map(te())}),"getMemberships"),{isLoading:de,data:pe,refetch:L}=ee(),te=d(()=>n=>({id:n.id,full_name:n.user.full_name,membership_id:n.id,user:n.user}),"formatEvent"),J=ie(()=>{var n;return!pe.value||((n=pe.value)==null?void 0:n.length)===0?[]:pe.value}),re=d(()=>Ce({queryKey:["getMeetingTasksKey",P],queryFn:async()=>(await ws(P,{paginate:"false"})).data}),"getMeetingTasks"),{isLoading:o,data:f,refetch:p}=re();return Me(async()=>{p(),L()}),(n,x)=>a($).hasPermission(["view task"])?(t(),s("div",_u,[e("div",mu,[e("div",pu,[hu,a($).hasPermission(["create task"])?(t(),s("div",vu,[e("button",{type:"button",onClick:D(_,["prevent"]),class:"btn btn-tool"},[bu,N(),gu])])):v("",!0)]),e("div",fu,[a(o)?(t(),s("div",yu,"Loading Meeting Tasks...")):(t(),s("div",xu,[e("div",$u,[(t(!0),s(z,null,W(a(f),(K,ve)=>(t(),s("div",{class:"col-lg-12 col-md-12 col-sm-12 mb-2",key:ve},[e("div",wu,[e("div",ku,[e("div",Mu,[a($).hasPermission(["edit task"])?(t(),s("button",{key:0,class:"btn btn-tool",onClick:D(be=>I(K),["prevent"])},Au,8,Cu)):v("",!0)])]),e("div",Iu,[e("div",Tu,i(K.title),1),e("div",qu,[e("div",null,[Pu,e("p",{class:ce({"text-danger":j(K.duedate)&&K.status!=="completed","text-success":!j(K.duedate)||K.status==="completed"})},i(a(st)(K.duedate)),3)]),e("div",null,[Du,e("p",null,[K.status==="backlog"?(t(),s("span",Fu,"Backlog")):K.status==="pending"?(t(),s("span",Eu,"Pending")):K.status==="onprogress"?(t(),s("span",Ru,"On Progress")):K.status==="completed"?(t(),s("span",Uu,"Completed")):v("",!0)])])]),e("div",Lu,[Vu,e("div",ju,[e("div",Ou,[e("ul",Bu,[(t(!0),s(z,null,W(K.taskassignees.slice(0,Math.ceil(K.taskassignees.length/2)),(be,Ie)=>(t(),s("li",{key:be.id},i(Ie+1)+". "+i(be.user.full_name),1))),128))])]),e("div",Nu,[e("ul",Hu,[(t(!0),s(z,null,W(K.taskassignees.slice(Math.ceil(K.taskassignees.length/2)),(be,Ie)=>(t(),s("li",{key:be.id},i(Ie+1+Math.ceil(K.taskassignees.length/2))+". "+i(be.user.full_name),1))),128))])])])]),e("div",null,[Ku,e("p",{innerHTML:K.description,class:"mt-2"},null,8,Yu)])])])]))),128))])]))])]),e("div",zu,[e("dialog",{id:"taskmodal",class:"modal",ref_key:"TaskModal",ref:w},[e("form",Gu,[e("h3",Qu,i(T.value=="create"?"Create Meeting Task":"Edit Meeting Task"),1),Wu,e("div",Zu,[e("div",Ju,[e("div",Xu,[e("form",{novalidate:"",onSubmit:x[3]||(x[3]=D((...K)=>a(B)&&a(B)(...K),["prevent"])),class:""},[e("div",e_,[e("div",t_,[se(Te,{labeled:!0,label:"Task Title",name:"title",placeholder:"Enter Task Title",type:"text"})]),e("div",s_,[se(ut,{label:"Task Due Date",name:"duedate",flow:["month"],placeholder:"Task Due Date"})])]),se(ct,{label:"Task Description",name:"description",theme:"snow",placeholder:"Enter Task Description",toolbar:"full",contentType:"html",class:"col-span-3"}),e("div",a_,[e("div",n_,[se(tt,{labeled:!0,name:"assigneetype",label:"Select Assignee Type",placeholder:"Select Assignee Type",options:me.value,onSelectedItem:le},null,8,["options"])]),e("div",o_,[g.value==="all_members"?(t(),s("div",i_,d_)):v("",!0)])]),g.value==="individuals"?(t(),s("div",r_,[c_,e("div",{class:ce(["multiselect-container",{error:!!a(S)}])},[se(a(at),{id:"taskassignees",modelValue:b.value,"onUpdate:modelValue":x[0]||(x[0]=K=>b.value=K),mode:"tags",required:"",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:J.value,valueProp:"membership_id",trackBy:"membership_id",label:"full_name",class:ce(["col-span-3",["multiselect-container",{error:!!a(S)}]]),object:!0,onSelect:x[1]||(x[1]=K=>q()),onDeselect:x[2]||(x[2]=K=>O())},null,8,["modelValue","options","class"]),a(S)?(t(),s("div",u_,i(a(S)),1)):v("",!0)],2)])):v("",!0),b.value&&b.value.length||g.value==="all_members"?(t(),s("div",__,[e("button",m_,i(T.value=="create"?"Create Task":"Edit Task"),1)])):v("",!0)],32)])])])])],512)])])):(t(),s("div",p_,v_))}});const g_=Ue(b_,[["__scopeId","data-v-1ead2693"]]),f_={key:0},y_={class:"row"},x_={class:"col-md-6"},$_={class:"col-md-6"},w_={key:1},k_=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),M_=[k_],C_=we({__name:"TaskPolls",setup(R){const $=$e();return(G,E)=>a($).hasPermission(["view task","view poll"])?(t(),s("div",f_,[e("div",y_,[e("div",x_,[se(g_)]),e("div",$_,[se(uu)])])])):(t(),s("div",w_,M_))}});const S_={key:0,class:"container-fluid"},A_={key:0,class:"container-fluid"},I_={class:"py-6"},T_={class:"flex items-center"},q_={class:"lg:inline-flex p-3 mr-4rounded-lg custom-size"},P_={class:"calendar-icon w-full flex flex-col items-center justify-center mt-1 calendaheight"},D_={class:"month customonth"},F_={class:"day font-medium customday"},E_={class:"year font-medium customyear"},R_={class:""},U_={class:"header-pretitle text-xs mb-1"},L_=e("i",{class:"fas fa-chevron-left fa-xs"},null,-1),V_={class:"flex items-center space-x-4"},j_={class:"header-title leading-10 mb-2 h6 lg:mb-0 text-blue-primary font-bold"},O_=e("button",{class:"!hidden lg:!flex text-muted btn btn-icon","data-bs-toggle":"tooltip",title:"","data-copy-btn":"","data-copy-text":"https://app.boardable.com/felix-1/meetings/59bfaf-123456","aria-label":"Copy meeting link","data-bs-original-title":"Copy meeting link"},[e("i",{class:"fas fa-link"})],-1),B_={class:"ml-auto flex self-end"},N_=e("div",{class:"dropdown"},[e("a",{class:"nav-link",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[e("i",{class:"fas fa-ellipsis-v"})]),e("div",{class:"dropdown-menu --73","aria-labelledby":"navbarDropdown",style:{left:"-73px !important"}},[e("a",{class:"dropdown-item",href:"#"},"Re-send meeting invite"),e("a",{class:"dropdown-item",href:"#"},"Create Follow Up Meeting"),e("div",{class:"dropdown-divider"}),e("a",{class:"dropdown-item",href:"#"},"Delete Meeting")])],-1),H_={class:"lg:flex mr-2"},K_=e("div",{class:"flex justify-center btn-sm"},null,-1),Y_={class:"card-outline card-outline-tabs"},z_={class:"card-header p-0 border-bottom-0"},G_={class:"nav nav-tabs",id:"custom-tabs-four-tab",role:"tablist"},Q_=["onClick"],W_={class:"card-body"},Z_={class:"tab-content",id:"custom-tabs-four-tabContent"},J_=["id"],X_={class:"flex justify-center col-md-6"},em={method:"dialog",class:"modal-box rounded-xl"},tm=e("h3",{class:"font-bold text-lg justify-center flex"}," Take Minutes ",-1),sm=e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1),am={class:"w-full mt-6 p-2"},nm={class:"font-thin text-sm flex flex-col items-center gap-6"},om={class:"w-full rounded-xl mx-auto p-1 custom-modal"},im=e("h3",{class:"text-center text-base font-bold text-primary"}," How would you like to start? ",-1),lm={class:"flex justify-center space-x-4 py-6"},dm=e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-white rounded-full shadow w-11 h-11"},[e("i",{class:"fa fa-list"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From Scratch")],-1),rm=e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-white rounded-full shadow w-11 h-11"},[e("i",{class:"far fa-file"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From the Agenda")],-1),cm={key:1,class:"container-fluid"},um=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),_m=[um],Fm=we({__name:"BoardMeetingDetails",setup(R){const $=Ae(),G=We(),E=$e(),T=m("home"),k=m(""),P=[{id:"home",name:"Meeting Details",component:nr,permissions:["view meeting"]},{id:"agenda",name:"Agenda",component:Xa,permissions:["view agenda"]},{id:"minutes",name:"Minutes",component:mo,permissions:["view minutes"]},{id:"documents",name:"Documents",component:Md,permissions:["view documents"]},{id:"tasks",name:"Task & Polls",component:C_,permissions:["view task","view poll"]},{id:"members",name:"Members",component:Kr,permissions:["view meeting memberships"]},{id:"conflict-of-interest",name:"Conflict of Interest",component:Ni,permissions:["view conflicts of interest"]},{id:"attendance",name:"Attendance",component:si,permissions:["view attendances"]}],A=ie(()=>P.filter(H=>H.permissions?H.permissions.every(q=>E.hasPermission([q])):!0)),b=d(H=>{k.value=T.value,T.value=H},"setActiveTab"),Q=d(()=>{k.value==="agenda"&&(b("agenda"),window.dispatchEvent(new CustomEvent("refetchMemberships")))},"handleMembershipsUpdated");It(()=>{$.query.previousTab&&(k.value=$.query.previousTab),$.query.currentTab&&(T.value=$.query.currentTab)});function w(){G.push({name:"BoardDetails",params:{boardId:g}})}d(w,"goBack");const g=$.params.boardId,y=$.params.meetingId,M=$.params.scheduleId,S=m(),j=m(null),ae=Pe(),X=m("create"),oe=ye({id:h().required(),rsvp_status:h().nullable(),attendance_status:h().nullable()}),{handleSubmit:ne,setErrors:_e,setFieldValue:C,values:U}=De({validationSchema:oe,initialValues:{id:"",rsvp_status:"",attendance_status:""}});ne(async(H,{resetForm:q})=>{try{const O={id:H.id,rsvp_status:H.rsvp_status,location:H.location,attendance_status:H.attendance_status,meeting_id:H.meeting_id,membership_id:H.membership_id,membership:H.membership,meeting:H.meeting};X.value==="create"?await vt(O,y):X.value==="rsvp"?await bt(O,O.id):X.value==="attendance"&&await gt(O,O.id),await E.updateProfile(),window.dispatchEvent(new CustomEvent("meetingUpdated",{detail:{meetingId:y}})),_()}catch(O){O instanceof qe?_e(O.messages):ae(O)}});const _=d(()=>{X.value="create",C("id",""),C("rsvp_status",""),C("attendance_status","")},"reset");m([]);const I=d(()=>{G.push({name:"BoardMeetingMinutes",params:{boardId:g,meetingId:y,scheduleId:M},query:{defaultMinutes:"true"}})},"openMinuteTemplateSelectionModal");return Me(async()=>{try{const q=(await ft(y)).data;S.value=q}catch(H){console.error("Error fetching meeting data:",H)}}),(H,q)=>{var B,c,le,Z,me,ee;const O=dt("router-link");return a(E).hasPermission(["view meeting"])?(t(),s("div",S_,[S.value?(t(),s("div",A_,[e("div",I_,[e("div",T_,[e("div",q_,[e("div",P_,[e("div",D_,i(a(Zt)((c=(B=S.value)==null?void 0:B.schedules[0])==null?void 0:c.date)),1),e("div",F_,[e("span",null,i(a(Jt)((Z=(le=S.value)==null?void 0:le.schedules[0])==null?void 0:Z.date)),1)]),e("div",E_,[e("span",null,i(a(Xt)((ee=(me=S.value)==null?void 0:me.schedules[0])==null?void 0:ee.date)),1)])])]),e("div",R_,[e("p",U_,[e("a",{href:"",onClick:q[0]||(q[0]=D(de=>w(),["prevent"])),class:"mb-2 h6 lg:mb-0 text-blue-primary font-bold"},[L_,N(" Meetings ")])]),e("div",V_,[e("h1",j_,i(S.value.title),1),O_])]),e("div",B_,[N_,e("div",H_,[a(E).hasPermission(["create minutes","edit minutes"])?(t(),s("button",{key:0,class:"btn btn-secondary",onClick:q[1]||(q[1]=D(de=>I(),["prevent"]))}," Minutes ")):v("",!0)]),K_])]),e("div",Y_,[e("div",z_,[e("ul",G_,[(t(!0),s(z,null,W(A.value,de=>(t(),s("li",{class:"nav-item",key:de.id},[e("a",{class:ce(["nav-link",{active:T.value===de.id}]),onClick:pe=>b(de.id)},i(de.name),11,Q_)]))),128))])]),e("div",W_,[e("div",Z_,[(t(!0),s(z,null,W(A.value,de=>(t(),s("div",{key:de.id,class:ce(["tab-pane fade",{"show active":T.value===de.id}]),id:de.id,role:"tabpanel"},[(t(),Ge(Tt(de.component),{onChangeTab:b,onMembershipsUpdated:Q},null,32))],10,J_))),128))])])])]),e("div",X_,[e("dialog",{id:"minutetemplateselectionmodal",class:"modal",ref_key:"MinuteTemplateSelectionmodal",ref:j},[e("form",em,[tm,sm,e("div",am,[e("div",nm,[e("form",om,[im,e("div",lm,[se(O,{to:{name:"BoardMeetingMinutes",params:{boardId:a(g),meetingId:a(y)},query:{defaultMinutes:"false"}},class:"btn btn-secondary h-auto !p-0 p-0 mb-0 card flex-1"},{default:Ye(()=>[dm]),_:1},8,["to"]),se(O,{to:{name:"BoardMeetingMinutes",params:{boardId:a(g),meetingId:a(y)},query:{defaultMinutes:"true"}},class:"btn btn-secondary h-auto !p-0 p-0 mb-0 card flex-1"},{default:Ye(()=>[rm]),_:1},8,["to"])])])])])])],512)])])):v("",!0)])):(t(),s("div",cm,_m))}}});export{Fm as default};
