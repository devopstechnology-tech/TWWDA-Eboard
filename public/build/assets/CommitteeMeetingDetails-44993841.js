var $t=Object.defineProperty;var r=(E,M)=>$t(E,"name",{value:M,configurable:!0});import{d as we,i as $e,r as p,j as Ae,V as qe,C as oe,P as Me,o as t,c as s,e,T as P,h,u as a,F as Y,R as Q,g as H,t as i,f as J,U as ce,a1 as at,a0 as wt,W as Ne,X as He,_ as Ue,k as We,n as kt,H as lt,a3 as Mt,b as dt,Y as Ct,Z as St,l as Ge,w as Ye,a5 as At,a6 as It}from"./main-9b499219.js";import{u as Pe,e as Oe,c as ye,d as Qe,a as v,g as Tt,f as ze,b as De}from"./useUnexpectedErrorHandler-f37df04f.js";import{u as ht,a as vt,b as gt,c as qt,d as Pt,e as Dt,f as Ft,g as Et}from"./useConflictRequest-ca7ff719.js";import{F as tt,n as Rt,o as Ut,p as Lt,q as Vt,r as jt,I as bt,H as Ot,t as Nt,v as ot,m as Ht}from"./FormDynamicInput-4c66f355.js";import{y as Xe,z as et,n as ft,A as Kt,v as rt,B as mt,C as it,D as Bt,d as yt,e as Yt,g as zt,f as _t,h as st,j as Gt,k as Qt,m as Be,o as Wt,p as Zt,q as Jt,t as Xt}from"./Breadcrumb-74d93201.js";import{u as es,a as ts,b as ss,c as as,d as ns,e as os,f as is,g as ls,h as xt,i as ds,j as rs,k as cs,l as us,r as ms,n as _s}from"./useMinuteRequest-2d0f7362.js";import{u as nt,a as ps,b as hs,c as vs}from"./useMembershipRequest-619957a2.js";import{F as Te}from"./FormInput-360d6aac.js";import{F as ct}from"./FormQuillEditor-fc7ac95e.js";import{u as Ce}from"./useQuery-7facd994.js";import{_ as ut}from"./FormDateTimeInput.vue_vue_type_style_index_0_lang-fbef2fd1.js";import{F as pt}from"./FormTextBox-90b70c6e.js";import{F as gs}from"./FormUpload-c235b23e.js";import{c as bs,d as fs,e as ys}from"./usePollRequest-adad518d.js";import{c as xs,d as $s,e as ws}from"./useTaskRequest-a11374e2.js";import"./index-df77389a.js";import"./attendance_routes-22107f1a.js";import"./folder_routes-6d34764d.js";import"./membership_routes-82bd5969.js";import"./useQueryClient-0be5c548.js";const pe=r(E=>(Ne("data-v-1e44d79d"),E=E(),He(),E),"_withScopeId$6"),ks={key:0,class:"card-header flex items-center"},Ms=pe(()=>e("div",{class:"flex items-center flex-1 w-full"},null,-1)),Cs={class:"flex items-center space-x-2"},Ss=pe(()=>e("span",{class:"text-danger"},"Reset Agenda Start Choice",-1)),As=[Ss],Is={key:1,class:"flex gap-5"},Ts={class:"flex-1"},qs={class:"card card-outline card-danger",style:{"min-height":"384px"}},Ps={class:"card-body"},Ds={class:"flex w-full"},Fs={class:"flex-1"},Es=pe(()=>e("div",{class:"relative h-8"},[e("div",{class:"absolute border -right-16 text-[10px] bottom-2 rounded text-center px-2 py-0.5 text-gray-700 z-10 border-gray-200 bg-gray-200"},[e("div",{class:"absolute left-0 right-0 text-green text-xxs bold -top-2.5"}," Start ")])],-1)),Rs={"data-list_format":"num_la_lr",class:"agenda-list mb-0 border-l border-blue"},Us={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},Ls=pe(()=>e("div",{class:"absolute border -right-16 top-4 text-[10px] rounded text-center py-0.5 text-gray-700 z-10 border-gray-200 bg-gray-200 px-2"},null,-1)),Vs=["onClick"],js={class:"font-medium flex-1"},Os=["innerHTML"],Ns={class:"flex items-center gap-2 mt-1 h-6"},Hs={class:"text-xs text-gray-600"},Ks={key:0,class:"list-none assignees-list"},Bs={key:1,class:"flex gap-2 items-start"},Ys={class:"font-medium flex-1"},zs=["innerHTML"],Gs={class:"flex items-center gap-2 mt-1 h-6"},Qs={class:"text-xs text-gray-600"},Ws={key:0,class:"list-none assignees-list"},Zs={class:"ml-4 mt-2"},Js={class:"flex gap-x-2"},Xs=pe(()=>e("button",{type:"submit",class:"btn btn-primary h-10"}," Save ",-1)),ea=["onClick"],ta={class:"min-h-6 border-l border-blue"},sa={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},aa=pe(()=>e("div",{class:"absolute border -right-16 top-4 text-[10px] rounded text-center py-0.5 text-gray-700 z-10 border-gray-200 bg-white px-1"}," 10:30pm ",-1)),na=["onClick"],oa={class:"font-medium flex-1"},ia=["innerHTML"],la={class:"flex items-center gap-2 mt-1 h-6"},da={class:"text-xs text-gray-600"},ra={key:0,class:"list-none assignees-list"},ca={key:1,class:"flex gap-2 items-start"},ua={class:"font-medium flex-1"},ma=["innerHTML"],_a={class:"flex items-center gap-2 mt-1 h-6"},pa={class:"text-xs text-gray-600"},ha={key:0,class:"list-none assignees-list"},va={class:"mt-4"},ga={key:0,class:"mt-4"},ba={class:"flex gap-x-2"},fa=pe(()=>e("button",{type:"submit",class:"btn btn-primary h-10"}," Save ",-1)),ya={class:"relative h-8"},xa={class:"absolute border -right-16 text-[10px] bottom-2 rounded text-center px-2 py-0.5 text-gray-700 z-10 border-gray-200 bg-gray-200"},$a=pe(()=>e("div",{class:"absolute left-0 right-0 text-green text-xxs bold -top-2.5"}," END ",-1)),wa=pe(()=>e("div",null,[e("div",{class:"w-16 flex h-full justify-center py-4"},[e("div",{class:"bg-gray-200 h-full relative left-1.5",style:{width:"1px"}},"   ")])],-1)),ka={class:"w-[350px] relative"},Ma={class:"w-[350px]"},Ca={class:"card card-outline card-danger mb-0"},Sa={class:"card-body"},Aa={class:"form-group"},Ia=pe(()=>e("label",{class:"text-xs uppercase font-medium text-gray-700 tracking-wide"}," People Responsible ",-1)),Ta={key:0,class:"message"},qa={class:"flex justify-between"},Pa=pe(()=>e("button",{type:"submit",class:"btn btn-sm btn-primary ml-1 mr-1"}," Save ",-1)),Da=pe(()=>e("div",{class:"w-[350px] relative"},[e("div",{class:"w-[350px] card card-outline card-danger"},[e("div",{class:"bg-gray-200 rounded-lg h-96 flex items-center justify-center"},[e("div",{class:"text-center text-gray-700"},[H(" Select an agenda item to edit "),e("br",{role:"presentation","data-uw-rm-sr":""}),e("div",{class:"text-xl mt-1"},[e("svg",{class:"svg-inline--fa fa-turn-down-left","aria-hidden":"true",focusable:"false","data-prefix":"far","data-icon":"turn-down-left",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":""},[e("path",{fill:"currentColor",d:"M6.5 271.6c-8.7 9.2-8.7 23.7 0 32.9l121.4 129c8.8 9.3 21 14.6 33.7 14.6c25.6 0 46.3-20.7 46.3-46.3l0-41.7 144 0c88.4 0 160-71.6 160-160l0-112c0-30.9-25.1-56-56-56l-32 0c-30.9 0-56 25.1-56 56l0 120c0 4.4-3.6 8-8 8l-152 0 0-41.7c0-25.6-20.7-46.3-46.3-46.3c-12.8 0-25 5.3-33.7 14.6L6.5 271.6zm153.5-93l0 61.5c0 13.3 10.7 24 24 24l176 0c30.9 0 56-25.1 56-56l0-120c0-4.4 3.6-8 8-8l32 0c4.4 0 8 3.6 8 8l0 112c0 61.9-50.1 112-112 112l-168 0c-13.3 0-24 10.7-24 24l0 61.5L57 288 160 178.5z"})])])])])])],-1)),Fa=[Da],Ea={key:2,class:"card card-outline card-danger"},Ra=pe(()=>e("div",{class:"card-header text-center justify-center bg-gradient-info"},[e("h3",{class:"text-center font-bold text-lg"}," Choose Your Starting Point ")],-1)),Ua={class:"card-body"},La={class:"flex justify-center space-x-4 py-6"},Va=pe(()=>e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-gradient-success rounded-full shadow w-11 h-11"},[e("i",{class:"fa fa-list text-white"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From Scratch")],-1)),ja=[Va],Oa=pe(()=>e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-gradient-warning rounded-full shadow w-11 h-11"},[e("i",{class:"far fa-file text-white"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From the Agenda")],-1)),Na=[Oa],Ha={class:"flex justify-center col-md-6"},Ka={method:"dialog",class:"modal-box rounded-xl"},Ba=pe(()=>e("h3",{class:"font-bold text-lg justify-center flex text-white"}," save the Imported AGendas from Previous Meeting ",-1)),Ya=pe(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),za={class:"w-full mt-6 p-2"},Ga={class:"font-thin text-sm flex flex-col items-center gap-6"},Qa={class:"w-full rounded-xl mx-auto p-1 custom-modal"},Wa=pe(()=>e("h3",{class:"text-center text-base font-bold text-primary"}," Make use of the imported Agendas ",-1)),Za={class:"flex justify-center mt-4"},Ja=we({__name:"Agenda",emits:["change-tab"],setup(E,{emit:M}){const z=$e(),F=M,I=p("default"),x=Pe(),T=Ae(),C=p("create"),f=p(""),j=p(""),$=T.params.committeeId,g=T.params.meetingId,k=T.params.scheduleId,S=p(""),q=p(null),O=p([]),X=p([]),ee=p(null),ne=p(null),te=p(null),ue=p([]),A=p(!1),R=p(!1),d=p(!1),b=p(null),de=p(-1),U=p(-1),{errorMessage:se}=Oe("assignees"),N=ye({schedule_id:Qe().required(),title:v().required(),duration:Tt().nullable(),description:v().nullable(),agenda_id:v().nullable(),assignees:ze().of(v()).nullable(),children:ze().of(v()).nullable()}),{handleSubmit:u,setErrors:ie,setFieldValue:W,values:le}=De({validationSchema:N,initialValues:{schedule_id:k,title:"",duration:null,description:null,agenda_id:null,assignees:[],children:[]}}),ae=r(()=>{R.value=!0,A.value=!1,d.value=!1,de.value=-1,U.value=-1,C.value="create",W("title",""),console.log("we are here",R.value,d.value,ue)},"enableAddingNewParent"),be=r((V,l)=>{d.value=!0,b.value=l,de.value=V,U.value=-1,W("title",""),A.value=!1,C.value="create"},"enableAddingChild"),_e=r((V,l,m,c)=>{if(ne.value=m,q.value=m.id,A.value=!0,R.value=!1,d.value=!1,de.value=V,U.value=l,C.value="edit",j.value=c,W("title",m.title),W("schedule_id",k),W("duration",m.duration),W("description",m.description),m.assignees){const B=m.assignees.map(D=>D.id);O.value=B,W("assignees",B)}else W("assignees",[])},"enableEditing"),L=u(async(V,{resetForm:l})=>{try{if(C.value==="create"){const m={title:V.title,schedule_id:V.schedule_id,duration:null,description:null,agenda_id:null,assignees:[],children:[]};if(d.value){const c=b.value?b.value.toString():null;m.agenda_id=c,await es(m,k)}else R.value&&await ts(m,k)}else{const m={title:V.title,schedule_id:V.schedule_id,duration:V.duration,description:V.description,agenda_id:null,assignees:[],children:[]};if(U.value!==-1){m.assignees=V.assignees;const c=q.value?q.value.toString():null;m.agenda_id=c,await ss(m,k)}else if(de.value!==-1){m.assignees=V.assignees;const c=q.value?q.value.toString():null;m.agenda_id=c,await as(m,k)}}await Se(),l(),Z()}catch(m){m instanceof qe?ie(m.messages):x(m)}}),Z=r(()=>{C.value="create",I.value="default",f.value="",j.value="",A.value=!1,R.value=!1,d.value=!1,de.value=-1,U.value=-1,ne.value=null,q.value=null,O.value=[],W("title",""),W("duration",null),W("description",null),W("agenda_id",null),W("assignees",[]),W("children",[])},"cancelEditing"),G=[{name:"- none -",value:"0"},{name:"5 minutes",value:"5"},{name:"10 minutes",value:"10"},{name:"15 minutes",value:"15"},{name:"20 minutes",value:"20"},{name:"25 minutes",value:"25"},{name:"30 minutes",value:"30"},{name:"35 minutes",value:"35"},{name:"40 minutes",value:"40"},{name:"45 minutes",value:"45"},{name:"50 minutes",value:"50"},{name:"55 minutes",value:"55"},{name:"60 minutes",value:"60"}],re=oe(()=>G),o=r(()=>{W("assignees",O.value)},"selectedUsers"),y=r(()=>{W("assignees",O.value)},"removeselectedUsers"),_=oe(()=>{var l;const V=[];return X.value&&((l=X.value)==null?void 0:l.length)>0&&X.value.reduce((m,c)=>(m.push({id:c.id,name:`${c.user.full_name}`}),m),V),V}),n=r(async()=>{var l;const V=(l=ne.value)==null?void 0:l.id;j.value==="agenda"?await ns(V):await os(V),await Se(),Z()},"deleteAgenda"),w=r(async V=>{V==="scratch"?f.value=V:V==="previous"&&(I.value="custom",f.value=V,await Se())},"startAgenda"),K=r(async()=>{f.value==="previous"&&(I.value="default",await Se()),f.value=""},"resetAgendaStartChoice"),he=r(async()=>{var l;const V=S.value;K(),await is(V,k),(l=te.value)==null||l.close(),S.value="",I.value="default",f.value="",await Se()},"SaveImportedAgendas"),ve=r(()=>Ce({queryKey:["getMeetingScheduleAgendasKey",k],queryFn:async()=>{var l;let V;return I.value==="custom"?(V=await ls({paginate:"false"}),V.data&&V.data.length>0?(S.value=V.data[0].schedule_id,(l=te.value)==null||l.showModal()):(wt({title:"Notice",text:"No agendas found in the database. Please create an agenda from scratch.",type:"warning"}),I.value="default")):I.value==="default"&&(V=await xt(k,{paginate:"false"})),(V==null?void 0:V.data)||[]}}),"getMeetingScheduleAgendas"),{isLoading:Ie,data:Re,refetch:Se}=ve(),Ve=oe(()=>ee.value),je=r(async()=>{const V=await nt(g,$);X.value=V.data},"getmemberships"),Ke=r(()=>{F("change-tab","members")},"handleManageMembersClick");return Me(()=>{je(),window.addEventListener("refetchMemberships",je)}),(V,l)=>{var m;return t(),s(Y,null,[f.value==="scratch"||f.value==="previous"?(t(),s("div",ks,[Ms,e("div",Cs,[e("button",{type:"submit",onClick:P(K,["prevent"]),class:"btn btn-tool"},As)])])):h("",!0),f.value==="scratch"||f.value==="previous"||a(Re)&&a(Re).length?(t(),s("div",Is,[e("div",Ts,[e("div",qs,[e("div",Ps,[e("div",Ds,[e("div",Fs,[Es,e("ol",Rs,[(t(!0),s(Y,null,Q(a(Re),(c,B)=>(t(),s("li",{class:"mb-2 hover:border-gray-400",key:B},[e("div",Us,[Ls,a(z).hasPermission(["edit agenda"])?(t(),s("div",{key:0,class:"flex gap-2 items-start",onClick:D=>_e(B,-1,c,"agenda")},[e("div",js,[H(i(a(Xe)(B))+"."+i(c.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:c.description},null,8,Os)]),e("div",Ns,[e("div",Hs,i(a(et)(c.duration)),1)]),e("div",null,[c.assignees?(t(),s("ul",Ks,[(t(!0),s(Y,null,Q(c.assignees,(D,me)=>{var fe;return t(),s("li",{class:"text-sm text-primary",key:me},i(me+1)+". "+i((fe=D.user)==null?void 0:fe.full_name),1)}),128))])):h("",!0)])],8,Vs)):(t(),s("div",Bs,[e("div",Ys,[H(i(a(Xe)(B))+"."+i(c.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:c.description},null,8,zs)]),e("div",Gs,[e("div",Qs,i(a(et)(c.duration)),1)]),e("div",null,[c.assignees?(t(),s("ul",Ws,[(t(!0),s(Y,null,Q(c.assignees,(D,me)=>{var fe;return t(),s("li",{class:"text-sm text-primary",key:me},i(me+1)+". "+i((fe=D.user)==null?void 0:fe.full_name),1)}),128))])):h("",!0)])])),e("div",Zs,[d.value&&b.value===c.id?(t(),s("form",{key:0,novalidate:"",onSubmit:l[0]||(l[0]=P((...D)=>a(L)&&a(L)(...D),["prevent"]))},[e("div",Js,[J(Te,{labeled:!1,label:"Agenda",name:"title",class:"form-control form-control-sm p-0",placeholder:"Enter Meeting Agenda",type:"text"}),Xs]),e("a",{onClick:P(Z,["prevent"]),class:"text-xs cursor-pointer"}," Cancel ")],32)):h("",!0)]),de.value!==B&&!d.value&&a(z).hasPermission(["create agenda"])?(t(),s("button",{key:2,onClick:D=>be(B,c.id),class:"ml-4 mt-2"}," + Add sub Agenda ",8,ea)):h("",!0)]),e("ol",ta,[(t(!0),s(Y,null,Q(c.children,(D,me)=>(t(),s("li",{class:"mb-2 hover:border-gray-400",draggable:"false",key:me},[e("div",sa,[aa,a(z).hasPermission(["edit agenda"])?(t(),s("div",{key:0,class:"flex gap-2 items-start",onClick:fe=>_e(B,me,D,"subagenda")},[e("div",oa,[H(i(a(Xe)(B,me))+". "+i(D.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:D.description},null,8,ia)]),e("div",la,[e("div",da,i(a(et)(D.duration)),1)]),e("div",null,[D.assignees?(t(),s("ul",ra,[(t(!0),s(Y,null,Q(D.assignees,(fe,xe)=>(t(),s("li",{class:"text-sm text-primary",key:xe},i(xe+1)+". "+i(fe.user.full_name),1))),128))])):h("",!0)])],8,na)):(t(),s("div",ca,[e("div",ua,[H(i(a(Xe)(B,me))+". "+i(D.title)+" ",1),e("div",{class:"text-sm text-gray-800 font-normal",innerHTML:D.description},null,8,ma)]),e("div",_a,[e("div",pa,i(a(et)(D.duration)),1)]),e("div",null,[D.assignees?(t(),s("ul",ha,[(t(!0),s(Y,null,Q(D.assignees,(fe,xe)=>(t(),s("li",{class:"text-sm text-primary",key:xe},i(xe+1)+". "+i(fe.user.full_name),1))),128))])):h("",!0)])]))])]))),128))])]))),128))]),e("div",va,[e("div",null,[R.value?(t(),s("div",ga,[e("form",{novalidate:"",onSubmit:l[1]||(l[1]=P((...c)=>a(L)&&a(L)(...c),["prevent"])),class:"mt-4"},[e("div",ba,[J(Te,{labeled:!1,label:"Agenda",name:"title",class:"form-control form-control-sm p-0",placeholder:"Enter Meeting Agenda",type:"text"}),fa])],32),e("a",{onClick:P(Z,["prevent"]),class:"text-xs cursor-pointer"}," Cancel ")])):h("",!0),a(z).hasPermission(["create agenda"])?(t(),s("button",{key:1,onClick:ae,class:"btn btn-secondary block w-full mb-4"}," Add Agenda ")):h("",!0)])]),e("div",ya,[e("div",xa,[$a,H(" "+i((m=Ve.value)!=null&&m.end_time?a(ft)(Ve.value.end_time):""),1)])])]),wa])])])]),e("div",{class:ce({hidden:!A.value,"md:block":!0,"w-[350px]":!0})},[e("div",ka,[e("div",Ma,[e("div",Ca,[e("form",{novalidate:"",onSubmit:l[6]||(l[6]=P((...c)=>a(L)&&a(L)(...c),["prevent"]))},[e("div",Sa,[J(Te,{label:"Agenda",name:"title",class:"w-full text-sm tracking-wide",placeholder:"Enter Meeting Agenda",t:"",ype:"text"}),J(ct,{label:"Agenda Description",name:"description",theme:"snow",placeholder:"Enter Agenda  Description",toolbar:"minimal",contentType:"html"}),J(tt,{name:"duration",label:"Duration",placeholder:"Select Duration",options:re.value},null,8,["options"]),e("div",Aa,[Ia,e("div",{class:ce(["multiselect-container",{error:!!a(se)}])},[J(a(at),{id:"assignees",modelValue:O.value,"onUpdate:modelValue":l[2]||(l[2]=c=>O.value=c),mode:"tags",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:_.value,valueProp:"id",trackBy:"id",label:"name",class:ce(["multiselect-container",{error:!!a(se)}]),onSelect:l[3]||(l[3]=c=>o()),onDeselect:l[4]||(l[4]=c=>y())},null,8,["modelValue","options","class"]),a(se)?(t(),s("div",Ta,i(a(se)),1)):h("",!0)],2),e("button",{onClick:P(Ke,["prevent"]),class:"btn btn-info mt-2"}," Manage Members ")]),e("div",qa,[e("button",{onClick:l[5]||(l[5]=P(c=>n(),["prevent"])),class:"btn btn-link btn-sm text-danger h-7"}," Delete "),e("div",null,[e("button",{onClick:P(Z,["prevent"]),class:"btn btn-secondary btn-sm ml-1 mr-1"}," Cancel "),Pa])])])],32)])])])],2),e("div",{class:ce({hidden:A.value,"md:block":!0,"w-[350px]":!0})},Fa,2)])):f.value===""?(t(),s("div",Ea,[Ra,e("div",Ua,[e("div",La,[e("a",{onClick:l[7]||(l[7]=P(c=>w("scratch"),["prevent"])),class:"btn btn-primary h-auto !p-0 p-0 mb-0 card flex-1"},ja),e("a",{onClick:l[8]||(l[8]=P(c=>w("previous"),["prevent"])),class:"btn btn-primary h-auto !p-0 p-0 mb-0 card flex-1"},Na)])])])):h("",!0),e("div",Ha,[e("dialog",{id:"saveagendasModal",class:"modal modal-primary",ref_key:"saveagendasModal",ref:te},[e("form",Ka,[Ba,Ya,e("div",za,[e("div",Ga,[e("form",Qa,[Wa,e("div",Za,[e("button",{type:"submit",onClick:P(he,["prevent"]),class:"btn btn-lg btn-success"}," Save Imported Agendas ")])])])])])],512)])],64)}}});const Xa=Ue(Ja,[["__scopeId","data-v-1e44d79d"]]),Fe=r(E=>(Ne("data-v-df6bfbcb"),E=E(),He(),E),"_withScopeId$5"),en={key:0},tn={key:0,class:"card card-widget shadow-lg"},sn={class:"card-header"},an={class:"d-flex align-items-center"},nn={class:"ml-3 flex-1"},on=Fe(()=>e("i",{class:"fas fa-chevron-left"},null,-1)),ln={key:0,class:"ml-auto flex self-end"},dn={key:0,type:"button",class:"btn btn-sm mr-1 btn-success btn-lg"},rn=Fe(()=>e("i",{class:"fas fa-door-closed mr-1"},null,-1)),cn={key:1,type:"button",class:"btn btn-sm mr-1 btn-success btn-lg"},un=Fe(()=>e("i",{class:"fa fa-check mr-1"},null,-1)),mn=Fe(()=>e("i",{class:"fa fa-check mr-1"},null,-1)),_n={class:"card-body"},pn=Fe(()=>e("span",{class:"info-box-icon",style:{left:"4%","margin-left":"-45px",position:"absolute",top:"88px"}},[e("div",{class:"h3 text-bold font-bold uppercase text-primary"}," Confidential")],-1)),hn={class:"text-center logo-container"},vn=["src"],gn={class:"h3 text-center text-primary text-bold font-bold uppercase"},bn=Fe(()=>e("hr",{class:"thick-line"},null,-1)),fn={class:"text-center text-primary text-bold uppercase h4"},yn={class:"text-center text-primary text-bold uppercase h4"},xn={key:0,class:"mt-2 text-primary text-bold uppercase"},$n={key:1,class:"table table-borderless"},wn={class:"p-0"},kn={class:"p-0 text-primary text-bold uppercase"},Mn={key:2,class:"mt-2 text-primary text-bold uppercase"},Cn={key:3,class:"table table-borderless"},Sn={class:"p-0"},An={class:"p-0 text-primary text-bold uppercase"},In={key:4,class:"mt-2 text-primary text-bold uppercase"},Tn={key:5,class:"table table-borderless"},qn={class:"p-0"},Pn={class:"p-0 text-primary text-bold uppercase"},Dn={key:6,class:"mt-2 text-primary text-bold uppercase"},Fn={key:7,class:"table table-borderless"},En={class:"p-0"},Rn={class:"p-0 text-primary text-bold uppercase"},Un=Fe(()=>e("h5",{class:"mt-2 text-primary text-bold uppercase"},"Agenda",-1)),Ln={class:"list-unstyled"},Vn={class:"list-unstyled ml-4"},jn={id:"MinutesEditor",class:"container"},On={class:"codex-editor"},Nn={class:"codex-editor__redactor",style:{"padding-bottom":"300px"}},Hn={class:"ce-block"},Kn={class:"flex w-full"},Bn={class:"flex-1"},Yn={key:0,"data-list_format":"num_la_lr",class:"agenda-list mb-0"},zn={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},Gn={class:"flex gap-2 items-start"},Qn={class:"font-medium flex-1"},Wn=["onClick"],Zn={class:"font-bold text-primary"},Jn=["innerHTML"],Xn={key:0,class:"min-h-6"},eo={class:"rounded-lg border border-transparent hover:cursor-pointer border-blue -ml-7 p-2 pl-7 relative border-blue"},to={class:"flex gap-2 items-start"},so={class:"font-medium flex-1"},ao={class:"font-bold text-primary"},no=["innerHTML"],oo={key:1,class:"card card-widget shadow-lg"},io=Fe(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, The Minutes have not been Aprroved")],-1)),lo=[io],ro={key:1},co=Fe(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),uo=[co],mo=we({__name:"ApprovedMinutes",setup(E){const M=We();function z(){M.back()}r(z,"goBack");const F=Ae(),I=$e(),x=kt(),T=F.params.committeeId;F.params.meetingId;const C=F.params.scheduleId;F.params.minutesId;const f=p(null),j=p("create"),$=p(!1),g=p([]),k=p(null),S=p(null),q=p(-1),O=p(-1),X=p(!1),ee=p(!1),ne=p([{text:""}]),te=Pe(),ue=ye({schedule_id:Qe().required(),committee_id:v().nullable(),membership_id:v().nullable(),minute_id:v().nullable(),agenda_id:v().required(),detail_minute_id:v().nullable(),subdetailminute_id:v().nullable(),subagenda_id:v().nullable(),description:v().required(),status:v().required()}),{handleSubmit:A,setErrors:R,setFieldValue:d,values:b}=De({validationSchema:ue,initialValues:{schedule_id:C,committee_id:T,membership_id:null,minute_id:f.value,agenda_id:"",detail_minute_id:null,subdetailminute_id:null,subagenda_id:null,description:"",status:"unpublished"}});A(async(o,{resetForm:y})=>{try{const _={schedule_id:o.schedule_id,committee_id:null,membership_id:null,minute_id:f.value?f.value.toString():null,agenda_id:o.agenda_id.toString(),detail_minute_id:o.detail_minute_id?o.detail_minute_id.toString():null,subdetailminute_id:o.subdetailminute_id?o.subdetailminute_id.toString():null,subagenda_id:o.subagenda_id?o.subagenda_id.toString():null,description:o.description,status:o.status};j.value==="create"?$.value?await ds(_,C):ee.value&&await rs(_,C):q.value!==-1?(await cs(_,C),console.log("payload",_)):O.value!==-1&&await us(_,C),await ie(),de()}catch(_){_ instanceof qe?R(_.messages):te(_)}});const de=r(()=>{j.value="create",$.value=!1,k.value=null,S.value=null,q.value=-1,O.value=-1,X.value=!1,ee.value=!1,d("schedule_id",C),d("committee_id",T),d("membership_id",null),d("minute_id",f.value),d("agenda_id",""),d("detail_minute_id",null),d("subdetailminute_id",null),d("subagenda_id",null),d("description",""),d("status","unpublished")},"reset");oe(()=>{const o=$.value&&k.value===agenda.id&&O.value===pIndex&&q.value===cIndex&&j.value==="create";return console.log("isAddingChild computed:",o),o}),oe(()=>{const o=X.value&&!ee.value&&!$.value&&j.value==="edit";return console.log("isEditing computed:",o),o});const U=r((o,y,_,n,w)=>{de(),X.value=!0,ee.value=!1,$.value=!1,O.value=o,q.value=y,j.value="edit",console.log("pIndex: number, cIndex:",o,y),console.log("States after enabling adding child:",{is_editing:X.value,isAddingNewParent:ee.value,addingChild:$.value,editingParentIndex:O.value,editingChildIndex:q.value,action:j.value}),d("agenda_id",_.id),q.value!==-1?(d("subdetailminute_id",w.id),d("detail_minute_id",w.detail_minute_id),d("subagenda_id",w.subagenda_id),d("description",w.description)):O.value!==-1&&(d("detail_minute_id",n.id),d("description",n.description))},"enableEditing"),se=r(()=>Ce({queryKey:["getMinutesKey",C],queryFn:async()=>{const o=await ms(C,{paginate:"false"});return f.value=o.data.id,o.data},onSuccess:o=>{},onError:o=>{console.error("Failed to fetch minutes:",o)}}),"getMinutes"),{isLoading:N,data:u,refetch:ie}=se(),W=oe(()=>{var o,y,_,n;return(o=u==null?void 0:u.value)!=null&&o.attendances&&((_=(y=u==null?void 0:u.value)==null?void 0:y.attendances)==null?void 0:_.length)>0?((n=u==null?void 0:u.value)==null?void 0:n.attendances.filter(w=>w.rsvp_status==="Yes"&&w.attendance_status==="Attended"))||[]:[]}),le=oe(()=>{var o,y,_,n;return(o=u==null?void 0:u.value)!=null&&o.attendances&&((_=(y=u==null?void 0:u.value)==null?void 0:y.attendances)==null?void 0:_.length)>0?((n=u==null?void 0:u.value)==null?void 0:n.attendances.filter(w=>w.rsvp_status==="Online"&&w.attendance_status==="Attended"))||[]:[]}),ae=oe(()=>{var o,y,_,n;return(o=u==null?void 0:u.value)!=null&&o.attendances&&((_=(y=u==null?void 0:u.value)==null?void 0:y.attendances)==null?void 0:_.length)>0?((n=u==null?void 0:u.value)==null?void 0:n.attendances.filter(w=>["Yes","No","Maybe"].includes(w.rsvp_status)&&w.attendance_status==="Absent"))||[]:[]}),be=oe(()=>{var o,y,_,n;return(o=u==null?void 0:u.value)!=null&&o.attendances&&((_=(y=u==null?void 0:u.value)==null?void 0:y.attendances)==null?void 0:_.length)>0?((n=u==null?void 0:u.value)==null?void 0:n.attendances.filter(w=>w.rsvp_status==="Pending"&&w.attendance_status==="Absent"))||[]:[]}),_e=r(async()=>{const o=await xt(C,{paginate:"false"});g.value=o.data},"getmeetingagendas"),L=oe(()=>g.value);Me(async()=>{await ie(),_e()}),lt(()=>ne==null?void 0:ne.value,o=>{o&&(f.value=o)},{deep:!0});const Z=oe(()=>{var y;const o={};return u!=null&&u.value&&(u!=null&&u.value.detailminutes)&&((y=u==null?void 0:u.value.detailminutes)==null||y.forEach(_=>{var n;o[_.agenda_id]||(o[_.agenda_id]=[]),o[_.agenda_id].push(_),(n=_.subdetailminutes)==null||n.forEach(w=>{o[w.subagenda_id]||(o[w.subagenda_id]=[]),o[w.subagenda_id].push(w)})})),o}),G=oe(()=>x.getSettings()),re=r(async o=>{await _s(o),await ie()},"onAcceptCEOApproval");return(o,y)=>{var _,n,w,K,he,ve,Ie,Re,Se,Ve,je,Ke,V,l;return a(I).hasPermission(["view minutes"])?(t(),s("div",en,[a(u)&&((_=a(u))==null?void 0:_.approvalstatus)==="approved"?(t(),s("div",tn,[e("div",sn,[e("div",an,[e("div",nn,[e("a",{href:"",onClick:P(z,["prevent"]),class:"text-blue-primary"},[on,H(" Go back To Meeting ")])]),a(u)?(t(),s("div",ln,[((w=(n=a(u))==null?void 0:n.schedule)==null?void 0:w.closestatus)==="closed"?(t(),s("button",dn,[rn,H(" Meeting Closed ")])):h("",!0),((K=a(u))==null?void 0:K.approvalstatus)==="approved"?(t(),s("button",cn,[un,H(" This Minutes Have been Approved ")])):(t(),s("button",{key:2,type:"button",class:"btn btn-sm mr-1 btn-warning btn-lg",onClick:y[0]||(y[0]=P(m=>{var c;return re((c=a(u))==null?void 0:c.id)},["prevent"]))},[mn,H(" Sorry, The Minutes have not been Aprroved ")]))])):h("",!0)])]),e("div",_n,[pn,e("div",hn,[e("img",{src:a(Kt)((he=G.value)==null?void 0:he.logo),alt:"Organization Logo",class:"img-fluid logo"},null,8,vn)]),e("div",gn,i((ve=G.value)==null?void 0:ve.name),1),bn,e("h4",fn,"MINUTES OF THE "+i((Re=(Ie=a(u))==null?void 0:Ie.meeting)==null?void 0:Re.title),1),e("p",yn," HELD AT "+i((Ve=(Se=a(u))==null?void 0:Se.meeting)==null?void 0:Ve.location)+" ON "+i(a(rt)((Ke=(je=a(u))==null?void 0:je.schedule)==null?void 0:Ke.date))+" STARTING AT "+i((l=(V=a(u))==null?void 0:V.schedule)==null?void 0:l.start_time),1),W.value.length?(t(),s("h5",xn,"Present")):h("",!0),W.value.length?(t(),s("table",$n,[e("tbody",null,[(t(!0),s(Y,null,Q(W.value,(m,c)=>(t(),s("tr",{key:m.id},[e("td",wn,i(c+1)+". "+i(m.membership.user.full_name),1),e("td",kn," - "+i(m.membership.position.name),1)]))),128))])])):h("",!0),le.value.length?(t(),s("h5",Mn,"Present on E-platform ")):h("",!0),le.value.length?(t(),s("table",Cn,[e("tbody",null,[(t(!0),s(Y,null,Q(le.value,(m,c)=>(t(),s("tr",{key:m.id},[e("td",Sn,i(c+1)+". "+i(m.membership.user.full_name),1),e("td",An," - "+i(m.membership.position.name),1)]))),128))])])):h("",!0),ae.value.length?(t(),s("h5",In,"Absent With Apology ")):h("",!0),ae.value.length?(t(),s("table",Tn,[e("tbody",null,[(t(!0),s(Y,null,Q(ae.value,(m,c)=>(t(),s("tr",{key:m.id},[e("td",qn,i(c+1)+". "+i(m.membership.user.full_name),1),e("td",Pn," - "+i(m.membership.position.name),1)]))),128))])])):h("",!0),be.value.length?(t(),s("h5",Dn," Absent ")):h("",!0),be.value.length?(t(),s("table",Fn,[e("tbody",null,[(t(!0),s(Y,null,Q(be.value,(m,c)=>(t(),s("tr",{key:m.id},[e("td",En,i(c+1)+". "+i(m.membership.user.full_name),1),e("td",Rn," - "+i(m.membership.position.name),1)]))),128))])])):h("",!0),Un,e("ul",Ln,[(t(!0),s(Y,null,Q(L.value,(m,c)=>(t(),s(Y,{key:m.id},[e("li",null,i(c+1)+". "+i(m.title),1),e("ul",Vn,[(t(!0),s(Y,null,Q(m.children,(B,D)=>(t(),s("li",{key:B.id},i(c+1)+"."+i(D+1)+" "+i(B.title),1))),128))])],64))),128))]),e("div",jn,[e("div",On,[e("div",Nn,[e("div",Hn,[e("div",Kn,[e("div",Bn,[L.value?(t(),s("ol",Yn,[(t(!0),s(Y,null,Q(L.value,(m,c)=>(t(),s("li",{class:"hover:border-gray-400",key:c},[e("div",zn,[e("div",Gn,[e("div",Qn,[(t(!0),s(Y,null,Q(Z.value[m.id],(B,D)=>(t(),s("div",{key:D,onClick:me=>U(c,-1,m,B,void 0)},[e("div",Zn,i(a(mt)(a(it)(c),m.title)),1),e("div",{innerHTML:B.description},null,8,Jn)],8,Wn))),128))])])]),m.children?(t(),s("ol",Xn,[(t(!0),s(Y,null,Q(m.children,(B,D)=>(t(),s("li",{class:"mb-2 hover:border-gray-400",draggable:"false",key:D},[e("div",eo,[e("div",to,[e("div",so,[e("div",ao,i(a(mt)(a(it)(c),B.title,void 0,void 0,void 0,a(it)(D))),1),(t(!0),s(Y,null,Q(Z.value[m.id],(me,fe)=>(t(),s("div",{key:fe},[(t(!0),s(Y,null,Q(Z.value[B.id],xe=>(t(),s("div",{key:xe.id},[e("div",{innerHTML:xe.description},null,8,no)]))),128))]))),128))])])])]))),128))])):h("",!0)]))),128))])):h("",!0)])])])])])])])])):(t(),s("div",oo,lo))])):(t(),s("div",ro,uo))}}});const _o=Ue(mo,[["__scopeId","data-v-df6bfbcb"]]),Ze=r(E=>(Ne("data-v-ba216f77"),E=E(),He(),E),"_withScopeId$4"),po={class:"rsvp-container"},ho={key:0},vo={class:"dropdown"},go=["aria-expanded"],bo={key:0,class:"dropdown-menu show","aria-labelledby":"rsvp-status"},fo=Ze(()=>e("i",{class:"far fa-check-circle bg-success"},null,-1)),yo=Ze(()=>e("i",{class:"far fa-check-circle bg-warning"},null,-1)),xo=Ze(()=>e("i",{class:"far fa-check-circle bg-danger"},null,-1)),$o=Ze(()=>e("i",{class:"far fa-check-circle bg-info"},null,-1)),wo=Ze(()=>e("i",{class:"far fa-check-circle bg-info"},null,-1)),ko={key:1},Mo=we({__name:"MeetingRsvp",props:{attendee:{},disableRemoteRsvp:{}},emits:["rsvp-updated"],setup(E,{emit:M}){const z=$e(),F=E,I=M,x=p(!1),T=r(()=>{x.value=!x.value},"toggleDropdown"),C=r(g=>{var k;I("rsvp-updated",{attendeeId:(k=F.attendee)==null?void 0:k.id,status:g}),x.value=!1},"updateRsvp"),f=oe(()=>{var g;return((g=F.attendee)==null?void 0:g.rsvp_status)||"RSVP"}),j=oe(()=>{var g;switch((g=F.attendee)==null?void 0:g.rsvp_status){case"Yes":return"bg-success text-white";case"No":return"bg-warning text-white";case"Maybe":return"bg-danger text-white";case"Online":return"bg-info text-white";case"Pending":return"bg-info text-white";default:return"bg-secondary text-white"}}),$=oe(()=>{var g;switch((g=F.attendee)==null?void 0:g.rsvp_status){case"Yes":return"far fa-check-circle";case"No":return"far fa-check-circle";case"Maybe":return"far fa-check-circle";case"Online":return"far fa-check-circle";case"Pending":return"far fa-check-circle";default:return"far fa-check-circle"}});return(g,k)=>{var S;return t(),s("div",po,[((S=g.attendee.membership)==null?void 0:S.user.id)===a(z).user.id?(t(),s("div",ho,[e("div",vo,[e("button",{class:ce(["btn btn-icon dropdown-toggle",j.value]),type:"button",onClick:T,"aria-haspopup":"true","aria-expanded":x.value},[e("i",{class:ce([$.value,"mr-2"])},null,2),H(" "+i(f.value),1)],10,go),x.value?(t(),s("ul",bo,[e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:k[0]||(k[0]=P(q=>C("Yes"),["prevent"]))},[fo,H(" Yes ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:k[1]||(k[1]=P(q=>C("No"),["prevent"]))},[yo,H("No ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:k[2]||(k[2]=P(q=>C("Maybe"),["prevent"]))},[xo,H(" Maybe ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:k[3]||(k[3]=P(q=>C("Online"),["prevent"]))},[$o,H(" Online ")])]),e("li",null,[e("a",{href:"#",class:"dropdown-item",onClick:k[4]||(k[4]=P(q=>C("Pending"),["prevent"]))},[wo,H(" Pending ")])])])):h("",!0)])])):(t(),s("div",ko,[e("button",null,[e("i",{class:ce([$.value,"mr-2"])},null,2),H(" "+i(f.value),1)])]))])}}});const Co=Ue(Mo,[["__scopeId","data-v-ba216f77"]]),So={key:0,class:"container-fluid"},Ao=e("div",{class:"card-header flex items-center"},[e("h2",{class:"card-header-title h3"},"Attendance")],-1),Io={class:"container-fluid"},To={class:"row"},qo={class:"card card-outline card-primary h-100"},Po={class:"card-body box-profile"},Do={class:"text-center"},Fo={class:"avatar avatar-md mb-3"},Eo=["src"],Ro={class:"profile-username text-center text-primary"},Uo={class:"mt-3"},Lo={class:"d-flex justify-content-between mb-2"},Vo=e("strong",null,"Invited:",-1),jo={class:"cell-label"},Oo={class:"d-flex justify-content-between mb-2"},No=e("strong",null,"RSVP:",-1),Ho={class:"d-flex justify-content-between mb-2"},Ko=e("strong",null,"Attendance:",-1),Bo={key:0},Yo={key:0},zo=["onClick"],Go=e("i",{class:"far fa-eye"},null,-1),Qo={key:1},Wo=["onClick"],Zo={key:0},Jo=["onClick"],Xo={key:1,class:"container-fluid"},ei=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),ti=[ei],si=we({__name:"Attendance",setup(E){const M=$e(),z=Pe(),F=Ae(),I=We(),x=p("create");F.params.meetingId;const T=F.params.scheduleId,C=ye({id:v().required(),rsvp_status:v().nullable(),attendance_status:v().nullable(),signatureupload:v().nullable()}),{handleSubmit:f,setErrors:j,setFieldValue:$,values:g}=De({validationSchema:C,initialValues:{id:"",rsvp_status:"",attendance_status:"",signatureupload:""}}),k=r(()=>{x.value="create",$("id",""),$("rsvp_status",""),$("attendance_status",""),$("signatureupload","")},"reset"),S=r(R=>{k(),x.value="rsvp",$("id",R.attendeeId),$("rsvp_status",R.status),q()},"handleRsvpUpdated"),q=f(async(R,{resetForm:d})=>{try{const b={id:R.id,rsvp_status:R.rsvp_status,location:R.location,attendance_status:R.attendance_status,meeting_id:R.meeting_id,membership_id:R.membership_id,membership:R.membership,meeting:R.meeting,invite_status:null,signatureupload:null};x.value==="create"?await ht(b,T):x.value==="rsvp"?await vt(b,b.id):x.value==="attendance"&&await gt(b,b.id),await ne(),k()}catch(b){b instanceof qe?j(b.messages):z(b)}}),O=r(()=>Ce({queryKey:["getMeetingAttendancesKey",T],queryFn:async()=>(await qt(T,{paginate:"false"})).data}),"getMeetingAttendances"),{isLoading:X,data:ee,refetch:ne}=O();Me(async()=>{ne()}),Me(()=>{window.addEventListener("meetingUpdated",te)}),Mt(()=>{window.removeEventListener("meetingUpdated",te)});function te(R){R.detail.scheduleId===T&&ne()}r(te,"handleMeetingUpdated");const ue=r(R=>{var d;I.push({name:"SignatureAttendance",params:{committeeId:F.params.committeeId,meetingId:F.params.meetingId,scheduleId:F.params.scheduleId,attendeeId:R.id,mediaId:(d=R.media[0])==null?void 0:d.uuid}})},"navigateToSignaturePage"),A=r(async R=>{await Pt(R),await ne()},"sendReminder");return(R,d)=>a(M).hasPermission(["view attendances"])?(t(),s("div",So,[Ao,e("div",Io,[e("div",To,[(t(!0),s(Y,null,Q(a(ee),(b,de)=>{var U,se,N,u;return t(),s("div",{class:"col-lg-3 col-md-4 col-sm-6 mb-3",key:de},[e("div",qo,[e("div",Po,[e("div",Do,[e("div",Fo,[e("img",{src:a(Bt)(b.membership.user.profile.avatar),class:"profile-user-img img-fluid img-circle",role:"img","data-uw-rm-alt":"ALT"},null,8,Eo)]),e("h3",Ro,i((se=(U=b.membership)==null?void 0:U.user)==null?void 0:se.full_name),1)]),e("div",Uo,[e("div",Lo,[Vo,e("span",jo,i(b.invite_status),1)]),e("div",Oo,[No,e("div",null,[J(Co,{attendee:b,disableRemoteRsvp:0,onRsvpUpdated:S},null,8,["attendee"])])]),e("div",Ho,[Ko,e("div",null,[((N=b.membership)==null?void 0:N.user.id)===a(M).user.id?(t(),s("div",Bo,[b.attendance_status==="Attended"?(t(),s("div",Yo,[e("a",{href:"",onClick:P(ie=>ue(b),["prevent"]),class:"text-blue-500 hover:text-blue-700 transition duration-150 ease-in-out"},[Go,H(" "+i(b.attendance_status),1)],8,zo)])):(t(),s("div",Qo,[e("button",{type:"submit",class:"btn btn-link btn-primary btn-sm text-white",onClick:P(ie=>ue(b),["prevent"])}," Sign ",8,Wo)]))])):h("",!0)]),a(M).hasRole(["Super Admin","Admin","Company Secretary"])&&((u=b.membership)==null?void 0:u.user.id)!==a(M).user.id?(t(),s("div",Zo,[e("button",{type:"submit",class:"btn btn-link btn-primary btn-sm text-white",onClick:P(ie=>A(b.id),["prevent"])}," Send Reminder ",8,Jo)])):h("",!0)])])])])])}),128))])])])):(t(),s("div",Xo,ti))}}),Ee=r(E=>(Ne("data-v-e4b60687"),E=E(),He(),E),"_withScopeId$3"),ai={key:0},ni={class:"card"},oi={class:"card-header"},ii={class:"card-header flex items-center"},li=Ee(()=>e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"}," Conflicts of Interest ")],-1)),di={key:0,class:"flex items-center space-x-2"},ri=Ee(()=>e("i",{class:"far fa fa-plus mr-2"},null,-1)),ci={class:"container-fluid"},ui={key:0,class:"row"},mi={class:"card card-outline card-primary h-100"},_i={class:"card-body box-profile"},pi={class:"text-center mb-3"},hi={class:"profile-username text-primary"},vi={class:"text-muted"},gi={class:"info-section"},bi=Ee(()=>e("span",{class:"text-bold text-danger"},"Nature Of Interest: ",-1)),fi={class:"text-primary"},yi={class:"info-section"},xi=Ee(()=>e("span",{class:"text-bold text-danger"},"Amount: ",-1)),$i={class:"info-section"},wi=Ee(()=>e("span",{class:"text-bold text-danger"},"Due Date: ",-1)),ki={class:"info-section"},Mi=Ee(()=>e("span",{class:"text-bold text-danger"},"Remarks: ",-1)),Ci={class:"text-primary"},Si={class:"info-section"},Ai=Ee(()=>e("span",{class:"text-bold text-danger"},"Signed: ",-1)),Ii={key:0,class:"text-center mt-3"},Ti=["onClick"],qi={class:"flex justify-center col-md-6"},Pi={method:"dialog",class:"modal-box rounded-xl"},Di={class:"font-bold text-lg justify-center flex"},Fi=Ee(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),Ei={class:"w-full mt-6 p-2"},Ri={class:"font-thin text-sm flex flex-col items-center gap-6"},Ui={class:"row"},Li={type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},Vi={key:1},ji=Ee(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),Oi=[ji],Ni=we({__name:"ConflictofInterest",setup(E){var b,de;const M=$e(),z=Pe(),F=$e(),x=Ae().params.meetingId,T=p(null),C=p("create"),f=p(null),j=((b=F.user)==null?void 0:b.first)+" "+((de=F.user)==null?void 0:de.last),$=ye({name:v().required(),address:v().required(),nature:v().required(),amount:v().required(),ceased_date:v().required(),remarks:v().required(),conflict_id:v().nullable()}),{handleSubmit:g,setErrors:k,setFieldValue:S,values:q}=De({validationSchema:$,initialValues:{name:j,address:"",nature:"",amount:"",ceased_date:"",remarks:"",conflict_id:null}}),O=r(()=>{var U;ee(),C.value="create",(U=f.value)==null||U.showModal()},"openCreateConflictModal"),X=r(U=>{var se;ee(),T.value=U.id.toString(),C.value="edit",S("address",U.address),S("nature",U.nature),S("amount",U.amount),S("ceased_date",U.ceased_date),S("remarks",U.remarks),(se=f.value)==null||se.showModal()},"openEditConflictModal"),ee=r(()=>{S("address",""),S("nature",""),S("amount",""),S("ceased_date",""),S("remarks",""),S("conflict_id",null),C.value="create",T.value=null,yt()},"resetConflict"),ne=g(async(U,{resetForm:se})=>{var N;try{const u={address:U.address,nature:U.nature,amount:U.amount,ceased_date:U.ceased_date,remarks:U.remarks,conflict_id:null};if(C.value==="create")await Dt(u,x);else{const ie=T.value?T.value.toString():null;u.conflict_id=ie,await Ft(u,x)}await R(),ee(),(N=f.value)==null||N.close()}catch(u){u instanceof qe?k(u.messages):z(u)}}),te=r(()=>Ce({queryKey:["getMeetingConflictsKey",x],queryFn:async()=>(await Et(x,{paginate:"false"})).data}),"getMeetingConflicts"),{isLoading:ue,data:A,refetch:R}=te();Me(async()=>{await R()});const d=oe(()=>{var U;return(U=A==null?void 0:A.value)==null?void 0:U.some(se=>{var N,u,ie;return((u=(N=se==null?void 0:se.membership)==null?void 0:N.user)==null?void 0:u.id)===((ie=M==null?void 0:M.user)==null?void 0:ie.id)})});return(U,se)=>a(M).hasPermission(["view conflicts of interest"])?(t(),s("div",ai,[e("div",ni,[e("div",oi,[e("div",ii,[li,a(M).hasPermission(["create conflict of interest"])?(t(),s("div",di,[d.value?h("",!0):(t(),s("button",{key:0,type:"button",onClick:P(O,["prevent"]),class:"btn btn-primary"},[ri,H(" Add Your Conflict of Interest ")]))])):h("",!0)])]),e("div",ci,[a(A)?(t(),s("div",ui,[(t(!0),s(Y,null,Q(a(A),(N,u)=>{var ie,W,le,ae,be,_e;return t(),s("div",{class:"col-lg-4 col-md-6 col-sm-12 mb-3",key:u},[e("div",mi,[e("div",_i,[e("div",pi,[e("h3",hi,i((W=(ie=N==null?void 0:N.membership)==null?void 0:ie.user)==null?void 0:W.full_name),1),e("p",vi,i(N.address),1)]),e("div",gi,[bi,e("span",fi,i(N.nature),1)]),e("div",yi,[xi,e("span",null,"Kshs. "+i(N.amount),1)]),e("div",$i,[wi,e("span",null,i(a(rt)(N.ceased_date)),1)]),e("div",ki,[Mi,e("span",Ci,i(N.remarks),1)]),e("div",Si,[Ai,e("span",null,i(N.status),1)]),a(M).hasPermission(["edit conflict of interest"])?(t(),s("div",Ii,[((ae=(le=N==null?void 0:N.membership)==null?void 0:le.user)==null?void 0:ae.id)===((_e=(be=a(M))==null?void 0:be.user)==null?void 0:_e.id)?(t(),s("button",{key:0,class:"btn btn-success btn-sm",onClick:P(L=>X(N),["prevent"])}," Edit ",8,Ti)):h("",!0)])):h("",!0)])])])}),128))])):h("",!0)])]),e("div",qi,[e("dialog",{id:"conflictmodal",class:"modal",ref_key:"ConflictModal",ref:f},[e("form",Pi,[e("h3",Di,i(C.value==="create"?"Create Conflict of Interest":"Update Conflict of Interest"),1),Fi,e("div",Ei,[e("div",Ri,[e("form",{novalidate:"",onSubmit:se[0]||(se[0]=P((...N)=>a(ne)&&a(ne)(...N),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",Ui,[J(Te,{labeled:!0,label:"Meeting Member",name:"name",class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Meeting Member",type:"text",disabled:!0}),J(Te,{labeled:!0,label:"Address",name:"address",class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Input Your Address",type:"text"}),J(pt,{labeled:!0,label:"Nature of the Interest",name:"nature",class:"col-md-12 w-full text-sm text-white tracking-wide",placeholder:"Enter Nature of the Interest",rows:2}),J(Te,{labeled:!0,label:"Estimated Value Of The Interest (KSHS.)",name:"amount",class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Estimated Value Of The Interest (KSHS.)",type:"number"}),J(ut,{label:"Due Date",name:"ceased_date",flow:["day"],class:"col-md-6 w-full text-sm text-white tracking-wide",placeholder:"Select Due Date"}),J(pt,{labeled:!0,label:"Remarks",name:"remarks",class:"col-md-12 w-full text-sm text-white tracking-wide",placeholder:"Enter Remarks",rows:2})]),e("button",Li,i(C.value==="create"?"Create Conflict of Interest":"Update Conflict of Interest"),1)],32)])])])],512)])])):(t(),s("div",Vi,Oi))}});const Hi=Ue(Ni,[["__scopeId","data-v-e4b60687"]]),ge=r(E=>(Ne("data-v-8e88d20b"),E=E(),He(),E),"_withScopeId$2"),Ki={key:0},Bi={class:"card"},Yi={class:"card-header p-3"},zi={class:"row"},Gi={class:"col-12"},Qi={class:"row"},Wi={class:"col-lg-9 col-md-8 col-12 mt-2"},Zi={"aria-label":"Breadcrumbs",class:"text-sm overflow-hidden"},Ji={class:"breadcrumb mb-0 bg-warning"},Xi=["onClick"],el={class:"col-lg-3 col-md-4 col-12"},tl={class:"row"},sl={class:"col-md-6 col-12 mt-2"},al={class:"dropdown"},nl={class:"nav-link dropdown-toggle btn btn-secondary btn-block",href:"#",id:"navbarDropdown",type:"button",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},ol=ge(()=>e("span",{class:"text-warning mr-1"},"sort by:",-1)),il={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},ll=["onClick"],dl={class:"col-md-6 col-12 mt-2"},rl={class:"dropdown"},cl={key:0,class:"nav-link dropdown-toggle btn btn-primary btn-block",href:"#",id:"navbarDropdown",type:"button",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},ul=ge(()=>e("i",{class:"fas fa-plus mr-2"},null,-1)),ml={class:"dropdown-menu","aria-labelledby":"navbarDropdown"},_l=ge(()=>e("i",{class:"fas fa-plus"},null,-1)),pl=ge(()=>e("i",{class:"fas fa-file-upload"},null,-1)),hl={key:0,class:"col-12 mt-3"},vl={class:"input-group input-group-lg"},gl=ge(()=>e("div",{class:"input-group-append"},[e("button",{type:"submit",class:"btn btn-lg btn-default"},[e("i",{class:"fa fa-search"})])],-1)),bl={class:"card-body py-0 px-4 min-h-[300px] relative -top-px z-10"},fl={class:"table-responsive"},yl={class:"table mb-0"},xl={class:"w-28"},$l=["onClick"],wl=["src"],kl={key:1},Ml=["src"],Cl={key:0},Sl={class:"font-weight-bold text-primary text-truncate"},Al={class:"text-sm font-weight-bold text-primary"},Il=ge(()=>e("span",{class:"text-black"},"Folders",-1)),Tl={class:"text-sm font-weight-bold text-primary"},ql=ge(()=>e("span",{class:"text-black"},"Files",-1)),Pl={key:1},Dl={key:0},Fl={class:"font-weight-bold text-primary text-truncate"},El={class:"text-sm font-weight-bold text-primary"},Rl={class:"text-black"},Ul={class:"w-28"},Ll={key:0},Vl={class:"text-xs text-primary text-truncate"},jl={key:1},Ol={key:0},Nl={class:"text-xs text-primary text-truncate"},Hl={class:"w-20 text-center"},Kl={class:"flex justify-end space-x-2"},Bl={key:0},Yl=["onClick"],zl=ge(()=>e("i",{class:"far fa-edit"},null,-1)),Gl=[zl],Ql={key:1},Wl=["onClick"],Zl=ge(()=>e("i",{class:"far fa-edit"},null,-1)),Jl=[Zl],Xl=ge(()=>e("i",{class:"far fa-eye"},null,-1)),ed={class:"flex justify-center col-md-6"},td={method:"dialog",class:"modal-box rounded-xl"},sd={class:"font-bold text-lg justify-center flex"},ad=ge(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),nd={class:"w-full mt-6 p-2"},od={class:"font-thin text-sm flex flex-col items-center gap-6"},id={class:"row"},ld={key:0,class:"row mt-2 ml-2"},dd={key:0,class:"row mt-2 ml-2"},rd={class:"col-md-6"},cd=["src"],ud={class:"col-md-6"},md=ge(()=>e("strong",null,"File Name:",-1)),_d={class:"text-bold text-primary"},pd=ge(()=>e("strong",null,"File Size:",-1)),hd={class:"text-bold text-primary"},vd=ge(()=>e("strong",null,"Type:",-1)),gd={class:"text-bold text-primary"},bd=ge(()=>e("strong",null,"Last Modified: ",-1)),fd={class:"text-bold text-primary"},yd={type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},xd={key:1},$d=ge(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),wd=[$d],kd=we({__name:"Documents",setup(E){const M=$e(),z=Pe(),F=Ae(),I=p("create"),x=p("folder"),T=F.params.committeeId,C=p("name-asc"),f=p(""),j=p([]),$=F.params.meetingId,g=p([{id:"1",name:"Folders"}]),k=p(null),S=p(!1),q=p(null),O=p(null),X=[{id:"name-asc",name:"Name (A-Z)"},{id:"name-desc",name:"Name (Z-A)"},{id:"date-newest",name:"Newest to oldest"},{id:"date-oldest",name:"Oldest to newest"}];function ee(o){C.value=o}r(ee,"applySort");const ne=oe(()=>{const o=X.find(y=>y.id===C.value);return o?o.name:"Unknown"});function te(o){g.value.push({id:o.id,name:o.name})}r(te,"addToNavigationPath");function ue(o){const y=g.value.slice(0,o+1);if(y.length!==g.value.length){g.value=y;const _=A(g.value.at(-1).id,U.value);j.value=_?_.children||[]:[]}}r(ue,"navigateTo");function A(o,y){if(!Array.isArray(y))return null;for(const _ of y){if(_.id===o)return _;if(_.children&&Array.isArray(_.children)){const n=A(o,_.children);if(n)return n}}return null}r(A,"findFolderById");function R(o){g.value.at(-1).id!==o.id&&(te(o),console.log("folder",o.children),j.value=o.children||[])}r(R,"openFolder");function d(o){let y=0,_=0;return o.children&&o.children.length>0&&o.children.forEach(n=>{n.type==="folder"?y++:n.type==="file"&&_++}),{folderCount:y,fileCount:_}}r(d,"countChildrenTypes");const b=r(()=>Ce({queryKey:["getMeetingFoldersKey",$],queryFn:async()=>(await jt($,{paginate:"false"})).data[0].children}),"getMeetingFolders"),{isLoading:de,data:U,refetch:se}=b();Me(async()=>{await se()}),lt(U,o=>{var y;if(o&&o.length>0){if(g.value.length===1){const _=o[0];g.value[0].id=_.folderable_id.toString(),g.value[0].name=" Documents"}if(g.value.length===1)j.value=o;else{const _=A((y=g.value.at(-1))==null?void 0:y.id,o);j.value=_?_.children||[]:[]}}},{immediate:!0});const N=oe(()=>f.value?u.value.filter(o=>o.name.toLowerCase().includes(f.value.toLowerCase())):u.value),u=oe(()=>{const o=g.value.length>1?j.value:U.value;return Array.isArray(o)?[...o].sort((y,_)=>{switch(C.value){case"name-asc":return y.name.localeCompare(_.name);case"name-desc":return _.name.localeCompare(y.name);case"date-newest":return new Date(_.created_at).getTime()-new Date(y.created_at).getTime();case"date-oldest":return new Date(y.created_at).getTime()-new Date(_.created_at).getTime();default:return 0}}):[]}),ie=ye({name:v().required(),meeting_id:v().required(),folder_id:v().nullable(),parent_id:v(),type:v().oneOf(["folder","file"]).required(),fileupload:Qe().nullable()}),{handleSubmit:W,setErrors:le,setFieldValue:ae,values:be}=De({validationSchema:ie,initialValues:{name:"",meeting_id:$,folder_id:null,parent_id:"",type:"",fileupload:null}}),_e=r(o=>{var n;const y=o.target;if(!((n=y.files)!=null&&n.length))return;const _=y.files[0];ae("name",_.name),ae("type","file")},"updateName"),L=r(o=>{var _;re(),I.value="create",x.value=o,S.value=!0,(_=O.value)==null||_.showModal(),ae("type",o);const y=g.value.at(-1);ae("parent_id",y.id),console.log("parent",y)},"openCreateFolderModal"),Z=W(async(o,{resetForm:y})=>{var _;try{if(I.value==="create")if(x.value==="folder"){const n={children:[],created_at:null,icon:null,id:null,meeting_id:o.meeting_id,folder_id:null,name:o.name,parent_id:o.parent_id.toString(),type:o.type,fileupload:null,media:[]};await Rt(n,$)}else{const n={children:[],created_at:null,icon:null,id:null,meeting_id:o.meeting_id,folder_id:null,name:o.name,parent_id:o.parent_id.toString(),type:o.type,fileupload:o.fileupload,media:[]};await Ut(n,$)}else if(x.value==="folder"){const n={children:[],created_at:null,folder_id:null,icon:null,id:null,meeting_id:o.meeting_id.toString(),name:o.name,parent_id:o.parent_id.toString(),type:o.type,fileupload:null,media:[]},w=q.value?q.value.toString():null;n.folder_id=w,await Lt(n,$)}else{const n={children:[],created_at:null,folder_id:null,icon:null,id:null,meeting_id:o.meeting_id.toString(),name:o.name,parent_id:o.parent_id.toString(),type:o.type,fileupload:o.fileupload,media:[]},w=q.value?q.value.toString():null;n.folder_id=w,await Vt(n,$)}await se(),re(),(_=O.value)==null||_.close()}catch(n){n instanceof qe?le(n.messages):z(n)}}),G=r((o,y)=>{var _;re(),k.value=o,q.value=o.id.toString(),I.value="edit",x.value=y,S.value=!0,ae("name",o.name),ae("folder_id",o.id),ae("type",y),y==="file"&&(ae("fileupload",o.name),Wt(o.media[0])),ae("parent_id",o.id),console.log("folder.media",o.name),(_=O.value)==null||_.showModal()},"openEditFolderModal"),re=r(()=>{ae("name",""),ae("folder_id",null),ae("fileupload",""),ae("parent_id",""),ae("type",""),x.value="folder",I.value="create",S.value=!1,k.value=null,q.value=null,yt()},"resetFolder");return(o,y)=>{const _=dt("router-link");return a(M).hasPermission(["view folders"])?(t(),s("div",Ki,[e("div",Bi,[e("div",Yi,[e("div",zi,[e("div",Gi,[e("div",Qi,[e("div",Wi,[e("nav",Zi,[e("ol",Ji,[(t(!0),s(Y,null,Q(g.value,(n,w)=>(t(),s("li",{key:n.id,class:"breadcrumb-item"},[e("a",{href:"#",class:"text-gray-800 font-medium",onClick:P(K=>ue(w),["prevent"])},i(n.name),9,Xi)]))),128))])])]),e("div",el,[e("div",tl,[e("div",sl,[e("div",al,[e("button",nl,[ol,H(i(ne.value),1)]),e("div",il,[(t(),s(Y,null,Q(X,n=>e("a",{key:n.id,href:"#",class:"dropdown-item",onClick:P(w=>ee(n.id),["prevent"])},i(n.name),9,ll)),64))])])]),e("div",dl,[e("div",rl,[a(M).hasPermission(["create folders","upload documents","create dropzone"])?(t(),s("button",cl,[ul,H(" New ")])):h("",!0),e("div",ml,[a(M).hasPermission(["create folders","create dropzone"])?(t(),s("a",{key:0,href:"#",onClick:y[0]||(y[0]=P(n=>L("folder"),["prevent"])),class:"dropdown-item"},[_l,H(" New folder ")])):h("",!0),a(M).hasPermission(["upload documents"])?(t(),s("a",{key:1,href:"#",onClick:y[1]||(y[1]=P(n=>L("file"),["prevent"])),class:"dropdown-item"},[pl,H(" Upload a file ")])):h("",!0)])])])])])])]),a(M).hasPermission(["search documents"])?(t(),s("div",hl,[e("div",vl,[Ct(e("input",{type:"search",class:"form-control form-control-lg",placeholder:"Type your keywords here","onUpdate:modelValue":y[2]||(y[2]=n=>f.value=n)},null,512),[[St,f.value]]),gl])])):h("",!0)])]),e("div",bl,[e("div",fl,[e("table",yl,[e("tbody",null,[(t(!0),s(Y,null,Q(N.value,n=>{var w,K;return t(),s("tr",{key:n.id,class:"group bg-white hover:bg-gray-100 cursor-pointer"},[e("td",xl,[n.type==="folder"?(t(),s("div",{key:0,onClick:P(he=>R(n),["prevent"])},[n.type==="folder"?(t(),s("img",{key:0,src:a(Yt)(n.icon),class:"img-fluid",alt:"Folder Icon"},null,8,wl)):h("",!0)],8,$l)):(t(),s("div",kl,[a(M).hasPermission(["view documents"])?(t(),Ge(_,{key:0,to:{name:"CommitteeMediaDetails",params:{committeeId:a(T),meetingId:n.meetingId,folderId:n.id,mediaId:n==null?void 0:n.media[0].uuid}},class:"d-block text-success hover:text-green-700 transition ease-in-out"},{default:Ye(()=>[e("img",{src:a(zt)(n.media[0].mime_type),class:"img-fluid",alt:"File Icon"},null,8,Ml)]),_:2},1032,["to"])):h("",!0)]))]),e("td",null,[n.type==="folder"?(t(),s("div",Cl,[e("p",Sl,i(n.name),1),e("p",Al,[H(i(d(n).folderCount)+": ",1),Il]),e("p",Tl,[H(i(d(n).fileCount)+": ",1),ql])])):(t(),s("div",Pl,[a(M).hasPermission(["view documents"])?(t(),s("div",Dl,[e("p",Fl,i((w=n==null?void 0:n.media[0])==null?void 0:w.file_name),1),e("p",El,[H(" Size: "),e("span",Rl,i(a(_t)((K=n==null?void 0:n.media[0])==null?void 0:K.size)),1)])])):h("",!0)]))]),e("td",Ul,[n.type==="folder"?(t(),s("div",Ll,[e("p",Vl,i(a(st)(n.created_at,"")),1)])):(t(),s("div",jl,[a(M).hasPermission(["view documents"])?(t(),s("div",Ol,[e("p",Nl,i(a(st)(n.created_at,"")),1)])):h("",!0)]))]),e("td",Hl,[e("div",Kl,[n.type==="folder"?(t(),s("div",Bl,[a(M).hasPermission(["edit folders"])?(t(),s("a",{key:0,href:"#",onClick:P(he=>G(n,"folder"),["prevent"]),class:"text-warning hover:text-blue-700 transition ease-in-out"},Gl,8,Yl)):h("",!0)])):(t(),s("div",Ql,[a(M).hasPermission(["edit documents"])?(t(),s("a",{key:0,href:"#",onClick:P(he=>G(n,"file"),["prevent"]),class:"text-warning hover:text-blue-700 transition ease-in-out"},Jl,8,Wl)):h("",!0),a(M).hasPermission(["view documents"])&&n.type==="file"?(t(),Ge(_,{key:1,to:{name:"CommitteeMediaDetails",params:{committeeId:a(T),meetingId:n.meetingId,folderId:n.id,mediaId:n==null?void 0:n.media[0].uuid}},class:"text-success :text-green-700 transition ease-in-out"},{default:Ye(()=>[Xl]),_:2},1032,["to"])):h("",!0)]))])])])}),128))])])])])]),e("div",ed,[e("dialog",{id:"foldermodal",class:"modal",ref_key:"FolderModal",ref:O},[e("form",td,[e("h3",sd,i(I.value==="create"?x.value==="folder"?"Create Folder":"Upload File":x.value==="folder"?"Update Folder":"Update File"),1),ad,e("div",nd,[e("div",od,[e("form",{novalidate:"",onSubmit:y[4]||(y[4]=P((...n)=>a(Z)&&a(Z)(...n),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",id,[J(Te,{labeled:!0,label:x.value==="folder"?"Folder name":"Upload File name",name:"name",class:"col-md-12 w-full text-sm text-white tracking-wide",placeholder:x.value==="folder"?"Folder name":"Upload File name",type:"text"},null,8,["label","placeholder"]),x.value==="file"?(t(),s("div",ld,[J(gs,{labeled:!0,label:"Upload Cover Image for the Committee",name:"fileupload",class:"w-full text-sm text-white tracking-wide col-md-12",placeholder:"Enter Cover Image of the Committee",type:"file",accept:a(Gt).join(", "),onChange:y[3]||(y[3]=n=>{a(Qt)(n),_e(n)})},null,8,["accept"]),a(be).fileupload?(t(),s("div",dd,[e("div",rd,[a(Be).previewUrl?(t(),s("img",{key:0,src:a(Be).previewUrl,alt:"File Preview",class:"file_attachment"},null,8,cd)):h("",!0)]),e("div",ud,[e("p",null,[md,e("span",_d,i(a(Be).name),1)]),e("p",null,[pd,e("span",hd,i(a(_t)(a(Be).size)),1)]),e("p",null,[vd,e("span",gd,i(a(Be).type),1)]),e("p",null,[bd,e("span",fd,i(a(ft)(a(Be).lastModifiedDate)),1)])])])):h("",!0)])):h("",!0)]),e("button",yd,i(I.value==="create"?x.value==="folder"?"Create Folder":"Upload File":x.value==="folder"?"Update Folder":"Update File"),1)],32)])])])],512)])])):(t(),s("div",xd,wd))}}});const Md=Ue(kd,[["__scopeId","data-v-8e88d20b"]]),Cd={key:0,class:"card"},Sd=e("div",{class:"card-header flex items-center"},[e("h2",{class:"card-header-title h3"},"Details")],-1),Ad={class:"card-body"},Id={class:"space-y-6"},Td={class:"flex items-start"},qd=e("div",{class:"mr-4 w-6 text-muted"},[e("i",{class:"fas fa-calendar-day"})],-1),Pd={class:"h3 mb-0"},Dd={class:"m-0"},Fd={class:"text-primary"},Ed={key:0},Rd={key:0,class:"m-0 text-black"},Ud={class:"text-primary"},Ld={class:"m-0 text-black"},Vd={class:"text-primary"},jd={class:"text-primary"},Od={class:"flex"},Nd={key:0,class:"w-6 mr-4 mt-2 text-muted"},Hd=e("i",{class:"fas fa-video h-6 w-6 fa-video mx-auto"},null,-1),Kd=[Hd],Bd={key:0,class:"flex mb-2 flex-wrap"},Yd=["href"],zd=e("i",{class:"fas fa-link"},null,-1),Gd=[zd],Qd=["href"],Wd=e("button",{type:"button",class:"text-primary hover:bg-primary-100 bg-transparent py-2 px-3 rounded-md text-base flex gap-1 items-center justify-center min-w-fit"}," Run a Video Test ",-1),Zd=[Wd],Jd={key:1},Xd={class:"m-0 text-black"},er={class:"text-primary"},tr={class:"flex items-center"},sr={class:"m-0 text-sm"},ar=["innerHTML"],nr=we({__name:"HomeDashBoard",setup(E){const M=$e(),z=Ae();We();const F=z.params.committeeId,I=z.params.meetingId,x=z.params.scheduleId,T=r(k=>{const S=document.createElement("textarea");S.value=k,S.style.top="0",S.style.left="0",S.style.position="fixed",document.body.appendChild(S),S.focus(),S.select();try{const O=document.execCommand("copy")?"successful":"unsuccessful"}catch(q){console.error("Fallback: Oops, unable to copy",q)}document.body.removeChild(S)},"fallbackCopyTextToClipcommittee"),C=r(async k=>{if(!navigator.clipcommittee){T(k),alert("Link copied to clipcommittee, paste it on your browser or share it to your platform");return}try{await navigator.clipcommittee.writeText(k),alert("Link copied to clipcommittee!")}catch(S){console.error("Failed to copy: ",S)}},"copyLinkToClipcommittee"),f=r(()=>Ce({queryKey:["getMeetingKey",F,I],queryFn:async()=>{const k=await bt(I);return window.dispatchEvent(new CustomEvent("updateTitle",{detail:k.data.title+" Meeting"})),k.data}}),"getMeeting"),{isLoading:j,data:$,refetch:g}=f();return(k,S)=>{var O,X,ee,ne,te,ue,A,R;const q=dt("router-link");return a($)?(t(),s("div",Cd,[Sd,e("div",Ad,[e("div",Id,[e("div",Td,[qd,e("div",null,[e("div",Pd,[e("p",Dd,[H(" Title: "),e("span",Fd,i((O=a($))==null?void 0:O.title),1)]),(t(!0),s(Y,null,Q((X=a($))==null?void 0:X.schedules,d=>(t(),s("div",{key:d.id},[d.id===a(x)?(t(),s("div",Ed,[d.id===a(x)?(t(),s("p",Rd,[H(" Date: "),e("span",Ud,i(a(rt)(d.date)),1)])):h("",!0),e("p",Ld,[H(" Start: "),e("span",Vd,i(d.start_time),1),H(" End: "),e("span",jd,i(d.end_time),1)])])):h("",!0)]))),128))])])]),e("div",Od,[(ee=a($))!=null&&ee.link?(t(),s("div",Nd,Kd)):h("",!0),e("div",null,[(ne=a($))!=null&&ne.link?(t(),s("div",Bd,[e("a",{target:"_blank",href:(te=a($))==null?void 0:te.link,class:"btn btn-primary whitespace-nowrap mr-2","aria-label":"Join Web Conference - open in a new tab"}," Join Web Conference ",8,Yd),e("button",{type:"button",onClick:S[0]||(S[0]=d=>{var b;return C((b=a($))==null?void 0:b.link)}),title:"Copy web conference link","aria-label":"Copy web conference link",class:"btn btn-primary mr-2"},Gd),e("a",{href:(ue=a($))==null?void 0:ue.link,target:"_blank","aria-label":"Run a Video Test - open in a new tab"},Zd,8,Qd)])):(t(),s("div",Jd,[e("p",Xd,[H(" Physical Meeting at:"),e("span",er,i((A=a($))==null?void 0:A.location),1)])]))])]),e("div",tr,[e("p",sr,[H(" Meeting Description: "),e("span",{class:"text-primary",innerHTML:(R=a($))==null?void 0:R.description},null,8,ar)])]),e("div",null,[a(M).hasPermission(["view committee"])?(t(),Ge(q,{key:0,to:{name:"CommitteeDetails",params:{committeeId:a(F)}},class:"badge badge-soft"},{default:Ye(()=>[H(i(a($).meetingable.name),1)]),_:1},8,["to"])):h("",!0),a(M).hasPermission(["view meeting"])?(t(),Ge(q,{key:1,to:{name:"CommitteeMeetingDetails",params:{committeeId:a(F),meetingId:a(I),scheduleId:a(x)}},class:"badge badge-soft"},{default:Ye(()=>[H(i(a($).title),1)]),_:1},8,["to"])):h("",!0)])])])])):h("",!0)}}}),or={class:"role-container w-100 d-flex justify-content-center"},ir=["aria-expanded"],lr={key:0,class:"dropdown-menu show justify-content","aria-labelledby":"role-status"},dr=["onClick"],rr={key:1,class:"text-center"},cr=we({__name:"MemberShipPosition",props:{membership:{},positions:{},disableRemotePosition:{}},emits:["position-updated"],setup(E,{emit:M}){const z=E,F=M,I=p(null),x=p(!1),T=r(g=>{g.stopPropagation(),x.value=!x.value},"toggleDropdown"),C=r(g=>{F("position-updated",{membershipId:z.membership.id,positionId:g.id}),x.value=!1},"updateRole"),f=oe(()=>{var g;return`bg-${(g=z.membership)==null?void 0:g.position.name.toLowerCase()} text-white`}),j=oe(()=>{var g;return(g=z.membership)==null?void 0:g.position.name}),$=oe(()=>z.positions);return(g,k)=>{var S,q,O,X;return t(),s("div",or,[j.value?(t(),s("div",{key:0,class:"dropdown",ref_key:"dropdownRef",ref:I},[e("button",{class:ce(["btn btn-primary dropdown-toggle text-truncate w-100",f.value]),type:"button",onClick:T,"aria-haspopup":"true","aria-expanded":x.value},[e("i",{class:ce(["mr-2 fa "+((S=z.membership)==null?void 0:S.position.icon),"mr-2"])},null,2),H(" "+i((q=z.membership)==null?void 0:q.position.name),1)],10,ir),x.value?(t(),s("ul",lr,[(t(!0),s(Y,null,Q($.value,ee=>(t(),s("li",{key:ee.name},[e("a",{href:"#",class:"dropdown-item",onClick:P(ne=>C(ee),["prevent"])},[e("i",{class:ce(["mr-2 fa "+ee.icon,"mr-2"])},null,2),H(" "+i(ee.name),1)],8,dr)]))),128))])):h("",!0)],512)):(t(),s("div",rr,[e("i",{class:ce(["mr-2 fa "+((O=z.membership)==null?void 0:O.position.icon),"mr-2"])},null,2),H(" "+i((X=z.membership)==null?void 0:X.position.name),1)]))])}}});const ur=Ue(cr,[["__scopeId","data-v-32dbf3a7"]]),Le=r(E=>(Ne("data-v-16fbb69a"),E=E(),He(),E),"_withScopeId$1"),mr={class:"card"},_r={class:"card-header flex items-center"},pr=Le(()=>e("h2",{class:"card-header-title h3"},"Committee Meeting Members",-1)),hr={class:"ml-auto flex items-center space-x-2"},vr={class:"container-fluid"},gr={key:0,class:"row"},br={key:0,class:"card card-outline card-primary h-100"},fr={class:"card-body box-profile"},yr={class:"text-center"},xr={class:"profile-username text-center text-primary"},$r=["onClick"],wr=["onClick"],kr=Le(()=>e("i",{class:"far fa-eye"},null,-1)),Mr=[kr],Cr={class:"text-muted text-center text-bold"},Sr={key:0,class:"mt-3"},Ar=Le(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Position ",-1)),Ir={class:"text-center"},Tr={key:1,class:"mt-3"},qr=Le(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Position ",-1)),Pr={class:"text-center"},Dr={class:"mt-3"},Fr=Le(()=>e("div",{class:"text-bold text-danger text-center mb-1"}," Last Updated ",-1)),Er={class:"text-center text-primary text-small"},Rr={class:"flex justify-center col-md-6"},Ur={method:"dialog",class:"modal-box rounded-xl"},Lr=Le(()=>e("h3",{class:"font-bold text-lg justify-center flex"},i("Add Members"),-1)),Vr=Le(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),jr={class:"w-full mt-6 p-2"},Or={class:"font-thin text-sm flex flex-col items-center gap-6"},Nr={key:0,class:"message"},Hr=Le(()=>e("button",{type:"submit",class:"btn btn-md mb-1 w-full pt-1 text-red-600 mt-6 bg-primary"},i("Add Members"),-1)),Kr=we({__name:"Members",emits:["memberships-updated"],setup(E,{emit:M}){const z=$e(),F=Pe(),I=Ae(),x=We(),T=p("create"),C=I.params.committeeId,f=I.params.meetingId,j=I.params.scheduleId,$=p(!1),g=p(null),k=p([]),S=p([]),q=M,{errorMessage:O}=Oe("assignees"),X=ye({id:v().nullable(),position_id:v().nullable(),committee_id:Qe().required(),meeting_id:Qe().required(),memberships:ze().of(v()).required("Members selection is required.")}),{handleSubmit:ee,setErrors:ne,setFieldValue:te,values:ue}=De({validationSchema:X,initialValues:{committee_id:C,meeting_id:f,id:"",position_id:"",memberships:[]}}),A=r(()=>{te("memberships",k.value)},"selectedMembers"),R=r(()=>{te("memberships",k.value)},"removeselectedMembers"),d=r(L=>{var G;console.log(L.memberships);const Z=L.memberships.map(re=>re.member.id.toString());k.value=Z,te("memberships",k.value),T.value="edit",$.value=!0,(G=g.value)==null||G.showModal()},"openEditMembershipsModal"),b=ee(async(L,{resetForm:Z})=>{var G;try{te("memberships",k.value);const re={committee_id:L.committee_id,memberships:L.memberships};if(T.value==="create")await ps(re,f,j);else if(T.value==="edit")await hs(re,f,j);else if(T.value==="position"){const o={id:L.id,position_id:L.position_id};await vs(o,f,j)}await u(),q("memberships-updated"),de(),(G=g.value)==null||G.close()}catch(re){re instanceof qe?ne(re.messages):F(re)}}),de=r(()=>{T.value="create",$.value=!1,k.value=[],te("memberships",[]),te("id",""),te("position_id","")},"reset"),U=r(()=>Ce({queryKey:["getMembershipsKey",f,j],queryFn:async()=>{const L=await nt(f,{paginate:"false"});return console.log("response.data",L.data),L.data}}),"getMemberships"),{isLoading:se,data:N,refetch:u}=U(),ie=oe(()=>{var Z;const L=[];return S.value&&((Z=S.value)==null?void 0:Z.length)>0&&S.value.reduce((G,re)=>(G.push({id:re.id,name:`${re.user.full_name}`}),G),L),console.log("resul",L),L}),W=r(async()=>{const L=await Ot(C,{paginate:"false"});S.value=L.data},"getMembers");Me(async()=>{W()});const le=p([]),ae=r(async()=>{const L=await Nt({paginate:"false"});le.value=L.data},"getPositions");Me(async()=>{await ae()});const be=r(L=>{de(),T.value="position",te("id",L.membershipId),te("position_id",L.positionId),b()},"handlePositionUpdated"),_e=r(L=>{x.push({name:"ProfileDetails",params:{userId:L.id,profileId:L.profile.id}})},"openUserProfile");return(L,Z)=>(t(),s(Y,null,[e("div",mr,[e("div",_r,[pr,e("div",hr,[e("button",{class:"btn btn-secondary btn-sm",onClick:Z[0]||(Z[0]=P(G=>d({memberships:a(N)}),["prevent"]))}," Update Members ")])]),e("div",vr,[a(N)?(t(),s("div",gr,[(t(!0),s(Y,null,Q(a(N),(G,re)=>(t(),s("div",{class:"col-lg-3 col-md-4 col-sm-6 mb-3",key:re},[G.user?(t(),s("div",br,[e("div",fr,[e("div",yr,[e("h3",xr,[e("a",{href:"",onClick:P(o=>_e(G.user),["prevent"])},i(G.user.full_name),9,$r),e("button",{type:"button",onClick:P(o=>_e(G.user),["prevent"]),title:"",class:"mx-2 btn btn-sm btn-primary"},Mr,8,wr)]),e("p",Cr,i(G.position.name),1)]),a(z).hasPermission(["assign meeting position"])?(t(),s("div",Sr,[Ar,e("div",Ir,[J(ur,{membership:G,positions:le.value,disableRemotePosition:0,onPositionUpdated:be},null,8,["membership","positions"])])])):(t(),s("div",Tr,[qr,e("div",Pr,[e("i",{class:ce(["mr-2 fa "+G.position.icon,"mr-2"])},null,2),H(" "+i(G.position.name),1)])])),e("div",Dr,[Fr,e("p",Er,i(a(st)(G.updated_at,null)),1)])])])):h("",!0)]))),128))])):h("",!0)])]),e("div",Rr,[e("dialog",{id:"membershipsmodal",class:"modal",ref_key:"membershipsmodal",ref:g},[e("form",Ur,[Lr,Vr,e("div",jr,[e("div",Or,[e("form",{novalidate:"",onSubmit:Z[4]||(Z[4]=P((...G)=>a(b)&&a(b)(...G),["prevent"])),class:"w-full rounded-xl mx-auto p-1 custom-modal"},[e("div",{class:ce(["multiselect-container",{error:!!a(O)}])},[J(a(at),{id:"members",modelValue:k.value,"onUpdate:modelValue":Z[1]||(Z[1]=G=>k.value=G),mode:"tags",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:ie.value,valueProp:"id",trackBy:"id",label:"name",class:ce(["multiselect-container",{error:!!a(O)}]),onSelect:Z[2]||(Z[2]=G=>A()),onDeselect:Z[3]||(Z[3]=G=>R())},null,8,["modelValue","options","class"]),a(O)?(t(),s("div",Nr,i(a(O)),1)):h("",!0)],2),Hr],32)])])])],512)])],64))}});const Br=Ue(Kr,[["__scopeId","data-v-16fbb69a"]]),Yr={key:0},zr={class:"card h-full"},Gr={class:"card-header flex items-center"},Qr=e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"}," Meeting Polls ")],-1),Wr={key:0,class:"flex items-center space-x-2"},Zr=e("i",{class:"far fa fa-plus mr-2"},null,-1),Jr=e("span",{class:"sr-only"},"Add poll",-1),Xr={class:"card-container"},ec={key:0},tc={key:1},sc={class:"row overflow-auto p-4",style:{"max-height":"100vh"}},ac={class:"card card-outline card-primary h-100"},nc={class:"card-header"},oc={class:"card-tools"},ic=["onClick"],lc=e("i",{class:"fas fa-edit"},null,-1),dc=[lc],rc={class:"card-body"},cc={class:"text-primary tex-bold uppercase"},uc=e("strong",{class:"text-primary"},"Question:",-1),mc={class:"mt-2 text-primary text-bold"},_c={class:""},pc=e("strong",null,"Answer Options:",-1),hc={class:"row"},vc={class:"col-6"},gc={class:"list-unstyled text-success"},bc={class:"col-6"},fc={class:"list-unstyled text-success"},yc={class:"d-flex justify-content-between"},xc=e("strong",null,"Due Date:",-1),$c=e("strong",null,"Status:",-1),wc=e("strong",null,"Vote:",-1),kc=["innerHTML"],Mc={class:""},Cc=e("strong",null,"Assignees:",-1),Sc={class:"row"},Ac={class:"col-6"},Ic={class:"list-unstyled"},Tc={class:"col-6"},qc={class:"list-unstyled"},Pc=e("strong",null,"Description:",-1),Dc=["innerHTML"],Fc={class:"flex justify-center items-center min-h-screen"},Ec={method:"dialog",class:"modal-box rounded-xl relative bg-white shadow-xl"},Rc={class:"font-bold text-lg text-center"},Uc=e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1),Lc={class:"overflow-auto p-4",style:{"max-height":"80vh"}},Vc={class:"grid grid-cols-2 md:grid-cols-2 gap-4 p-2"},jc={class:"col-span-2"},Oc={class:"flex flex-wrap -mx-2 mt-2"},Nc={class:"w-full md:w-1/2 px-1 md:px-2"},Hc={class:"w-full md:w-1/2 px-1 md:px-2"},Kc={class:"flex flex-wrap -mx-2 mt-2"},Bc={class:"w-full md:w-1/3 px-1 md:px-2 text-center"},Yc=e("h2",{class:"font-bold text-sm text-center"},"Click to Add Options",-1),zc=e("h4",{class:"text-info font-semibold"},"Your Options",-1),Gc={key:0},Qc={key:0,class:"w-full md:w-2/3 px-1 md:px-2 flex flex-col"},Wc=["onClick"],Zc={class:"flex flex-wrap -mx-2 mt-2"},Jc={class:"w-full md:w-1/2 px-1 md:px-2"},Xc={class:"w-full md:w-1/2 px-1 md:px-2"},eu={key:0},tu=e("h2",{class:"font-bold text-primary text-sm text-center"}," All Members Will be assiged this Poll ",-1),su=[tu],au={key:0,class:"form-group col-span-3"},nu=e("label",{class:"text-bold font-medium tracking-wide"}," People To Vote ",-1),ou={key:0,class:"message"},iu={key:1},lu={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},du={key:1},ru=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),cu=[ru],uu=we({__name:"Pollp",setup(E){const M=$e(),z=Ae(),F=p(!1),I=p("create"),x=z.params.committeeId,T=z.params.meetingId,C=p(null),f=p([]),j=p(null),$=p("single"),g=p("individuals"),k=p([]),S=p([]),q=p(""),O=Pe();Oe("duedate");const{errorMessage:X}=Oe("pollassignees"),ee=ye({id:v().required(),title:v().required(),poll_id:v().nullable(),deleted_at:v().nullable(),created_at:v().nullable(),updated_at:v().nullable()}),ne=ye({id:v().required(),full_name:v().required()}),te=ye({id:v().required(),poll_id:v().nullable(),membership_id:v().required(),user:ne}),ue=ye({meeting_id:v().nullable(),committee_id:v().nullable(),committee_id:v().nullable(),question:v().required(),description:v().required(),questionoptiontype:v().required(),optionstatus:v().required(),options:ze().of(ee).required(),duedate:v().required(),assigneetype:v().required(),assigneestatus:v().required(),pollassignees:ze().of(te).nullable(),status:v().required()}),{handleSubmit:A,setErrors:R,setFieldValue:d,values:b}=De({validationSchema:ue,initialValues:{meeting_id:T,committee_id:x,committee_id:null,question:"",description:"",questionoptiontype:"",optionstatus:"",options:[{id:ot(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null}],duedate:"",assigneetype:"",assigneestatus:"",pollassignees:[],status:"inactive"}});Oe("options");const de=r(()=>{var l;W(),I.value="create",F.value=!0,(l=j.value)==null||l.showModal()},"openCreatePollModal"),U=r(l=>{var m;W(),C.value=l.id,d("question",l.question),d("description",l.description),d("questionoptiontype",l.questionoptiontype),d("optionstatus",l.optionstatus),d("duedate",l.duedate),d("assigneetype",l.assigneetype),d("assigneestatus",l.assigneestatus),d("status",l.status),d("options",l.options),g.value=l.assigneestatus,se(l.pollassignees),I.value="edit",F.value=!0,(m=j.value)==null||m.showModal()},"openEditPollModal");function se(l){f.value=l.map(m=>({id:m.id,full_name:m.user.full_name,poll_id:m.poll_id,membership_id:m.membership_id,user:m.user})),d("pollassignees",f.value)}r(se,"mappollassigneesToReactiveRef");const N=r(()=>{d("pollassignees",f.value)},"selectedMembers"),u=r(()=>{d("pollassignees",f.value)},"removeselectedUsers"),ie=A(async(l,{resetForm:m})=>{var c;try{console.log("dddd");const B={meeting_id:l.meeting_id,committee_id:l.committee_id,committee_id:l.committee_id,question:l.question,description:l.description,questionoptiontype:l.questionoptiontype,optionstatus:l.optionstatus,options:l.options,duedate:l.duedate,assigneetype:l.assigneetype,assigneestatus:l.assigneestatus,pollassignees:l.pollassignees,status:l.status};if(I.value==="create")await bs(B,T,x);else{const D=C.value;await fs(B,T,x,D)}(c=j.value)==null||c.close(),await V(),W()}catch(B){B instanceof qe?R(B.messages):O(B)}}),W=r(()=>{I.value="create",F.value=!1,C.value=null,$.value="single",g.value="all_members",f.value=[],d("meeting_id",T),d("committee_id",x),d("committee_id",null),d("question",""),d("description",""),d("questionoptiontype","single"),d("optionstatus","single"),d("options",[{id:ot(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null}]),d("duedate",""),d("assigneetype","all_members"),d("assigneestatus","all_members"),d("pollassignees",[]),d("status","inactive")},"reset"),le=r(l=>new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),"formattedDateTime"),ae=r(l=>be(l)?"bg-danger":"bg-success","dateBadgeClass"),be=r(l=>{const m=new Date,c=new Date(l);return m>c},"hasDueDatePassed"),_e=r(l=>{var fe;if(!l.votes||((fe=l.votes)==null?void 0:fe.length)===0)return"No votes yet";const m=l.votes.reduce((xe,Je)=>xe+Je.voteCount,0),c=l.totalMembers;if(m>c)return console.error("Total votes exceed total members, which is unexpected."),"Voting data error";if(m===0)return"No votes yet";const B=l==null?void 0:l.votes.reduce((xe,Je)=>xe.voteCount>Je.voteCount?xe:Je),D=c-m;return`${(B.voteCount/m*100).toFixed(1)}% voted for ${B.title}<br>${m} voted / ${D} not yet`},"calculateVoteStats"),L=r(l=>{switch(l){case"Backlog":return"badge bg-warning";case"Pending":return"badge bg-info";case"On Progress":return"badge bg-primary";case"Completed":return"badge bg-success";default:return"badge"}},"statusClass"),Z=[{name:"Single Answer",value:"single"},{name:"Multiple Answers: More than one",value:"multiple"}],G=[{name:"Individuals",value:"individuals"},{name:"Assign All Meeting Members",value:"all_members"}],re=oe(()=>Z),o=oe(()=>G),y=r(l=>{S.value=[],k.value=[],n(),$.value=l,d("questionoptiontype",l),d("optionstatus",l)},"handleQuestionOptionTypeChange"),_=r(l=>{f.value=[],q.value=l,g.value=l,d("assigneetype",l),d("assigneestatus",l)},"handleAssigneeTypeChange"),n=r(()=>{Array.isArray(b.options)||(console.error("Invalid state: values.options is not an array."),d("options",[]));const l={id:ot(),title:"",poll_id:null,deleted_at:null,created_at:null,updated_at:null};d("options",[...b.options,l])},"addEmptyOption");lt(()=>b.options,l=>{});const w=r(l=>{const m=b.options.filter(c=>c.id!==l);console.log("vv",m),d("options",m)},"removeOption"),K=r(()=>Ce({queryKey:["getPollMembershisKey"],queryFn:async()=>(await nt(T,{paginate:"false"})).data.map(Re())}),"getMemberships"),{isLoading:he,data:ve,refetch:Ie}=K(),Re=r(()=>l=>({id:l.id,full_name:l.user.full_name,membership_id:l.id,user:l.user}),"formatEvent"),Se=oe(()=>{var l;return!ve.value||((l=ve.value)==null?void 0:l.length)===0?[]:ve.value}),Ve=r(()=>Ce({queryKey:["getMeetingPollsKey",T],queryFn:async()=>(await ys(T,{paginate:"false"})).data}),"getMeetingPolls"),{isLoading:je,data:Ke,refetch:V}=Ve();return Me(async()=>{Ie(),V()}),(l,m)=>a(M).hasPermission(["view poll"])?(t(),s("div",Yr,[e("div",zr,[e("div",Gr,[Qr,a(M).hasPermission(["create poll"])?(t(),s("div",Wr,[e("button",{type:"button",onClick:P(de,["prevent"]),class:"btn btn-tool"},[Zr,H(),Jr])])):h("",!0)]),e("div",Xr,[a(je)?(t(),s("div",ec,"Loading Meeting Polls...")):(t(),s("div",tc,[e("div",sc,[(t(!0),s(Y,null,Q(a(Ke),(c,B)=>(t(),s("div",{class:"col-lg-12 col-md-12 col-sm-12 mb-2",key:B},[e("div",ac,[e("div",nc,[e("div",oc,[a(M).hasPermission(["edit poll"])?(t(),s("button",{key:0,class:"btn btn-tool",onClick:P(D=>U(c),["prevent"])},dc,8,ic)):h("",!0)])]),e("div",rc,[e("div",cc,[uc,e("p",mc,i(c.question),1),e("div",_c,[pc,e("div",hc,[e("div",vc,[e("ul",gc,[(t(!0),s(Y,null,Q(c.options.slice(0,Math.ceil(c.options.length/2)),(D,me)=>(t(),s("li",{key:D.id},i(me+1)+". "+i(D.title),1))),128))])]),e("div",bc,[e("ul",fc,[(t(!0),s(Y,null,Q(c.options.slice(Math.ceil(c.options.length/2)),(D,me)=>(t(),s("li",{key:D.id},i(me+1+Math.ceil(c.options.length/2))+". "+i(D.title),1))),128))])])])])]),e("div",yc,[e("div",null,[xc,e("p",{class:ce(ae(c.duedate))},i(le(c.duedate)),3)]),e("div",null,[$c,e("p",null,[e("span",{class:ce(L(c.status))},i(c.status),3)])]),e("div",null,[wc,e("p",null,[e("span",{innerHTML:_e(c)},null,8,kc)])])]),e("div",Mc,[Cc,e("div",Sc,[e("div",Ac,[e("ul",Ic,[(t(!0),s(Y,null,Q(c.pollassignees.slice(0,Math.ceil(c.pollassignees.length/2)),(D,me)=>(t(),s("li",{key:D.id},i(me+1)+". "+i(D.user.full_name),1))),128))])]),e("div",Tc,[e("ul",qc,[(t(!0),s(Y,null,Q(c.pollassignees.slice(Math.ceil(c.pollassignees.length/2)),(D,me)=>(t(),s("li",{key:D.id},i(me+1+Math.ceil(c.pollassignees.length/2))+". "+i(D.user.full_name),1))),128))])])])]),e("div",null,[Pc,e("p",{innerHTML:c.description,class:"mt-2"},null,8,Dc)])])])]))),128))])]))])]),e("div",Fc,[e("dialog",{id:"pollmodal",class:"modal w-full max-w-4xl mx-auto p-0",ref_key:"PollModal",ref:j},[e("form",Ec,[e("h3",Rc,i(I.value=="create"?"Create Poll":"Edit Poll"),1),Uc,e("div",Lc,[e("div",Vc,[e("div",jc,[e("form",{novalidate:"",onSubmit:m[3]||(m[3]=P((...c)=>a(ie)&&a(ie)(...c),["prevent"])),class:""},[J(Te,{labeled:!0,label:"Poll Question",name:"question",placeholder:"Enter Poll Question",type:"text"}),J(ct,{label:"Poll description",name:"description",theme:"snow",placeholder:"Enter Poll Description",toolbar:"full",contentType:"html",class:"col-span-2"}),e("div",Oc,[e("div",Nc,[J(tt,{labeled:!0,name:"questionoptiontype",label:"Select Allowed Answers On the Question",placeholder:"Select Allowed Answers On the Question",options:re.value,onSelectedItem:y},null,8,["options"])]),e("div",Hc,[J(ut,{label:"Poll Due Date",name:"duedate",flow:["month"],placeholder:"Enter Poll Due Date & Time"})])]),e("div",Kc,[e("div",Bc,[e("div",null,[Yc,e("button",{onClick:P(n,["prevent"]),class:"btn btn-primary h-10 mt-2"}," Add Option ")]),zc,a(b).options?(t(),s("ul",Gc,[(t(!0),s(Y,null,Q(a(b).options,(c,B)=>(t(),s("li",{class:"text-primary font-bold text-justify",key:B},i(B+1)+"."+i(c==null?void 0:c.title),1))),128))])):h("",!0)]),a(b).options?(t(),s("div",Qc,[(t(!0),s(Y,null,Q(a(b).options,(c,B)=>(t(),s("div",{class:"form-group flex items-center mb-2",key:B},[J(Ht,{labeled:!0,label:"Title for option "+(B+1),name:"options["+B+"].title",placeholder:"Enter title",class:"flex-grow",type:"text"},null,8,["label","name"]),e("a",{href:"#",class:"ml-2 text-red-600 font-bold mt-8",onClick:P(D=>w(c.id),["prevent"])}," ✕ ",8,Wc)]))),128))])):h("",!0)]),e("div",Zc,[e("div",Jc,[J(tt,{labeled:!0,name:"assigneetype",label:"Select Assignee Type",placeholder:"Select Assignee Type",options:o.value,onSelectedItem:_},null,8,["options"])]),e("div",Xc,[g.value==="all_members"?(t(),s("div",eu,su)):h("",!0)])]),g.value==="individuals"?(t(),s("div",au,[nu,e("div",{class:ce(["multiselect-container",{error:!!a(X)}])},[J(a(at),{id:"pollassignees",modelValue:f.value,"onUpdate:modelValue":m[0]||(m[0]=c=>f.value=c),mode:"tags",required:"",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:Se.value,valueProp:"membership_id",trackBy:"membership_id",label:"full_name",class:ce(["col-span-3",["multiselect-container",{error:!!a(X)}]]),object:!0,onSelect:m[1]||(m[1]=c=>N()),onDeselect:m[2]||(m[2]=c=>u())},null,8,["modelValue","options","class"]),a(X)?(t(),s("div",ou,i(a(X)),1)):h("",!0)],2)])):h("",!0),f.value&&f.value.length||g.value==="all_members"?(t(),s("div",iu,[e("button",lu,i(I.value=="create"?"Create Poll":"Edit Poll"),1)])):h("",!0)],32)])])])])],512)])])):(t(),s("div",du,cu))}});const ke=r(E=>(Ne("data-v-6275f7ad"),E=E(),He(),E),"_withScopeId"),mu={key:0},_u={class:"card h-full"},pu={class:"card-header flex items-center"},hu=ke(()=>e("div",{class:"flex items-center flex-1 w-full"},[e("h2",{class:"card-header-title h3"},"Meeting Tasks")],-1)),vu={key:0,class:"flex items-center space-x-2"},gu=ke(()=>e("i",{class:"far fa fa-plus mr-2"},null,-1)),bu=ke(()=>e("span",{class:"sr-only"},"Add task",-1)),fu={class:"card-container"},yu={key:0},xu={key:1},$u={class:"row overflow-auto p-4",style:{"max-height":"100vh"}},wu={class:"card card-outline card-primary h-100"},ku={class:"card-header"},Mu={class:"card-tools"},Cu=["onClick"],Su=ke(()=>e("i",{class:"fas fa-edit"},null,-1)),Au=[Su],Iu={class:"card-body"},Tu={class:"text-primary text-bold uppercase"},qu={class:"d-flex justify-content-between"},Pu=ke(()=>e("strong",null,"Due Date:",-1)),Du=ke(()=>e("strong",null,"Status:",-1)),Fu={key:0,class:"badge bg-warning"},Eu={key:1,class:"badge bg-info"},Ru={key:2,class:"badge bg-primary"},Uu={key:3,class:"badge bg-success"},Lu={class:""},Vu=ke(()=>e("strong",null,"Assignees:",-1)),ju={class:"row"},Ou={class:"col-6"},Nu={class:"list-unstyled"},Hu={class:"col-6"},Ku={class:"list-unstyled"},Bu=ke(()=>e("strong",null,"Description:",-1)),Yu=["innerHTML"],zu={class:"flex justify-center col-md-6"},Gu={method:"dialog",class:"modal-box rounded-xl"},Qu={class:"font-bold text-lg justify-center flex"},Wu=ke(()=>e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1)),Zu={class:"overflow-auto p-4",style:{"max-height":"80vh"}},Ju={class:"grid grid-cols-3 md:grid-cols-3 gap-2 p-2"},Xu={class:"col-span-3"},em={class:"flex flex-wrap -mx-2 mt-2"},tm={class:"w-full md:w-1/2 px-1 md:px-2"},sm={class:"w-full md:w-1/2 px-1 md:px-2"},am={class:"flex flex-wrap -mx-2 mt-2"},nm={class:"w-full md:w-1/2 px-1 md:px-2"},om={class:"w-full md:w-1/2 px-1 md:px-2"},im={key:0},lm=ke(()=>e("h2",{class:"font-bold text-primary text-sm text-center"},"All Members Will be assigned this Task",-1)),dm=[lm],rm={key:0,class:"form-group col-span-3"},cm=ke(()=>e("label",{class:"text-bold font-medium tracking-wide"},"People to Assign",-1)),um={key:0,class:"message"},mm={key:1},_m={type:"submit",class:"btn btn-primary btn-md w-full mt-6"},pm={key:1},hm=ke(()=>e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1)),vm=[hm],gm=we({__name:"Taskp",setup(E){const M=$e(),z=Ae(),F=p(!1),I=p("create"),x=z.params.committeeId,T=z.params.meetingId,C=p(null),f=p([]),j=p(null),$=p(null),g=p("individuals"),k=p(""),S=Pe();Oe("duedate");const{errorMessage:q}=Oe("taskassignees"),O=r(n=>{const w=new Date,K=new Date(n);return w>K},"hasDueDatePassed"),X=ye({id:v().nullable(),full_name:v().nullable()}),ee=ye({id:v().nullable(),task_id:v().nullable(),membership_id:v().nullable(),user:X}),ne=ye({meeting_id:v().nullable(),committee_id:v().nullable(),title:v().required(),duedate:v().required(),description:v().required(),status:v().required(),assigneetype:v().required(),assigneestatus:v().required(),taskassignees:ze().of(ee).nullable()}),{handleSubmit:te,setErrors:ue,setFieldValue:A,values:R}=De({validationSchema:ne,initialValues:{meeting_id:T,committee_id:x,title:"",duedate:"",description:"",status:"pending",assigneetype:"",assigneestatus:"",taskassignees:[]}}),d=r(()=>{var n;u(),I.value="create",F.value=!0,(n=$.value)==null||n.showModal()},"openCreateTaskModal"),b=r(n=>{var w;u(),j.value=n,C.value=n.id,A("title",n.title),A("duedate",n.duedate),A("description",n.description),A("status",n.status),A("assigneetype",n.assigneetype),A("assigneestatus",n.assigneestatus),g.value=n.assigneestatus,de(n.taskassignees),I.value="edit",F.value=!0,(w=$.value)==null||w.showModal()},"openEditTaskModal");function de(n){f.value=n.map(w=>({id:w.id,full_name:w.user.full_name,task_id:w.task_id,membership_id:w.membership_id,user:w.user})),A("taskassignees",f.value)}r(de,"maptaskassigneesToReactiveRef");const U=r(()=>{A("taskassignees",f.value)},"selectedMembers"),se=r(()=>{A("taskassignees",f.value)},"removeselectedUsers"),N=te(async(n,{resetForm:w})=>{var K;try{const he={meeting_id:n.meeting_id,committee_id:n.committee_id,title:n.title,duedate:n.duedate,description:n.description,status:n.status,assigneetype:n.assigneetype,assigneestatus:n.assigneestatus,taskassignees:n.taskassignees};if(I.value==="create")await xs(he,T);else{const ve=C.value;await $s(he,T,x,ve)}(K=$.value)==null||K.close(),await _(),u()}catch(he){he instanceof qe?ue(he.messages):S(he)}}),u=r(()=>{I.value="create",F.value=!1,C.value=null,g.value="all_members",f.value=[],A("meeting_id",T),A("committee_id",x),A("committee_id",null),A("title",""),A("duedate",""),A("description","description ................"),A("status","pending"),A("assigneetype","all_members"),A("assigneestatus","all_members"),A("taskassignees",[])},"reset"),ie=r(n=>{f.value=[],k.value=n,g.value=n,A("assigneetype",n),A("assigneestatus",n)},"handleAssigneeTypeChange"),W=[{name:"Individuals",value:"individuals"},{name:"Assign All Meeting Members",value:"all_members"}],le=oe(()=>W),ae=r(()=>Ce({queryKey:["getPollMembershisKey"],queryFn:async()=>(await nt(T,{paginate:"false"})).data.map(Z())}),"getMemberships"),{isLoading:be,data:_e,refetch:L}=ae(),Z=r(()=>n=>({id:n.id,full_name:n.user.full_name,membership_id:n.id,user:n.user}),"formatEvent"),G=oe(()=>{var n;return!_e.value||((n=_e.value)==null?void 0:n.length)===0?[]:_e.value}),re=r(()=>Ce({queryKey:["getMeetingTasksKey",T],queryFn:async()=>(await ws(T,{paginate:"false"})).data}),"getMeetingTasks"),{isLoading:o,data:y,refetch:_}=re();return Me(async()=>{_(),L()}),(n,w)=>a(M).hasPermission(["view task"])?(t(),s("div",mu,[e("div",_u,[e("div",pu,[hu,a(M).hasPermission(["create task"])?(t(),s("div",vu,[e("button",{type:"button",onClick:P(d,["prevent"]),class:"btn btn-tool"},[gu,H(),bu])])):h("",!0)]),e("div",fu,[a(o)?(t(),s("div",yu,"Loading Meeting Tasks...")):(t(),s("div",xu,[e("div",$u,[(t(!0),s(Y,null,Q(a(y),(K,he)=>(t(),s("div",{class:"col-lg-12 col-md-12 col-sm-12 mb-2",key:he},[e("div",wu,[e("div",ku,[e("div",Mu,[a(M).hasPermission(["edit task"])?(t(),s("button",{key:0,class:"btn btn-tool",onClick:P(ve=>b(K),["prevent"])},Au,8,Cu)):h("",!0)])]),e("div",Iu,[e("div",Tu,i(K.title),1),e("div",qu,[e("div",null,[Pu,e("p",{class:ce({"text-danger":O(K.duedate)&&K.status!=="completed","text-success":!O(K.duedate)||K.status==="completed"})},i(a(st)(K.duedate)),3)]),e("div",null,[Du,e("p",null,[K.status==="backlog"?(t(),s("span",Fu,"Backlog")):K.status==="pending"?(t(),s("span",Eu,"Pending")):K.status==="onprogress"?(t(),s("span",Ru,"On Progress")):K.status==="completed"?(t(),s("span",Uu,"Completed")):h("",!0)])])]),e("div",Lu,[Vu,e("div",ju,[e("div",Ou,[e("ul",Nu,[(t(!0),s(Y,null,Q(K.taskassignees.slice(0,Math.ceil(K.taskassignees.length/2)),(ve,Ie)=>(t(),s("li",{key:ve.id},i(Ie+1)+". "+i(ve.user.full_name),1))),128))])]),e("div",Hu,[e("ul",Ku,[(t(!0),s(Y,null,Q(K.taskassignees.slice(Math.ceil(K.taskassignees.length/2)),(ve,Ie)=>(t(),s("li",{key:ve.id},i(Ie+1+Math.ceil(K.taskassignees.length/2))+". "+i(ve.user.full_name),1))),128))])])])]),e("div",null,[Bu,e("p",{innerHTML:K.description,class:"mt-2"},null,8,Yu)])])])]))),128))])]))])]),e("div",zu,[e("dialog",{id:"taskmodal",class:"modal",ref_key:"TaskModal",ref:$},[e("form",Gu,[e("h3",Qu,i(I.value=="create"?"Create Meeting Task":"Edit Meeting Task"),1),Wu,e("div",Zu,[e("div",Ju,[e("div",Xu,[e("form",{novalidate:"",onSubmit:w[3]||(w[3]=P((...K)=>a(N)&&a(N)(...K),["prevent"])),class:""},[e("div",em,[e("div",tm,[J(Te,{labeled:!0,label:"Task Title",name:"title",placeholder:"Enter Task Title",type:"text"})]),e("div",sm,[J(ut,{label:"Task Due Date",name:"duedate",flow:["month"],placeholder:"Task Due Date"})])]),J(ct,{label:"Task Description",name:"description",theme:"snow",placeholder:"Enter Task Description",toolbar:"full",contentType:"html",class:"col-span-3"}),e("div",am,[e("div",nm,[J(tt,{labeled:!0,name:"assigneetype",label:"Select Assignee Type",placeholder:"Select Assignee Type",options:le.value,onSelectedItem:ie},null,8,["options"])]),e("div",om,[g.value==="all_members"?(t(),s("div",im,dm)):h("",!0)])]),g.value==="individuals"?(t(),s("div",rm,[cm,e("div",{class:ce(["multiselect-container",{error:!!a(q)}])},[J(a(at),{id:"taskassignees",modelValue:f.value,"onUpdate:modelValue":w[0]||(w[0]=K=>f.value=K),mode:"tags",required:"",placeholder:"Choose your stack","close-on-select":!1,"filter-results":!1,"min-chars":1,"resolve-on-load":!1,delay:0,searchable:!0,options:G.value,valueProp:"membership_id",trackBy:"membership_id",label:"full_name",class:ce(["col-span-3",["multiselect-container",{error:!!a(q)}]]),object:!0,onSelect:w[1]||(w[1]=K=>U()),onDeselect:w[2]||(w[2]=K=>se())},null,8,["modelValue","options","class"]),a(q)?(t(),s("div",um,i(a(q)),1)):h("",!0)],2)])):h("",!0),f.value&&f.value.length||g.value==="all_members"?(t(),s("div",mm,[e("button",_m,i(I.value=="create"?"Create Task":"Edit Task"),1)])):h("",!0)],32)])])])])],512)])])):(t(),s("div",pm,vm))}});const bm=Ue(gm,[["__scopeId","data-v-6275f7ad"]]),fm={key:0},ym={class:"row"},xm={class:"col-md-6"},$m={class:"col-md-6"},wm={key:1},km=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),Mm=[km],Cm=we({__name:"TaskPolls",setup(E){const M=$e();return(z,F)=>a(M).hasPermission(["view task","view poll"])?(t(),s("div",fm,[e("div",ym,[e("div",xm,[J(bm)]),e("div",$m,[J(uu)])])])):(t(),s("div",wm,Mm))}});const Sm={key:0,class:"container-fluid"},Am={key:0,class:"container-fluid"},Im={class:"py-6"},Tm={class:"flex items-center"},qm={class:"lg:inline-flex p-3 mr-4rounded-lg custom-size"},Pm={class:"calendar-icon w-full flex flex-col items-center justify-center mt-1 calendaheight"},Dm={class:"month customonth"},Fm={class:"day font-medium customday"},Em={class:"year font-medium customyear"},Rm={class:""},Um={class:"header-pretitle text-xs mb-1"},Lm=e("i",{class:"fas fa-chevron-left fa-xs"},null,-1),Vm={class:"flex items-center space-x-4"},jm={class:"header-title leading-10 mb-2 h6 lg:mb-0 text-blue-primary font-bold"},Om={class:"ml-auto flex self-end"},Nm=e("div",{class:"dropdown"},[e("a",{class:"nav-link",href:"#",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},[e("i",{class:"fas fa-ellipsis-v"})]),e("div",{class:"dropdown-menu --73","aria-labelledby":"navbarDropdown",style:{left:"-73px !important"}},[e("a",{class:"dropdown-item",href:"#"},"Re-send meeting invite"),e("a",{class:"dropdown-item",href:"#"},"Create Follow Up Meeting"),e("div",{class:"dropdown-divider"}),e("a",{class:"dropdown-item",href:"#"},"Delete Meeting")])],-1),Hm={class:"lg:flex mr-2"},Km=e("div",{class:"flex justify-center btn-sm"},null,-1),Bm={class:"card-outline card-outline-tabs"},Ym={class:"card-header p-0 border-bottom-0"},zm={class:"nav nav-tabs",id:"custom-tabs-four-tab",role:"tablist"},Gm=["onClick"],Qm={class:"card-body"},Wm={class:"tab-content",id:"custom-tabs-four-tabContent"},Zm=["id"],Jm={class:"flex justify-center col-md-6"},Xm={id:"minutetemplateselectionmodal",class:"modal",ref:"MinuteTemplateSelectionmodal"},e_={method:"dialog",class:"modal-box rounded-xl"},t_=e("h3",{class:"font-bold text-lg justify-center flex"}," Take Minutes ",-1),s_=e("button",{class:"btn btn-sm btn-circle btn-ghost absolute right-2 top-2"},"✕",-1),a_={class:"w-full mt-6 p-2"},n_={class:"font-thin text-sm flex flex-col items-center gap-6"},o_={class:"w-full rounded-xl mx-auto p-1 custom-modal"},i_=e("h3",{class:"text-center text-base font-bold text-primary"}," How would you like to start? ",-1),l_={class:"flex justify-center space-x-4 py-6"},d_=e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-white rounded-full shadow w-11 h-11"},[e("i",{class:"fa fa-list"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From Scratch")],-1),r_=e("div",{class:"text-center card-body"},[e("div",{class:"flex items-center justify-center mx-auto mb-1 -mt-12 bg-white rounded-full shadow w-11 h-11"},[e("i",{class:"far fa-file"})]),e("h4",{class:"mb-0 text-gray-900"},"Start From the Agenda")],-1),c_={key:1,class:"container-fluid"},u_=e("p",{class:"m-0"},[e("span",{class:"h3 text-primary text-bold text-danger"},"Sorry, You are not Authorised to view this page")],-1),m_=[u_],F_=we({__name:"CommitteeMeetingDetails",setup(E){const M=Ae(),z=We(),F=$e(),I=M.params.committeeId,x=M.params.meetingId,T=M.params.scheduleId,C=p(),f=Pe(),j=p("create"),$=p("home"),g=p(""),k=[{id:"home",name:"Meeting Details",component:nr,permissions:["view meeting"]},{id:"agenda",name:"Agenda",component:Xa,permissions:["view agenda"]},{id:"minutes",name:"Minutes",component:_o,permissions:["view minutes"]},{id:"documents",name:"Documents",component:Md,permissions:["view documents"]},{id:"tasks",name:"Task & Polls",component:Cm,permissions:["view task","view poll"]},{id:"members",name:"Members",component:Br,permissions:["view meeting memberships"]},{id:"conflict-of-interest",name:"Conflict of Interest",component:Hi,permissions:["view conflicts of interest"]},{id:"attendance",name:"Attendance",component:si,permissions:["view attendances"]}],S=oe(()=>k.filter(d=>d.permissions?d.permissions.every(b=>F.hasPermission([b])):!0)),q=r(d=>{g.value=$.value,$.value=d},"setActiveTab"),O=r(()=>{g.value==="agenda"&&(q("agenda"),window.dispatchEvent(new CustomEvent("refetchMemberships")))},"handleMembershipsUpdated");At(()=>{M.query.previousTab&&(g.value=M.query.previousTab),M.query.currentTab&&($.value=M.query.currentTab)});function X(){z.push({name:"CommitteeDetails",params:{committeeId:I}})}r(X,"goBack");const ee=ye({id:v().required(),rsvp_status:v().nullable(),attendance_status:v().nullable()}),{handleSubmit:ne,setErrors:te,setFieldValue:ue}=De({validationSchema:ee,initialValues:{id:"",rsvp_status:"",attendance_status:""}});ne(async d=>{try{const b={id:d.id,rsvp_status:d.rsvp_status,location:d.location,attendance_status:d.attendance_status,meeting_id:d.meeting_id,membership_id:d.membership_id,membership:d.membership,meeting:d.meeting};j.value==="create"?await ht(b,x):j.value==="rsvp"?await vt(b,b.id):j.value==="attendance"&&await gt(b,b.id),await F.updateProfile(),window.dispatchEvent(new CustomEvent("meetingUpdated",{detail:{meetingId:x}})),A()}catch(b){b instanceof qe?te(b.messages):f(b)}});const A=r(()=>{j.value="create",ue("id",""),ue("rsvp_status",""),ue("attendance_status","")},"reset"),R=r(()=>{z.push({name:"CommitteeMeetingMinutes",params:{committeeId:I,meetingId:x,scheduleId:T},query:{defaultMinutes:"true"}})},"openMinuteTemplateSelectionModal");return Me(async()=>{try{const b=(await bt(x)).data;C.value=b}catch(d){console.error("Error fetching meeting data:",d)}}),(d,b)=>{var U,se,N,u,ie,W;const de=dt("router-link");return a(F).hasPermission(["view meeting"])?(t(),s("div",Sm,[C.value?(t(),s("div",Am,[e("div",Im,[e("div",Tm,[e("div",qm,[e("div",Pm,[e("div",Dm,i(a(Zt)((se=(U=C.value)==null?void 0:U.schedules[0])==null?void 0:se.date)),1),e("div",Fm,[e("span",null,i(a(Jt)((u=(N=C.value)==null?void 0:N.schedules[0])==null?void 0:u.date)),1)]),e("div",Em,[e("span",null,i(a(Xt)((W=(ie=C.value)==null?void 0:ie.schedules[0])==null?void 0:W.date)),1)])])]),e("div",Rm,[e("p",Um,[e("a",{href:"",onClick:b[0]||(b[0]=P(le=>X(),["prevent"])),class:"mb-2 h6 lg:mb-0 text-blue-primary font-bold"},[Lm,H(" Meetings ")])]),e("div",Vm,[e("h1",jm,i(C.value.title),1)])]),e("div",Om,[Nm,e("div",Hm,[a(F).hasPermission(["create minutes","edit minutes"])?(t(),s("button",{key:0,class:"btn btn-secondary",onClick:b[1]||(b[1]=P(le=>R(),["prevent"]))}," Minutes ")):h("",!0)]),Km])]),e("div",Bm,[e("div",Ym,[e("ul",zm,[(t(!0),s(Y,null,Q(S.value,le=>(t(),s("li",{class:"nav-item",key:le.id},[e("a",{class:ce(["nav-link",{active:$.value===le.id}]),onClick:ae=>q(le.id)},i(le.name),11,Gm)]))),128))])]),e("div",Qm,[e("div",Wm,[(t(!0),s(Y,null,Q(S.value,le=>(t(),s("div",{key:le.id,class:ce(["tab-pane fade",{"show active":$.value===le.id}]),id:le.id,role:"tabpanel"},[(t(),Ge(It(le.component),{onChangeTab:q,onMembershipsUpdated:O},null,32))],10,Zm))),128))])])])]),e("div",Jm,[e("dialog",Xm,[e("form",e_,[t_,s_,e("div",a_,[e("div",n_,[e("form",o_,[i_,e("div",l_,[J(de,{to:{name:"CommitteeMeetingMinutes",params:{committeeId:a(I),meetingId:a(x)},query:{defaultMinutes:"false"}},class:"btn btn-secondary h-auto !p-0 p-0 mb-0 card flex-1"},{default:Ye(()=>[d_]),_:1},8,["to"]),J(de,{to:{name:"CommitteeMeetingMinutes",params:{committeeId:a(I),meetingId:a(x)},query:{defaultMinutes:"true"}},class:"btn btn-secondary h-auto !p-0 p-0 mb-0 card flex-1"},{default:Ye(()=>[r_]),_:1},8,["to"])])])])])])],512)])])):h("",!0)])):(t(),s("div",c_,m_))}}});export{F_ as default};
